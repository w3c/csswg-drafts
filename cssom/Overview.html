<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html lang=en-US>
 <head>
  <title>CSSOM</title>

  <style type="text/css">
   pre.idl { border:solid thin; background:#eee; color:#000; padding:0.5em }
   pre.idl :link, pre.idl :visited { color:inherit; background:transparent }
   dfn { font-weight:bold; font-style:normal }
   div.example { margin-left:1em; padding-left:1em; border-left:double; color:#222; background:#fcfcfc }
   div.example table code { color:inherit }
   td, th { padding:.1em }
   .note {  margin-left:2em; color:green; font-style:italic; font-weight:bold }
   p.note::before { content:"Note: " }
   .XXX { padding:.5em; border:solid red }
   p.XXX::before { content:"Issue: " }
   em.ct { text-transform:lowercase; font-variant:small-caps; font-style:normal }
   code { color:orangered }
   code :link, code :visited { color:inherit }
  </style>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet>

 <body class=draft>
  <div class=head>
   <h1 id=cssom>CSSOM</h1>

   <h2 class="no-num no-toc" id="">Editor's Draft 13 March 2010</h2>

   <dl>
    <dt>This Version:

    <dd><a
     href="http://www.w3.org/TR/2010/ED-cssom-20100313/">http://www.w3.org/TR/2010/ED-cssom-20100313/</a>

    <dt>Latest Version:

    <dd><a href="http://www.w3.org/TR/cssom/">http://www.w3.org/TR/cssom/</a>

    <dt>Latest Editor's draft:

    <dd><a
     href="http://dev.w3.org/csswg/cssom/">http://dev.w3.org/csswg/cssom/</a>

    <dt>Previous Version:

    <dd><a
     href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113/">http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113/</a>

    <dt>Editor:

    <dd><a href="http://annevankesteren.nl/">Anne van Kesteren</a> (<a
     href="http://www.opera.com/">Opera Software ASA</a>) &lt;<a
     href="mailto:annevk@opera.com">annevk@opera.com</a>&gt;
   </dl>
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>CSSOM defines how style sheets interact with the DOM and defines an API
   for CSS style sheets.

  <h2 class="no-num no-toc" id=sotd>Status of this Document</h2>

  <p class=XXX>The plan is that this document provides the successor to DOM
   Level 2 Style.</p>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. It probably contains errors.
   Its publication here does not imply endorsement of its contents by W3C.
   <!--end-status-->

  <h2 class="no-num no-toc" id=toc>Table of Contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#introduction"><span class=secno>1. </span>Introduction</a>
    <ul class=toc>
     <li><a href="#history"><span class=secno>1.1. </span>History</a>
    </ul>

   <li><a href="#conformance"><span class=secno>2. </span>Conformance
    Requirements</a>

   <li><a href="#terminology"><span class=secno>3. </span>Terminology</a>

   <li><a href="#media-queries"><span class=secno>4. </span>Media Queries</a>
    
    <ul class=toc>
     <li><a href="#parsing-media-queries"><span class=secno>4.1.
      </span>Parsing Media Queries</a>

     <li><a href="#serializing-media-queries"><span class=secno>4.2.
      </span>Serializing Media Queries</a>
      <ul class=toc>
       <li><a href="#serializing-media-feature-values"><span
        class=secno>4.2.1. </span>Serializing Media Feature Values</a>
      </ul>

     <li><a href="#comparing-media-queries"><span class=secno>4.3.
      </span>Comparing Media Queries</a>

     <li><a href="#the-medialist-interface"><span class=secno>4.4. </span>The
      <code title="">MediaList</code> Interface</a>

     <li><a href="#creating-a-medialist-object"><span class=secno>4.5.
      </span>Creating a <code title="">MediaList</code> Object</a>
    </ul>

   <li><a href="#selectors"><span class=secno>5. </span>Selectors</a>

   <li><a href="#style-sheets"><span class=secno>6. </span>Style Sheets</a>
    <ul class=toc>
     <li><a href="#style-sheet0"><span class=secno>6.1. </span>Style
      Sheet</a>
      <ul class=toc>
       <li><a href="#the-stylesheet-interface"><span class=secno>6.1.1.
        </span>The <code title="">StyleSheet</code> Interface</a>
      </ul>

     <li><a href="#style-sheet-collections"><span class=secno>6.2.
      </span>Style Sheet Collections</a>
      <ul class=toc>
       <li><a href="#the-http-default-style-header"><span class=secno>6.2.1.
        </span>The HTTP <code title="">Default-Style</code> Header</a>

       <li><a href="#the-stylesheetlist-sequence"><span class=secno>6.2.2.
        </span>The <code title="">StyleSheetList</code> Sequence</a>

       <li><a href="#extensions-to-the-document-interface"><span
        class=secno>6.2.3. </span>Extensions to the <code
        title="">Document</code> Interface</a>

       <li><a href="#interaction-with-the-user-interface"><span
        class=secno>6.2.4. </span>Interaction with the User Interface</a>
        <ul class=toc>
         <li><a href="#persisting-the-selected-style-sheet-set"><span
          class=secno>6.2.4.1. </span>Persisting the selected style sheet
          set</a>
        </ul>

       <li><a href="#examples"><span class=secno>6.2.5. </span>Examples</a>
      </ul>

     <li><a href="#style-sheet-association"><span class=secno>6.3.
      </span>Style Sheet Association</a>
      <ul class=toc>
       <li><a href="#the-linkstyle-interface"><span class=secno>6.3.1.
        </span>The <code title="">LinkStyle</code> Interface</a>

       <li><a href="#requirements-on-specifications"><span class=secno>6.3.2.
        </span>Requirements on specifications</a>

       <li><a href="#requirements-on-user-agents-implementing"><span
        class=secno>6.3.3. </span>Requirements on User Agents Implementing
        the <span title=""><code>xml-stylesheet</code> processing
        instruction</span></a>

       <li><a href="#requirements-on-user-agents-implementing0"><span
        class=secno>6.3.4. </span>Requirements on User Agents Implementing
        the HTTP <code title="">Link</code> Header</a>
      </ul>
    </ul>

   <li><a href="#css-style-sheets"><span class=secno>7. </span>CSS Style
    Sheets</a>
    <ul class=toc>
     <li><a href="#css-style-sheet"><span class=secno>7.1. </span>CSS Style
      Sheet</a>
      <ul class=toc>
       <li><a href="#the-cssstylesheet-interface"><span class=secno>7.1.1.
        </span>The <code title="">CSSStyleSheet</code> Interface</a>
      </ul>

     <li><a href="#css-rules"><span class=secno>7.2. </span>CSS Rules</a>
      <ul class=toc>
       <li><a href="#the-cssrulelist-sequence"><span class=secno>7.2.1.
        </span>The <code title="">CSSRuleList</code> Sequence</a>

       <li><a href="#the-cssrule-interface"><span class=secno>7.2.2.
        </span>The <code title="">CSSRule</code> Interface</a>
        <ul class=toc>
         <li><a href="#extensibility"><span class=secno>7.2.2.1.
          </span>Extensibility</a>
        </ul>

       <li><a href="#css-style-rule-rule-set"><span class=secno>7.2.3.
        </span>CSS Style Rule (Rule Set)</a>

       <li><a href="#css-import-rule"><span class=secno>7.2.4. </span>CSS
        <code title="">@import</code> Rule</a>

       <li><a href="#css-media-rule"><span class=secno>7.2.5. </span>CSS
        <code title="">@media</code> Rule</a>

       <li><a href="#css-font-face-rule"><span class=secno>7.2.6. </span>CSS
        <code title="">@font-face</code> Rule</a>

       <li><a href="#css-page-rule"><span class=secno>7.2.7. </span>CSS <code
        title="">@page</code> Rule</a>

       <li><a href="#css-namespace-rule"><span class=secno>7.2.8. </span>CSS
        <code title="">@namespace</code> Rule</a>
      </ul>

     <li><a href="#css-declaration-blocks"><span class=secno>7.3. </span>CSS
      Declaration Blocks</a>
      <ul class=toc>
       <li><a href="#the-cssstyledeclaration-interface"><span
        class=secno>7.3.1. </span>The <code
        title="">CSSStyleDeclaration</code> Interface</a>
      </ul>

     <li><a href="#css-values"><span class=secno>7.4. </span>CSS Values</a>
      <ul class=toc>
       <li><a href="#parsing-css-values"><span class=secno>7.4.1.
        </span>Parsing CSS Values</a>

       <li><a href="#serializing-css-values"><span class=secno>7.4.2.
        </span>Serializing CSS Values</a>
        <ul class=toc>
         <li><a href="#examples0"><span class=secno>7.4.2.1.
          </span>Examples</a>
        </ul>
      </ul>
    </ul>

   <li><a href="#dom-access-to-css-declaration-blocks"><span class=secno>8.
    </span>DOM Access to CSS Declaration Blocks</a>
    <ul class=toc>
     <li><a href="#the-elementcssinlinestyle-interface"><span
      class=secno>8.1. </span>The <code>ElementCSSInlineStyle</code>
      Interface</a>

     <li><a href="#extensions-to-the-window-interface"><span class=secno>8.2.
      </span>Extensions to the <code title="">Window</code> Interface</a>
    </ul>

   <li><a href="#resolved-values"><span class=secno>9. </span>Resolved
    Values</a>

   <li><a href="#iana-considerations"><span class=secno>10. </span>IANA
    Considerations</a>
    <ul class=toc>
     <li><a href="#default-style-"><span class=secno>10.1.
      </span><code>Default-Style</code> </a>
    </ul>

   <li class=no-num><a href="#references">References</a>

   <li class=no-num><a href="#acknowledgements">Acknowledgements</a>
  </ul>
  <!--end-toc-->

  <h2 id=introduction><span class=secno>1. </span>Introduction</h2>

  <p class=issue>...

  <h3 id=history><span class=secno>1.1. </span>History</h3>

  <p>Several interfaces from DOM Level 2 Style <a
   href="http://www.w3.org/mid/Pine.LNX.4.05.10310302134070.1173-100000@lanalana.inria.fr"
   title="[CSSOM] CSSValue and related interfaces (message from the CSS
   WG)">have been obsoleted</a> because they where thought to be too awkward
   for frequent use. This specification no longer contains those features.
   <code>DOMImplementationCSS</code> and <code>CSSCharsetRule</code> have
   been removed as well as they were not deemed necessary.

  <h2 id=conformance><span class=secno>2. </span>Conformance Requirements</h2>

  <p>Everything in this specification is normative except for diagrams,
   examples, notes and sections marked non-normative.

  <p>The key words <em class=ct>must</em>, <em class=ct>must not</em>, <em
   class=ct>required</em>, <em class=ct>shall</em>, <em class=ct>shall
   not</em>, <em class=ct>should</em>, <em class=ct>should not</em>, <em
   class=ct>recommended</em>, <em class=ct>may</em>, and <em
   class=ct>optional</em> in the normative parts of this document are to be
   interpreted as described in RFC 2119 <a href="#ref-rfc2119">[RFC2119]</a>.</p>
  <!-- XXX
  <p>The following conformance classes are defined (and considered) by this
  specification:</p>

  <dl>
   <dt><dfn id="conforming-implementation">conforming implementation</dfn></dt>

   <dd>A user agent that implements all interfaces described in this
   specification and follows all <em class="ct">must</em>-,
   <em class="ct">required</em>- and <em class="ct">shall</em>-level of criteria
   in this specification.</dd>

   <dt><dfn id="conforming-document">conforming document</dfn></dt>

   <dd>A document that follows all <em class="ct">must</em>-,
   <em class="ct">required</em>- and <em class="ct">shall</em>-level of criteria
   in this specification that apply to document authors.</dd>

   <dt><dfn id="conforming-authoring-tool">conforming authoring tool</dfn></dt>

   <dd>One that produces conforming documents.</dd>
  </dl>
-->

  <h2 id=terminology><span class=secno>3. </span>Terminology</h2>

  <p class=XXX> <dfn id=resolve-a-url>resolve a URL</dfn>, <dfn
   id=case-sensitive>case-sensitive</dfn>, <dfn
   id=ascii-case-insensitive>ASCII case-insensitive</dfn>, <dfn
   id=url>URL</dfn>, <dfn id=content-type-metadata>Content-Type
   metadata</dfn>, <dfn id=supported-styling-language>supported styling
   language</dfn>, <dfn
   id=xml-stylesheet-processing-instruction><code>xml-stylesheet</code>
   processing instruction</dfn>, <dfn id=fetch>fetch</dfn>, ...

  <p>A <dfn id=color-component-integer>color component integer</dfn> is a
   base-ten integer in the range 0-255 using digits 0-9, U+0030 to U+0039, in
   the shortest form possible.

  <p>A <dfn id=color-component-separator>color component separator</dfn> is a
   literal U+002C COMMA followed by a U+0020 SPACE.

  <p>When this specification talks about object <code><var>A</var></code>
   where <code><var>A</var></code> is actually an interface, it generally
   means an object implementing interface <code><var>A</var></code>.

  <p>The term <dfn id=whitespace>whitespace</dfn> is used as defined in CSS.
   <!--XXX <a href="#ref-css">[CSS]</a>-->

  <h2 id=media-queries><span class=secno>4. </span>Media Queries</h2>

  <p><dfn id="media queries">Media queries</dfn> are defined by the Media
   Queries specification. This section defines various concepts around media
   queries, including their API and serialization form.</p>
  <!-- XXX maybe not a <dfn> -->
  <!-- XXX ref -->

  <h3 id=parsing-media-queries><span class=secno>4.1. </span>Parsing Media
   Queries</h3>

  <p>To <dfn id=parse-a-media-query>parse a media query</dfn> for a given
   string <var title="">s</var> means to follow the <a
   href="#parse-a-list-of-media-queries">parse a list of media queries</a>
   steps and return null if more than one media query is returned or a media
   query if a single media query is returned.

  <p>To <dfn id=parse-a-list-of-media-queries>parse a list of media
   queries</dfn> for a given string <var>s</var> into a list of media queries
   is defined in the Media Queries specification. Return the list of one or
   more media queries that the algorithm defined there gives.</p>
  <!-- XXX ref -->

  <p class=note>If everything ends up being ignored the list will contain the
   media query "<code title="">not all</code>".

  <h3 id=serializing-media-queries><span class=secno>4.2. </span>Serializing
   Media Queries</h3>

  <p>To <dfn id=serialize-a-media-query>serialize a media query</dfn> run
   these steps:

  <ol>
   <li>
    <p>Let <var title="">s</var> be the empty string.

   <li>
    <p>If the media query is negated append the literal string
     "<code>not</code>", followed by a U+0020 SPACE character, to <var
     title="">s</var>.

   <li>
    <p>Let <var title="">type</var> be the media query, <span>converted to
     ASCII lowercase</span>.

   <li>
    <p>If the media query does not contain media features append <var
     title="">type</var>, to <var>s</var>, then return <var>s</var> and
     terminate this algorithm.

   <li>
    <p>If <var title="">type</var> is not "<code>all</code>" or if the media
     query is negated append <var title="">type</var>, followed by a U+0020
     SPACE character, followed by "<code>and</code>", followed by a U+0020
     SPACE character, to <var title="">s</var>.

   <li>
    <p>Sort the media features in lexicographical order.

   <li>
    <p>Then, for each media feature:</p>

    <ol>
     <li>Append a U+0028 LEFT PARENTHESIS character, followed by the media
      feature name, <span>converted to ASCII lowercase</span>, to
      <var>s</var>.

     <li>
      <p>If a value is given append a U+003A COLON (:) character, followed by
       a U+0020 SPACE character, followed by the <a
       href="#serialize-a-media-feature-value" title="serialize a media
       feature value">serialized media feature value</a>, to <var>s</var>.</p>

     <li>
      <p>Append a U+0029 RIGHT PARENTHESIS character to <var>s</var>.

     <li>
      <p>If this is not the last media feature append a U+0020 SPACE
       character, followed by the literal string "<code>and</code>", followed
       by a U+0020 SPACE character, to <var>s</var>.</p>
    </ol>

   <li>
    <p>Return <var>s</var>.
  </ol>

  <div class=example>
   <p>Here are some examples of input (first column) and output (second
    column):</p>

   <table>
    <thead>
     <tr>
      <th>Input

      <th>Output

    <tbody>
     <tr>
      <td><code>not screen and (min-WIDTH:5px) AND (max-width:40px )</code>

      <td><code>not screen and (max-width: 40px) and (min-width: 5px)</code>

     <tr>
      <td><code>all and (color) and (color)</code>

      <td><code>(color)</code>
   </table>
  </div>

  <p>To <dfn id=serialize-a-list-of-media-queries>serialize a list of media
   queries</dfn> run these steps:

  <ol>
   <li>
    <p>Let <var>s</var> be the empty string.

   <li>
    <p>If the list is empty return <var>s</var> and terminate this algorithm.

   <li>
    <p>For each media query in the list:</p>

    <ol>
     <li>
      <p>Append the result of <span title=serializing-media-query>serializing
       the media query</span> to <var>s</var>.

     <li>
      <p>If this is not the last media query append a U+002C COMMA (,)
       character, followed by a U+0020 SPACE character to <var>s</var>.
    </ol>

   <li>
    <p>Return <var>s</var>.
  </ol>

  <h4 id=serializing-media-feature-values><span class=secno>4.2.1.
   </span>Serializing Media Feature Values</h4>

  <p class=XXX>This should probably be done in terms of mapping it to
   serializing CSS values as media features are defined in terms of CSS
   values after all.

  <p>To <dfn id=serialize-a-media-feature-value>serialize a media feature
   value</dfn> named <var title="">v</var> locate <var title="">v</var> in
   the first column of the table below and use the serialization format
   described in the second column:

  <table>
   <tbody>
    <tr>
     <th>Media Feature

     <th>Serialization

    <tr>
     <td><code title="">width</code>

     <td>...

    <tr>
     <td><code title="">height</code>

     <td>...

    <tr>
     <td><code title="">device-width</code>

     <td>...

    <tr>
     <td><code title="">device-height</code>

     <td>...

    <tr>
     <td><code title="">orientation</code>

     <td>
      <p>If the value is `<code title="">portrait</code>`: "<code
       title="">portrait</code>".</p>

      <p>If the value is `<code title="">landscape</code>`: "<code
       title="">landscape</code>".</p>

    <tr>
     <td><code title="">aspect-ratio</code>

     <td>...

    <tr>
     <td><code title="">device-aspect-ratio</code>

     <td>...

    <tr>
     <td><code title="">color</code>

     <td>...

    <tr>
     <td><code title="">color-index</code>

     <td>...

    <tr>
     <td><code title="">monochrome</code>

     <td>...

    <tr>
     <td><code title="">resolution</code>

     <td>...

    <tr>
     <td><code title="">scan</code>

     <td>
      <p>If the value is `<code title="">progressive</code>`: "<code
       title="">progressive</code>".</p>

      <p>If the value is `<code title="">interlace</code>`: "<code
       title="">interlace</code>".</p>

    <tr>
     <td><code title="">grid</code>

     <td>...
  </table>

  <p>Other specifications can extend this table and vendor-prefixed media
   features can have custom serialization formats as well.

  <h3 id=comparing-media-queries><span class=secno>4.3. </span>Comparing
   Media Queries</h3>

  <p>To <dfn id=compare-media-queries>compare media queries</dfn>
   <var>m1</var> and <var>m2</var> means to <span title="serializing media
   query">serialize</span> them both and return true if they are a <a
   href="#case-sensitive">case-sensitive</a> match and false if they are not.

  <h3 id=the-medialist-interface><span class=secno>4.4. </span>The <code
   title="">MediaList</code> Interface</h3>

  <p>An object that implements the <code><a
   href="#medialist">MediaList</a></code> interface has an associated <dfn
   id=collection-of-media-queries>collection of media queries</dfn>.</p>
  <!-- http://dev.w3.org/2006/webapi/WebIDL/#idl-indexed-properties -->

  <pre class=idl>interface <dfn id=medialist>MediaList</dfn> {
  stringifier attribute DOMString <a href="#dom-medialist-mediatext" title=dom-MediaList-mediaText>mediaText</a>;
  readonly attribute unsigned long <a href="#dom-medialist-length" title=dom-MediaList-length>length</a>;
  getter DOMString <a href="#dom-medialist-item" title=dom-MediaList-item>item</a>(unsigned long <var title="">index</var>);
  void <a href="#dom-medialist-appendmedium" title=dom-MediaList-appendMedium>appendMedium</a>(DOMString <var title="">medium</var>)
  void <a href="#dom-medialist-deletemedium" title=dom-MediaList-deleteMedium>deleteMedium</a>(DOMString <var title="">medium</var>)
};</pre>

  <p>The <dfn id=dom-medialist-mediatext
   title=dom-MediaList-mediaText><code>mediaText</code></dfn> attribute <em
   class=ct>must</em>, on getting, return a <a
   href="#serialize-a-list-of-media-queries" title="serialize a list of media
   queries">serialization</a> of the <span>list of media qeuries</span>.

  <p>On setting the <code title=dom-MediaList-mediaText><a
   href="#dom-medialist-mediatext">mediaText</a></code> attribute these steps
   <em class=ct>must</em> be run:

  <ol>
   <li>
    <p>Empty the <a href="#collection-of-media-queries">collection of media
     queries</a>.

   <li>
    <p>If the given value is the empty string terminate these steps.

   <li>
    <p>Append all the media queries as a result of <a
     href="#parse-a-list-of-media-queries" title="parse a list of media
     queries">parsing</a> the given value to the <a
     href="#collection-of-media-queries">collection of media queries</a>.
  </ol>

  <p>The <dfn id=dom-medialist-length
   title=dom-MediaList-length><code>length</code></dfn> attribute, on
   getting, <em class=ct>must</em> return the number of media queries in the
   <a href="#collection-of-media-queries">collection of media queries</a>.

  <p>The <dfn id=dom-medialist-item title=dom-MediaList-item><code>item(<var
   title="">index</var>)</code></dfn> method, when invoked, <em
   class=ct>must</em> return the item in the list given by <var>index</var>,
   or null, if <var>index</var> is greater than or equal to the number of
   items in the list.</p>
  <!-- XXX need consistency here WebIDL? list of media queries? -->

  <p>The <dfn id=dom-medialist-appendmedium
   title=dom-MediaList-appendmedium><code>appendMedium(<var
   title="">medium</var>)</code></dfn> method <em class=ct>must</em>, when
   invoked, run these steps:

  <ol>
   <li>
    <p>Let <var title="">m</var> be the result of <a
     href="#parse-a-media-query" title="parse a media query">parsing</a> the
     given value.

   <li>
    <p>If <var title="">m</var> is null terminate these steps.

   <li>
    <p>If <a href="#compare-media-queries" title="compare media
     queries">comparing</a> <var title="">m</var> with any of the media
     queries in the <a href="#collection-of-media-queries">collection of
     media queries</a> returns true terminate these steps.

   <li>
    <p>Append <var title="">m</var> to the <a
     href="#collection-of-media-queries">collection of media queries</a>.
  </ol>

  <p>The <dfn id=dom-medialist-deletemedium
   title=dom-MediaList-deletemedium><code>deleteMedium(<var
   title="">medium</var>)</code></dfn> method <em class=ct>must</em>, when
   invoked, run these steps:

  <ol>
   <li>
    <p>Let <var title="">m</var> be the result of <a
     href="#parse-a-media-query" title="parse a media query">parsing</a> the
     given value.

   <li>
    <p>If <var title="">m</var> is null terminate these steps.

   <li>
    <p>Remove any media query from the <a
     href="#collection-of-media-queries">collection of media queries</a> for
     which <a href="#compare-media-queries" title="compare media
     queries">comparing</a> the media query with <var title="">m</var>
     returns true.
  </ol>

  <h3 id=creating-a-medialist-object><span class=secno>4.5. </span>Creating a
   <code title="">MediaList</code> Object</h3>

  <p>To <dfn id=create-a-medialist-object>create a <code>MediaList</code>
   object</dfn> from <var title="">s</var> run these steps:

  <ol>
   <li>
    <p>Create a new <code><a href="#medialist">MediaList</a></code> object.

   <li>
    <p>Set its <a href="#dom-medialist-mediatext"
     title=dom-MediaList-mediaText>mediaText</a> attribute to <var
     title="">s</var>.

   <li>
    <p>Return the newly created <code><a
     href="#medialist">MediaList</a></code> object.
  </ol>

  <h2 id=selectors><span class=secno>5. </span>Selectors</h2>

  <p>Selectors are defined in the Selectors specification. This section
   defines how to serialize them.</p>
  <!-- XXX ref -->

  <p>To <dfn id=parse-a-group-of-selectors>parse a group of selectors</dfn>
   means to parse the value using the <code title="">selectors_group</code>
   production defined in the Selectors specification and return either a
   group of selectors if parsing did not fail or null if parsing did fail.</p>
  <!-- XXX ref -->

  <p>To <dfn id=serialize-a-group-of-selectors>serialize a group of
   selectors</dfn> run these steps:</p>
  <!-- http://dump.testsuite.org/2009/cssom/serializing-selectors.htm -->

  <ol><!-- XXX say something about CSS character escapes? -->

   <li>
    <p>Remove leading and trailing <a href="#whitespace">whitespace</a>.

   <li>
    <p>Replace one or more consecutive <a href="#whitespace">whitespace</a>
     characters with a single U+0020 SPACE character.

   <li>
    <p>Make sure combinators other than the descendant combinator are
     preceded and followed by a single U+0020 SPACE character (and not more).

   <li>
    <p>Make sure each U+002C COMMA (,) character is followed by a single
     U+0020 SPACE character (and not more).

   <li>
    <p>If there is no default namespace and the namespace prefix of a
     <span>type selector</span> or <span>universal selector</span> is set to
     a U+002A ASTERISK (*) character remove the namespace component of that
     <span>type selector</span> or <span>universal selector</span>.
   </li>
   <!-- XXX namespace refs? -->

   <li>
    <p>Remove any <span title="universal selector">universal selectors</span>
     that can be omitted.

   <li>
    <p>Follow these rules for serializing attribute selectors:</p>

    <ul>
     <li>
      <p>If there is no namespace prefix (which includes the asterisk) remove
       the U+007C VERTICAL LINE (|) before the attribute name if it is
       present.
     </li>
     <!-- XXX ref namespace prefix? -->

     <li>
      <p>If an identifier was given as value insert a leading and trailing
       U+0022 QUOTATION MARK (") character around the identifier and escape
       any U+0022 QUOTATION MARK (") characters in the value by inserting a
       U+005C REVERSE SOLIDUS (\) character in front of them.
     </li>
     <!-- XXX or does this happen during parsing -->
    </ul>

   <li>
    <p>Pseudo-classes without arguments and pseudo-elements are serialized to
     their canonical form as given in the specification.</p>

    <p class=note>E.g. <code>:HOver</code> becomes <code>:hover</code> and
     <code>:befoRe</code> becomes <code>::before</code>.</p>

   <li>
    <p>The rules for pseudo-classes with arguments are to serialize their
     name to their canonical name as given in the specification, remove any
     leading and trailing <a href="#whitespace">whitespace</a> around the
     argument, and serialize the value as follows:</p>

    <dl>
     <dt>If the pseudo-class is <code title="">:lang()</code>

     <dd>
      <p>The literal value.

     <dt>If the pseudo-class is <code title="">:nth-child()</code>, <code
      title="">:nth-last-child()</code>, <code
      title="">:nth-of-type()</code>, or <code
      title="">:nth-last-of-type()</code>

     <dd>
      <ol>
       <li>
        <p>If the value is odd let the value be "<code title="">2n+1</code>".

       <li>
        <p>If the value is even let the value be "<code title="">2n</code>".

       <li>
        <p>If <var title="">a</var> is zero let the value be <var
         title="">b</var> serialized as string.
       </li>
       <!-- XXX serialize integer -->

       <li>
        <p>If <var title="">a</var> is one or minus one and <var
         title="">b</var> is zero let the value be "<code title="">n</code>".

       <li>
        <p>If <var title="">a</var> is one or minus one let the value be
         "<code title="">n</code>" followed by a U+002B PLUS SIGN (+)
         character if <var title="">b</var> is positive, followed by <var
         title="">b</var> serialized as string.
       </li>
       <!-- XXX serialize integer -->

       <li>
        <p>If <var title="">b</var> is zero let the value be <var
         title="">a</var> serialized as string followed by "<code
         title="">n</code>".
       </li>
       <!-- XXX serialize integer -->

       <li>
        <p>Otherwise let the value be <var title="">a</var> serialized as
         string followed by "<code title="">n</code>" followed by a U+002B
         PLUS SIGN (+) character if <var title="">b</var> is positive,
         followed by <var title="">b</var> serialized as string.
       </li>
       <!-- XXX serialize integer -->
      </ol>

     <dt>If the pseudo-class is <code title="">:not()</code>

     <dd>
      <p>The result of serializing the value using the rules for <a
       href="#serialize-a-group-of-selectors" title="serialize a group of
       selectors">serializing a group of selectors</a>.

     <dt>Any other pseudo-class

     <dd>
      <p class=XXX>Hopefully Selectors Level 4 defines serialization itself.
    </dl>
  </ol>

  <h2 id=style-sheets><span class=secno>6. </span>Style Sheets</h2>

  <h3 id=style-sheet0><span class=secno>6.1. </span>Style Sheet</h3>
  <!-- XXX
   element inserted into the DOM, style sheet created, element removed from
   the DOM, what happens to StyleSheet?
  -->

  <p>A <dfn id=style-sheet>style sheet</dfn> is an abstract concept that
   represents any kind of style sheet. In the DOM a <a
   href="#style-sheet">style sheet</a> is a <code><a
   href="#stylesheet">StyleSheet</a></code> object. A <a
   href="#style-sheet">style sheet</a> has a number of associated properties:

  <dl>
   <dt><dfn id=style-sheet-type>style sheet type</dfn>

   <dd>
    <p>The <a href="#content-type-metadata">Content-Type metadata</a> of the
     <a href="#style-sheet">style sheet</a>.

   <dt><dfn id=style-sheet-location>style sheet location</dfn>

   <dd>
    <p>The <a href="#url">URL</a> of the <a href="#style-sheet">style
     sheet</a> or null if the <a href="#style-sheet">style sheet</a> was
     embedded.

   <dt><dfn id=style-sheet-node>style sheet node</dfn>

   <dd>
    <p>The DOM node associated with the <a href="#style-sheet">style
     sheet</a> or null if there is no associated DOM node.

   <dt><dfn id=style-sheet-parent>style sheet parent</dfn>

   <dd>
    <p>The <a href="#style-sheet">style sheet</a> that is the parent of the
     <a href="#style-sheet">style sheet</a>.

   <dt><dfn id=style-sheet-media>style sheet media</dfn>

   <dd>
    <p>The <code><a href="#medialist">MediaList</a></code> object associated
     with the <a href="#style-sheet">style sheet</a>.</p>

    <p>If this property is set to a string run the <a
     href="#create-a-medialist-object">create a <code>MediaList</code>
     object</a> steps for that string and associate the returned object with
     the <a href="#style-sheet">style sheet</a>.</p>

   <dt><dfn id=style-sheet-title>style sheet title</dfn>

   <dd>
    <p>The title of the <a href="#style-sheet">style sheet</a>. It is said to
     be empty if the title is the empty string.</p>

    <div class=example>
     <p>In these examples the <a href="#style-sheet-title">style sheet
      title</a> ends up being empty:</p>

     <pre>&lt;style title=""> body { background:papayawhip } &lt;/style></pre>

     <pre>&lt;style> body { background:orange } &lt;/style></pre>
    </div>

   <dt><dfn id=style-sheet-alternate-flag>style sheet alternate flag</dfn>

   <dd>
    <p>Either true or false. False by default.</p>

    <div class=example>
     <p>The following <a href="#style-sheet" title="style sheet">style
      sheets</a> have their <a href="#style-sheet-alternate-flag">style sheet
      alternate flag</a> set:</p>

     <pre><code>&lt;?xml-stylesheet alternate="yes" title="x" href="data:text/css,&hellip;"?></code></pre>

     <pre><code>&lt;link rel="alternate stylesheet" title="x" href="data:text/css,&hellip;"></code></pre>
    </div>

   <dt><dfn id=style-sheet-disabled-flag>style sheet disabled flag</dfn>

   <dd>
    <p>Either true or false. False by default.</p>

    <p class=note>Even when false it does not necessarily mean that the <a
     href="#style-sheet">style sheet</a> is actually rendered.</p>
  </dl>

  <p>When you are to <a href="#create-a-style-sheet">create a style sheet</a>
   the above properties are to be set to their proper values.</p>
  <!-- same-origin restrictions -->

  <h4 id=the-stylesheet-interface><span class=secno>6.1.1. </span>The <code
   title="">StyleSheet</code> Interface</h4>

  <p>In the DOM a <a href="#style-sheet">style sheet</a> is represented by an
   object that implements the <code><a
   href="#stylesheet">StyleSheet</a></code> interface.

  <pre class=idl>interface <dfn id=stylesheet>StyleSheet</dfn> {
  readonly attribute DOMString <a href="#dom-stylesheet-type" title=dom-StyleSheet-type>type</a>;
  readonly attribute DOMString <a href="#dom-stylesheet-href" title=dom-StyleSheet-href>href</a>;
  readonly attribute Node <a href="#dom-stylesheet-ownernode" title=dom-StyleSheet-ownerNode>ownerNode</a>;
  readonly attribute <a href="#stylesheet">StyleSheet</a> <a href="#dom-stylesheet-parentstylesheet" title=dom-StyleSheet-parentStyleSheet>parentStyleSheet</a>;
  readonly attribute DOMString <a href="#dom-stylesheet-title" title=dom-StyleSheet-title>title</a>;
  [PutForwards=<a href="#dom-medialist-mediatext" title=dom-MediaList-mediaText>mediaText</a>] readonly attribute <a href="#medialist">MediaList</a> <a href="#dom-stylesheet-media" title=dom-StyleSheet-media>media</a>;
           attribute boolean <a href="#dom-stylesheet-disabled" title=dom-StyleSheet-disabled>disabled</a>;
};</pre>

  <p>The <dfn id=dom-stylesheet-type
   title=dom-StyleSheet-type><code>type</code></dfn> attribute <em
   class=ct>must</em> return the <a href="#style-sheet-type">style sheet
   type</a>.

  <p>The <dfn id=dom-stylesheet-href
   title=dom-StyleSheet-href><code>href</code></dfn> attribute <em
   class=ct>must</em> return the <a href="#style-sheet-location">style sheet
   location</a>.

  <p>The <dfn id=dom-stylesheet-ownernode
   title=dom-StyleSheet-ownerNode><code>ownerNode</code></dfn> attribute <em
   class=ct>must</em> return the <a href="#style-sheet-node">style sheet
   node</a>.

  <p>The <dfn id=dom-stylesheet-parentstylesheet
   title=dom-StyleSheet-parentStyleSheet><code>parentStyleSheet</code></dfn>
   attribute <em class=ct>must</em> return the <a
   href="#style-sheet-parent">style sheet parent</a>.

  <p>The <dfn id=dom-stylesheet-title
   title=dom-StyleSheet-title><code>title</code></dfn> attribute <em
   class=ct>must</em> return the <a href="#style-sheet-title">style sheet
   title</a>.

  <p>The <dfn id=dom-stylesheet-media
   title=dom-StyleSheet-media><code>media</code></dfn> attribute <em
   class=ct>must</em> return the <a href="#style-sheet-media">style sheet
   media</a>.

  <p>The <dfn id=dom-stylesheet-disabled
   title=dom-StyleSheet-disabled><code>disabled</code></dfn> attribute <em
   class=ct>must</em>, on getting, return the <a
   href="#style-sheet-disabled-flag">style sheet disabled flag</a>. On
   setting, it <em class=ct>must</em> set the <a
   href="#style-sheet-disabled-flag">style sheet disabled flag</a> to the
   given value.

  <h3 id=style-sheet-collections><span class=secno>6.2. </span>Style Sheet
   Collections</h3>

  <p>Below various new concepts are defined that are associated with each
   <code>Document</code> object.

  <p>Each <code>Document</code> has an associated list of zero or more <a
   href="#style-sheet" title="style sheet">style sheets</a>, named the <dfn
   id=document-style-sheets>document style sheets</dfn>. This is an ordered
   list that contains all <a href="#style-sheet" title="style sheet">style
   sheets</a> associated with the <code>Document</code>, in <span>tree
   order</span>, with <a href="#style-sheet" title="style sheet">style
   sheets</a> created from HTTP <code title=http-link>Link</code> headers
   first, if any, in header order.

  <p>To <dfn id=create-a-style-sheet>create a style sheet</dfn>, run these
   steps:

  <ol>
   <li>
    <p>Create a new <a href="#style-sheet">style sheet</a> object and set its
     properties as specified.

   <li>
    <p>Then run the <a href="#add-a-style-sheet">add a style sheet</a> steps
     for the newly created <a href="#style-sheet">style sheet</a>.
  </ol>

  <p>To <dfn id=add-a-style-sheet>add a style sheet</dfn>, run these steps:

  <ol>
   <li>
    <p>Add the <a href="#style-sheet">style sheet</a> to the list of <a
     href="#document-style-sheets">document style sheets</a> at the
     appropriate location. The remainder of these steps deal with the <a
     href="#style-sheet-disabled-flag">style sheet disabled flag</a>.

   <li>
    <p>If the <a href="#style-sheet-disabled-flag">style sheet disabled
     flag</a> is true terminate these steps.

   <li>
    <p>If the <a href="#style-sheet-title">style sheet title</a> is
     non-empty, the <a href="#style-sheet-alternate-flag">style sheet
     alternate flag</a> is false, and <a
     href="#preferred-style-sheet-set-name">preferred style sheet set
     name</a> is the empty string <a
     href="#change-the-preferred-style-sheet-set-name">change the preferred
     style sheet set name</a> to the <a href="#style-sheet-title">style sheet
     title</a>.

   <li>
    <p>If any of the following is true set the <a
     href="#style-sheet-disabled-flag">style sheet disabled flag</a> to false
     and terminate these steps:</p>

    <ul>
     <li>
      <p>The <a href="#style-sheet-title">style sheet title</a> is empty.

     <li>
      <p>The <a href="#last-style-sheet-set-name">last style sheet set
       name</a> is null and the <a href="#style-sheet-title">style sheet
       title</a> is a <a href="#case-sensitive">case-sensitive</a> match for
       the <a href="#preferred-style-sheet-set-name">preferred style sheet
       set name</a>.

     <li>
      <p>The <a href="#style-sheet-title">style sheet title</a> is a <a
       href="#case-sensitive">case-sensitive</a> match for the <a
       href="#last-style-sheet-set-name">last style sheet set name</a>.
    </ul>

   <li>
    <p>Set the <a href="#style-sheet-disabled-flag">style sheet disabled
     flag</a> to true.
  </ol>

  <p>A <dfn id=persistent-style-sheet>persistent style sheet</dfn> is a <a
   href="#style-sheet">style sheet</a> from the <a
   href="#document-style-sheets">document style sheets</a> whose <a
   href="#style-sheet-title">style sheet title</a> is the empty string and
   whose <a href="#style-sheet-alternate-flag">style sheet alternate flag</a>
   is false.

  <p>A <dfn id=style-sheet-set>style sheet set</dfn> is an ordered collection
   of one or more <a href="#style-sheet" title="style sheet">style sheets</a>
   from the <a href="#document-style-sheets">document style sheets</a> which
   have an identical <a href="#style-sheet-title">style sheet title</a> that
   is not the empty string.

  <p>A <dfn id=style-sheet-set-name>style sheet set name</dfn> is the <a
   href="#style-sheet-title">style sheet title</a> the <a
   href="#style-sheet-set">style sheet set</a> has in common.

  <p>An <dfn id=enabled-style-sheet-set>enabled style sheet set</dfn> is a <a
   href="#style-sheet-set">style sheet set</a> of which each <a
   href="#style-sheet">style sheet</a> has its <a
   href="#style-sheet-disabled-flag">style sheet disabled flag</a> set to
   false.

  <p>To <dfn id=enable-a-style-sheet-set>enable a style sheet set</dfn> with
   name <var title="">name</var>, run these steps:

  <ol>
   <li>
    <p>If <var title="">name</var> is the empty string set the <a
     href="#style-sheet-disabled-flag">style sheet disabled flag</a> for each
     <a href="#style-sheet">style sheet</a> that is in a <a
     href="#style-sheet-set">style sheet set</a> to true and terminate these
     steps.

   <li>
    <p>Set the <a href="#style-sheet-disabled-flag">style sheet disabled
     flag</a> for each <a href="#style-sheet">style sheet</a> in a <a
     href="#style-sheet-set">style sheet set</a> whose <a
     href="#style-sheet-set-name">style sheet set name</a> is a
     case-sensitive match for <var title="">name</var> to false and set it to
     true for all other <a href="#style-sheet" title="style sheet">style
     sheets</a> in a <a href="#style-sheet-set">style sheet set</a>.
  </ol>

  <p>To <dfn id=select-a-style-sheet-set>select a style sheet set</dfn> with
   name <var title="">name</var>, run these steps:

  <ol>
   <li>
    <p><a href="#enable-a-style-sheet-set">Enable a style sheet set</a> with
     name <var title="">name</var>.

   <li>
    <p>Set <a href="#last-style-sheet-set-name">last style sheet set name</a>
     to <var title="">name</var>.
  </ol>

  <p>A <dfn id=last-style-sheet-set-name>last style sheet set name</dfn> is a
   concept to determine what <a href="#style-sheet-set">style sheet set</a>
   was last <a href="#select-a-style-sheet-set" title="select a style sheet
   set">selected</a>. Initially its value is null.

  <p>A <dfn id=preferred-style-sheet-set-name>preferred style sheet set
   name</dfn> is a concept to determine which <span style="style sheet">style
   sheets</span> need to have their <a
   href="#style-sheet-disabled-flag">style sheet disabled flag</a> set to
   false. Initially its value is the empty string.

  <p>To <dfn id=change-the-preferred-style-sheet-set-name>change the
   preferred style sheet set name</dfn> with name <var title="">name</var>,
   run these steps:

  <ol>
   <li>
    <p>Let the <a href="#preferred-style-sheet-set-name">preferred style
     sheet set name</a> be <var title="">current</var>.

   <li>
    <p>Set <a href="#preferred-style-sheet-set-name">preferred style sheet
     set name</a> to <var title="">name</var>.

   <li>
    <p>If <var title="">name</var> is not a <a
     href="#case-sensitive">case-sensitive</a> match for <var
     title="">current</var> and <a href="#last-style-sheet-set-name">last
     style sheet set name</a> is null <a
     href="#enable-a-style-sheet-set">enable a style sheet set</a> with name
     <var title="">new</var>.
  </ol>
  <!-- XXX ought to define "applied"
  
  thoughts:
    depends on disabled flag, alternate flag, media queries, sheesh
   -->

  <h4 id=the-http-default-style-header><span class=secno>6.2.1. </span>The
   HTTP <code title="">Default-Style</code> Header</h4>

  <p>The HTTP <code title=http-default-style><a
   href="#default-style">Default-Style</a></code> header can be used to set
   the <a href="#preferred-style-sheet-set-name">preferred style sheet set
   name</a> influencing which <a href="#style-sheet-set">style sheet set</a>
   is (initially) the <a href="#enabled-style-sheet-set">enabled style sheet
   set</a>.

  <p>For each HTTP <code title=http-default-style><a
   href="#default-style">Default-Style</a></code> header, in header order,
   the user agent <em class=ct>must</em> <a
   href="#change-the-preferred-style-sheet-set-name">change the preferred
   style sheet set name</a> with name being the value of the header.

  <h4 id=the-stylesheetlist-sequence><span class=secno>6.2.2. </span>The
   <code title="">StyleSheetList</code> Sequence</h4>

  <p>The sequence parameterized type represents an ordered collection of <a
   href="#style-sheet" title="style sheet">style sheets</a>.

  <pre
   class=idl>typedef sequence<<span>StyleSheet> <dfn id=stylesheetlist>StyleSheetList</dfn>;</pre>
  <!--
  <pre class="idl">interface <dfn>StyleSheetList</dfn> {
  readonly attribute unsigned long <span title="stylesheetlist-length">length</span>;
  getter <span>StyleSheet</span> <span title="stylesheetlist-item">item</span>(unsigned long <var title="">index</var>);
};</pre>

  <p>The
  <dfn id="stylesheetlist-length" title="stylesheetlist-length"><code>length</code></dfn>
  attribute, on getting, <em class="ct">must</em> return the number of
  objects currently in the list.</p>

  <p>The
  <dfn id="stylesheetlist-item" title="stylesheetlist-item"><code>item(<var title="">index</var>)</code></dfn>
  method, when invoked, <em class="ct">must</em> return the
  <code>StyleSheet</code> object in the list given by <var>index</var>, or
  null, if <var>index</var> is greater than or equal to the
  number of items in the list.</p>
-->

  <h4 id=extensions-to-the-document-interface><span class=secno>6.2.3.
   </span>Extensions to the <code title="">Document</code> Interface</h4>
  <!-- https://bugzilla.mozilla.org/show_bug.cgi?id=200930 (FIXED) -->

  <pre class=idl>[Supplemental] interface <span>Document</span> {
  readonly attribute <a href="#stylesheetlist">StyleSheetList</a> <a href="#dom-document-stylesheets" title=dom-Document-styleSheets>styleSheets</a>;
           attribute DOMString? <a href="#dom-document-selectedStyleSheetSet" title=dom-Document-selectedStyleSheetSet>selectedStyleSheetSet</a>;
  readonly attribute DOMString? <a href="#dom-document-lastStyleSheetSet" title=dom-Document-lastStyleSheetSet>lastStyleSheetSet</a>;
  readonly attribute DOMString? <a href="#dom-document-preferredStyleSheetSet" title=dom-Document-preferredStyleSheetSet>preferredStyleSheetSet</a>;
  readonly attribute DOMStringList <a href="#dom-document-styleSheetSets" title=dom-Document-styleSheetSets>styleSheetSets</a>;
  void <a href="#dom-document-enablestylesheetsforset" title=dom-Document-enableStyleSheetsForSet>enableStyleSheetsForSet</a>(DOMString? <var>name</var>);
};</pre>

  <p>The <dfn id=dom-document-stylesheets
   title=dom-Document-styleSheets><code>styleSheets</code></dfn> attribute
   <em class=ct>must</em> return a <code><a
   href="#stylesheetlist">StyleSheetList</a></code> sequence representing the
   <a href="#document-style-sheets">document style sheets</a>.

  <p class=note>Because of IDL limitations the <code
   title=dom-Document-styleSheets><a
   href="#dom-document-stylesheets">styleSheets</a></code> attribute used to
   be on a separate interface, <code title="">DocumentStyle</code>.

  <p>The <dfn id=dom-document-selectedStyleSheetSet
   title=dom-Document-selectedStyleSheetSet><code>selectedStyleSheetSet</code></dfn>
   attribute, on getting, <em class=ct>must</em> run these steps:

  <ol>
   <li>
    <p>If there is a single <a href="#enabled-style-sheet-set">enabled style
     sheet set</a> and no other <a href="#document-style-sheets">document
     style sheets</a> with a non-empty <a href="#style-sheet-title">style
     sheet title</a> have the <a href="#style-sheet-disabled-flag">style
     sheet disabled flag</a> set to false return the <a
     href="#style-sheet-set-name">style sheet set name</a> of the <a
     href="#enabled-style-sheet-set">enabled style sheet set</a> and
     terminate this set of steps.

   <li>
    <p>Otherwise, if <a href="#style-sheet" title="style sheet">style
     sheets</a> from different <a href="#style-sheet-set" title="style sheet
     set">style sheet sets</a> have their <a
     href="#style-sheet-disabled-flag">style sheet disabled flag</a> set to
     false return null and terminate this set of steps.

   <li>
    <p>Otherwise, return the empty string.</p>

    <p class=note>At this point either all <a href="#style-sheet"
     title="style sheet">style sheets</a> with a non-empty <a
     href="#style-sheet-title">style sheet title</a> have the <a
     href="#style-sheet-disabled-flag">style sheet disabled flag</a> set to
     true or there are no such <a href="#style-sheet" title="style
     sheet">style sheets</a>.</p>
  </ol>

  <p>On setting the <code title=dom-Document-selectedStyleSheetSet><a
   href="#dom-document-selectedStyleSheetSet">selectedStyleSheetSet</a></code>
   attribute these steps <em class=ct>must</em> be run:

  <ol>
   <li>
    <p>If the value is null terminate this set of steps.

   <li>
    <p>Otherwise, <a href="#select-a-style-sheet-set">select a style sheet
     set</a> with as name the value passed.
  </ol>

  <p>From the DOM's perspective, all views have the same <code
   title=dom-Document-selectedStyleSheetSet><a
   href="#dom-document-selectedStyleSheetSet">selectedStyleSheetSet</a></code>.
   If a user agent supports multiple views with different selected
   alternative style sheets, then this attribute (and the <code><a
   href="#stylesheet">StyleSheet</a></code> interface's <code
   title=dom-StyleSheet-disabled><a
   href="#dom-stylesheet-disabled">disabled</a></code> attribute) <em
   class=ct>must</em> return and set the value for the default view.</p>
  <!-- XXX clean up once we get rid of views -->

  <p>The <dfn id=dom-document-lastStyleSheetSet
   title=dom-Document-lastStyleSheetSet><code>lastStyleSheetSet</code></dfn>
   attribute <em class=ct>must</em> return the <a
   href="#last-style-sheet-set-name">last style sheet set name</a>.

  <p class=note>This attribute is initially null.

  <p>The <dfn id=dom-document-preferredStyleSheetSet
   title=dom-Document-preferredStyleSheetSet><code>preferredStyleSheetSet</code></dfn>
   attribute <em class=ct>must</em> return the <a
   href="#preferred-style-sheet-set-name">preferred style sheet set name</a>.

  <p class=note>Unlike <code title=dom-Document-lastStyleSheetSet><a
   href="#dom-document-lastStyleSheetSet">lastStyleSheetSet</a></code>, this
   attribute is initially the empty string.</p>
  <!-- XXX change? -->

  <p>The <dfn id=dom-document-styleSheetSets
   title=dom-Document-styleSheetSets><code>styleSheetSets</code></dfn>
   attribute <em class=ct>must</em> return a list of the <a
   href="#style-sheet-set-name" title="style sheet set name">style sheet set
   names</a> of the <a href="#style-sheet-set" title="style sheet set">style
   sheet sets</a>, in order of the <a href="#document-style-sheets">document
   style sheets</a>.

  <p>The <dfn id=dom-document-enablestylesheetsforset
   title=dom-Document-enableStyleSheetsForSet><code>enableStyleSheetsForSet(<var
   title="">name</var>)</code></dfn> method <em class=ct>must</em>, when
   invoked, run these steps:

  <ol>
   <li>
    <p>If <var title="">name</var> is null terminate these steps.

   <li>
    <p><a href="#enable-a-style-sheet-set">Enable a style sheet set</a> with
     name <var title="">name</var>.
  </ol>

  <p class=note><a href="#style-sheet" title="Style sheet">Style sheets</a>
   with an empty <a href="#style-sheet-title">style sheet title</a> are never
   affected by this method. This method does not change the values of the
   <code title=dom-Document-lastStyleSheetSet><a
   href="#dom-document-lastStyleSheetSet">lastStyleSheetSet</a></code> or
   <code title=dom-Document-preferredStyleSheetSet><a
   href="#dom-document-preferredStyleSheetSet">preferredStyleSheetSet</a></code>
   attributes.

  <h4 id=interaction-with-the-user-interface><span class=secno>6.2.4.
   </span>Interaction with the User Interface</h4>

  <p>The user interface of Web browsers that support style sheets <em
   class=ct>should</em> list the style sheet titles given in the <code
   title=dom-Document-styleSheetSets><a
   href="#dom-document-styleSheetSets">styleSheetSets</a></code> list,
   showing the <code title=dom-Document-selectedStyleSheetSet><a
   href="#dom-document-selectedStyleSheetSet">selectedStyleSheetSet</a></code>
   as the selected style sheet set, leaving none selected if it is null or
   the empty string, and selecting an extra option "Basic Page Style" (or
   similar) if it is the empty string and the <code
   title=dom-Document-preferredStyleSheetSet><a
   href="#dom-document-preferredStyleSheetSet">preferredStyleSheetSet</a></code>
   is the empty string as well.

  <p>Selecting a style sheet from this list <em class=ct>should</em> use the
   <a href="#select-a-style-sheet-set">select a style sheet set</a> set of
   steps. This (by definition) affects the <code
   title=dom-Document-lastStyleSheetSet><a
   href="#dom-document-lastStyleSheetSet">lastStyleSheetSet</a></code>
   attribute.

  <h5 id=persisting-the-selected-style-sheet-set><span class=secno>6.2.4.1.
   </span>Persisting the selected style sheet set</h5>

  <p>If a user agent persist the selected style sheet set, they should use
   the value of the <code title=dom-Document-selectedStyleSheetSet><a
   href="#dom-document-selectedStyleSheetSet">selectedStyleSheetSet</a></code>
   attribute, or if that is null, the <code
   title=dom-Document-lastStyleSheetSet><a
   href="#dom-document-lastStyleSheetSet">lastStyleSheetSet</a></code>
   attribute, when leaving the page (or at some other time) to determine the
   set name to store. If that is null then the style sheet set should not be
   persisted.

  <p>When re-setting the style sheet set to the persisted value (which can
   happen at any time, typically at the first time the style sheets are
   needed for styling the document, after the <code>&lt;head&gt;</code> of
   the document has been parsed, after any scripts that are not dependent on
   computed style have executed), the style sheet set <em
   class=ct>should</em> be set by using the <a
   href="#select-a-style-sheet-set">select a style sheet set</a> set of steps
   as if the user had selected the set manually.

  <p class=note>This specification does not give any suggestions on how user
   agents should decide to persist the style sheet set or whether or how to
   persist the selected set across pages.</p>
  <!-- XXX this UI section suggests we may want to introduce a few more
       idioms -->

  <h4 id=examples><span class=secno>6.2.5. </span>Examples</h4>

  <div class=example>
   <p>Thus, in the following HTML snippet:</p>

   <pre>&lt;link rel="alternate stylesheet" title="foo" href="a"&gt;
&lt;link rel="alternate stylesheet" title="bar" href="b"&gt;
&lt;script&gt;

  document.selectedStyleSheetSet = 'foo';
  document.styleSheets[1].disabled = false;
&lt;/script&gt;
&lt;link rel="alternate stylesheet" title="foo" href="c"&gt;
&lt;link rel="alternate stylesheet" title="bar" href="d"&gt;</pre>

   <p>...the style sheets that end up enabled are style sheets "a", "b", and
    "c", the <code title=dom-Document-selectedStyleSheetSet><a
    href="#dom-document-selectedStyleSheetSet">selectedStyleSheetSet</a></code>
    attribute would return null, <code
    title=dom-Document-lastStyleSheetSet><a
    href="#dom-document-lastStyleSheetSet">lastStyleSheetSet</a></code> would
    return "foo", and <code title=dom-Document-preferredStyleSheetSet><a
    href="#dom-document-preferredStyleSheetSet">preferredStyleSheetSet</a></code>
    would return the empty string.</p>

   <p>Similarly, in the following HTML snippet:</p>

   <pre>&lt;link rel="alternate stylesheet" title="foo" href="a"&gt;
&lt;link rel="alternate stylesheet" title="bar" href="b"&gt;
&lt;script&gt;
  var before = document.preferredStyleSheetSet;
  document.styleSheets[1].disabled = false;
&lt;/script&gt;
&lt;link rel="stylesheet" title="foo" href="c"&gt;

&lt;link rel="alternate stylesheet" title="bar" href="d"&gt;
&lt;script&gt;
  var after = document.preferredStyleSheetSet;
&lt;/script&gt;</pre>

   <p>...the "before" variable will be equal to the empty string, the "after"
    variable will be equal to "foo", and style sheets "a" and "c" will be
    enabled. This is the case even though the first script block sets style
    sheet "b" to be enabled, because upon parsing the following
    <code>&lt;link&gt;</code> element, the <code
    title=dom-Document-preferredStyleSheetSet><a
    href="#dom-document-preferredStyleSheetSet">preferredStyleSheetSet</a></code>
    is set and the <code title=dom-Document-enableStyleSheetsForSet><a
    href="#dom-document-enablestylesheetsforset">enableStyleSheetsForSet()</a></code>
    method is called (since <code title=dom-Document-selectedStyleSheetSet><a
    href="#dom-document-selectedStyleSheetSet">selectedStyleSheetSet</a></code>
    was never set explicitly, leaving <code
    title=dom-Document-lastStyleSheetSet><a
    href="#dom-document-lastStyleSheetSet">lastStyleSheetSet</a></code> at
    null throughout), which changes which style sheets are enabled and which
    are not.</p>
  </div>

  <h3 id=style-sheet-association><span class=secno>6.3. </span>Style Sheet
   Association</h3>

  <p>This section defines the interface a <a href="#style-sheet-node">style
   sheet node</a> of a <a href="#style-sheet">style sheet</a> has to
   implement and defines the requirements for <a
   href="#xml-stylesheet-processing-instruction" title="xml-stylesheet
   processing instruction">xml-stylesheet processing instructions</a> and
   HTTP <code title=http-link>Link</code> headers when the link releation
   type is an <a href="#ascii-case-insensitive">ASCII case-insensitive</a>
   match for "<code title="">stylesheet</code>" since nobody else was
   interested in defining this.

  <p>The editor is in good hope that HTML and SVG will define the appropriate
   processing in their respective specifications, in terms of this
   specification, in due course.

  <h4 id=the-linkstyle-interface><span class=secno>6.3.1. </span>The <code
   title="">LinkStyle</code> Interface</h4>

  <p>The <dfn id=associated-style-sheet>associated style sheet</dfn> of a
   node is the <a href="#style-sheet">style sheet</a> in the list of <a
   href="#document-style-sheets">document style sheets</a> of which the <a
   href="#style-sheet-node">style sheet node</a> implements the <code><a
   href="#linkstyle">LinkStyle</a></code> interface.

  <pre class=idl>interface <dfn id=linkstyle>LinkStyle</dfn> {
  readonly attribute <a href="#stylesheet">StyleSheet</a> <a href="#linkstyle-sheet" title=linkstyle-sheet>sheet</a>;
};</pre>

  <p>The <dfn id=linkstyle-sheet
   title=linkstyle-sheet><code>sheet</code></dfn> attribute <em
   class=ct>must</em> return the <a href="#associated-style-sheet">associated
   style sheet</a> for the node, or null, if there is no <a
   href="#associated-style-sheet">associated style sheet</a>.

  <div class=example>
   <p>In the following HTML snippet the first HTML <code>style</code> element
    has a <code>sheet</code> attribute that returns a <code><a
    href="#stylesheet">StyleSheet</a></code> object representing the style
    sheet, but for the second <code>style</code> attribute it returns null.
    (Assuming the user agent supports CSS (<code>text/css</code>) and does
    not support ExampleSheets (<code>text/example-sheets</code>).</p>

   <pre>&lt;style type=text/css> body { background:lime } &lt;/style>
&lt;style type=text/example-sheets> $(body).background := lime &lt;/style></pre>
  </div>

  <p class=note>Whether or not the node refers to a style sheet is defined by
   the specification that defines the semantics of said node.

  <h4 id=requirements-on-specifications><span class=secno>6.3.2.
   </span>Requirements on specifications</h4>

  <p>Specifications introducing new ways of associating style sheets through
   the DOM <em class=ct>should</em> define which nodes implement the <code><a
   href="#linkstyle">LinkStyle</a></code> interface. When doing so, they <em
   class=ct>must</em> also define when a <a href="#style-sheet">style
   sheet</a> is <a href="#create-a-style-sheet" title="create a style
   sheet">created</a>.

  <h4 id=requirements-on-user-agents-implementing><span class=secno>6.3.3.
   </span>Requirements on User Agents Implementing the <span
   title=""><code>xml-stylesheet</code> processing instruction</span></h4>
  <!-- XXX ref, one day -->
  <!-- XXX load/error events, reparse -->

  <pre
   class=idl><span>ProcessingInstruction</span> implements <a href="#linkstyle">LinkStyle</a>;</pre>

  <p>For each <a
   href="#xml-stylesheet-processing-instruction"><code>xml-stylesheet</code>
   processing instruction</a> that is not part of the <span>document type
   declaration</span> and has an <code title="">href</code> pseudo-attribute
   these steps <em class=ct>must</em> (unless otherwise stated) be run:

  <ol>
   <li>
    <p>Let <var title="">title</var> be the value of the <code
     title="">title</code> pseudo-attribute or the empty string if the <code
     title="">title</code> pseudo-attribute is not specified.

   <li>
    <p>If there is an <code title="">alternate</code> pseudo-attribute whose
     value is a <a href="#case-sensitive">case-sensitive</a> match for "<code
     title="">yes</code>" and <var title="">title</var> is the empty string
     terminate these steps.

   <li>
    <p>If there is a <code title="">type</code> pseudo-attribute whose value
     is not a <a href="#supported-styling-language">supported styling
     language</a> the user agent <em class=ct>may</em> terminate these steps.

   <li>
    <p><a href="#resolve-a-url" title="Resolve a URL">Resolve</a> the <a
     href="#url">URL</a> specified by the <code title="">href</code>
     pseudo-attribute and then <a href="#fetch">fetch</a> it.

   <li>
    <p>When the resource is available, the document is in <span>quirks
     mode</span> and the <a href="#content-type-metadata">Content-Type
     metadata</a> of the resource is not a <a
     href="#supported-styling-language">supported styling language</a> change
     the <a href="#content-type-metadata">Content-Type metadata</a> of the
     resource to <code title="">text/css</code>.</p>

    <p class=note>This step might never actually happen, but is included here
     in case other specifications change, to keep things consistent.</p>

   <li>
    <p>If the resource is not in a <a
     href="#supported-styling-language">supported styling language</a>
     terminate these steps.

   <li>
    <p><a href="#create-a-style-sheet">Create a style sheet</a> with the
     following properties:</p>

    <dl>
     <dt><a href="#style-sheet-type">style sheet type</a>

     <dd>
      <p>The <code><a href="#content-type-metadata">Content-Type
       metadata</a></code> of the resource.

     <dt><a href="#style-sheet-location">style sheet location</a>

     <dd>
      <p>The <span>absolute URL</span> of the resource.

     <dt><a href="#style-sheet-node">style sheet node</a>

     <dd>
      <p>The node.

     <dt><a href="#style-sheet-parent">style sheet parent</a>

     <dd>
      <p>null

     <dt><a href="#style-sheet-media">style sheet media</a>

     <dd>
      <p>The value of the <code title="">media</code> pseudo-attribute if
       any, or the empty string otherwise.

     <dt><a href="#style-sheet-title">style sheet title</a>

     <dd>
      <p><var title="">title</var>

     <dt><a href="#style-sheet-alternate-flag">style sheet alternate flag</a>

     <dd>
      <p>True if the <code title="">alternate</code> pseudo-attribute value
       is a <a href="#case-sensitive">case-sensitive</a> match for
       "<code>yes</code>". Otherwise, false.
    </dl>
  </ol>

  <h4 id=requirements-on-user-agents-implementing0><span class=secno>6.3.4.
   </span>Requirements on User Agents Implementing the HTTP <code
   title="">Link</code> Header</h4>
  <!-- XXX ref, one day -->
  <!-- XXX deal with media param -->

  <p>For each HTTP <code title=http-link>Link</code> header of which one of
   the link relation types is an <a href="#ascii-case-insensitive">ASCII
   case-insensitive</a> match for "<code title="">stylesheet</code>" these
   steps <em class=ct>must</em> be run:

  <ol>
   <li>
    <p>Let <var title="">title</var> be the value of the first of all the
     <code title="">title</code> and <code title="">title*</code> parameters.
     If there are no such parameters it is the empty string.

   <li>
    <p>If one of the (other) link relation types is an <a
     href="#ascii-case-insensitive">ASCII case-insensitive</a> match for
     "<code title="">alternate</code>" and <var title="">title</var> is the
     empty string terminate these steps.

   <li>
    <p><a href="#resolve-a-url" title="Resolve a URL">Resolve</a> the
     specified <a href="#url">URL</a> and <a href="#fetch">fetch</a> it.

   <li>
    <p>When the resource is available, the document is in <span>quirks
     mode</span> and the <a href="#content-type-metadata">Content-Type
     metadata</a> of the resource is not a <a
     href="#supported-styling-language">supported styling language</a> change
     the <a href="#content-type-metadata">Content-Type metadata</a> of the
     resource to <code title="">text/css</code>.

   <li>
    <p>If the resource is not in a <a
     href="#supported-styling-language">supported styling language</a>
     terminate these steps.

   <li>
    <p><a href="#create-a-style-sheet">Create a style sheet</a> with the
     following properties:</p>

    <dl>
     <dt><a href="#style-sheet-type">style sheet type</a>

     <dd>
      <p>The <a href="#content-type-metadata">Content-Type metadata</a> of
       the resource.

     <dt><a href="#style-sheet-location">style sheet location</a>

     <dd>
      <p>The <span>absolute URL</span> of the resource.

     <dt><a href="#style-sheet-node">style sheet node</a>

     <dd>
      <p>null

     <dt><a href="#style-sheet-parent">style sheet parent</a>

     <dd>
      <p>null

     <dt><a href="#style-sheet-media">style sheet media</a>

     <dd>
      <p>The value of the first <code title="">media</code> parameter.
     </dd>
     <!-- XXX register media parameter? bah -->

     <dt><a href="#style-sheet-title">style sheet title</a>

     <dd>
      <p><var title="">title</var>

     <dt><a href="#style-sheet-alternate-flag">style sheet alternate flag</a>

     <dd>
      <p>True if one of the specified link relation type for this HTTP <code
       title=http-link>Link</code> header is an <a
       href="#ascii-case-insensitive">ASCII case-insensitive</a> match for
       "<code title="">alternate</code>". Otherwise, false.
    </dl>
  </ol>

  <h2 id=css-style-sheets><span class=secno>7. </span>CSS Style Sheets</h2>

  <p><em>This section (and its subsections) are only applicable to user
   agents implementing CSS.</em>

  <p>This section defines an API for CSS style sheets.</p>
  <!--
   statement "[S|CDO|CDC]* [ import [S|CDO|CDC]* ]* [ [ ruleset | media | page ] [S|CDO|CDC]* ]*" ??

   selectors "*"
   page selectors "S* pseudo_page? S*"

   declaration "S* declaration" (properties, property values, property priority)

   property value "S* expr"
  -->

  <h3 id=css-style-sheet><span class=secno>7.1. </span>CSS Style Sheet</h3>

  <p class=XXX> define CSS style sheet

  <h4 id=the-cssstylesheet-interface><span class=secno>7.1.1. </span>The
   <code title="">CSSStyleSheet</code> Interface</h4>

  <p>The <code><a href="#cssstylesheet">CSSStyleSheet</a></code> interface
   represents a <span>CSS style sheet</span>.</p>
  <!--
   IE exposes:
   owningElement, pages, id, type, href, disabled, cssText, readOnly, title,
   parentStyleSheet, imports, rules, media
  -->

  <pre
   class=idl>interface <dfn id=cssstylesheet>CSSStyleSheet</dfn> : <a href="#stylesheet">StyleSheet</a> {
  readonly attribute <a href="#cssrule">CSSRule</a> <a href="#cssstylesheet-ownerrule">ownerRule</a>;
  readonly attribute <a href="#cssrulelist">CSSRuleList</a> <a href="#cssstylesheet-cssrules" title=cssstylesheet-cssrules>cssRules</a>;
  unsigned long <a href="#cssstylesheet-insertrule" title=cssstylesheet-insertrule>insertRule</a>(DOMString <var>rule</var>, unsigned long <var>index</var>);
  void <a href="#cssstylesheet-deleterule" title=cssstylesheet-deleterule>deleteRule</a>(unsigned long <var>index</var>);
};</pre>

  <p>The <dfn id=cssstylesheet-ownerrule><code>ownerRule</code></dfn>
   attribute, on getting, <em class=ct>must</em> return the <code><a
   href="#cssimportrule">CSSImportRule</a></code> that caused this style
   sheet to be imported (if any). Otherwise, if no <code><a
   href="#cssimportrule">CSSImportRule</a></code> caused it to be imported
   the attribute <em class=ct>must</em> return null.

  <p>The <dfn id=cssstylesheet-cssrules
   title=cssstylesheet-cssrules><code>cssRules</code></dfn> attribute, on
   getting, <em class=ct>must</em> return a <code><a
   href="#cssrulelist">CSSRuleList</a></code> object consisting of a list of
   rules in order they were found in the <span>CSS style sheet</span>.

  <p class=note>Rules that were dropped during parsing can not be found using
   these APIs.

  <p>The <dfn id=cssstylesheet-insertrule
   title=cssstylesheet-insertrule><code>insertRule(<var title="">rule</var>,
   <var title="">index</var>)</code></dfn> method, when invoked, <em
   class=ct>must</em> <a href="#inserting-a-statement">insert a statement</a>
   where <var>rule</var> is <var>rule</var>, <var>index</var> is
   <var>index</var> and <var>rule list</var> is <code
   title=cssstylesheet-cssrules><a
   href="#cssstylesheet-cssrules">cssRules</a></code>.

  <p>The <dfn id=cssstylesheet-deleterule
   title=cssstylesheet-deleterule><code>deleteRule(<var
   title="">index</var>)</code></dfn> method, when invoked, <em
   class=ct>must</em> <a href="#removing-a-statement">remove a statement</a>
   where <var>index</var> is <var>index</var> and <var>rule list</var> is
   <code title=dom-CSSMediaRule-cssRules><a
   href="#dom-cssmediarule-cssrules">cssRules</a></code>.

  <h3 id=css-rules><span class=secno>7.2. </span>CSS Rules</h3>

  <p class=XXX>Need to split this up in parsing and common algorithms.

  <p>The rules for <dfn id=inserting-a-statement title="insert a
   statement">inserting a statement</dfn> are as given in the following
   algorithm. The variables <var>rule</var>, <var>rule list</var> and
   <var>index</var> are to be considered equivalent to the identically named
   variables used when invoking this algorithm. If an exception is raised the
   algorithm is to be aborted. The steps <em class=ct>must</em> be followed
   in order, as follows:

  <ol>
   <li>
    <p>If <var>index</var> is negative or greater than the length of the
     <var>rule list</var> an <code>INDEX_SIZE_ERR</code> exception <em
     class=ct>must</em> be raised.

   <li>
    <p>Parse <var>rule</var> as a CSS statement. If the <var>rule</var> is
     ignored by the CSS parser abort this algorithm (don't raise an
     exception). Otherwise, create an object that implements one of the
     inherited interfaces of <code>CSSStyle</code> appropriate for the parsed
     <var>rule</var>. Let <var>object</var> be the newly created object.

   <li>
    <p>If <var>object</var> can't be inserted within the <var>rule list</var>
     at the given <var>index</var> because that's not allowed per the CSS
     specification a <code>HIERARCHY_REQUEST_ERR</code> exception <em
     class=ct>must</em> be raised.

   <li>
    <p>Insert <var>object</var> at the given <var>index</var> within the
     <var>rule list</var>.
  </ol>

  <p>The rules for <dfn id=removing-a-statement title="remove a
   statement">removing a statement</dfn> are as given in the following
   algorithm. The variables <var>index</var> and <var>rule list</var> are to
   be considered equivalent to the identically named variables used when
   invoking this algorithm. If an exception is raised this algorithm is to be
   aborted. The steps <em class=ct>must</em> be followed in order, as
   follows:

  <ol>
   <li>
    <p>If <var>index</var> is negative or greater than the length of the
     <var>rule list</var> an <code>INDEX_SIZE_ERR</code> exception <em
     class=ct>must</em> be raised.

   <li>
    <p>Remove the object at <var>index</var> from <var>rule list</var>.
  </ol>

  <p>The rules for <dfn id=replacing-a-statement title="replace a
   statement">replacing a statement</dfn> are as given in the following
   algorithm. The variable <var>rule</var> and <var>old object</var> are to
   be considered equivalent to the identically named variables used when
   invoking this algorithm. If an exception is raised this algorithm is to be
   aborted. The steps <em class=ct>must</em> be followed in order, as
   follows:

  <ol>
   <li>
    <p>Parse <var>rule</var> as a CSS statement. If the <var>rule</var> is
     ignored by the CSS parser abort this algorithm (don't raise an
     exception). Otherwise, create an object that implements one of the
     inherited interfaces of <code>CSSStyle</code> appropriate for the parsed
     <var>rule</var>. Let <var>object</var> be the newly created object.

   <li>
    <p>If the <code title=dom-CSSRule-type><a
     href="#dom-cssrule-type">type</a></code> of <var>object</var> does not
     match the <code title=dom-CSSRule-type><a
     href="#dom-cssrule-type">type</a></code> of <var>old object</var> it
     will replace user agents <em class=ct>must</em> raise an
     <code>INVALID_MODIFICATION_ERR</code> exception.

   <li>
    <p>Replace <var>old object</var> with <var>object</var>.
  </ol>

  <h4 id=the-cssrulelist-sequence><span class=secno>7.2.1. </span>The <code
   title="">CSSRuleList</code> Sequence</h4>

  <p>The <code><a href="#cssrulelist">CSSRuleList</a></code> object
   represents an ordered collection of CSS rules.

  <pre
   class=idl>typedef sequence&lt;<a href="#cssrule">CSSRule</a>> <dfn id=cssrulelist>CSSRuleList</dfn>;</pre>

  <h4 id=the-cssrule-interface><span class=secno>7.2.2. </span>The <code
   title="">CSSRule</code> Interface</h4>

  <p>The <code><a href="#cssrule">CSSRule</a></code> interface a base
   interface. Each specific CSS statement has an interface which inherits
   from this one.

  <pre class=idl>interface <dfn id=cssrule>CSSRule</dfn> {
  // CSS statement type
  const unsigned short <a href="#dom-cssrule-style_rule" title="dom-CSSRule-STYLE_RULE">STYLE_RULE</a> = 1;
  const unsigned short <a href="#dom-cssrule-import_rule" title="dom-CSSRule-IMPORT_RULE">IMPORT_RULE</a> = 3;
  const unsigned short <a href="#dom-cssrule-media_rule" title="dom-CSSRule-MEDIA_RULE">MEDIA_RULE</a> = 4;
  const unsigned short <a href="#dom-cssrule-font_face_rule" title="dom-CSSRule-FONT_FACE_RULE">FONT_FACE_RULE</a> = 5;
  const unsigned short <a href="#dom-cssrule-page_rule" title="dom-CSSRule-PAGE_RULE">PAGE_RULE</a> = 6;
  const unsigned short <a href="#dom-cssrule-namespace_rule" title="dom-CSSRule-NAMESPACE_RULE">NAMESPACE_RULE</a> = 8;
  readonly attribute unsigned short <a href="#dom-cssrule-type" title=dom-CSSRule-type>type</a>;

  // Textual representation
           attribute DOMString <a href="#dom-cssrule-csstext" title=dom-CSSRule-cssText>cssText</a>;
  
  // Context information
  readonly attribute <a href="#cssrule">CSSRule</a> <a href="#dom-cssrule-parentrule" title=dom-CSSRule-parentRule>parentRule</a>;
  readonly attribute <a href="#cssstylesheet">CSSStyleSheet</a> <a href="#dom-cssrule-parentstylesheet" title=dom-CSSRule-parentStyleSheet>parentStyleSheet</a>;
};</pre>

  <p>The <dfn id=dom-cssrule-type
   title=dom-CSSRule-type><code>type</code></dfn> attribute, on getting, <em
   class=ct>must</em> return the CSS statement type, as follows:

  <dl>
   <dt><dfn id="dom-cssrule-style_rule"
    title="dom-CSSRule-STYLE_RULE"><code>STYLE_RULE</code></dfn> (numeric
    value 1)

   <dd>The object is a <code><a href="#cssstylerule">CSSStyleRule</a></code>.

   <dt><dfn id="dom-cssrule-import_rule"
    title="dom-CSSRule-IMPORT_RULE"><code>IMPORT_RULE</code></dfn> (numeric
    value 3)

   <dd>The object is a <code><a
    href="#cssimportrule">CSSImportRule</a></code>.

   <dt><dfn id="dom-cssrule-media_rule"
    title="dom-CSSRule-MEDIA_RULE"><code>MEDIA_RULE</code></dfn> (numeric
    value 4)

   <dd>The object is a <code><a href="#cssmediarule">CSSMediaRule</a></code>.

   <dt><dfn id="dom-cssrule-font_face_rule"
    title="dom-CSSRule-FONT_FACE_RULE"><code>FONT_FACE_RULE</code></dfn>
    (numeric value 5)

   <dd>The object is a <code><a
    href="#cssfontfacerule">CSSFontFaceRule</a></code>.

   <dt><dfn id="dom-cssrule-page_rule"
    title="dom-CSSRule-PAGE_RULE"><code>PAGE_RULE</code></dfn> (numeric value
    6)

   <dd>The object is a <code><a href="#csspagerule">CSSPageRule</a></code>.

   <dt><dfn id="dom-cssrule-namespace_rule"
    title="dom-CSSRule-NAMESPACE_RULE"><code>NAMESPACE_RULE</code></dfn>
    (numeric value 8)

   <dd>The object is a <code><a
    href="#cssnamespacerule">CSSNamespaceRule</a></code>.
  </dl>

  <p class=note>Constants with values 0 and 2 have been obsoleted by this
   specification. They might be re-allocated in the future. 7 is reserved for
   <code>@color-profile</code>.

  <p>The <dfn id=dom-cssrule-csstext
   title=dom-CSSRule-cssText><code>cssText</code></dfn> attribute, on
   setting, <em class=ct>must</em> <a href="#replacing-a-statement">replace a
   statement</a> where <var>rule</var> is the value being set and <var>old
   object</var> is the object of which this attribute is set.

  <p>On getting the <code title=dom-CSSRule-cssText><a
   href="#dom-cssrule-csstext">cssText</a></code> attribute, a serialization
   of the object <em class=ct>must</em> be returned. The serialization
   depends on the object, as follows:

  <dl>
   <dt><code><a href="#cssstylerule">CSSStyleRule</a></code>

   <dd class=XXX>...

   <dt><code><a href="#cssimportrule">CSSImportRule</a></code>

   <dd>
    <p>The result of concatenating these strings:</p>

    <ol>
     <li>The literal string "<code>@import</code>", followed by a space
      (U+0020), followed by the <a href="#escape-a-url" title="escape a
      URL">URL escaped</a> value of the <code title=dom-CSSImportRule-href><a
      href="#dom-cssimportrule-href">href</a></code> attribute.

     <li>If the associated <code><a href="#medialist">MediaList</a></code>
      object is not empty, a space (U+0020), followed by the value of the
      <code title=dom-MediaList-mediaText><a
      href="#dom-medialist-mediatext">mediaText</a></code> attribute of the
      associated <code><a href="#medialist">MediaList</a></code> object.

     <li>A "<code>;</code>" (U+003B).
    </ol>

   <dt><code><a href="#cssmediarule">CSSMediaRule</a></code>

   <dd class=XXX>...

   <dt><code><a href="#cssfontfacerule">CSSFontFaceRule</a></code>

   <dd class=XXX>...

   <dt><code><a href="#csspagerule">CSSPageRule</a></code>

   <dd class=XXX>...

   <dt><code><a href="#cssnamespacerule">CSSNamespaceRule</a></code>

   <dd>
    <p>The literal string "<code>@namespace</code>", followed by a space
     (U+0020), followed by the <a href="#escape-an-identifier" title="escape
     an identifier">identifier escaped</a> value of the <code
     title=dom-CSSNamespaceRule-prefix><a
     href="#dom-cssnamespacerule-prefix">prefix</a></code> attribute (if
     any), followed by a space (U+0020) if there is a prefix, followed by the
     <a href="#escape-a-url" title="escape a URL">URL escaped</a> value of
     the <code title=dom-CSSNamespaceRule-namespaceURI><a
     href="#dom-cssnamespacerule-namespaceuri">namespaceURI</a></code>
     attribute, followed the character "<code>;</code>" (U+003B).
  </dl>

  <p>The <dfn id=dom-cssrule-parentrule
   title=dom-CSSRule-parentRule><code>parentRule</code></dfn> attribute <em
   class=ct>must</em> return the nearest enclosing rule of the current rule
   or null, if there is no enclosing rule.

  <p class=note>E.g. <code title="">@media</code> can enclose a rule.

  <p>The <dfn id=dom-cssrule-parentstylesheet
   title=dom-CSSRule-parentStyleSheet><code>parentStyleSheet</code></dfn>
   attribute <em class=ct>must</em> return the <code><a
   href="#cssstylesheet">CSSStyleSheet</a></code> object that contains the
   the current rule.

  <h5 id=extensibility><span class=secno>7.2.2.1. </span>Extensibility</h5>

  <p>The constant values 0-1000 are reserved for future use by the CSS WG.

  <p>Vendors are encouraged to use reasonably unique values outside this
   range so that they do not clash with extensions from other vendors. For
   example, the first value for Mozilla could be
   <code>0x0<strong>8EC0</strong>001</code> and
   <code>0x<strong>09E8A</strong>001</code> could be the first for Opera.

  <p>Vendors are encouraged to prefix the new interface names with a vendor
   specific prefix. For example, "Example company" could have an interface
   called "ExampleCSSTestRule".

  <p>In general, vendors are encouraged to discuss extensions on a public
   forum, such as <code>www-style@w3.org</code>.

  <h4 id=css-style-rule-rule-set><span class=secno>7.2.3. </span>CSS Style
   Rule (Rule Set)</h4>

  <p>The <code><a href="#cssstylerule">CSSStyleRule</a></code> object
   represents a rule set, providing access to its associated <span>group of
   selectors</span> and <span>CSS declaration block</span>.</p>
  <!-- XXX ref -->

  <pre
   class=idl>interface <dfn id=cssstylerule>CSSStyleRule</dfn> : <a href="#cssrule">CSSRule</a> {
           attribute DOMString <a href="#dom-cssstylerule-selectortext" title=dom-CSSStyleRule-selectorText>selectorText</a>;
  readonly attribute <a href="#cssstyledeclaration">CSSStyleDeclaration</a> <span title=dom-CSSStyleRule-style>style</span>;
};</pre>

  <p>The <dfn id=dom-cssstylerule-selectortext
   title=dom-CSSStyleRule-selectorText><code>selectorText</code></dfn>
   attribute, on getting, <em class=ct>must</em> return the result of <a
   href="#serialize-a-group-of-selectors" title="serialize a group of
   selectors">serializing</a> the associated <span>group of selectors</span>.

  <p>On setting the <code title=dom-CSSStyleRule-selectorText><a
   href="#dom-cssstylerule-selectortext">selectorText</a></code> attribute
   these steps <em class=ct>must</em> be run:

  <ol>
   <li>
    <p>Run the <a href="#parse-a-group-of-selectors">parse a group of
     selectors</a> algorithm on the given value.

   <li>
    <p>If the algorithm returns a non-null value replace the associated
     <span>group of selectors</span> with the returned value.

   <li>
    <p>Otherwise, if the algorithm returns a null value, do nothing.
  </ol>

  <p>The <dfn id=cssstylerule-style
   title=cssstylerule-style><code>style</code></dfn> attribute <em
   class=ct>must</em> return a <code><a
   href="#cssstyledeclaration">CSSStyleDeclaration</a></code> object for the
   rule set.

  <h4 id=css-import-rule><span class=secno>7.2.4. </span>CSS <code
   title="">@import</code> Rule</h4>

  <p>The <code><a href="#cssimportrule">CSSImportRule</a></code> object
   represents an <code>@import</code> rule.

  <pre
   class=idl>interface <dfn id=cssimportrule>CSSImportRule</dfn> : <a href="#cssrule">CSSRule</a> {
  readonly attribute DOMString <a href="#dom-cssimportrule-href" title=dom-CSSImportRule-href>href</a>;
  [PutForwards=<a href="#dom-medialist-mediatext" title=dom-MediaList-mediaText>mediaText</a>] readonly attribute <a href="#medialist">MediaList</a> <a href="#dom-cssimportrule-media" title=dom-CSSImportRule-media>media</a>;
  readonly attribute <a href="#cssstylesheet">CSSStyleSheet</a> <a href="#dom-cssimportrule-stylesheet" title=dom-CSSImportRule-styleSheet>styleSheet</a>;
};</pre>

  <p>The <dfn id=dom-cssimportrule-href
   title=dom-CSSImportRule-href><code>href</code></dfn> attribute, on
   getting, <em class=ct>must</em> return the <a href="#url">URL</a>
   specified by the <code>@import</code> rule.

  <p class=note>To get the resolved <a href="#url">URL</a> use the <code
   title=dom-StyleSheet-href><a href="#dom-stylesheet-href">href</a></code>
   attribute of the associated <code><a
   href="#cssstylesheet">CSSStyleSheet</a></code> object.

  <p>The <dfn id=dom-cssimportrule-media
   title=dom-CSSImportRule-media><code>media</code></dfn> attribute, on
   getting, <em class=ct>must</em> return the value of the <code
   title=dom-StyleSheet-media><a
   href="#dom-stylesheet-media">media</a></code> attribute of the associated
   <code><a href="#cssstylesheet">CSSStyleSheet</a></code> object.

  <p>The <dfn id=dom-cssimportrule-stylesheet
   title=dom-CSSImportRule-stylesheet><code>styleSheet</code></dfn>
   attribute, on getting, <em class=ct>must</em> return the associated
   <code><a href="#cssstylesheet">CSSStyleSheet</a></code> object.

  <p class=note>If loading of the style sheet fails its <code
   title=dom-CSSStyleSheet-cssRules>cssRules</code> list is simply empty.
   I.e. an <code>@import</code> rule always has an associated <code><a
   href="#cssstylesheet">CSSStyleSheet</a></code> object.

  <h4 id=css-media-rule><span class=secno>7.2.5. </span>CSS <code
   title="">@media</code> Rule</h4>

  <p>The <code><a href="#cssmediarule">CSSMediaRule</a></code> object
   represents an <code title="">@media</code> rule.

  <pre
   class=idl>interface <dfn id=cssmediarule>CSSMediaRule</dfn> : <a href="#cssrule">CSSRule</a> {
  [PutForwards=<a href="#dom-medialist-mediatext" title=dom-MediaList-mediaText>mediaText</a>] readonly attribute <a href="#medialist">MediaList</a> <a href="#dom-cssmediarule-media" title=dom-CSSMediaRule-media>media</a>;
  readonly attribute <a href="#cssrulelist">CSSRuleList</a> <a href="#dom-cssmediarule-cssrules" title=dom-CSSMediaRule-cssRules>cssRules</a>;
  unsigned long <a href="#dom-cssmediarule-insertrule" title=dom-CSSMediaRule-insertRule>insertRule</a>(DOMString <var>rule</var>, in unsigned long <var>index</var>);
  void <a href="#dom-cssmediarule-deleterule" title=dom-CSSMediaRule-deleteRule>deleteRule</a>(unsigned long <var>index</var>);
};</pre>

  <p>The <dfn id=dom-cssmediarule-media
   title=dom-CSSMediaRule-media><code>media</code></dfn> attribute, on
   getting, <em class=ct>must</em> return a <code><a
   href="#medialist">MediaList</a></code> object for the list of media
   queries specified with the <code title="">@media</code> rule.

  <p>The <dfn id=dom-cssmediarule-cssrules
   title=dom-CSSMediaRule-cssRules><code>cssRules</code></dfn> attribute, on
   getting, <em class=ct>must</em> return a <code><a
   href="#cssrulelist">CSSRuleList</a></code> object for the list of rules
   specified with the <code title="">@media</code> rule.

  <p>The <dfn id=dom-cssmediarule-insertrule
   title=dom-CSSMediaRule-insertRule><code>insertRule(<var
   title="">rule</var>, <var title="">index</var>)</code></dfn> method, when
   invoked, <em class=ct>must</em> <a href="#inserting-a-statement">insert a
   statement</a> where <var>rule</var> is <var>rule</var>, <var>index</var>
   is <var>index</var> and <var>rule list</var> is <code
   title=dom-CSSMediaRule-cssRules><a
   href="#dom-cssmediarule-cssrules">cssRules</a></code>.

  <p>The <dfn id=dom-cssmediarule-deleterule
   title=dom-CSSMediaRule-deleteRule><code>deleteRule(<var
   title="">index</var>)</code></dfn> method, when invoked, <em
   class=ct>must</em> <a href="#removing-a-statement">remove a statement</a>
   where <var>index</var> is <var>index</var> and <var>rule list</var> is
   <code title=dom-CSSMediaRule-cssRules><a
   href="#dom-cssmediarule-cssrules">cssRules</a></code>.

  <h4 id=css-font-face-rule><span class=secno>7.2.6. </span>CSS <code
   title="">@font-face</code> Rule</h4>

  <p>The <code><a href="#cssfontfacerule">CSSFontFaceRule</a></code> object
   represents an <code>@font-face</code> rule specified (if any) in a
   <span>CSS style sheet</span>.

  <pre
   class=idl>interface <dfn id=cssfontfacerule>CSSFontFaceRule</dfn> : <a href="#cssrule">CSSRule</a> {
  readonly attribute <a href="#cssstyledeclaration">CSSStyleDeclaration</a> <a href="#cssfontfacerule-style" title=cssfontfacerule-style>style</a>;
};</pre>

  <p>The <dfn id=cssfontfacerule-style
   title=cssfontfacerule-style><code>style</code></dfn> attribute <em
   class=ct>must</em> return a <code><a
   href="#cssstyledeclaration">CSSStyleDeclaration</a></code> block that
   contains the property declarations specified within the
   <code>@font-face</code> rule.

  <h4 id=css-page-rule><span class=secno>7.2.7. </span>CSS <code
   title="">@page</code> Rule</h4>

  <p class=XXX>Need to define the rules for <dfn
   id=parse-a-css-page-selector>parse a CSS page selector</dfn> and <dfn
   id=serialize-a-css-page-selector>serialize a CSS page selector</dfn>.

  <p>The <code><a href="#csspagerule">CSSPageRule</a></code> object
   represents an <code>@page</code> rule.

  <pre
   class=idl>interface <dfn id=csspagerule>CSSPageRule</dfn> : <a href="#cssrule">CSSRule</a> {
           attribute DOMString <a href="#dom-csspagerule-selectortext" title=dom-CSSPageRule-selectorText>selectorText</a>;
  readonly attribute <a href="#cssstyledeclaration">CSSStyleDeclaration</a> <span title=dom-CSSPageRule-style>style</span>;
};</pre>

  <p>The <dfn id=dom-csspagerule-selectortext
   title=dom-CSSPageRule-selectorText><code>selectorText</code></dfn>
   attribute, on getting, <em class=ct>must</em> return the result of <a
   href="#serialize-a-css-page-selector" title="serialize a CSS page
   selector">serializing</a> the associated <span>CSS page selector</span>.

  <p>On setting the <code title=dom-CSSPageRule-selectorText><a
   href="#dom-csspagerule-selectortext">selectorText</a></code> attribute
   these steps <em class=ct>must</em> be run:

  <ol>
   <li>
    <p>Run the <a href="#parse-a-css-page-selector">parse a CSS page
     selector</a> algorithm on the given value.

   <li>
    <p>If the algorithm returns a non-null value replace the associated
     <span>CSS page selector</span> with the returned value.

   <li>
    <p>Otherwise, if the algorithm returns a null value, do nothing.
  </ol>

  <p>The <dfn id=csspagerule-style
   title=csspagerule-style><code>style</code></dfn> attribute, on getting,
   <em class=ct>must</em> return a <code><a
   href="#cssstyledeclaration">CSSStyleDeclaration</a></code> for the
   <code>@page</code> rule.

  <h4 id=css-namespace-rule><span class=secno>7.2.8. </span>CSS <code
   title="">@namespace</code> Rule</h4>

  <p>The <code><a href="#cssnamespacerule">CSSNamespaceRule</a></code> object
   represents an <code>@namespace</code> rule.

  <pre
   class=idl>interface <dfn id=cssnamespacerule>CSSNamespaceRule</dfn> : <a href="#cssrule">CSSRule</a> {
  readonly attribute DOMString <a href="#dom-cssnamespacerule-namespaceuri" title=dom-CSSNamespaceRule-namespaceURI>namespaceURI</a>;
  readonly attribute DOMString <a href="#dom-cssnamespacerule-prefix" title=dom-CSSNamespaceRule-prefix>prefix</a>;
};</pre>

  <p>The <dfn id=dom-cssnamespacerule-namespaceuri
   title=dom-CSSNamespaceRule-namespaceURI><code>namespaceURI</code></dfn>
   attribute, on getting, <em class=ct>must</em> return the namespace of the
   <code>@namespace</code> rule.

  <p>The <dfn id=dom-cssnamespacerule-prefix
   title=dom-CSSNamespaceRule-prefix><code>prefix</code></dfn> attribute, on
   getting, <em class=ct>must</em> return the prefix of the
   <code>@namespace</code> rule or the empty string if there is no prefix.

  <h3 id=css-declaration-blocks><span class=secno>7.3. </span>CSS Declaration
   Blocks</h3>

  <p class=XXX>To <dfn id=parse-a-css-declaration-block>parse a CSS
   declaration block</dfn> ...

  <p class=XXX>To <dfn id=serialize-a-css-declaration-block>serialize a CSS
   declaration block</dfn> ...

  <h4 id=the-cssstyledeclaration-interface><span class=secno>7.3.1.
   </span>The <code title="">CSSStyleDeclaration</code> Interface</h4>

  <p>Objects implementing the <code><a
   href="#cssstyledeclaration">CSSStyleDeclaration</a></code> interface give
   access to read and manipulate CSS properties and their values within a
   declaration block.

  <p>Objects implementing the <code><a
   href="#cssstyledeclaration">CSSStyleDeclaration</a></code> interface have
   the following associated concepts:

  <dl>
   <dt><dfn id=css-declaration-block-readonly-flag>CSS declaration block
    readonly flag</dfn>

   <dd>
    <p>Indicates whether or not the object can be modified (as detailed
     below). True when it cannot. False otherwise and by default.
   </dd>
   <!--
   <dt><dfn>CSS declaration block value type</dfn></dt>
   <dd><p>Indicates the type of value 
   
   -->

   <dt><dfn id=collection-of-css-declarations>collection of CSS
    declarations</dfn>

   <dd>
    <p>The CSS declarations associated with the object.
  </dl>
  <!-- XXX review nullable DOMString more carefully (DOMString?) -->

  <pre
   class=idl>interface <dfn id=cssstyledeclaration>CSSStyleDeclaration</dfn> {
           attribute DOMString <a href="#dom-cssstyledeclaration-csstext" title=dom-CSSStyleDeclaration-cssText>cssText</a>;
  DOMString <a href="#dom-cssstyledeclaration-getpropertyvalue" title=dom-CSSStyleDeclaration-getPropertyValue>getPropertyValue</a>(DOMString <var title="">property</var>);
  DOMString <a href="#dom-cssstyledeclaration-getpropertypriority" title=dom-CSSStyleDeclaration-getPropertyPriority>getPropertyPriority</a>(DOMString <var title="">property</var>);
  DOMString <a href="#dom-cssstyledeclaration-removeproperty" title=dom-CSSStyleDeclaration-removeProperty>removeProperty</a>(DOMString <var title="">property</var>);
  void <a href="#dom-cssstyledeclaration-setproperty" title=dom-CSSStyleDeclaration-setProperty>setProperty</a>(DOMString? <var title="">property</var>, DOMString? <var title="">value</var>);
  void <a href="#dom-cssstyledeclaration-setproperty" title=dom-CSSStyleDeclaration-setProperty>setProperty</a>(DOMString? <var title="">property</var>, DOMString? <var title="">value</var>, DOMString? <var title="">priority</var>);
  readonly attribute unsigned long <a href="#dom-cssstyledeclaration-length" title=dom-CSSStyleDeclaration-length>length</a>;
  DOMString <a href="#dom-cssstyledeclaration-item" title=dom-CSSStyleDeclaration-item>item</a>(unsigned long <var title="">index</var>);
  readonly attribute <a href="#cssrule">CSSRule</a> <a href="#dom-cssstyledeclaration-parentrule" title=dom-CSSStyleDeclaration-parentRule>parentRule</a>;

  // CSS Properties
           attribute DOMString? <a href="#dom-cssstyledeclaration-azimuth" title=dom-CSSStyleDeclaration-azimuth>azimuth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-background" title=dom-CSSStyleDeclaration-background>background</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-backgroundattachment" title=dom-CSSStyleDeclaration-backgroundAttachment>backgroundAttachment</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-backgroundcolor" title=dom-CSSStyleDeclaration-backgroundColor>backgroundColor</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-backgroundimage" title=dom-CSSStyleDeclaration-backgroundImage>backgroundImage</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-backgroundposition" title=dom-CSSStyleDeclaration-backgroundPosition>backgroundPosition</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-backgroundrepeat" title=dom-CSSStyleDeclaration-backgroundRepeat>backgroundRepeat</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-border" title=dom-CSSStyleDeclaration-border>border</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-bordercollapse" title=dom-CSSStyleDeclaration-borderCollapse>borderCollapse</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-bordercolor" title=dom-CSSStyleDeclaration-borderColor>borderColor</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderspacing" title=dom-CSSStyleDeclaration-borderSpacing>borderSpacing</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderstyle" title=dom-CSSStyleDeclaration-borderStyle>borderStyle</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-bordertop" title=dom-CSSStyleDeclaration-borderTop>borderTop</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderright" title=dom-CSSStyleDeclaration-borderRight>borderRight</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderbottom" title=dom-CSSStyleDeclaration-borderBottom>borderBottom</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderleft" title=dom-CSSStyleDeclaration-borderLeft>borderLeft</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-bordertopcolor" title=dom-CSSStyleDeclaration-borderTopColor>borderTopColor</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderrightcolor" title=dom-CSSStyleDeclaration-borderRightColor>borderRightColor</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderbottomcolor" title=dom-CSSStyleDeclaration-borderBottomColor>borderBottomColor</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderleftcolor" title=dom-CSSStyleDeclaration-borderLeftColor>borderLeftColor</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-bordertopstyle" title=dom-CSSStyleDeclaration-borderTopStyle>borderTopStyle</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderrightstyle" title=dom-CSSStyleDeclaration-borderRightStyle>borderRightStyle</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderbottomstyle" title=dom-CSSStyleDeclaration-borderBottomStyle>borderBottomStyle</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderleftstyle" title=dom-CSSStyleDeclaration-borderLeftStyle>borderLeftStyle</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-bordertopwidth" title=dom-CSSStyleDeclaration-borderTopWidth>borderTopWidth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderrightwidth" title=dom-CSSStyleDeclaration-borderRightWidth>borderRightWidth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderbottomwidth" title=dom-CSSStyleDeclaration-borderBottomWidth>borderBottomWidth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderleftwidth" title=dom-CSSStyleDeclaration-borderLeftWidth>borderLeftWidth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-borderwidth" title=dom-CSSStyleDeclaration-borderWidth>borderWidth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-bottom" title=dom-CSSStyleDeclaration-bottom>bottom</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-captionside" title=dom-CSSStyleDeclaration-captionSide>captionSide</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-clear" title=dom-CSSStyleDeclaration-clear>clear</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-clip" title=dom-CSSStyleDeclaration-clip>clip</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-color" title=dom-CSSStyleDeclaration-color>color</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-content" title=dom-CSSStyleDeclaration-content>content</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-counterincrement" title=dom-CSSStyleDeclaration-counterIncrement>counterIncrement</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-counterreset" title=dom-CSSStyleDeclaration-counterReset>counterReset</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-cue" title=dom-CSSStyleDeclaration-cue>cue</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-cueafter" title=dom-CSSStyleDeclaration-cueAfter>cueAfter</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-cuebefore" title=dom-CSSStyleDeclaration-cueBefore>cueBefore</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-cursor" title=dom-CSSStyleDeclaration-cursor>cursor</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-direction" title=dom-CSSStyleDeclaration-direction>direction</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-display" title=dom-CSSStyleDeclaration-display>display</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-elevation" title=dom-CSSStyleDeclaration-elevation>elevation</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-emptycells" title=dom-CSSStyleDeclaration-emptyCells>emptyCells</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-cssfloat" title=dom-CSSStyleDeclaration-cssFloat>cssFloat</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-font" title=dom-CSSStyleDeclaration-font>font</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-fontfamily" title=dom-CSSStyleDeclaration-fontFamily>fontFamily</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-fontsize" title=dom-CSSStyleDeclaration-fontSize>fontSize</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-fontsizeadjust" title=dom-CSSStyleDeclaration-fontSizeAdjust>fontSizeAdjust</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-fontstretch" title=dom-CSSStyleDeclaration-fontStretch>fontStretch</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-fontstyle" title=dom-CSSStyleDeclaration-fontStyle>fontStyle</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-fontvariant" title=dom-CSSStyleDeclaration-fontVariant>fontVariant</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-fontweight" title=dom-CSSStyleDeclaration-fontWeight>fontWeight</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-height" title=dom-CSSStyleDeclaration-height>height</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-left" title=dom-CSSStyleDeclaration-left>left</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-letterspacing" title=dom-CSSStyleDeclaration-letterSpacing>letterSpacing</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-lineheight" title=dom-CSSStyleDeclaration-lineHeight>lineHeight</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-liststyle" title=dom-CSSStyleDeclaration-listStyle>listStyle</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-liststyleimage" title=dom-CSSStyleDeclaration-listStyleImage>listStyleImage</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-liststyleposition" title=dom-CSSStyleDeclaration-listStylePosition>listStylePosition</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-liststyletype" title=dom-CSSStyleDeclaration-listStyleType>listStyleType</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-margin" title=dom-CSSStyleDeclaration-margin>margin</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-margintop" title=dom-CSSStyleDeclaration-marginTop>marginTop</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-marginright" title=dom-CSSStyleDeclaration-marginRight>marginRight</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-marginbottom" title=dom-CSSStyleDeclaration-marginBottom>marginBottom</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-marginleft" title=dom-CSSStyleDeclaration-marginLeft>marginLeft</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-markeroffset" title=dom-CSSStyleDeclaration-markerOffset>markerOffset</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-marks" title=dom-CSSStyleDeclaration-marks>marks</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-maxheight" title=dom-CSSStyleDeclaration-maxHeight>maxHeight</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-maxwidth" title=dom-CSSStyleDeclaration-maxWidth>maxWidth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-minheight" title=dom-CSSStyleDeclaration-minHeight>minHeight</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-minwidth" title=dom-CSSStyleDeclaration-minWidth>minWidth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-orphans" title=dom-CSSStyleDeclaration-orphans>orphans</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-outline" title=dom-CSSStyleDeclaration-outline>outline</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-outlinecolor" title=dom-CSSStyleDeclaration-outlineColor>outlineColor</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-outlinestyle" title=dom-CSSStyleDeclaration-outlineStyle>outlineStyle</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-outlinewidth" title=dom-CSSStyleDeclaration-outlineWidth>outlineWidth</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-overflow" title=dom-CSSStyleDeclaration-overflow>overflow</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-padding" title=dom-CSSStyleDeclaration-padding>padding</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-paddingtop" title=dom-CSSStyleDeclaration-paddingTop>paddingTop</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-paddingright" title=dom-CSSStyleDeclaration-paddingRight>paddingRight</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-paddingbottom" title=dom-CSSStyleDeclaration-paddingBottom>paddingBottom</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-paddingleft" title=dom-CSSStyleDeclaration-paddingLeft>paddingLeft</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-page" title=dom-CSSStyleDeclaration-page>page</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-pagebreakafter" title=dom-CSSStyleDeclaration-pageBreakAfter>pageBreakAfter</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-pagebreakbefore" title=dom-CSSStyleDeclaration-pageBreakBefore>pageBreakBefore</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-pagebreakinside" title=dom-CSSStyleDeclaration-pageBreakInside>pageBreakInside</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-pause" title=dom-CSSStyleDeclaration-pause>pause</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-pauseafter" title=dom-CSSStyleDeclaration-pauseAfter>pauseAfter</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-pausebefore" title=dom-CSSStyleDeclaration-pauseBefore>pauseBefore</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-pitch" title=dom-CSSStyleDeclaration-pitch>pitch</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-pitchrange" title=dom-CSSStyleDeclaration-pitchRange>pitchRange</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-playduring" title=dom-CSSStyleDeclaration-playDuring>playDuring</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-position" title=dom-CSSStyleDeclaration-position>position</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-quotes" title=dom-CSSStyleDeclaration-quotes>quotes</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-richness" title=dom-CSSStyleDeclaration-richness>richness</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-right" title=dom-CSSStyleDeclaration-right>right</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-size" title=dom-CSSStyleDeclaration-size>size</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-speak" title=dom-CSSStyleDeclaration-speak>speak</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-speakheader" title=dom-CSSStyleDeclaration-speakHeader>speakHeader</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-speaknumeral" title=dom-CSSStyleDeclaration-speakNumeral>speakNumeral</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-speakpunctuation" title=dom-CSSStyleDeclaration-speakPunctuation>speakPunctuation</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-speechrate" title=dom-CSSStyleDeclaration-speechRate>speechRate</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-stress" title=dom-CSSStyleDeclaration-stress>stress</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-tablelayout" title=dom-CSSStyleDeclaration-tableLayout>tableLayout</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-textalign" title=dom-CSSStyleDeclaration-textAlign>textAlign</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-textdecoration" title=dom-CSSStyleDeclaration-textDecoration>textDecoration</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-textindent" title=dom-CSSStyleDeclaration-textIndent>textIndent</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-textshadow" title=dom-CSSStyleDeclaration-textShadow>textShadow</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-texttransform" title=dom-CSSStyleDeclaration-textTransform>textTransform</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-top" title=dom-CSSStyleDeclaration-top>top</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-unicodebidi" title=dom-CSSStyleDeclaration-unicodeBidi>unicodeBidi</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-verticalalign" title=dom-CSSStyleDeclaration-verticalAlign>verticalAlign</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-visibility" title=dom-CSSStyleDeclaration-visibility>visibility</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-voicefamily" title=dom-CSSStyleDeclaration-voiceFamily>voiceFamily</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-volume" title=dom-CSSStyleDeclaration-volume>volume</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-whitespace" title=dom-CSSStyleDeclaration-whiteSpace>whiteSpace</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-widows" title=dom-CSSStyleDeclaration-widows>widows</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-width" title=dom-CSSStyleDeclaration-width>width</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-wordspacing" title=dom-CSSStyleDeclaration-wordSpacing>wordSpacing</a>;
           attribute DOMString? <a href="#dom-cssstyledeclaration-zindex" title=dom-CSSStyleDeclaration-zIndex>zIndex</a>;
};</pre>

  <p>The <dfn id=dom-cssstyledeclaration-csstext
   title=dom-CSSStyleDeclaration-cssText><code>cssText</code></dfn> attribute
   <em class=ct>must</em>, on getting, return the result of <a
   href="#serialize-a-css-declaration-block" title="serialize a CSS
   declaration block">serializing</a> the <a
   href="#collection-of-css-declarations">collection of CSS declarations</a>.

  <p>On setting the <code title="">cssText</code> attribute these steps <em
   class=ct>must</em> be run:

  <ol>
   <li>
    <p>If the <a href="#css-declaration-block-readonly-flag">CSS declaration
     block readonly flag</a> is true raise a
     <code>NO_MODIFICATION_ALLOWED_ERR</code> and terminate this algorithm.

   <li>
    <p>Empty the <a href="#collection-of-css-declarations">collection of CSS
     declarations</a>.

   <li>
    <p><a href="#parse-a-css-declaration-block" title="Parse a CSS
     declaration block">Parse</a> the given value and, if the return value is
     not null, append it to the <a
     href="#collection-of-css-declarations">collection of CSS
     declarations</a>.
  </ol>

  <p>The <dfn id=dom-cssstyledeclaration-getpropertyvalue
   title=dom-CSSStyleDeclaration-getPropertyValue><code>getPropertyValue(<var
   title="">property</var>)</code></dfn> method, when invoked, <span
   class=issue>...</span>.</p>
  <!-- Once we have defined how everything will be canonicalized we can start
  thinking about this... -->

  <p>The <dfn id=dom-cssstyledeclaration-getpropertypriority
   title=dom-CSSStyleDeclaration-getPropertyPriority><code>getPropertyPriority(<var
   title="">property</var>)</code></dfn> method, when invoked, if <var
   title="">property</var> is an <a href="#ascii-case-insensitive">ASCII
   case-insensitive</a> match for a property that has a priority user agents
   <em class=ct>must</em> return the canonical priority of that property as
   given in the syntax definition. Otherwise, the empty string <em
   class=ct>must</em> be returned.

  <p class=example>E.g. for <code>background-color:lime !IMPORTANT</code> the
   return value would be "<code title="">important</code>".

  <p>When the <dfn id=dom-cssstyledeclaration-removeproperty
   title=dom-CSSStyleDeclaration-removeProperty><code>removeProperty(<var
   title="">property</var>)</code></dfn> method is invoked these steps <em
   class=ct>must</em> be run:

  <ol>
   <li>
    <p>If the <a href="#css-declaration-block-readonly-flag">CSS declaration
     block readonly flag</a> is true raise a
     <code>NO_MODIFICATION_ALLOWED_ERR</code> and terminate this algorithm.

   <li>
    <p>If <var title="">property</var> is an <a
     href="#ascii-case-insensitive">ASCII case-insensitive</a> match for a
     property of a declaration in the <a
     href="#collection-of-css-declarations">collection of CSS
     declarations</a> remove the declaration.</p>
  </ol>

  <p>When the <dfn id=dom-cssstyledeclaration-setproperty
   title=dom-CSSStyleDeclaration-setProperty><code>setProperty(<var
   title="">property</var>, <var title="">value</var>, <var
   title="">priority</var>)</code></dfn> method is invoked these steps <em
   class=ct>must</em> be run:

  <ol>
   <li>
    <p>If the <a href="#css-declaration-block-readonly-flag">CSS declaration
     block readonly flag</a> is true raise a
     <code>NO_MODIFICATION_ALLOWED_ERR</code> and terminate this algorithm.

   <li>
    <p>If <var title="">property</var> does not case-insensitively match a
     supported property terminate this algorithm.

   <li>
    <p>If <var title="">value</var> is null or the empty string invoke <code
     title=dom-CSSStyleDeclaration-removeProperty><a
     href="#dom-cssstyledeclaration-removeproperty">removeProperty()</a></code>
     with <var title="">property</var> as argument and terminate this
     algorithm.

   <li>
    <p>If the <var title="">priority</var> argument has been omitted let <var
     title="">priority</var> be the empty string.

   <li>
    <p>If <var title="">priority</var> is neither a valid priority nor the
     empty string terminate this algorithm.
   </li>
   <!-- define valid priority somehow -->

   <li>
    <p>If <a href="#parse-a-css-value" title="parse a CSS value">parsing the
     <var title="">value</var></a> returns null abort this algorithm.</p>

    <p class=note><var title="">value</var> can not include "<code
     title="">!important</code>".</p>

   <li>
    <p>Finally, set <var title="">property</var> to <var title="">value</var>
     with priority <var title="">priority</var> when <var
     title="">priority</var> is not the empty string. Otherwise set <var
     title="">property</var> to <var title="">value</var>.
  </ol>
  <!-- XXX WebIDL work -->

  <p>The <dfn id=dom-cssstyledeclaration-length
   title=dom-CSSStyleDeclaration-length><code>length</code></dfn> attribute
   <em class=ct>must</em> return the number of declarations in the <a
   href="#collection-of-css-declarations">collection of CSS declarations</a>.

  <p>The <dfn id=dom-cssstyledeclaration-item
   title=dom-CSSStyleDeclaration-item><code>item(<var
   title="">index</var>)</code></dfn> method, when invoked, <span
   class=issue>...</span>.</p>
  <!-- returns the value of property x stored at position item. -->

  <p>The <dfn id=dom-cssstyledeclaration-parentrule
   title=dom-CSSStyleDeclaration-parentRule><code>parentRule</code></dfn>
   attribute, on getting, <em class=ct>must</em> return the <code><a
   href="#cssrule">CSSrule</a></code> object the <code><a
   href="#cssstyledeclaration">CSSStyleDeclaration</a></code> is object is
   associated with or null if it is not associated with a <code><a
   href="#cssrule">CSSrule</a></code> object.</p>
  <!-- XXX introduce a concept for this instead -->

  <p>For the table below, the IDL attribute in the first column <em
   class=ct>must</em>, on getting return the result of invoking <code
   title=dom-CSSStyleDeclaration-getPropertyValue><a
   href="#dom-cssstyledeclaration-getpropertyvalue">getPropertyValue()</a></code>
   with as argument the CSS property given in the second column on the same
   row.

  <p>Similarly for the table below, setting the IDL attribute in the first
   column <em class=ct>must</em> invoke <code
   title=dom-CSSStyleDeclaration-setProperty><a
   href="#dom-cssstyledeclaration-setproperty">setProperty()</a></code> with
   as first argument the CSS property given in the second column on the same
   row, as second argument the given value, and no third argument. Any
   exceptions raised <em class=ct>must</em> be re-raised.

  <table>
   <thead>
    <tr>
     <th>IDL attribute

     <th>CSS property

   <tbody>
    <tr>
     <td><dfn id=dom-cssstyledeclaration-azimuth
      title=dom-CSSStyleDeclaration-azimuth><code>azimuth</code></dfn>

     <td>"<code>azimuth</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-background
      title=dom-CSSStyleDeclaration-background><code>background</code></dfn>

     <td>"<code>background</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-backgroundattachment
      title=dom-CSSStyleDeclaration-backgroundAttachment><code>backgroundAttachment</code></dfn>

     <td>"<code>background-attachment</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-backgroundcolor
      title=dom-CSSStyleDeclaration-backgroundColor><code>backgroundColor</code></dfn>

     <td>"<code>background-color</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-backgroundimage
      title=dom-CSSStyleDeclaration-backgroundImage><code>backgroundImage</code></dfn>

     <td>"<code>background-image</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-backgroundposition
      title=dom-CSSStyleDeclaration-backgroundPosition><code>backgroundPosition</code></dfn>

     <td>"<code>background-position</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-backgroundrepeat
      title=dom-CSSStyleDeclaration-backgroundRepeat><code>backgroundRepeat</code></dfn>

     <td>"<code>background-repeat</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-border
      title=dom-CSSStyleDeclaration-border><code>border</code></dfn>

     <td>"<code>border</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-bordercollapse
      title=dom-CSSStyleDeclaration-borderCollapse><code>borderCollapse</code></dfn>

     <td>"<code>border-collapse</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-bordercolor
      title=dom-CSSStyleDeclaration-borderColor><code>borderColor</code></dfn>

     <td>"<code>border-color</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderspacing
      title=dom-CSSStyleDeclaration-borderSpacing><code>borderSpacing</code></dfn>

     <td>"<code>border-spacing</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderstyle
      title=dom-CSSStyleDeclaration-borderStyle><code>borderStyle</code></dfn>

     <td>"<code>border-style</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-bordertop
      title=dom-CSSStyleDeclaration-borderTop><code>borderTop</code></dfn>

     <td>"<code>border-top</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderright
      title=dom-CSSStyleDeclaration-borderRight><code>borderRight</code></dfn>

     <td>"<code>border-right</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderbottom
      title=dom-CSSStyleDeclaration-borderBottom><code>borderBottom</code></dfn>

     <td>"<code>border-bottom</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderleft
      title=dom-CSSStyleDeclaration-borderLeft><code>borderLeft</code></dfn>

     <td>"<code>border-left</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-bordertopcolor
      title=dom-CSSStyleDeclaration-borderTopColor><code>borderTopColor</code></dfn>

     <td>"<code>border-top-color</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderrightcolor
      title=dom-CSSStyleDeclaration-borderRightColor><code>borderRightColor</code></dfn>

     <td>"<code>border-right-color</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderbottomcolor
      title=dom-CSSStyleDeclaration-borderBottomColor><code>borderBottomColor</code></dfn>

     <td>"<code>border-bottom-color</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderleftcolor
      title=dom-CSSStyleDeclaration-borderLeftColor><code>borderLeftColor</code></dfn>

     <td>"<code>border-left-color</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-bordertopstyle
      title=dom-CSSStyleDeclaration-borderTopStyle><code>borderTopStyle</code></dfn>

     <td>"<code>border-top-style</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderrightstyle
      title=dom-CSSStyleDeclaration-borderRightStyle><code>borderRightStyle</code></dfn>

     <td>"<code>border-right-style</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderbottomstyle
      title=dom-CSSStyleDeclaration-borderBottomStyle><code>borderBottomStyle</code></dfn>

     <td>"<code>border-bottom-style</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderleftstyle
      title=dom-CSSStyleDeclaration-borderLeftStyle><code>borderLeftStyle</code></dfn>

     <td>"<code>border-left-style</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-bordertopwidth
      title=dom-CSSStyleDeclaration-borderTopWidth><code>borderTopWidth</code></dfn>

     <td>"<code>border-top-width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderrightwidth
      title=dom-CSSStyleDeclaration-borderRightWidth><code>borderRightWidth</code></dfn>

     <td>"<code>border-right-width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderbottomwidth
      title=dom-CSSStyleDeclaration-borderBottomWidth><code>borderBottomWidth</code></dfn>

     <td>"<code>border-bottom-width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderleftwidth
      title=dom-CSSStyleDeclaration-borderLeftWidth><code>borderLeftWidth</code></dfn>

     <td>"<code>border-left-width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-borderwidth
      title=dom-CSSStyleDeclaration-borderWidth><code>borderWidth</code></dfn>

     <td>"<code>border-width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-bottom
      title=dom-CSSStyleDeclaration-bottom><code>bottom</code></dfn>

     <td>"<code>bottom</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-captionside
      title=dom-CSSStyleDeclaration-captionSide><code>captionSide</code></dfn>

     <td>"<code>caption-side</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-clear
      title=dom-CSSStyleDeclaration-clear><code>clear</code></dfn>

     <td>"<code>clear</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-clip
      title=dom-CSSStyleDeclaration-clip><code>clip</code></dfn>

     <td>"<code>clip</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-color
      title=dom-CSSStyleDeclaration-color><code>color</code></dfn>

     <td>"<code>color</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-content
      title=dom-CSSStyleDeclaration-content><code>content</code></dfn>

     <td>"<code>content</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-counterincrement
      title=dom-CSSStyleDeclaration-counterIncrement><code>counterIncrement</code></dfn>

     <td>"<code>counter-increment</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-counterreset
      title=dom-CSSStyleDeclaration-counterReset><code>counterReset</code></dfn>

     <td>"<code>counter-reset</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-cue
      title=dom-CSSStyleDeclaration-cue><code>cue</code></dfn>

     <td>"<code>cue</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-cueafter
      title=dom-CSSStyleDeclaration-cueAfter><code>cueAfter</code></dfn>

     <td>"<code>cue-after</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-cuebefore
      title=dom-CSSStyleDeclaration-cueBefore><code>cueBefore</code></dfn>

     <td>"<code>cue-before</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-cursor
      title=dom-CSSStyleDeclaration-cursor><code>cursor</code></dfn>

     <td>"<code>cursor</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-direction
      title=dom-CSSStyleDeclaration-direction><code>direction</code></dfn>

     <td>"<code>direction</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-display
      title=dom-CSSStyleDeclaration-display><code>display</code></dfn>

     <td>"<code>display</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-elevation
      title=dom-CSSStyleDeclaration-elevation><code>elevation</code></dfn>

     <td>"<code>elevation</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-emptycells
      title=dom-CSSStyleDeclaration-emptyCells><code>emptyCells</code></dfn>

     <td>"<code>empty-cells</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-cssfloat
      title=dom-CSSStyleDeclaration-cssFloat><code>cssFloat</code></dfn>

     <td>"<code>float</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-font
      title=dom-CSSStyleDeclaration-font><code>font</code></dfn>

     <td>"<code>font</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-fontfamily
      title=dom-CSSStyleDeclaration-fontFamily><code>fontFamily</code></dfn>

     <td>"<code>font-family</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-fontsize
      title=dom-CSSStyleDeclaration-fontSize><code>fontSize</code></dfn>

     <td>"<code>font-size</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-fontsizeadjust
      title=dom-CSSStyleDeclaration-fontSizeAdjust><code>fontSizeAdjust</code></dfn>

     <td>"<code>font-size-adjust</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-fontstretch
      title=dom-CSSStyleDeclaration-fontStretch><code>fontStretch</code></dfn>

     <td>"<code>font-stretch</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-fontstyle
      title=dom-CSSStyleDeclaration-fontStyle><code>fontStyle</code></dfn>

     <td>"<code>font-style</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-fontvariant
      title=dom-CSSStyleDeclaration-fontVariant><code>fontVariant</code></dfn>

     <td>"<code>font-variant</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-fontweight
      title=dom-CSSStyleDeclaration-fontWeight><code>fontWeight</code></dfn>

     <td>"<code>font-weight</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-height
      title=dom-CSSStyleDeclaration-height><code>height</code></dfn>

     <td>"<code>height</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-left
      title=dom-CSSStyleDeclaration-left><code>left</code></dfn>

     <td>"<code>left</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-letterspacing
      title=dom-CSSStyleDeclaration-letterSpacing><code>letterSpacing</code></dfn>

     <td>"<code>letter-spacing</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-lineheight
      title=dom-CSSStyleDeclaration-lineHeight><code>lineHeight</code></dfn>

     <td>"<code>line-height</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-liststyle
      title=dom-CSSStyleDeclaration-listStyle><code>listStyle</code></dfn>

     <td>"<code>list-style</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-liststyleimage
      title=dom-CSSStyleDeclaration-listStyleImage><code>listStyleImage</code></dfn>

     <td>"<code>list-style-image</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-liststyleposition
      title=dom-CSSStyleDeclaration-listStylePosition><code>listStylePosition</code></dfn>

     <td>"<code>list-style-position</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-liststyletype
      title=dom-CSSStyleDeclaration-listStyleType><code>listStyleType</code></dfn>

     <td>"<code>list-style-type</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-margin
      title=dom-CSSStyleDeclaration-margin><code>margin</code></dfn>

     <td>"<code>margin</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-margintop
      title=dom-CSSStyleDeclaration-marginTop><code>marginTop</code></dfn>

     <td>"<code>margin-top</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-marginright
      title=dom-CSSStyleDeclaration-marginRight><code>marginRight</code></dfn>

     <td>"<code>margin-right</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-marginbottom
      title=dom-CSSStyleDeclaration-marginBottom><code>marginBottom</code></dfn>

     <td>"<code>margin-bottom</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-marginleft
      title=dom-CSSStyleDeclaration-marginLeft><code>marginLeft</code></dfn>

     <td>"<code>margin-left</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-markeroffset
      title=dom-CSSStyleDeclaration-markerOffset><code>markerOffset</code></dfn>

     <td>"<code>marker-offset</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-marks
      title=dom-CSSStyleDeclaration-marks><code>marks</code></dfn>

     <td>"<code>marks</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-maxheight
      title=dom-CSSStyleDeclaration-maxHeight><code>maxHeight</code></dfn>

     <td>"<code>max-height</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-maxwidth
      title=dom-CSSStyleDeclaration-maxWidth><code>maxWidth</code></dfn>

     <td>"<code>max-width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-minheight
      title=dom-CSSStyleDeclaration-minHeight><code>minHeight</code></dfn>

     <td>"<code>min-height</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-minwidth
      title=dom-CSSStyleDeclaration-minWidth><code>minWidth</code></dfn>

     <td>"<code>min-width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-orphans
      title=dom-CSSStyleDeclaration-orphans><code>orphans</code></dfn>

     <td>"<code>orphans</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-outline
      title=dom-CSSStyleDeclaration-outline><code>outline</code></dfn>

     <td>"<code>outline</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-outlinecolor
      title=dom-CSSStyleDeclaration-outlineColor><code>outlineColor</code></dfn>

     <td>"<code>outline-color</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-outlinestyle
      title=dom-CSSStyleDeclaration-outlineStyle><code>outlineStyle</code></dfn>

     <td>"<code>outline-style</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-outlinewidth
      title=dom-CSSStyleDeclaration-outlineWidth><code>outlineWidth</code></dfn>

     <td>"<code>outline-width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-overflow
      title=dom-CSSStyleDeclaration-overflow><code>overflow</code></dfn>

     <td>"<code>overflow</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-padding
      title=dom-CSSStyleDeclaration-padding><code>padding</code></dfn>

     <td>"<code>padding</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-paddingtop
      title=dom-CSSStyleDeclaration-paddingTop><code>paddingTop</code></dfn>

     <td>"<code>padding-top</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-paddingright
      title=dom-CSSStyleDeclaration-paddingRight><code>paddingRight</code></dfn>

     <td>"<code>padding-right</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-paddingbottom
      title=dom-CSSStyleDeclaration-paddingBottom><code>paddingBottom</code></dfn>

     <td>"<code>padding-bottom</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-paddingleft
      title=dom-CSSStyleDeclaration-paddingLeft><code>paddingLeft</code></dfn>

     <td>"<code>padding-left</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-page
      title=dom-CSSStyleDeclaration-page><code>page</code></dfn>

     <td>"<code>page</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-pagebreakafter
      title=dom-CSSStyleDeclaration-pageBreakAfter><code>pageBreakAfter</code></dfn>

     <td>"<code>page-break-after</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-pagebreakbefore
      title=dom-CSSStyleDeclaration-pageBreakBefore><code>pageBreakBefore</code></dfn>

     <td>"<code>page-break-before</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-pagebreakinside
      title=dom-CSSStyleDeclaration-pageBreakInside><code>pageBreakInside</code></dfn>

     <td>"<code>page-break-inside</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-pause
      title=dom-CSSStyleDeclaration-pause><code>pause</code></dfn>

     <td>"<code>pause</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-pauseafter
      title=dom-CSSStyleDeclaration-pauseAfter><code>pauseAfter</code></dfn>

     <td>"<code>pause-after</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-pausebefore
      title=dom-CSSStyleDeclaration-pauseBefore><code>pauseBefore</code></dfn>

     <td>"<code>pause-before</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-pitch
      title=dom-CSSStyleDeclaration-pitch><code>pitch</code></dfn>

     <td>"<code>pitch</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-pitchrange
      title=dom-CSSStyleDeclaration-pitchRange><code>pitchRange</code></dfn>

     <td>"<code>pitch-range</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-playduring
      title=dom-CSSStyleDeclaration-playDuring><code>playDuring</code></dfn>

     <td>"<code>play-during</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-position
      title=dom-CSSStyleDeclaration-position><code>position</code></dfn>

     <td>"<code>position</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-quotes
      title=dom-CSSStyleDeclaration-quotes><code>quotes</code></dfn>

     <td>"<code>quotes</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-richness
      title=dom-CSSStyleDeclaration-richness><code>richness</code></dfn>

     <td>"<code>richness</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-right
      title=dom-CSSStyleDeclaration-right><code>right</code></dfn>

     <td>"<code>right</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-size
      title=dom-CSSStyleDeclaration-size><code>size</code></dfn>

     <td>"<code>size</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-speak
      title=dom-CSSStyleDeclaration-speak><code>speak</code></dfn>

     <td>"<code>speak</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-speakheader
      title=dom-CSSStyleDeclaration-speakHeader><code>speakHeader</code></dfn>

     <td>"<code>speak-header</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-speaknumeral
      title=dom-CSSStyleDeclaration-speakNumeral><code>speakNumeral</code></dfn>

     <td>"<code>speak-numeral</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-speakpunctuation
      title=dom-CSSStyleDeclaration-speakPunctuation><code>speakPunctuation</code></dfn>

     <td>"<code>speak-punctuation</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-speechrate
      title=dom-CSSStyleDeclaration-speechRate><code>speechRate</code></dfn>

     <td>"<code>speech-rate</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-stress
      title=dom-CSSStyleDeclaration-stress><code>stress</code></dfn>

     <td>"<code>stress</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-tablelayout
      title=dom-CSSStyleDeclaration-tableLayout><code>tableLayout</code></dfn>

     <td>"<code>table-layout</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-textalign
      title=dom-CSSStyleDeclaration-textAlign><code>textAlign</code></dfn>

     <td>"<code>text-align</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-textdecoration
      title=dom-CSSStyleDeclaration-textDecoration><code>textDecoration</code></dfn>

     <td>"<code>text-decoration</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-textindent
      title=dom-CSSStyleDeclaration-textIndent><code>textIndent</code></dfn>

     <td>"<code>text-indent</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-textshadow
      title=dom-CSSStyleDeclaration-textShadow><code>textShadow</code></dfn>

     <td>"<code>text-shadow</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-texttransform
      title=dom-CSSStyleDeclaration-textTransform><code>textTransform</code></dfn>

     <td>"<code>text-transform</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-top
      title=dom-CSSStyleDeclaration-top><code>top</code></dfn>

     <td>"<code>top</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-unicodebidi
      title=dom-CSSStyleDeclaration-unicodeBidi><code>unicodeBidi</code></dfn>

     <td>"<code>unicode-bidi</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-verticalalign
      title=dom-CSSStyleDeclaration-verticalAlign><code>verticalAlign</code></dfn>

     <td>"<code>vertical-align</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-visibility
      title=dom-CSSStyleDeclaration-visibility><code>visibility</code></dfn>

     <td>"<code>visibility</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-voicefamily
      title=dom-CSSStyleDeclaration-voiceFamily><code>voiceFamily</code></dfn>

     <td>"<code>voice-family</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-volume
      title=dom-CSSStyleDeclaration-volume><code>volume</code></dfn>

     <td>"<code>volume</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-whitespace
      title=dom-CSSStyleDeclaration-whiteSpace><code>whiteSpace</code></dfn>

     <td>"<code>white-space</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-widows
      title=dom-CSSStyleDeclaration-widows><code>widows</code></dfn>

     <td>"<code>widows</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-width
      title=dom-CSSStyleDeclaration-width><code>width</code></dfn>

     <td>"<code>width</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-wordspacing
      title=dom-CSSStyleDeclaration-wordSpacing><code>wordSpacing</code></dfn>

     <td>"<code>word-spacing</code>"

    <tr>
     <td><dfn id=dom-cssstyledeclaration-zindex
      title=dom-CSSStyleDeclaration-zIndex><code>zIndex</code></dfn>

     <td>"<code>z-index</code>"
  </table>
  <!--
  <h4>CSS Properties</h4>

  <p>The DOM attribute name of a CSS property can be found by using the
  following algorithm:</p>

  <ol>
   <li>Let <var title="">r</var> be the CSS property to be
   converted.</li>

   <li>Uppercase the first character after every U+002D (<code>-</code>) in
   <var title="">r</var>.</li>

   <li>Remove every U+002D (<code>-</code>) in <var title="">r</var>.</li>

   <li>Return <var title="">r</var>.</li>
  </ol>

  <p class="note">This means that
  <code>-<var title="">vendor</var>-<var title="">property</var></code>
  becomes
  <code><var title=""><strong>V</strong>endor</var><var title=""><strong>P</strong>roperty</var></code>
  for instance.</p>
-->

  <h3 id=css-values><span class=secno>7.4. </span>CSS Values</h3>

  <h4 id=parsing-css-values><span class=secno>7.4.1. </span>Parsing CSS
   Values</h4>

  <p>To <dfn id=parse-a-css-value>parse a CSS value</dfn> for a given <var
   title="">property</var> means to a parse the given value according to the
   definition of the property that is an <a
   href="#ascii-case-insensitive">ASCII case-insensitive</a> match for <var
   title="">property</var> in the CSS specification. If the given value is
   <span>ignored</span> return null. Otherwise return the CSS value for the
   given <var title="">property</var>.

  <p class=note>"<code title="">!important</code>" declarations are not part
   of the property value space and will therefore cause <a
   href="#parse-a-css-value">parse a CSS value</a> to return null.

  <h4 id=serializing-css-values><span class=secno>7.4.2. </span>Serializing
   CSS Values</h4>
  <!-- based on http://damowmow.com/playground/canon.txt -->

  <p>To <dfn id=serialize-a-css-value>serialize a CSS value</dfn> run these
   steps:

  <p class=XXX>This needs some work, obviously.

  <p>To <dfn id=serialize-a-css-value-component>serialize a CSS value
   component</dfn> depends on the component, as follows:

  <dl>
   <dt>keyword

   <dd>
    <p>The keyword <span>converted to ASCII lowercase</span>.

   <dt>&lt;angle>

   <dd>
    <p>The number of degrees serialized as per &lt;number> followed by the
     literal string "<code>deg</code>".

   <dt>&lt;color>

   <dd>
    <p class=XXX>preserve system colors, maybe color keywords...

   <dt>&lt;frequency>

   <dd>
    <p>The frequency in hertz serialized as per &lt;number> followed by the
     literal string "<code>hz</code>".

   <dt>&lt;identifier>

   <dd>
    <p>The identifier <a href="#escape-an-identifier" title="escape an
     identifier">escaped</a>.

   <dt>&lt;integer>

   <dd>
    <p>A base-ten integer using digits 0-9 (U+0030 to U+0039) in the shortest
     form possible, preceded by a "<code>-</code>" (U+002D) if it is
     negative.

   <dt>&lt;length>

   <dd>
    <p>A length of zero is represented by the literal string
     "<code>0px</code>".</p>

    <p>Absolute lengths: the number of millimeters serialized as per
     &lt;number> followed by the literal string "<code>mm</code>". <span
     class=XXX>Rumor has it absolute lengths will become relative lengths. If
     not, change to centimeters?</span></p>

    <p>Relative lengths: the &lt;number> component serialized as per
     &lt;number> followed by the unit in its canonical form as defined in its
     respective specification.</p>

   <dt>&lt;number>

   <dd>
    <p class=XXX>Browsers seem to use ToString(), but that might give a
     significand which according to some is teh evil (and also currently does
     not parse correctly).

   <dt>&lt;percentage>

   <dd>
    <p>The &lt;number> component serialized as per &lt;number> followed by
     the literal string "<code>%</code>" (U+0025).

   <dt>&lt;resolution>

   <dd>
    <p>The resolution in dots per centimeter serialized as per &lt;number>
     followed by the literal string "<code>dpcm</code>".

   <dt>&lt;string>

   <dd>
    <p>A literal '<code>"</code>' (U+0022), followed by the <a
     href="#escape-a-string" title="escape a string">escaped</a> string
     value, followed by a literal '<code>"</code>' (U+0022).

   <dt>&lt;time>

   <dd>
    <p>The time in seconds serialized as per &lt;number> followed by the
     literal string "<code>s</code>".

   <dt>&lt;uri>

   <dd>
    <p>The <span>absolute URL</span> <a href="#escape-a-url" title="escape a
     URL">escaped</a>.
  </dl>

  <p>To <dfn id=escape-a-character>escape a character</dfn> means to create a
   string of "<code>\</code>" (U+005C), followed by the character.

  <p>To <dfn id=escape-a-character-as-code-point>escape a character as code
   point</dfn> means to create a string of "<code>\</code>" (U+005C),
   followed by the Unicode code point as the smallest possible number of
   hexadecimal digits in the range 0-9 a-f (U+0030 to U+0039 and U+0061 to
   U+0066) to represent the code point in base 16, followed by a space
   (U+0020).

  <p>To <dfn id=escape-an-identifier>escape an identifier</dfn> means to
   create a string represented by the concatenation of, for each character of
   the identifier:

  <ul>
   <li>If the character is in the range U+0000 to U+001F, the character <a
    href="#escape-a-character-as-code-point" title="escape a character as
    code point">escaped as code point</a>.

   <li>If the character is the first character and is in the range 0-9
    (U+0030 to U+0039), the character <a
    href="#escape-a-character-as-code-point" title="escape a character as
    code point">escaped as code point</a>.

   <li>If the character is the second character and is in the range 0-9
    (U+0030 to U+0039) and the first character is a "<code>-</code>"
    (U+002D), the character <a href="#escape-a-character-as-code-point"
    title="escape a character as code point">escaped as code point</a>.

   <li>If the character is the second character and is "<code>-</code>"
    (U+002D) and the first character is "<code>-</code>" too, the <a
    href="#escape-a-character" title="escape a character">escaped</a>
    character.

   <li>If the character is not handled by one of the above rules and is
    greater than or equal to U+0080, is "<code>-</code>" (U+002D) or
    "<code>_</code>" (U+005F), or is in one of the ranges 0-9 (U+0030 to
    U+0039), A-Z (U+0041 to U+005A), or a-z (U+0061 to U+007A), the character
    itself.

   <li>Otherwise, the <a href="#escape-a-character" title="escape a
    character">escaped</a> character.
  </ul>

  <p>To <dfn id=escape-a-string>escape a string</dfn> means to create a
   string represented by the concatenation of, for each character of the
   given string:

  <ul>
   <li>If the character is in the range U+0000 to U+001F, the character <a
    href="#escape-a-character-as-code-point" title="escape a character as
    code point">escaped as code point</a>.

   <li>If the character is '<code>"</code>' (U+0022) or '<code>\</code>'
    (U+005C), the <a href="#escape-a-character" title="escape a
    character">escaped</a> character.

   <li>Otherwise, the character itself.
  </ul>

  <p class=note>"<code>'</code>" (U+0027) is not escaped because strings are
   always serialized with '<code>"</code>' (U+0022).

  <p>To <dfn id=escape-a-url>escape a URL</dfn> means to create a string
   represented by '<code title="">url("</code>', followed by the <a
   href="#escape-a-string" title="escape a string">escaped</a> value of the
   given string, followed by <code>")</code>.</p>
  <!--
  <ol>
   <li><p>Relative lengths (<code>em</code>, <code>ex</code>, <code>px</code>,
   all the font-size keywords and <code>%</code>) do not have their units
   changed. However, absolute lengths must be given in millimeters. For example,
   the canonical version of <code>+012.0pt</code> is <code>4.2333mm</code> (give
   or take a few significant figures). <span class="note"><em>Computed</em>
   values may well be in different units than the specified value. User agents
   are to use <code>px</code> as their final units for computed length
   values.</span></p></li>

   <li><p>When a <code>&lt;length></code> of zero is given change it to
   "<code>0px</code>"</p></li>
   
   <li>
    <p>A <code>&lt;color></code> value is canonicalized as follows:</p>

    <dl>
     <dt>It is a system color</dt>

     <dd>See below (you use the representation given in the specification that
     defines the keyword).</dd>

     <dt>Alpha component is equal to 1.0</dt>

     <dd>The color is an uppercase six-digit hexadecimal value, prefixed with a
     <code>#</code> character (U+0023 NUMBER SIGN), with the first two digits
     representing the red component, the next two digits representing the green
     component, and the last two digits representing the blue component, the
     digits being in the range 0-9 A-F (U+0030 to U+0039 and U+0041 to
     U+0046).</dd>

     <dt>Alpha component is less than 1.0</dt>

     <dd>The color is in the CSS <code>rgba()</code> functional-notation format:
     the literal string <code>rgba</code> (U+0072 U+0067 U+0062 U+0061) followed
     by a U+0028 LEFT PARENTHESIS, a <span>color component integer</span>
     representing the red component, a <span>color component separator</span>, a
     <span>color component integer</span> for the green component, a <span>color
     component separator</span>, a <span>color component integer</span> for the
     blue component, another <span>color component separator</span> a U+0030
     DIGIT ZERO, a U+002E FULL STOP (representing the decimal point), one or
     more digits in the range 0-9 (U+0030 to U+0039) representing the fractional
     part of the alpha value, and finally a U+0029 RIGHT PARENTHESIS.</dd>

     <dt>The keyword <code>transparent</code> is used</dt>

     <dd>The color is <code>rgba(0, 0, 0, 0)</code>.</dd>
    </dl>
   </li>

   <li><p>Angles are canonicalized to <code>deg</code> and normalized to the
   range of their property. For example, <code>azimuth: 700grad</code> would be
   canonicalized to <code>azimuth: 270deg</code>. This also applies to angle
   keywords as used in the <code>elevation</code> and <code>azimuth</code>
   properties, they are canonicalized to their value in degrees.</p></li>
   
   <li><p>Times are canonicalized to seconds (<code>s</code>).</p></li>
   
   <li><p>Frequencies are canonicalized to Hertz (<code>Hz</code>).</p></li>
   
   <li><p>For all integers and real numbers, including those with units, these
   canonicalization steps <em class="ct">must</em> be followed: If the number
   is <code>0</code>, the canonical result is the literal string <code>0</code>
   plus any units (for lengths, the unit identifier will have been removed
   before this step). Otherwise, leading <!- -and trailing - ->zeros
   <em class="ct">must</em> be omitted, any leading <code>+</code>
   <em class="ct">must</em> be omitted, the decimal point in a real number
   <em class="ct">must</em> be omitted unless there is a fractional part, and if
   the number is in the range <code>-1 &lt; <var>x</var> &lt; 1</code>, then one
   leading <code>0</code> <em class="ct">must</em> be inserted before the
   decimal point. The number of given significant figures is completely user
   agent dependent.</p></li>
   
   <li><p>Where multiple values may appear in any order without changing the
   meaning of the value (typically represented by a double bar <code>||</code>
   in the value syntax), user agents are to use the canonical order as given in
   the syntax (e.g. <code>&lt;border-width> &lt;border-style> &lt;color></code>
   for the <code>border</code> short-hand property).</p></li>
   
   <li><p>When repeated values may be omitted without changing the meaning of
   the value (e.g. as in the <code>margin</code> and <code>padding</code>
   properties), then the fewest number of values should be given.</p></li>
   
   <li><p>If whitespace may be removed without changing the meaning of the value
   it is to be removed.</p></li>
   
   <li><p><code>&lt;specific-voice></code> and <code>&lt;family-name</code>
   values are to be quoted.</p></li>
   
   <li><p>Double quotes (rather than single quotes) <em class="ct">shall</em> be
   used for string quotation. (When changing from single quotes to double
   quotes, double quotes already in the string are escaped.)</p></li>
   
   <li><p>The quotes in the <code>&lt;uri></code> form should be removed.
   (Parenthesises that were in the string, along with any other characters not
   legal when the string is not quoted (such as commas), must be
   escaped.)</p></li>
   
   <li><p>Unnecessary escapes should be removed. (For example, <code>\z</code>
   should be represented as <code>z</code>. This extends to unescaping UNICODE
   escapes, except, of course, if the encoding cannot contain those
   characters!)</p></li>
   
   <li><p>Where components of the value may be dropped without changing the
   meaning of the value (for example, initial values in shorthand properties),
   then they should be removed. If this would remove all the values, then the
   first allowed value must be given (For example, for <code>background</code>
   that would be <code>rgba(0, 0, 0, 0)</code> since
   <code>background-color</code> is the first component of the value; for
   <code>border</code> it would be <code>0</code> since the first component of
   that value is <code>border-width</code>).</p></li>
   
   <li>
    <p>A single space should be added after each comma that is not part of a
     string, except where that would change the meaning of the value. For
     example:</p>
    
    <pre>foo,bar,baz</pre>
    
    <p>should become:</p>
    
    <pre>foo, bar, baz</pre>
   </li>
   
   <li>
    <p>Whenever case is insensitive, for example in property or counter names,
     the text should be changed to the canonical case as given in the syntax
     definition. For example, the canonical value of:</p>
    
    <pre>COUNTER( PAR-NUM,UPPER-ROMAN ) DISC</pre>
    
    <p>is:</p>
    
    <pre>counter(par-num, upper-roman) disc</pre>
    
    <p>but the color <code>WINDOWTEXT</code> becomes
    <code>WindowText</code>.</p>
   </li>
  </ol>
  -->

  <h5 id=examples0><span class=secno>7.4.2.1. </span>Examples</h5>

  <p>Here are some examples of before and after results on specified values.
   The before column could be what the author wrote in a style sheet, while
   the after column shows what querying the DOM would return.

  <div class=example>
   <table>
    <thead>
     <tr>
      <th>Before

      <th>After

    <tbody>
     <tr>
      <td><code>background: none</code>

      <td><code>background: rgba(0, 0, 0, 0)</code>

     <tr>
      <td><code>outline: none</code>

      <td><code>outline: invert</code>

     <tr>
      <td><code>border: none</code>

      <td><code>border: medium</code>

     <tr>
      <td><code>list-style: none</code>

      <td><code>list-style: disc</code>

     <tr>
      <td><code>margin: 0 1px 1px 1px</code>

      <td><code>margin: 0px 1px 1px</code>

     <tr>
      <td><code>azimuth: behind left</code>

      <td><code>azimuth: 220deg</code>

     <tr>
      <td><code>font-family: a, 'b"', serif</code>

      <td><code>font-family: "a", "b\"", serif</code>

     <tr>
      <td><code>content: url('h)i') '\[\]'</code>

      <td><code>content: url("h)i") "[]"</code>

     <tr>
      <td><code>azimuth: leftwards</code>

      <td><code>azimuth: leftwards</code>

     <tr>
      <td><code>color: rgb(18, 52, 86)</code>

      <td><code>color: #123456</code>

     <tr>
      <td><code>color: rgba(000001, 0, 0, 1)</code>

      <td><code>color: #000000</code>
   </table>
  </div>

  <h2 id=dom-access-to-css-declaration-blocks><span class=secno>8. </span>DOM
   Access to CSS Declaration Blocks</h2>

  <h3 id=the-elementcssinlinestyle-interface><span class=secno>8.1.
   </span>The <code><a
   href="#elementcssinlinestyle">ElementCSSInlineStyle</a></code> Interface</h3>

  <pre
   class=idl>interface <dfn id=elementcssinlinestyle>ElementCSSInlineStyle</dfn> {
  readonly attribute <a href="#cssstyledeclaration">CSSStyleDeclaration</a> <span>style</span>;
};</pre>

  <p class=XXX>...

  <h3 id=extensions-to-the-window-interface><span class=secno>8.2.
   </span>Extensions to the <code title="">Window</code> Interface</h3>
  <!-- XXX need to define the "resolved style" for each property
           define the serialized value for types of CSS values
           define mapping between properties and types of CSS values?
  -->

  <pre class=idl>[Supplemental] interface <span>Window</span> {
  <a href="#cssstyledeclaration">CSSStyleDeclaration</a> <a href="#dom-window-getcomputedstyle" title=dom-Window-getComputedStyle>getComputedStyle</a>(Element <var title="">elt</var>);
  <a href="#cssstyledeclaration">CSSStyleDeclaration</a> <a href="#dom-window-getcomputedstyle" title=dom-Window-getComputedStyle>getComputedStyle</a>(Element <var title="">elt</var>, DOMString <var title="">pseudoElt</var>);
};</pre>

  <p>The <dfn id=dom-window-getcomputedstyle
   title=dom-Window-getComputedStyle><code>getComputedStyle(<var
   title="">elt</var>, <var title="">pseudoElt</var>)</code></dfn> method <em
   class=ct>must</em> return a <code><a
   href="#cssstyledeclaration">CSSStyleDeclaration</a></code> object that
   contains the computed style declaration block for <var title="">elt</var>,
   when the <var title="">pseudoElt</var> argument is null, the empty string
   or omitted. Otherwise, for the pseudo-element <var
   title="">pseudoElt</var> of <var title="">elt</var>.</p>
  <!-- XXX -->

  <p class=note>Because of IDL limitations the <code
   title=dom-Window-getComputedStyle><a
   href="#dom-window-getcomputedstyle">getComputedStyle()</a></code> method
   used to be on a separate interface, <code title="">ViewCSS</code>.

  <h2 id=resolved-values><span class=secno>9. </span>Resolved Values</h2>

  <p><code title=dom-Window-getComputedStyle><a
   href="#dom-window-getcomputedstyle">getComputedStyle()</a></code> was
   historically defined to return the "computed value" of an element or
   pseudo-element. However, the concept of "computed value" changed between
   revisions of CSS while the implementation of <code
   title=dom-Window-getComputedStyle><a
   href="#dom-window-getcomputedstyle">getComputedStyle()</a></code> had to
   remain the same for compatibility with deployed scripts. To address this
   issue this specification introduces the concept of a <dfn
   id=resolved-value>resolved value</dfn>.

  <p>Since CSS specifications never included the concept of <a
   href="#resolved-value">resolved value</a> this specification attempts to
   define it for the properties defined in CSS 2.1.

  <p>The <a href="#resolved-value">resolved value</a> for a given property
   can be determined as follows:

  <dl>
   <dt>'<code>background</code>'

   <dt>'<code>border</code>'

   <dt>'<code>border-collapse</code>'

   <dt>'<code>border-color</code>'

   <dt>'<code>border-spacing</code>'

   <dt>'<code>border-style</code>'

   <dt>'<code>border-top</code>'

   <dt>'<code>border-right</code>'

   <dt>'<code>border-bottom</code>'

   <dt>'<code>border-left</code>'

   <dt>'<code>border-width</code>'

   <dt>'<code>font</code>'

   <dt>'<code>list-style</code>'

   <dt>'<code>margin</code>'

   <dt>'<code>outline</code>' <!-- overflow is not -->

   <dt>'<code>padding</code>'

   <dt>'<code>pause</code>'

   <dd>
    <p>There is no <a href="#resolved-value">resolved value</a>.

   <dt>'<code>line-height</code>'

   <dd>
    <p>The <a href="#resolved-value">resolved value</a> is the used value.

   <dt>'<code>height</code>'

   <dt>'<code>margin-bottom</code>'

   <dt>'<code>margin-left</code>'

   <dt>'<code>margin-right</code>'

   <dt>'<code>margin-top</code>'

   <dt>'<code>padding-bottom</code>'

   <dt>'<code>padding-left</code>'

   <dt>'<code>padding-right</code>'

   <dt>'<code>padding-top</code>'

   <dt>'<code>width</code>'

   <dd>
    <p>If the property applies to the element or pseudo-element and the <a
     href="#resolved-value">resolved value</a> of the '<code>display</code>'
     property is not <code>none</code>, the <a
     href="#resolved-value">resolved value</a> is the <span>used
     value</span>. Otherwise the <a href="#resolved-value">resolved value</a>
     is the computed value.

   <dt>Any other property

   <dd>
    <p>The <a href="#resolved-value">resolved value</a> is the computed
     value.
  </dl>

  <h2 id=iana-considerations><span class=secno>10. </span>IANA Considerations</h2>

  <h3 id=default-style-><span class=secno>10.1. </span><dfn id=default-style
   title=http-default-style><code>Default-Style</code></dfn></h3>

  <p>This section describes a header field for registration in the Permanent
   Message Header Field Registry. <!--<a href="XXX">[RFC3864]</a>-->

  <dl>
   <dt>Header field name

   <dd>Default-Style

   <dt>Applicable protocol

   <dd>http

   <dt>Status

   <dd>standard

   <dt>Author/Change controller

   <dd>W3C and WHATWG

   <dt>Specification document(s)

   <dd>This document is the relevant specification.

   <dt>Related information

   <dd>None.
  </dl>

  <h2 class=no-num id=references>References</h2>

  <p class=issue>This section will be done when going to Last Call. Before
   that state please ask the author whenever a reference is unclear.

  <h2 class=no-num id=acknowledgements>Acknowledgements</h2>

  <p>The editor would like to thank Alexey Feldgendler, Bjrn Hhrmann,
   Christian Krebs, Daniel Glazman, David Baron, <i>fantasai</i>, Hallvord R.
   M. Steen, Ian Hickson, Lachlan Hunt, Morten Stenshorne, Robert O'Callahan,
   Sjoerd Visscher, Simon Pieters, Sylvain Galineau, and Tarquin Wilton-Jones
   for contributing to this specification.

  <p>Even more thanks to Ian Hickson for writing up the the initial version
   of the alternative style sheets API and canonicalization rules for CSS
   values.</p>
  <!-- XXX NOTES

  <style type=text/css;charset=utf-8> does create a StyleSheet in Firefox
  and Opera, but does not create a StyleSheet in IE. I prefer IE.

  <style type=TEXT/CSS> sets the style sheet type to text/css in Firefox and
  TEXT/CSS in Opera and IE. I prefer Firefox.

  <style> sets the style sheet location to the document location Firefox,
  the empty string in IE, and null in Opera. I prefer Opera

  <style media="x"> invokes .sheet.media.mediaText = "x"

  <style title=""> does not "have" a title

  .cascadedStyle that returns less keywords than currentStyle, no inherit,
  etc.
  
  Markup style: http://krijnhoetmer.nl/irc-logs/whatwg/20100204#l-529
  -->

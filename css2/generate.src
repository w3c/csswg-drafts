<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Generated content</title>
</head>
<body>
<h1 align="center">
<a name="generated-text">Generated</a> <span class="index-def"
title="generated content">content</span> and automatic <span
class="index-def" title="automatic numbering">numbering</span></h1>

<p>In some cases, authors may want user agents to render content
that does not come from the <a href="conform.html#doctree">document
tree</a>. One familiar example of this is a numbered list; the author
does not want to list the numbers explicitly, he or she wants the
user agent to generate them automatically. Similarly, authors
may want the user agent to insert the word
"Figure" before the caption of a figure, or "Chapter 7" before the
seventh chapter title. For audio or braille in particular, user agents
should be able to insert these strings.

<p>In CSS2, content may be generated by several mechanisms:</p>

<ul>
<li>The <span class="propinst-content">'content'</span>
property, in conjunction with the :before and :after pseudo-elements.
<li>The <span class="propinst-cue-before">'cue-before'</span>,
<span class="propinst-cue-after">'cue-after'</span>,
<span class="propinst-pause-before">'pause-before'</span>,
and <span class="propinst-pause-after">'pause-after'</span>
aural properties. When the aural properties
are specified as well as the the <span
class="propinst-content">'content'</span> property, content
is rendered in the following order: :before, <span
class="propinst-cue-before">'cue-before'</span>, <span
class="propinst-pause-before">'pause-before'</span>, the element's
content, <span class="propinst-pause-after">'pause-after'</span>,
<span class="propinst-cue-after">'cue-after'</span>, and :after.
<li>Elements with a value of 'list-item'
for the <span class="propinst-display">'display'</span> property.
<li>The <span class="propinst-marks">'marks'</span> property.
</ul>

<!-- Note: Remove the references to cue-before etc. if decided
to use :before/:after instead. -IJ -->

<P>Below we describe the mechanisms associated with the <span
class="propinst-content">'content'</span> property.

<h2><a name="before-after-content">The</a> <span class="index-def"
title=":before|pseudo-elements:::before">:before</span> and <span
class="index-def" title=":after|pseudo-elements:::after">:after</span>
pseudo elements</h2>

<p>Authors specify the location of generated content with the :before
and :after pseudo-elements. The <span
class="propinst-content">'content'</span> property, in conjunction
with these pseudo-elements, specifies what is inserted. The :before
and :after pseudo-elements <a
href="cascade.html#inheritance">inherit</a> any inheritable properties
from the element to which they are attached.</p>

<p>As their names indicate, the :before and :after pseudo-elements
specify content, and the style of that content, before and after an
element's <a href="conform.html#doctree">document tree</a> content.


<P>The :before and :after pseudo-elements elements allow the following
values of the <span class="propinst-display">'display'</span>
property: <span class="index-inst" title="none"><span
class="value-inst-none">'none'</span></span>, <span class="index-inst"
title="inline"><span class="value-inst-inline">'inline'</span></span>
(default) or <span class="index-inst" title="block"><span
class="value-inst-block">'block'</span></span>. If the value of the
<span class="propinst-display">'display'</span> has any other value,
the pseudo-element will behave as if the value was 'block' (This may
change in future levels of CSS.) [?? But an interesting possibility is
to allow 'compact': that would be a more powerful way to do list
items.]

<div class=example>
<p>For example, the following rule inserts a double quote mark 
before and after every Q element. The color of the quote will be red, but the
font will be the same as the font of the rest of the Q element:</p>

<pre>
Q:before, Q:after {
    content: "\"";
    color: red
}
</pre>
</div>

<p>In a :before or :after pseudo-element declaration, non-inherited
properties take their <a href="cascade.html#initial-value">initial
value</a>.</p>

<div class=example>
<p>Because the initial value of the <span
class="propinst-display">'display'</span> property is 'inline', the
quote in the previous example is inserted as an inline box, and not
above (or below) the content of the Q. The next example explicitly
sets the <span class="propinst-display">'display'</span> property to
'block', so that the inserted text becomes a block:</p>

<pre>
BODY:after {
    content: "The End";
    display: block;
    margin-top: 2em;
    text-align: center;
}
</pre>

<P>An audio user agent would speak the words "The End" after
rendering the rest of the BODY content.
</div>

<h2><a name="content">The</a> <span
class="propinst-content">'content'</span> property</h2>

<!-- #include src=properties/content.srb -->

<p>The value of the <span class="propinst-content">'content'</span>
property is a sequence of strings, URIs, and counters. The <span
class="propinst-display">'display'</span> property controls whether
the content is placed in an inline box or a block-level box.

<P>The values have the following meanings:</p>

<dl>
<dt><span class="index-inst" title="&lt;string&gt;"><span
class="value-inst-string"><strong>&lt;string&gt;</strong></span></span>
<dd>Text content. 

<dt><span class="index-inst" title="&lt;uri&gt;"><span
class="value-inst-uri"><strong>&lt;uri&gt;</strong></span></span>
<dd>The value is a URI that designates an external resource.
<strong>Note.</strong> CSS2 offers no
mechanism to change the size of the embedded object, or to provide a
textual description, like the "alt" or "longdesc" attributes do for
images in HTML. This may change in future levels of CSS.

<dt><span class="index-inst" title="&lt;counter&gt;"><span
class="value-inst-counter"><strong>&lt;counter&gt;</strong></span></span>
<dd><a href="syndata.html#counter">Counters</a> have the form
'counter(<var>name</var>)' or 'counter(<var>name</var>,
<var>style</var>)'. The generated text is the value of the named
counter at this point in the rendering structure, in the indicated
style ('decimal' by default).

<dt><span class="index-inst" title="open-quote"><span
class="value-inst-open-quote">'open-quote'</span></span> and 
<span class="index-inst" title="close-quote"><span
class="value-inst-close-quote">'close-quote'</span></span>

<dd>Both of these values are replaced by the appropriate string
from the <span class="propinst-quotes">'quotes'</span> property.

<dt><span class="index-inst" title="no-open-quote"><span
class="value-inst-no-open-quote">'no-open-quote'</span></span>

<dd>Inserts nothing (the empty string), but increments the level of
nesting for quotes.

<dt><span class="index-inst" title="no-close-quote"><span
class="value-inst-no-close-quote">'no-close-quote'</span></span>

<dd>Inserts nothing (the empty string), but decrements the level of
nesting for quotes.
</dl>

<div class=note>
<p><em><strong>Note.</strong> In future levels of CSS, the <span
class="propinst-content">'content'</span> property may accept
additional values, allowing it to vary the style of pieces 
of the generated
content, but in CSS2, the content of the :before or :after
pseudo-element all has the same style.
</em></p>
</div>

<p>Authors may include newlines in the generated content by writing
the "\A" escape sequence in one of the strings after the <span
class="propinst-content">'content'</span> property. This inserts a
forced line break, similar to the BR element in HTML. See <a
href="syndata.html#strings">"Strings"</a> and <a
href="syndata.html#escaped-characters">"Characters and case"</a> for
more information on the "\A" escape sequence.

<div class="example"><P>
Example:

<PRE>
H1:before {
    display: block;
    text-align: center;
    content: "chapter\A hoofdstuk\A chapitre"
}
</pre>
</div>

<div class="note"><P>
<em><strong>Note.</strong>
Generated content does not alter the document tree.  In particular, it
is not fed back to the document language processor (e.g., for
reparsing).
</em>
</div>

<h2><a name="compact-run-in-gen">Interaction</a> of :before and :after
with <span class="index-inst" title="compact"><span
class="value-inst-compact">'compact'</span></span> and <span
class="index-inst" title="run-in"><span
class="value-inst-run-in">'run-in'</span></span> elements</h2>

<p>The following cases can occur:

<ol>
<li><strong>A 'run-in' or 'compact' element has a :before
pseudo-element of type 'inline':</strong> the pseudo-element is taken
into account when the size of the element is computed (for 'compact')
and is rendered inside the same block-level box as the element.

<li><strong>A 'run-in' or 'compact' element has an :after
pseudo-element of type 'inline':</strong> ditto.

<li><strong>A 'run-in' or 'compact' element has a :before
pseudo-element of type 'block':</strong> the pseudo-element is
rendered as a block above the element, and does not take part in the
computation of the element's size (for 'compact').

<li><strong>A 'run-in' or 'compact' element has an :after
pseudo-element of type 'block':</strong> both the element and its
:after pseudo-element are rendered as block-level boxes. The element
is <em>not</em> rendered as an inline box in its own :after
pseudo-element. [?? This could also be defined the other way round,
but this seems easier to understand.]

<li><strong>The element following a 'run-in' or 'compact' element has
a :before of type 'block':</strong> the decision how to render the
'run-in'/'compact' element is made with respect to the block-level box
resulting from the :before pseudo-element.

<li><strong>The element following a 'run-in' or 'compact' element has
an :before of type 'inline':</strong> the decision how to render the
'run-in'/'compact' element depends on the type of the element to which
the :before is attached.

</ol>

<div class="example">
<p>Here is an example of a 'run-in' header with an :after 
pseudo-element, followed by a paragraph with a :before pseudo-element. All
pseudo-elements are inline (the default) in this example. When the
style sheet:</p>

<pre>
H3 {display: run-in}
H3:after {content: ": "}
P:before {content: "... "}
</pre>

<p>is applied to this source document:</p>

<pre class="html-example">
&lt;H3&lt;Centaurs&lt;/H3&gt;
&lt;P&gt;have hoofs
&lt;P&gt;have a tail
</pre>

<p>The visual rendering will resemble:</p>

<pre class="none">
Centaurs: ... have hoofs
... have a tail
</pre>
</div>

<h2><a name="quotes">Quotation marks</a></h2>

<!-- #include src=properties/quotes.srb -->

<P>So that user agents may handle nested quotation marks in a
language-dependent way, CSS provides the <span
class="propinst-quotes">'quotes'</span> property. Values have
the following meanings:</p>

<dl>
<dt><strong>none</strong>
<dd>The 'open-quote' and 'close-quote' values of the
<span class="propinst-content">'content'</span> property
produce no quotations marks.
<dt>[<span class="index-inst" title="&lt;string&gt;"><span
class="value-inst-string"><strong>&lt;string&gt;</strong></span></span>
&nbsp;<span class="index-inst" title="&lt;string&gt;"><span
class="value-inst-string"><strong>&lt;string&gt;</strong></span></span>]+
<dd>Values for the 'open-quote' and 'close-quote' values of the
<span class="propinst-content">'content'</span> property are taken
from this list of pairs of quotation marks (opening and
closing). The first (leftmost) pair represents the outermost level of
quotation, the second pair the first level of embedding, etc. The user
agent must apply the appropriate pair of quotation marks according to
the level of embedding.
</dl>

<P>Applying the following style sheet:</p>

<PRE class="example">
  [LANG|="en"] { quoting: ´"´ ´"´ "´" "´" ´"´ ´"´ }
  [LANG|="fr"] { quoting: "« " " »" ´"´ ´"´ "´" "´"  }
  [LANG|="no"] { quoting: "«" "»" "'" "'" "\"" "\""  }
  [LANG|="se"] { quoting: "»" "«"  ´"´ ´"´ "´" "´"  }
</PRE>

<P>to the following HTML fragment:</p>

<PRE class="html-example">
&lt;BODY lang="en"&gt;
   &lt;P&gt;&lt;Q&gt;Quote me!&lt;/Q&gt;
   &lt;P LANG="no"&gt;&lt;Q&gt;Siter &lt;Q&gt;meg&lt;/Q&gt;!&lt;/Q&gt;
&lt;/BODY&gt;
</PRE>

<P>would allow a user agent to render:</p>

<PRE>
  "Quote me!"

  «Siter 'meg'!»
</PRE>

<p>Authors may insert quotation marks in generated text with the <span
class="index-def" title="open-quote"><a class="value-def"
name="value-def-open-quote">'open-quote'</a></span> and <span
class="index-def" title="close-quote"><a class="value-def"
name="value-def-close-quote">'close-quote'</a></span> values of the
<span class="propinst-content">'content'</span> property. Each
occurrence of 'open-quote' or 'close-quote' is replaced by one of the
strings from the value of <span
class="propinst-quotes">'quotes'</span>, based on the depth of
nesting.

<p>'Open-quote' refers to the first of a pair of quotes, 'close-quote'
refers to the second. Which pair of quotes is used depend on the
nesting level of quotes: the number of occurrences of 'open-quote' in
all generated text before the current occurrence, minus the number of
occurrences of 'close-quote'. If the depth is 0, the first pair is
used, if the depth is 1, the second pair is used, etc. If the depth is
greater than the number of pairs, the last pair is repeated.

<p>Note that this quoting depth is independent of the nesting
of the source document or the rendering structure.

<p>Some typographic styles require open quotation marks to be repeated
before every paragraph of a quote spanning several paragraphs, but
only the last paragraph ends with a closing quotation mark. In CSS,
this can be achieved by inserting "phantom" closing quotes. The
keyword <span class="index-def" title="no-close-quote"><a
class="value-def"
name="value-def-no-close-quote">'no-close-quote'</a></span> decrements
the quoting level, but does not insert a quotation mark.

<div class="example">
<p>The following style sheet puts opening quotation marks on every
paragraph in a BLOCKQUOTE, and inserts a single closing quote at the
end:

<pre>
BLOCKQUOTE P:before {content: open-quote}
BLOCKQUOTE P:after {content: no-close-quote}
BLOCKQUOTE P.last:after {content: close-quote}
</pre>

<p>This relies on the last paragraph being marked with a class "last",
since there are no selectors that can match the last child of an
element.
</div>

<p>For symmetry, there is also a <span class="index-def"
title="no-open-quote"><a class="value-def"
name="value-def-no-open-quote">'no-open-quote'</a></span> keyword,
which inserts nothing, but increments the quotation depth by one.


<h2>Automatic counters and numbering</h2>

<p>Automatic numbering in CSS2 is controlled with two properties,
'counter-increment' and 'counter-reset'. The counters defined by these
properties can be used to generate text for the 'content' property (see
<span class="propinst-content">above</span>).

<!-- #include src=properties/counter-reset.srb -->
<!-- #include src=properties/counter-increment.srb -->

<p>The <span
class="propinst-counter-increment">'counter-increment'</span> property
accepts one or more names of counters (identifiers), each one
optionally followed by a number. The number indicates by how much the
counter is incremented for every occurrence of the element. The
default increment is 1. Zero and negative numbers are allowed.

<p>The <span class="propinst-counter-reset">'counter-reset'</span>
property also contains a list of one or more names of counters, each
one optionally followed by a number. The number gives the value that
the counter is set to on each occurrence of the element. The default
is 0.

<div class="example">
<p>This example shows a way to number chapters and sections with
"Chapter 1", "1.1", "1.2", etc.

<pre>
H1: before {
    content: "Chapter " counter(chapter) ". "
    counter-increment: chapter;  /* Add 1 to chapter */
    counter-reset: section;      /* Set section to 0 */
}
H2:before {
    content: counter(chapter) "." counter(section) " "
    counter-increment: section
}
</pre>
</div>

<p>If an element increments/resets a counter and also uses it (in the
'content' property of its :before or :after pseudo-element), the
counter is used <em>after</em> being incremented/reset.

<p>If an element both resets and increments a counter, the counter is
reset first and then incremented.

<P>The <span class="propinst-counter-reset">'counter-reset'</span>
property follows the cascading rules. Thus, due to cascading, the
following stylesheet:</p>

<pre class="example">
H1 {counter-reset: section -1}
H1 {counter-reset: imagenum 99}
</pre>

<p>will only reset 'imagenum'. To reset both counters, they have to be
specified together: 'counter-reset: section -1 imagenum 99'.</P>

<h3>Nested counters</h3>

<p>Counters are "self-nesting", in the sense that re-using a counter
in a child element automatically creates a new instance of the
counter. This is important for situations like lists in HTML, where
elements can be nested inside themselves to arbitrary depth. It would
be impossible to define uniquely named counters for each level.

<div class="example">
<p>Thus the following suffices to number nested list items. The
result is very similar to that of setting 'display:list-item' and
'list-style: inside' on LI:

<pre>
OL {counter-reset: item}
LI {display: block}
LI:before {content: counter(item) ". "; counter-increment: item}
</pre>
</div>

<p>The self-nesting is based on the principle that a counter for an
element cannot be incremented or reset by a descendant that increments
the same counter. In such a case, the descendant automatically creates
a new, nested counter of the same name. Any reference to that name in
the descendant or any of its children refers to the new counter.

<p>In the example above, an OL nested inside an LI will create such a
nested counter, and all children of the OL will refer to that counter.

<p>Note that incrementing/resetting a counter inside an element that
resets that same counter does not create a nested counter. In the
example above, the LI increments the counter that its parent the OL
has reset.

<div class="html-example">
<p>If we denote by item[n] the n<sup>th</sup> counter, then the following HTML
fragment will use the indicated counters. (We assume the style sheet
as given in the example above).

<pre>
&lt;OL&gt;               &lt;!-- set item[0] to 0        --&gt;
  &lt;LI&gt;item         &lt;!-- increment item[0] (= 1) --&gt;
  &lt;LI&gt;item         &lt;!-- increment item[0] (= 2) --&gt;
    &lt;OL&gt;           &lt;!-- set item[1] to 0        --&gt;
      &lt;LI&gt;item     &lt;!-- increment item[1] (= 1) --&gt;
      &lt;LI&gt;item     &lt;!-- increment item[1] (= 2) --&gt;
      &lt;LI&gt;item     &lt;!-- increment item[1] (= 3) --&gt;
        &lt;OL&gt;       &lt;!-- set item[2] to 0        --&gt;
          &lt;LI&gt;item &lt;!-- increment item[2] (= 1) --&gt;
        &lt;/OL&gt;
        &lt;OL&gt;       &lt;!-- set item[3] to 0        --&gt;
          &lt;LI&gt;     &lt;!-- increment item[3] (= 1) --&gt;
        &lt;/OL&gt;
      &lt;LI&gt;item     &lt;!-- increment item[1] (= 4) --&gt;
    &lt;/OL&gt;
  &lt;LI&gt;item         &lt;!-- increment item[0] (= 3) --&gt;
  &lt;LI&gt;item         &lt;!-- increment item[0] (= 4) --&gt;
&lt;/OL&gt;
&lt;OL&gt;               &lt;!-- reset item[0] to 0      --&gt;
  &lt;LI&gt;item         &lt;!-- increment item[0] (= 1) --&gt;
  &lt;LI&gt;item         &lt;!-- increment item[0] (= 2) --&gt;
&lt;/OL&gt;
</pre>

<p>Note especially that each of the two OLs at the deepest level
creates its own counter (item[2] and item[3]). They do not share a
counter, as do the two OLs on the outermost level.
</div>

<P>It is impossible to number lists with numbers of the type "1",
"1.1", "1.1.1", etc., when self-nesting counters are used. A <span
class="propinst-content">'content'</span> property of the form
'counter(item) "."  counter(item)' simply refers twice to the same
counter. [?? or should they automatically map to nested counters?]

<h3>Counters in elements with 'display: none'</h3>

<p>An element that is not displayed (<span
class="propinst-display">'display'</span> set to 'none') cannot
increment or reset a counter.

<div class="example">
<p>For example, with the following style sheet,
H2s with class "secret" do not increment 'count2'.

<pre>
H2.secret {counter-increment: count2; display: none}
</pre>
</div>

<p>Elements with <span class="propinst-visibility">'visibility'</span>
set to 'hidden', on the other hand, <em>do</em> increment counters.

</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
End:
-->

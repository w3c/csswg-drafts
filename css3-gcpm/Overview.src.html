<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<title>CSS3 module: Generated Content for Paged Media</title>

<style type="text/css">
.cols { width: 500px; height: 200px; background: #fff; position: relative; border: solid 10px blue; margin: 0.5em 2em 1em 0; font: bold 14px/19px Arial, sans-serif }
.cols p { padding: 3px; margin: 0 }
.gap { position: absolute; background: black; width: 5px; bottom: 0px; top: 0px; border: 10px solid red; border-top-width: 0; border-bottom-width: 0;  }
.rep { position: absolute; top: 45px; background: #333; height: 110px; width: 100px;  color: white; z-index: 4 }
div.example:before { width: 9em !important }
div.example { padding-top: 0.5em }

table.hyphenate { border-collapse: collapse }
table.hyphenate th { 
  text-align: left; white-space: nowrap; border: 1px solid black; padding: 0.2em }
table.hyphenate td { 
  border: 1px solid black; padding: 0.2em 0.2em 0.2em 1em; font-size: 0.8em }

table.border, table.border td, table.border th, table.border table { 
  border-collapse: collapse;
  border: thin solid black;
  padding: 0.2em;
  vertical-align: top;
}
table.border td + td { white-space: pre }
table.border table { padding: 0; border-collapse: separate; border: none; }
table.border table td { border: thin dotted black; padding: 0.2em; margin: 0.2em  }
table.border .comment { margin-top: 0; white-space: normal; font-style: italic }


</style>

<!--<link rel="stylesheet" type="text/css" href="default.css">-->
<link rel="stylesheet" type="text/css" href="http://www.w3.org/TR/css3-gcpm/default.css">
<link href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS].css" rel=stylesheet type="text/css">

<body>

<div class="head">

<!--logo-->

<h1>CSS3 module: Generated Content for Paged Media</h1>

<h2 class="no-num no-toc" id="w3c-working">[LONGSTATUS] [DATE]</h2>

<dl>
<dt>This version:</dt>
<dd><a href="[VERSION]">http://www.w3.org/TR/[YEAR]/ED-css3-gcpm-[CDATE]</a></dd>

<dt>Latest version:

<dd><a href="http://www.w3.org/TR/css3-gcpm">
http://www.w3.org/TR/css3-gcpm</a>

<dt>Previous version:

<dd><a href="http://www.w3.org/TR/2007/WD-css3-gcpm-20070205">
http://www.w3.org/TR/2007/WD-css3-gcpm-20070205</a>


<dt>Editor:
<dd>H&aring;kon Wium Lie, Opera Software, howcome@opera.com
</dl>

<!--begin-copyright-->
<p>[If you keep the &lt;!--comment-->, the copyright will be included
here automatically]</p>
<!--end-copyright-->

<hr title="Separator for header">
</div>


<h2 class="no-num no-toc" id=abstract>Abstract</h2>

<p>This module describes features often used in printed publications.
In particular, this specification describes how CSS style sheets can
express running headers and footers, leaders, cross-references,
footnotes, named flows, hyphenation, new counter styles, character
substitution, image resolution, page floats, advanced multi-column
layout, conditional content, crop and cross marks, bookmarks, CMYK
colors, continuation markers, change bars, line numbers, named page
lists, and generated lists. Most of this functionality involves some
sort of generated content where content from the document is adorned,
replicated, or moved in the presentation of the document. Along with
two other CSS3 modules &ndash; multi-column layout and paged media
&ndash; this module offers advanced functionality for presenting
structured documents on paged media. This specification only
applies to the 'print' media type.


<h2 class="no-num no-toc">Status of this document</h2>

<!--begin-status-->
<p>[If you keep the &lt;!--comment-->, the status boilerplate will be
included here automatically.]</p>
<!--end-status-->

<p>This WD describes functionality at various levels of maturity. Some
features have been part of other WDs in the past and have already been
implemented. These parts are fairly stable and unlikely to change
much. Other features are still at the sketching stage. In general,
features presented earlier in this draft are more mature that those
presented later in the draft.


<h2 class="no-num no-toc"><a name="contents">Table of contents</a></h2>

<!--begin-toc-->
<p>[If you keep the &lt;!--comment--> the table of contents will be
included here automatically.]</p>
<!--end-toc-->

<h2 id=dependencies>Dependencies on other modules</h2>

<p>This CSS3 module has normative references to the following other CSS3
modules:</p>
<ul>
  <li>[[!CSS3LIST]]</li>
  <li>[[!CSS3VAL]]</li>
</ul>


<p>This CSS3 module has non-normative references to the following other CSS3
modules:</p>

<ul>
  <li>[[CSS3COL]]</li>
  <li>[[CSS3PAGE]]</li>
</ul>


<h2>Introduction</h2>

<p>(This section is not normative.)

<p>This specification describes features ofthe used in printed
publications. Some of the proposed functionality (e.g., hyphenation,
the new list style types, and the 'border-length' property) may also
used with other media types. However, this specification is only
concerned with the 'print' media type.

<h2>Running headers and footers</h2>

To aid navigation in printed material, headers and footers are often
printed in the page margins. [[CSS3PAGE]] describes how to place
headers and footers on a page, but not how to fetch headers and
footers from elements in the document. This specification offers two
ways to achieve this. The first mechanism is <dfn>named strings</dfn>
which <em>copies</em> the text (without style, structure, or replaced
content) from one element for later reuse in margin boxes. The second
mechanism is <dfn>running elements</dfn> which <em>moves</em> elements
(with style, structure, and replaced content) into a margin box.

<h3>Named strings</h3>

<!--
<p>Named strings are discussed both in the CSS3 Generated and Replaced
Content (section 9) and in CSS3 Paged Media (several places). For a
proposed definition of the property, one has to go back to the <a href="http://www.w3.org/1999/06/WD-css3-page-19990623">CSS3 draft from 1999</a>
1999:
-->

<p>Named strings can be thought of as variables that can hold one
string of text each. Named strings are created with the 'string-set'
property which copies a string of text into the named string. Only
text is copied; not style, structure, or replaced content. 

<div class="example">

<p>Consider this code:

<pre>
h1, h2 { string-set: header content() }
</pre>

<p>Whenever an <code>h1</code> or <code>h2</code> element is encountered,
its textual content is copied into a named string called
<em>header</em>. Its content can be retrieved in the 'content'
property:

<pre>
@page :right { @top-right { content: string(header) }}
</pre>

</div>



<h4>Setting named strings</h4>


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>string-set</dfn>
    <tr>
      <td><em>Value:</em>
      <td>[[ &lt;identifier> &lt;content-list>] [, &lt;identifier> &lt;content-list>]* ] | none 
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified value
</table>

<p>The 'string-set' property accepts a comma-separated list of named
strings. Each named string is followed by a content list that
specifies which text to copy into the named string. Whenever an
element with value of 'string-set' different from ''none'' is
encountered, the named strings are assigned their respective value.

<p>For the 'string-set' property, &lt;content-list> expands to 
one or more of these values, in any order:

<dl>

<dt>&lt;string&gt;
<dd>a string, e.g. "foo"

<dt>&lt;counter&gt;
<dd>the counter() or counters() function, as per <a href="http://www.w3.org/TR/CSS21/syndata.html#counter">CSS 2.1 section 4.3.5</a>

<dt>&lt;content&gt;

<dd>the ''content()'' function, which accepts an optional argument:
 
<dl>

<dt>''content()''

<dd>Without any arguments, the function returns the textual content of the element, not including the content of its ::before and ::after pseudo-element. The content of the element's descendants, including their respective ::before and ::after pseudo-elements, are included in the returned content. 

<dt>''content(before)''

<dd>The function returns the textual content of the ::before pseudo-element the content of the element.

<dt>''content(after)''

<dd>The function returns the textual content of the ::after pseudo-element the content of the element.

<dt>''content(first-letter)''

<dd>The function returns the first letter of the content of the element. The definition of a letter is the same as for :first-letter pseudo-elements. 

<p class="note">The expected use for ''content(first-letter)'' is to create one-letter headers, e.g., in dictionaries.</p>

</dl>
</dl>

<!--<p class="issue">Should target-counter() and leader() also be allowed?</p>-->

<p>Named strings can only hold the result of one assignment; whenever
a new assignment is made to a named string, its old value is replaced.

<p class='note'>User agents, however, must be able to remember the
result of more than one assignment as the ''string()'' functional value
(described below) can refer to different assignments.

<p>The scope of a named string is the page of the element to which the
'string-set' property is attached and subsequent pages. 

<p>The name space of named strings is different from other sets of
names in CSS.

<p>The 'string-set' property copies text as well as white-space into
the named string. 


<div class="example">
<pre>
h1 { 
  string-set: header "Chapter " counter(header) ": " content();
  counter-increment: header }
</pre>

<p>Note that the string called "header" is different from the counter with the same name. The above code may result in <em>header</em> being set to "Chapter 2: Europa". 
</div>


<div class="example">
<p>This example results in the same value being assigned to
<em>header</em> as in the previous example. 

<pre>
h1:before { content: "Chapter " counter (header) } 
h1 { 
  string-set: header content(before) content();
  counter-increment: header } 
</pre> 
</div>

<div class="example">
<pre>
dt { string-set: index content(first-letter) }
</pre>
</div>


<h4>Using named strings</h4>

<p>The content of named strings can be recalled by using the
''string()'' value on the 'content' property. The ''string()'' value has
one required argument, namely the name of the string.

<div class="example">
<pre>
@page { @top-center { content: string(header) }}
@page { @right-middle { content: string(index) }}
@page { @top-left { content: string(entry) }}
h1 { string-set: header "Chapter " counter(chapter) content() }
dt { string-set: index content(first-letter), entry content() }
</pre>
</div>

<p>If the value of the named string is changed by an element on a certain
page, the named string may have several values on that page. In order to specify
which of these values should be used, an optional argument is accepted
on the ''string()'' value. This argument can have one of four keywords:

<ul>
<li>''start'': the named string's entry value for that page is used. 
<li>''first'': the value of the first assignment is used. If there is no assignment on the page, the start value is used. ''first'' is the default value.
<li>''last'': the named string's exit value for that page is used
<li>''first-except'': similar to ''first'', except on the page where the value was assigned. On that page, the empty string is used.
</ul>

<div class="example">
<p>In this example, the first term on the page will be shown in the top left corner and the last term on the page will be shown in the top right corner. In top center of the page, the first letter of first term will be shown. 
<pre>
@page { @top-left { content: string(term, first) }}
@page { @top-right { content: string(term, last) }}
@page { @top-center { content: string(index, first) }}
dt { string-set: index content(first-letter), term content() }
</pre>
</div>


<div class="example">
<p>In this example, the header in the top center will be blank on pages where 'h1' elements appear. On other pages, the string of the previous 'h1' element will be shown. 
<pre>
@page { @top-center { content: string(chapter, first-except) }}
h1 { string-set: chapter content() }
</pre>
</div>

<p>If the named string referred to in a 'string()' value has not been
assigned a value, the empty string is used.


<h3>Running elements</h3>

<p>Named strings, as described above, can only hold textual content; any
style, structure or replaced content associated with the element is
ignored. To overcome this limitation, a way of moving elements into
running headers and footers is introduced.

<p>Elements that are moved into headers and footers are repeated on
several pages; they are said to be <em>running elements</em>. To
support running elements, a new value &ndash; running() &ndash; is
introduced on the 'position' property. It has one required argument:
the name by which the running element can be referred to. A running
element is not shown in its natural place; there it is treated as if
'display: none' had been set. Instead, the running element may be
displayed in a margin box.

<p>Like counters and named strings, the name of a running element is chosen by
the style sheet author, and the names have a separate name space. A
running element can hold one element, including its pseudo-elements
and its descendants. Whenever a new element is assigned to a running
element, the old element is lost. 

<p class='note'>User agents, however, must be able to remember the
result of more than one assignment as the ''element()'' value
(described below) can refer to different assignments.

<p>Running elements inherit
through their normal place in the structure of the document.


<div class="example">
<pre>
title { position: running(header) }
@page { @top-center {
  content: element(header) }
}
</pre>
</div>

<p>Like the ''string()'' value, the ''element()'' value accepts an
optional second argument:

<dl>
<dt>''start''
<dt>''first''
<dt>''last''
<dt>''first-except''
</dl>

<p>The keywords have the same meaning as for the ''string()'' value.

<p>The ''element()'' value cannot be combined with any other values.

<div class="example">
<p>In this example, the header is hidden from view in all media types
except print. On printed pages, the header is displayed top center on
all pages, except where h1 elements appear.

<pre>
&lt;style>
  div.header { display: none }
  @media print {
  div.header {
    display: block;
    position: running(header);
  }
  @page { @top-center { content: element(header, first-except) }}
&lt;/style>
...
&lt;div class="header">Introduction&lt;/div>
&lt;h1 class="chapter">An introduction&lt;/div>

</pre>
</div>

<div class="example">
<p>This code illustrates how to change the running header on one page in the middle of a run of pages:

<pre>
...
&lt;style>
@page { @top-center {
  content: element(header, first) }}
.header { position: running(header) }
.once { font-weight: bold }
&lt;/style>
...
&lt;div class="header">Not now&lt;/div>
&lt;p>Da di ha di da di ...
  &lt;span class="header once">NOW!&lt;/span>
  &lt;span class="header">Not now&lt;/span>
  ... da di ha di hum.&lt;/p>
...
</pre>

The header is "Not now" from the outset, due to the "div" element. The
first "span" element changes it to "<b>NOW!</b>" on the page where the
"span" element would have appeared. The second "span" element, which
would have appeared on the same page as the first is not used because the
''first'' keyword has been specified. However, the second "span"
element still sets the exit value for "header" and this value is
used on subsequent pages.
</div>



<h2>Leaders</h2>

<p>A leader is a visual pattern that guides the eye.
Typically, leaders are used to visually connect an entry in a list
with a corresponding code. For example, there are often leaders between
titles and page numbers in a table of contents (TOC). Another example is the
phone book where there are leaders between a name and a telephone
number. 

<p>In CSS3, a leader is composed of series of glyphs through the
''leader()'' value on the 'content' property. The functional notation
accepts one value which describes the glyph pattern that make up the
leader. These values are allowed:

<ul>
<li>leader(dotted)
<li>leader(solid)
<li>leader(space)
<li>leader(&lt;string&gt;)
</ul>

<p>Using the keyword values is equivalent to setting a string value.
The table below shows the equivalents:

<table class=border>
<tr><th>Keyword<th>String<th>Unicode characters
<tr><td>leader(dotted)<td>leader('. ')<td>\002E \0020
<tr><td>leader(solid)<td>leader('_')<td>\005F
<tr><td>leader(space)<td>leader(' ')<td>\0020
</table>

<p class=issue>Can leaders also be composed of images or SVG?


<!--
<p class="issue">Some fonts may not have suitable glyphs for all
patterns. For example, in some Eastern languages, the alignment of the
shape within the glyph may not be optimal for creating leaders.
-->

<!--<p class="issue">Are the keywords really necessary?</p>-->

<p>The string inside the parenthesis is called the <em>leader string</em>.

<p>In its simplest form, the 'content' property only takes one
''leader()'' value:

<div class="example">
<pre>
heading::after { content: leader(dotted) }
</pre>
</div>

<P>The leader string must be shown in full at least once and this
establishes the minimum length of the leader. To fill the available
space, the leader string is repeated as many times as possible in the
writing direction. At the end of the leader, a partial string pattern
may be shown.  White space in leaders is collapsed according to the
values on white-space properties. 

<!-- <span class="issue">Or, partial strings be avoided?</span> -->
<!--<p class="issue">Should other properties influence the appearance of leaders?-->

<p>These properties influence the appearance of leaders: all font
properties, text properties, 'letter-spacing', white-space properties,
background properties, and 'color'.

<p>User Agents should attempt to align corresponding glyphs from the  
leader pattern between consecutive lines.

<p>In a more complex example, the 'leader' value is combined with other
values on the 'content' property:

<div class="example">
<pre>
ul.toc a::after {
  content: leader(". . . ") target-counter(attr(href, url), page);
}
</pre>
</div>

<p>If the content connected by a leader end up on different lines, the
leader will be present on all lines. Each leader fragment honors the
minimum length of the leader.

<div class="example">
<p>Consider this code:

<pre>
&lt;style>
.name::after { content: leader(dotted) }
&lt;/style>
&lt;div class="entry">
&lt;span class="name">John Doe&lt;/span>
&lt;span class="number">123456789&lt;/span>
&lt;/div>
</pre>

<p>If the name and number end up on different lines (e.g., in a narrow column), it may be formatted like this:

<pre>
John Doe....
...123456789
</pre>
</div>

<p>To determine the length of the leaders, user agents must do the
following for each line:

<ol>
<li>Lay out the content with leaders of minimum lengths
<li>Determine the empty space left on the line. 

<li>Distribute the empty space between the leaders on the line. Glyphs
must not be shown partially. All leaders on the line should, to the
extent possible, have the same length. This may not always be possible
as the minimum leader length must be honored. 

<li>Fill the empty space with the specified leader pattern. 
</ol>


<div class="example">
<p>Consider this code:

<pre>
&lt;style>
cite::before { content: leader('  ') }
&lt;/style>
&lt;blockquote>
  Bla great bla bla world bla bla
  empire bla bla color bla bla
  history bla bla forever.
    &lt;cite>John Johnson&lt;/cite>
&lt;/blockquote>
</pre>

<p>Depending on the width of the containing block, this may be rendered as:

<pre>
  Bla great bla bla world bla bla
  empire bla bla color bla bla
  history bla bla forever.   John 
  Johnson
</pre>

<p>However, this rendering is preferable:

<pre>
  Bla great bla bla world bla bla
  empire bla bla color bla bla
  history bla bla forever.
                     John Johnson
</pre>

<p>To indicate that <q>John Johnson</q> should be kept on one line,
this rule can be added to the style sheet:

<pre>
cite { text-wrap: suppress }
</pre>

<p>Until 'text-wrap' is widely supported, this rule can also be used:

<pre>
cite { white-space: nowrap }
</pre>

<p>If the containing element is wider, this may be the resultant presentation:

<pre>
  Bla great bla bla world bla bla empire
  bla bla color bla bla history bla bla 
  forever.                  John Johnson
</pre>


</div>


<h2>Cross-references</h2>

<p>It is common to refer to other parts of a document by
way of a section number (e.g., "See section 3.4.1"), a page number
(e.g., "See discussion on page 72"), or a string (e.g., "See the
chapter on Europe"). Being able to resolve these cross-references
automatically saves time and reduces the number of errors. 

<h3>The ''target-counter'' and ''target-counters'' values</h3>

<p>Numerical cross-references are generated by ''target-counter()''
and ''target-counters()'' values that fetch the value of a counter at
the target end of the link. These functions are similar to the
''counter()'' and ''counters()'' functions, except that they fetch
counter values from remote elements. ''target-counter()'' has two
required arguments: the url of the link, and the name of a counter.
''target-counters()'' has three required arguments: the url of the
link, the name of a counter, and a separator string. Both functions
accepts an optional argument at the end that describes which list
style type to use when presenting the resulting number; ''decimal''
being the default.

<div class="example">
<p>This style sheet specifies that a string like " (see page 72)"
is added after a link:

<pre>
a::after { content: "(see page " target-counter(attr(href, url), page, decimal) ")" }
</pre>
</div>


<div class="example">
<p>This style sheet specifies that a string like " (see section 1.3.5)" 
is added after a link:

<pre>
a::after { content: "(see section " target-counters(attr(href, url), section, ".", decimal) ")" }
</pre>
</div>



<h3>The ''target-text'' value</h3>

<p>Textual cross-references are generated by ''target-text()'' which
fetches the textual content from the target end of the link. Only text
is copied; not style, structure, or replaced content.
''target-text()'' has one required argument: the url of the link. An
optional second argument specifies exactly which content is fetched.
There are four possible values:

<dl>
<dt>''content()''

<dd>refers to the textual content of
    the element, not including the content of its ::before and ::after
    pseudo-element. The content of the element's descendants, including their
    respective ::before and ::after pseudo-elements, are included in the returned content.

<dt>''content(before)'' 

<dd>refers to the content of the element's ::before pseudo-element. This is the default value.

<dt>''content(after)'' 

<dd>refers to the content of the element's ::after pseudo-element

<dt>''content(first-letter)'' 

<dd>refers to the first letter of the textual content of the element, not including the content of its ::before and ::after pseudo-element.

</dl>


<div class="example">
<p>To generate this text

<blockquote>
<p>See Chapter 3 ("A better way") on page 31 for an in-depth evaluation.
</blockquote>

from this markup:

<pre>
&lt;p>See &lt;a href="#chx">this chapter&lt;/a> for an in-depth evaluation.
...
&lt;h2 id="chx">A better way&lt;/h2>
</pre>

this CSS code can be used:

<pre>
h2 { counter-increment: chapter }
a { content: "Chapter " target-counter(attr(href, url), chapter) 
   ' ("'  target-text(attr(href), content()) '") on page '
   target-counter(attr(href, url), page);
</pre>
</div>



<h2>Footnotes</h2>

<p>A footnote is a note typically placed at the bottom of a page that
comments on or cites a reference. References to footnotes are marked
with a <em>note-call</em> in the main text. The rendering of footnotes
is complex. As far as possible, footnotes try to reuse other parts of
CSS. However, due to the typographic traditions footnotes, some new
functionality is required to support footnotes in CSS:

<p>In order to support footnotes in CSS, the following functionality is added:

<ul>
<li>one new value on the 'float' property: ''footnote''
<li>one new page area: ''@footnote''
<li>two new pseudo-elements: ''::footnote-call'' and ''::footnote-marker''
<li>one predefined counter: ''footnote''
<li>one new value on the 'content' property: ''target-pull()''
<li>one new property: 'border-length'
<li>two new 'list-style-type' values: ''super-decimal'', and symbol(...)
</ul>


<div class=example>
<p>In its simplest form, making a footnote is simple. 

<pre>
&lt;style>
.footnote { float: footnote }
&lt;/style>

&lt;p>A sentence consists of words. &lt;span class="footnote">Most often.&lt;/span>.
</pre>

<p>In this example, the text <q>Most often.</q> will be placed in a
footnote. A note-call will be left behind in the main text and a
corresponding marker will be shown next to the footnote. Here is one
possible rendering:

<pre>
A sentence consists of words. &#xB9;

&#xB9; Most often.
</pre>

</div>

<div class=example>

<p>To support legacy browsers, it is often better to make a link to
the note rather than including the text inline. This example shows how
to fetch the content of a note and place it in a footnote.

<pre>
&lt;style>
@media print {
  .footnote { 
    float: footnote;
    content: target-pull(attr(href, url)) }
  .call { display: none }
}
&lt;/style>
...
&lt;p>A sentence consists of words&lt;a class="footnote" href="#words"> [3]&lt;/a>.
...
&lt;p id=words>&lt;span class="call">[3]&lt;/span> Most often.
</pre>

<p>When shown in a legacy browser, the content of the element will be
shown as a clickable link to an endnote. When printed according to
this specification, there will be a footnote:

<pre>
A sentence consists of words&#xB9;.

&#xB9; Most often.
</pre>
</div>

<div class=example>
Consider this markup:
<pre>
&lt;p>Sorry, &lt;span title="This is, of course, a lie.">we're closing for lunch&lt;/span>.
</pre>

<p>The content of the "title" attribute can be turned into a footnote with this code:

<pre>
span[title]::after { 
  content: attr(title);
  float: footnote;
}
</pre>
</div>


<h3>Turning elements into footnotes</h3>

<p>An element with ''float: footnote'' (called a <em>footnote
element</em>) is moved to the <em>footnote area</em> and a <em>footnote-call</em>
pseudo-element is put in its original place.

<div class="example">
<pre>
span.footnote { 
  float: footnote;
}
</pre>
</div>

<p>For each new footnote element, the ''footnote'' counter is automatically
incremented. 

<p>Footnote elements are presented inside the <em>footnote area</em>,
but they inherit through their normal place in the structure of the
document.

<!--
<p class="issue">There has been a number of proposals on how to achieve this, including ''position: footnote'', ''flow: footnote'', and ''display: footnote''. The current thinking is that 'float' is suitable as the content still takes up space.
-->


<h3>The footnote area</h3>

<p>All elements with ''float: footnote'' are moved to the <em>footnote
area</em>. The footnote area is described by an @footnote-rule inside
the @page-rule. By default, the footnote area appears at the bottom of
the page, but it can be positioned using page floats (as described
below) and 'position: fixed'.

<!--
<div class="example">

<pre>
@page {
  @footnote { 
    float: bottom page;
    width: 100%;
  }
}
</pre>
</div>
-->

<!--<p>An element with 'float: footnote' inherits from its parent, not from @footnote.-->


<p>The footnote area does not have to be placed at the bottom of the
page. It can be moved to anywhere on the page using the 'float' property or
''position: fixed''. 

<div class="example">
<p>These rules place the footnote area on the left side of the page:

<pre>
@page {
  @footnote { 
    position: fixed;
    top: 10em;
    left: 3em;
    width: 5em;
  }
}
</pre>
</div>

<div class="example">
<p>These rules place the footnote area at the bottom of the left column:

<pre>
@page {
  @footnote { 
    float: bottom left column;
  }
}
</pre>

<p>The 'column' keyword specifies that the containing block is a column box. For the footnote area, one of the column boxes of the oldest multicol element on the page will be the containing block. In this example, the right-most column-box is chosen due to the 'right' keyword. Finally, the footnote area appears at the bottom of that column due to the 'bottom' keyword.

</div>

<!--
<p class=issue>How should one indicate that the footnote area should
span columns? Typically, footnotes are put inside columns rather than
spanning the full width, but there could be exceptions.
-->

<p>The content of the footnote area is considered to come before other
content which may compete for the same space on the same page.

<div class="example">
<pre>
@page { @footnote { float: bottom page}}
div.figure { float: bottom page }
</pre>

<p>If figures and footnotes are on the same page, the footnotes will appear below the figures as they are floated to the bottom before the figures. 
</div>


<p>Potentially, every page has a footnote area. If there
are no footnotes on the page, the footnote area will not take up any
space. If there are footnotes on a page, the layout of the footnote
area will be determined by the properties/values set on it, and by the
footnote elements elements inside it.

<p>These properties apply to the footnote area: 'content', 'border',
'padding', 'margin', 'height', 'width', 'max-height', 'max-width',
'min-height', 'min-width', the background properties, and
'border-length'.

<!--
<p class="note">In published books, it is customary for the footnote
area to be limited to less than half the height of the page area. Long
footnotes may need more space, and the customary solution is for
footnotes to span several pages. To achieve this, the 'max-height'
property should be used. However, footnotes spanning several pages is
an advanced feature which is not a conformance requirement for this
specification.
-->


<div class="example">
<p>This example uses some of the applicable properties on @footnote:

<pre>
@footnote {
  margin-top: 0.5em;
  border-top: thin solid black;
  border-length: 4em;
  padding-top: 0.5em;
}
</pre>

<p>The result of this code is that a footnote area will have
some margin above the border. Unlike normal borders, only part of the
border is visible due to the 'border-length' property. Underneath the
border, there will be padding. 

</div>


<h3>The 'border-length' property</h3>


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>border-length</dfn>
    <tr>
      <td><em>Value:</em>
      <td>[ &lt;length&gt; | auto ]{1,8}
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>refer to width of element
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>two absolute lengths
</table>

<p>This property limits the length of borders. If the length of a
border is longer than the value specified on this property, part of
the border will be made invisible. The border will still take up
space. For the purpose of this property, a border box is is considered
to consist of eight border stumps:

<pre>
    &#x250F; 1      2 &#x2513;
    8           3

    7           4
    &#x2517; 6      5 &#x251B;
</pre>

<p>The border lengths are specified in sequence, from 1 to 8. To avoid having to specify eight values, a shorthand notation is offered where a minimum of one value has to be specified. The remaining values are found by this pseudo-algorithm:

<ol>
<li>the border stump value is sought from the border stump directly opposite (6 is copied from 1, 8 is copied from 3, etc.). 

<li>the border stump value is sought from the previous stump (2 is copied from 1, 3 is copied from 2, etc.)

</ol>


<div class="example">

<pre>
border-length: 5px;
</pre>


<div style="position: relative; width: 250px; height: 150px; background: white;">
<div style="border: 2px solid black; width: 200px; height: 100px; position: absolute; top: 20px; left: 20px">
<div style="position: absolute; background: white; left: 15px; top: -5px; height: 110px; width: 170px"></div>
<div style="position: absolute; background: white; left: -5px; top: 15px; height: 70px; width: 210px"></div>
</div>

</div>
</div>



<div class="example">

<pre>
border-length: 10px 10px 5px;
</pre>


<div style="position: relative; width: 250px; height: 150px; background: white;">
<div style="border: 2px solid black; width: 200px; height: 100px; position: absolute; top: 20px; left: 20px">
<div style="position: absolute; background: white; left: 15px; top: -5px; height: 110px; width: 170px"></div>
<div style="position: absolute; background: white; left: -5px; top: 5px; height: 90px; width: 210px"></div>
</div>

</div>
</div>




<div class="example">

<pre>
border-length: 10px 10px 0;
</pre>


<div style="position: relative; width: 250px; height: 150px; background: white;">
<div style="border: 2px solid black; width: 200px; height: 100px; position: absolute; top: 20px; left: 20px">
<div style="position: absolute; background: white; left: 15px; top: -5px; height: 110px; width: 170px"></div>
<div style="position: absolute; background: white; left: -5px; top: 0px; height: 100px; width: 210px"></div>
</div>
</div>


</div>

<div class="example">

<pre>
border: none;
border-top: thin solid black;
border-bottom: thin solid black;
border-length: 10px;
</pre>

<div style="position: relative; width: 250px; height: 150px; background: white;">
<div style="border: 2px solid black; width: 200px; height: 100px; position: absolute; top: 20px; left: 20px">
<div style="position: absolute; background: white; left: 15px; top: -5px; height: 110px; width: 170px"></div>
<div style="position: absolute; background: white; left: -5px; top: 0px; height: 100px; width: 210px"></div>
</div>
</div>

</div>


<div class="example">

<pre>
border-length: 10px 0px;
</pre>


<div style="position: relative; width: 250px; height: 150px; background: white;">
<div style="border: 2px solid black; width: 200px; height: 100px; position: absolute; top: 20px; left: 20px">
<div style="position: absolute; background: white; left: 15px; top: -5px; height: 110px; width: 200px"></div>
<div style="position: absolute; background: white; left: -5px; top: 0px; height: 100px; width: 210px"></div>
</div>

</div>
</div>


<div class="example">

<pre>
border: none;
border-top: thin solid black;
border-length: 10px 0px;
</pre>


<div style="position: relative; width: 250px; height: 150px; background: white;">
<div style="border: 2px solid black; width: 200px; height: 100px; position: absolute; top: 20px; left: 20px">
<div style="position: absolute; background: white; left: 15px; top: -5px; height: 110px; width: 200px"></div>
<div style="position: absolute; background: white; left: -5px; top: 0px; height: 110px; width: 210px"></div>
</div>

</div>
</div>


<div class="example">

<p>This rendering:

<pre>
A sentence consists of words&#xB9;.
______
&#xB9; Most often.
</pre>

can be achived with this style sheet:

<pre>
<pre>
@footnote {
  border-top: thin solid black;
  border-length: 4em 0;
}
</pre>

</div>


<!--
<p class="issue">Footnotes in tables and floats may be problematic. In
some cases, the author may want the footnote to go at the end of the
table or float instead of the bottom of the page.
-->

<h3>Footnote calls</h3>

<p>When an element is moved to the footnote area,
a <em>footnote-call</em> is left behind. By default, User Agents must
behave as if this code is part of the default style sheet:

<pre>
::footnote-call {
  content: counter(footnote, super-decimal);
}
</pre>

<p>The resulting note call is a super-scripted decimal number. 

<!--
<div class="example">

The content and style of the footnote-call is set on the
''footnote-call'' pseudo-element.

</div>
-->
<!--
<p class="issue">Should any white space characters between the
note-call and and the preceding content be removed?
-->
<!--
<div class="example">
The goal is to achieve this result:

<pre>
  ... some notion¹
</pre>

<p>rather than this:

<pre>
  ... some notion ¹
</pre>
</div>
-->


<h3>Footnote markers</h3>

<p>A ::footnote-marker pseudo-element is added to each footnote
element. User agents must, by default, show the "footnote" counter in
the footnote-marker.

<div class="example">
<p>User Agents may display footnote-calls and footnote-markers this way by default:

<pre>
::footnote-call {
  content: counter(footnote, super-decimal);
}
::footnote-marker {
  content: counter(footnote, super-decimal);
}
</pre>
</div>

<p>Marker elements are discussed in more detail in the CSS Lists
module [[!CSS3LIST]]. One suggested change to that module is to honor
the value of 'list-style-position' on the ::footnote-marker
pseudo-element itself rather than the corresponding list-item element.
Further, one clarification to the horizontal placement of the marker
is suggested: the <em>margin</em> box of the marker box is
horizontally aligned with the start of the line box.


<h3>Counting footnotes</h3>

<p>The "footnote" counter is automatically incremented each time a
footnote is generated. That is, the "footnote" counter is incremented
by one each time an element with ''float: footnote'' appears.

<p>The footnote counter can be reset with teh 'counter-reset' property.

<div class="example">
This code resets the "footnote" counter on a per-page page basis:
<pre>
@page { counter-reset: footnote }
</pre>
</div>

<p class=issue>Should one also be able to manually increment the "footnote" counter?

<!--
<p>The 'counter-increment' property can be set in the @footnote rule.
Each time an element with 'float: footnote' is found, the corresponding
counter is incremented.

<div class="example">
<p>This rule is part of the default style sheet:

<pre>
@page {
  @footnote {
    counter-increment: footnote;
  }
}
</pre>

As a result, the "footnote" counter is incremented each time a footnote is generated.
</div>
-->


<h3>The ''target-pull()'' value</h3>

<p>In order to fetch the content of another element (e.g., a linked
note), the ''target-pull()'' value is introduced. The value uses a
functional notation and takes a URI value as argument. In
combination with the 'content' property, target elements can be pulled
to the anchor element.

<div class="example">
<p>Consider this example:

<pre>
&lt;style>
@media print {
  .footnote { 
     float: footnote; 
     content: target-pull(attr(href, url)) }
  .footnote::footnote-call { content: counter(footnote, super-decimal) }
  .footnote::footnote-marker { content: counter(footnote, super-decimal) }
  .marker { display: none }
}
&lt;/style>
...
&lt;p>A sentence consists of words&lt;a class="footnote" href="#words"> [3]&lt;/a>.&lt;/p>
...
&lt;p id="words">&lt;span class="marker">[3]&lt;/span> Most often.&lt;/p>
</pre>

<p>As a result of the ''target-pull()'' value, the last <code>p</code> element is moved from its normal place of presentation and into the footnote. 

</div>

<!--
<p class=issue>Describe <code>target-pull</code> in more detail.
-->
<!--

what's the differnece between target-pull and named flows?

In named flows; the element itself declares that it wants to go somewhere, and the recipient accepts
In 'target-pull', the recipient says "I want you" and pulls it over without 

-->


<h3>Laying out footnotes</h3>

<p>Footnotes must appear as early as possible under the following constraints:

<ol>

<li>A footnote marker may not appear on an earlier page than the
    footnote call.

<li>Footnotes may not appear out of document order.

<!--<span class="issue">(What order is that: the document order or the visual order?
    Probably the document order, the same order as the footnote counter
    values, although the visual order of the footnote calls may be
    different, due to their occurrence in positioned and floating
    elements.)</span>-->

<li>The footnote area is limited in size by 'max-height', unless the
    page contains only footnotes. (E.g., if at the end of the document
    there are still footnotes unprinted, the User Agent can use the whole page to
    display footnotes.)

<li>If there is a footnote call on a page, the footnote area may not
    be empty, unless its 'max-height' is too small.

</ol>


<h3>Footnote magic</h3>

<p>When rendering footnotes, User Agents may apply certain heuristics
to achieve optimal presentation. For example, the space between a
footnote-call and surrounding text may be adjusted. Another example is
the height of the footnote area; it may be heuristically constrained
to limit the area that is used for footnotes.

<p>The "footnote" counter represents another kind of magic; it is
automatically created and incremented each time an element is turned
into a footnote, and the footnotes and footnote-calls are
automatically labeled with the value of .


<!--
<h2>Sidenotes</h2>

<p>Sidenotes are supported the same way as footnotes; only the name
and the settings in the default style sheet differentiates the two.

<p class=note>The motivation for having another page-based area into
which content can be floated is that footnotes and sidenotes are
often used in the same document. 

<div class="example">
<p>This example moves images to the outside margin of pages:

<pre>
@page :left { 
  margin-left: 10em;
  @sidenote { position: fixed; left: -8em; width: 6em }
}
@page :right { 
  margin-right: 10em;
  @sidenote { position: fixed; right: -8em; width: 6em }
}
img { float: sidenote }
</pre>
</div>

<p class=note>The reason for having both a footnote and a sidenote area
on every page is that some documents use both.

<p class=issue>Should there be a mechanism to create new areas like
footnote/sidenote, or are two "magic" areas enough?
-->



<h2>Named flows</h2>

<!--
<p class=issue>Unlike footnotes, however, there is no need to add new functionality for endnotes. Either, traditional HTML can be used, or named flows can be used.

<p class="issue">Do we need endnotes, given that 'target-pull' supports
legacy endnote-like renderings?
-->
<!--

<p>Like for footnotes, a ::endnote-call pseudo element is left at the
place of origin.

<p>Like for footnotes, a predefined ''endnote'' counter is incremented
for every endnote element due to a setting in the default style sheet. 

<p>Like for footnotes, a ::endnote-marker pseudo-element is generated at the
place of presentation.

<p>Like for footnotes, the content of ::endnote-call and ::endnote-marker
pseudo-elements can be set with the 'content' property.

<p class=issue>Footnotes and endnotes are very similar and it may seem
excessive to define different call and marker types for them. The
reason for doing so is to create hooks to be used in the default style
sheets. As a result, changing ''float: footnote'' to ''float:
endnote'' will just work.
-->
<!--
<p class=issue>Endnotes are similar to footnotes, except that they are placed at
the end of a structured element (e.g., a section) rather than at
certain place in the layout. Endnotes can be achieved with named
flows, described below.
-->
<!--
CSS is not a transformation language, so
the motivation for supporting <em>flows</em> is presentational rather
than structural. 
-->

<p>Footnotes and running elements are print-specific conventions that
move content from one place to another in the presentaion of a document. In this section, a
generic mechanism for moving content is described: <em>named
flows</em> make it possible to push elements from one place to
another. Different from footnotes, named flows are not counted by default. Also, while
UAs are allowed to employ certain heuristics when formatting
footnotes, this is not the case in named flows.

<p>Named flows introduces two new values:

<ol>
<li>On the 'float' property, ''to()'' is introduced to indicate that the element should be pushed from its natural position and into a named flow.
<li>On the 'content' property, ''from()'' is introduced to indicate that a named flow should be emptied and that the emtied elements should become the content of the element. The ''from()'' value cannot be combined with any other values.
</ol>

<p>Elements that are moved into a new flow are removed from their
current position to where ''from()'' has been set. Like
for footnotes, elements that are moved into a named flow
are only displayed once.

<div class="example">
<p>Named flows can be used to create endnotes:

<pre>
.note { 
  float: to(endnote);
}
div.chapter::after { content: from(endnote) }
</pre>
</div>

<div class="example">
<p>Consider this markup

<pre>
&lt;contrib contrib-type="author">
  &lt;name>
    &lt;surname>Knuth&lt;/surname>
    &lt;given-names>Donald E.&lt;/given-names>
  &lt;/name>
  &lt;role>professor&lt;/role>
&lt;/contrib>
</pre>

<p>combined with this style sheet:

<pre>
surname { float: to(lastname) }
given-names::after { content: from(lastname) }
role::before { content: ", " }
</pre>

will result in this presentation:

<pre>
Donald E. Knuth, professor
</pre>

</div>

<p>Just like footnotes, elements in named flows can have
<em>call</em> and <em>marker</em> pseudo-elements. However, these
pseudo-elements are not shown by default.

<div class="example">
<p>Notes inside tables can be moved to after the table by way of a
named flow.

<pre>
table .note { float: to(tablenote); counter-increment: tablenotes }
table .note::note-marker { content: counter(tablenotes, super-decimal) }
table .note::note-call { content: counter(tablenotes, super-decimal) }
table::after { content: from(tablenote) }
</pre>

<p class=issue>How does one remove identical table notes?
</div>

<p>If a named flow isn't emtied, its content is lost. 

<div class="example">
<p>Consider this code:

<pre>
.remove { to(dev-null) }
</pre>

<p>If there is no corresponding ''from()'' value, elements with class names "remove" are not displayed. The effect is identical to this code:

<pre>
.remove { display: none }
</pre>
</div>


<h2>Hyphenation</h2>

<!--
<table class=hyphenate>
<tr><th>CSS<th>XSL<th>DSSSL
<tr><th>hyphens<th>hyphenate<th>hyphenate

<tr><td>none<td>false
<tr><td>manual<td>
<tr><td>auto<td>true

<tr><th>hyphenate-resource<th>country, language, script<th>?
<tr><td>auto
<tr><td>&lt;uri>

<tr><th>hyphenate-before<th>hyphenation-remain-character-count<th>hyphenation-remain-char-count
<tr><td>auto<td>
<tr><td>&lt;integer><td>&lt;integer>

<tr><th>hyphenate-after<th>hyphenation-push-character-count<th>hyphenation-push-char-count
<tr><td>auto<td>
<tr><td>&lt;integer><td>&lt;integer>

<tr><th>hyphenate-lines<th>hyphenation-ladder-count<th>hyphenation-ladder-count
<tr><td>no-limit<td>no-limit
<tr><td>&lt;integer>

<tr><th>hyphenate-character<th>hyphenation-character<th>hyphenation-char
<tr><td>&lt;string><td>&lt;character>
<tr><td>auto

<tr><th><th>hyphenation-keep<th>hyphenation-keep
<tr><td><td>auto
<tr><td><td>column
<tr><td><td>page
<tr><th><th><th>hyphenation-exceptions
<tr><td><td><td>The value is a list of strings. Each string is a word which may contain hyphen characters, #\-, indicating where hyphenation may occur. If a word to be hyphenated occurs in the list, it may only be hyphenated in the specified places. The initial value is the empty list.


</table>

-->



<h3>Hyphenate properties</h3>

<p>This specification defines six new properties to describe hyphenation.

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>hyphens</dfn>
    <tr>
      <td><em>Value:</em>
      <td>none | manual | auto
    <tr>
      <td><em>Initial:</em>
      <td>manual
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>Values are:

<dl>
<dt>none

<dd>Words are not broken at line breaks, even if characters inside the word suggest line break points.

<dt>manual

<dd>Words are only broken at line breaks where there are characters inside the word that suggest line break opportunities. Characters can be explicit or conditional. 

<div class="example">
In Unicode, U+00AD is a conditional "soft hyphen" and U+2010 is an explicit hyphen. Unicode Standard Annex #14 describes the <a href="http://unicode.org/reports/tr14/#SoftHyphen">role of soft hyphens in the</a> Unicode Line breaking algorithm.
</div>

<div class="example">
In HTML, &amp;shy; represents the soft hyphen character which suggests a line break opportunity.
<pre>
ex&amp;shy;ample.
</pre>
</div>


<dt>auto
<dd>Words can be broken at appropriate hyphenation points, as determined by characters inside the word, resources listed in 'hyphenate-resource', or other UA-dependent resources. Characters inside the word take priority over hyphenation points determined by other resources. 

</dl>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>hyphenate-resource</dfn>
    <tr>
      <td><em>Value:</em>
      <td>none | &lt;uri&gt;
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property specifies a comma-separated list of external resources that can help the UA determine hyphenation points. If more than one resource is specified, the UA should consult each resource until it finds one that is able to determine hyphenation points in a word. The 'none' value indicates that no external resources are available. In any case, the UA can also use local resources not listed on this property.

<div class="example">

<p>Often, finding the right hyphenate resource is based on knowing the
language of the text. The <code>lang</code> attribute is recommended
for encoding the language, and the corresponding selector is used in
this example:

<pre>
:lang(dk) { hyphenate-resource: url("hyph_da_DK.dic"), url("hyph_da_NO.dic") }
</pre>

</div>


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>hyphenate-before</dfn>
    <tr>
      <td><em>Value:</em>
      <td>&lt;integer> | auto
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property specifies the minimum number of characters in a
hyphenated word before the hyphenation character. The ''auto'' value
means that the UA chooses a value that adapts to the current layout.

<p class="note">Unless the UA is able to calculate a better value, it
is suggested that ''auto'' means 2.


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>hyphenate-after</dfn>
    <tr>
      <td><em>Value:</em>
      <td>&lt;integer> | auto
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property specifies the minimum number of characters in a hyphenated word after the hyphenation character. The ''auto'' value means that the UA chooses a value that adapts to the current layout.

<p class="note">Unless the UA is able to calculate a better value, it is suggested that ''auto'' means 2.


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>hyphenate-lines</dfn>
    <tr>
      <td><em>Value:</em>
      <td>no-limit | &lt;integer>
    <tr>
      <td><em>Initial:</em>
      <td>no-limit
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property indicates the maximum number of successive hyphenated
lines in an element. In some cases, user agents may not be able to
honor the specified value. The ''no-limit'' value means that there is
no limit.

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>hyphenate-character</dfn>
    <tr>
      <td><em>Value:</em>
      <td>auto | &lt;string>
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property specifies a string that is shown when a
hyphenate-break occurs. The 'auto' value means that the User Agent
should find an appropriate value. 

<!--
<p class=issue>Which character is it, "minus hyphen" or U+2010?
-->

<div class="example">
<p>In Latin scripts, the hyphen character (U+2010) is often used to
indicate that a word has been split. Normally, it will not be
necessary to set it explicitly. However, this can easily be done:

<pre>
article { hyphenate-character: "\2010" }
</pre>
</div>

<!--
<p class=issue>XSL uses a different list of <a href="http://www.w3.org/TR/2006/CR-xsl11-20060220/#common-hyphenation-properties">properties</a>. Reuse of these properties has been considered.
-->


<h2>New counter styles</h2>

<h3>The ''super-decimal'' list-style-type</h3>

<p>A new list-style-type, ''super-decimal'', is introduced to better support
footnotes. Small, super-scripted footnote calls are common; the first
three numbers have code points in Latin-1 and some font families have
even more super-scripted glyphs. The ''super-decimal'' keyword allow
these font resources to be used and replaces the use of 'font-size'
and 'vertical-align' (which prohibit the use of special-purpose
glyphs).

<div class="example">
This example specifies that footnote markers should consist of
super-scripted decimal numbers.

<pre>
::footnote-marker { content: counter(footnote, super-decimal) }
</pre>
</div>



<h3>Named counter styles</h3>

<p>CSS defines a number of predefined list style types for the
'list-style-type' property and other places where a list-style-type
value is accepted. Some styles repeat the same glyph (e.g., ''disc''
and ''circle'') while others have lists of glyphs (e.g., ''decimal'',
and ''lower-roman''). To increase the range of lists that can be
achieved through CSS without adding many new keywords,
@counter-style rules are introduced. By using @counter-style, a style
sheet can name new counter styles.

<p>An @counter-style rule consists of the keyword ''@counter-style'',
followed by the name of the symbol counter style, followed by a
space-separated list of strings. 

<div class="example">

<pre>
@counter-style daggers "*" "\2020" "\2021" "\A7" "#";
ol { list-style-type: daggers }
</pre>

</div>


<div class="example">

<pre>
@counter-style ordinal "1st" "2nd" "3rd" "4th";
h1:before { content: counter(chapter, ordinal) " chapter" }
</pre>

</div>

<p>The first string in the list represents number one, the second
string represents number two, etc. Outside the range of specified values, the rendering
will be as if the ''decimal'' list style type had been specified.

<div class="example">
<p>Consider this example:

<pre>
@counter-style ordinal "1st" "2nd" "3rd" "4th";
ordered-list { counter-reset: items -1 }
list-item { counter-increment: items 2 }
</pre>

<p>For a series of <tt>list-item</tt> elements inside an
<tt>ordered-list</tt> element, the value of the <tt>items</tt> counter
will be -1, 1, 3, 5, 7 etc. Given that the <tt>ordinal</tt> counter
style only defines a counter style for 1, 2, 3, and 4, the list will
be numbered "-1", "1st", "3rd", "5", "7" etc.

</div>

<p>Named counter styles can be imported through @import statements.

<div class="example">
<pre>
@import url(http://www.example.com/armenian-counters.css); /* defines 'armenian' */
ol { list-style-type: armenian }
</pre>
</div>

<!--
<div class="issue">Should we allow images in addition to strings? 
<pre>
  @counter-style graphic url("1.gif") url("2.gif") url("3.gif")
</pre>
</div>
-->

<h3>The ''symbols()'' list-style-type</h3>

<p>A new list-style-type with a functional notation is introduced to
avoid the indirection of having to name counter styles. The
''symbols()'' value takes a comma-separated list of strings as
arguments.


<div class="example">
<pre>
::footnote-call {
    content: counter(footnote, symbols('*', '+', '!'))
}
</pre>
</div>

<p>Outside the range of specified values, the rendering will be as if
the ''decimal'' list style type had been specified.

<div class="example">

This code:

<pre>
ol { list-style: symbols("*", "\2020", "\2021", "\A7", "#") }
</pre>

will result in these list-items markers: * &#x2020; &#x2021; &#xA7; # 6 7 8 ...

</div>

<!--
<p class="issue">Should there be a way to indicate the behavior if there are more items than strings? Proposals include: "alphabetic", "enumerate", "numeric", "cycle", "ideographic".
-->

<h2>Character substitution</h2>

<p>It is sometimes convenient to replace one character with another
without changing the source document. For example, the apostrophe
character is easily found on keyboards, but in print it is often
better to replace it with a quotation character. The 'text-replace'
property offers a way to perform the replacement in the style sheet.

<p class='issue'>It this something CSS should do? Some think it's OK to use CSS for non-stylistic purposes, somt think this <em>is</em> is a stylistic purpose, and som think this is not stylistic and should therefore be kept outside of CSS.


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>text-replace</dfn>
    <tr>
      <td><em>Value:</em>
    <td> [&lt;string> &lt;string>]+  | none 
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes <span class='issue'>or?</span>
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified value
</table>

<p>This property is used to replace all occurrences of a certain
string with another string in the content of the element. The property
accepts pairs of strings as value, in addition to the initial ''none''
value. For each pair of strings, occurrences of the first string in
the content will be replaced with the second string. If ''none'' is
specified, no replacements will occur.

<div class="example">

<p>In this example, the apostrophe character is converted to a
quotation character.

<pre>
body { text-replace: "'" "\2019" }
</pre>
</div>

<div class="example">
In this example, the string "--" is replaced with an em-dash:
<pre>
body { text-replace: "--" "\2014" }
</pre>
</div>

<div class="example">
In this example, the string "..." is replaced with an ellipsis:
<pre>
body { text-replace: "..." "\2026" }
</pre>
</div>

<div class="example">
<p>In this example, all references to 'Soviet Union' are replaced with 'Russia'. 

<pre>
body { text-replace: "Soviet Union" "Russia" }
</pre>
</div>

<p>Text replacements are applied sequentially. 

<div class="example">
<p>The two rules below yield the same result. In the first rule all
'a' characters are converted to 'b'. Subsequently, all 'b' characters
are converted to 'c'. In the second rule, all 'a' and 'b' characters
are converted directly to 'c'.

<pre>
body { text-replace: "a" "b" "b" "c" }
body { text-replace: "a" "c" "b" "c" }
</pre>
</div>


<p>If text replacements are specified on two elements that have an
ancestor-descender relationship, only the setting on the youngest
element is applied.

<div class="example">
<p>In this example, only the second declaration has any effect on text inside the body element.

<pre>
html { text-replace: "a" "b" }
body { text-replace: "c" "d" }
</pre>
</div>


<p>The first string in a pair must have at least one character, while
the second may be empty. 

<div class="example">
<p>In this example, all 'a' characters are removed. 

<pre>
body { text-replace: "a" "" }
</pre>
</div>

<p>If the first string of a pair is empty, or if an odd number of
strings has been specified, the whole value is ignored and no text
replacements are performed.

<p>This property is evaluated after the 'content' property, and before
'text-transform'.

<p class="note">This property is very powerful and must be used with
great care. The purpose of this property is to beautify the
presentation of text when changing the source document is
impractical.

<p class=issue>Should regular expressions be allowed? 

<div class="example issue">
<pre class=issue>
body { text-replace: 's/"([^"]*?)"/&#xAB;$1&#xBB;/g' }
</pre>
</div>
<!-- "-->

<p class=issue>Here is an alternative syntax:

<pre>
*::text("Soviet Union") { content: "Russia" }
</pre>



<p class=issue>To replace quote pairs, this syntax may be an option:

<pre>
body { text-replace: quotes('"', '« ', ' »') }
</pre>
<!-- "-->


<h2>Image resolution</h2>

<p>Image resolution, as the term is used in this document, means
pixels per physical length, e.g., pixels per inch. Some image formats
can record information about the resolution of images. This
information can be helpful when determining the actual size of the
image in the formatting process. However, the information can also be
wrong, in which case it should be ignored. The 'image-resolution' and 'background-image-resolution' properties are introduced to determine the correct resolution of images.

<!--
<p class=issue>Instead of adding a new property, perhaps we could
only add new values to <a
href="http://www.w3.org/Style/Group/css3-src/css3-page/Overview.html#img-scale-img-posn">'image-scaling'</a>?
-->


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>image-resolution</dfn>
    <tr>
      <td><em>Value:</em>
    <td>normal | auto | &lt;dpi> [ , normal | &lt;dpi> ]?
    <tr>
      <td><em>Initial:</em>
      <td>normal
    <tr>
      <td><em>Applies to:</em>
      <td>replaced elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified value <span class=issue>(or, should it be only one value?)</span>
</table>

<p>This property accepts either a single value, or a comma-separated
list of two values. The values are:

<dl>
<dt>normal

<dd>The resolution of the image is unknown, and UAs should not use the
resolution found in the image. Instead, the image resolution will be
found by making image pixels equivalent to CSS pixels.

<dt>auto

<dd>The UA must look for the resolution in the image itself. If the image has no image resolution, the next value in the comma-separated list is evaluated. 

<dt>&lt;dpi>

<dd>The value consists of a number with a 'dpi' unit identifier. The
UA should use the specified resolution.

</dl>

<p>If, after evaluating the specified values, no image resolution has been determined, the UA should behave as if ''normal'' had been specified.

<!--
<p class="issue">As it stands, the property is only helpful for determining the resolution, it doesn't say how the resolution will be used in finding the actual size of the image. One idea is to only consult the image resolution when 'width' and 'height' are both 'auto'.

<p class="note">Other units, in addition to 'dpi', may be added in the future.
-->


<div class="example">
<p>This rule specifies that the UA should use the image resolution found in the image itself.
<pre>
img { image-resolution: auto }
</pre>
</div>

<div class="example">
<p>This rule specifies that the UA should use the image resolution found in the image itself. If the image has no resolution, the resolution is set to 300dpi.
<pre>
img { image-resolution: auto, 300dpi }
</pre>
</div>

<div class="example">
<p>Using this rule, the image resolution is set to 300dpi and the resolution in the image, if any, is ignored. 
<pre>
img { image-resolution: 300dpi }
</pre>
</div>

<!--
<div class="issue">
<p>Should there be a way of setting width, height, resolution on images that are referenced by a URL in the style sheet? E.g., 
<pre>
background-image: url(image.png, width, height, resolution);
background-image: image-url(image.png, width, height, resolution);
background-image: image(url(image.png), width, height, resolution);
</pre>
</div>
-->

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>background-image-resolution</dfn>
    <tr>
      <td><em>Value:</em>
    <td>normal | auto | &lt;dpi> [ , normal | &lt;dpi> ]?
    <tr>
      <td><em>Initial:</em>
      <td>normal
    <tr>
      <td><em>Applies to:</em>
      <td>replaced elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified value <span class=issue>(or, should it be only one value?)</span>
</table>

<p>As 'image-resolution', except that it describes the resolution of the background image. 


<h2>Page marks and bleed area</h2>

<p>The 'marks' property from [[CSS2]] is part of this specification.

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>marks</dfn>
    <tr>
      <td><em>Value:</em>
      <td>[ crop || cross ] | none 
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>page context 
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual, paged
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property adds crop and/or cross marks to the document. Crop
marks indicate where the page should be cut. Cross marks are used to
align sheets.

<p>Crop marks and cross marks are printed outside the page box. To
have room to show crop and cross marks, the final pages will have to
be somewhat bigger than the page box.

<div class="example">
<p>To set crop and cross marks on a document, this code can be used:
<pre>
@page { marks: crop cross }
</pre>
</div>


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>page-bleed</dfn>
    <tr>
      <td><em>Value:</em>
    <td>&lt;length
    <tr>
      <td><em>Initial:</em>
      <td>6pt
    <tr>
      <td><em>Applies to:</em>
      <td>page context
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>refer to width of page box
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified value
</table>

<p>This property specifies the extent of the page bleed area outside
the page box. This property only has effect if crop marks are enabled.


<h2>Bookmarks</h2>

<p>Some document formats have the capability of holding bookmarks.
Bookmarks are typically shown outside the document itself, often a
tree-structured and clickable table of contents to help navigate in
the electronic version of the document. To generate bookmarks, these
properties are defined:

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>bookmark-level</dfn>
    <tr>
      <td><em>Value:</em>
      <td>none | &lt;integer>
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property describes what level a certain bookmark has in a
hierarchical bookmark structure. The highest level is ''1'', then
''2'', ''3'' etc.

<div class="example">
<pre>
h1 { bookmark-level: 1 }
h2 { bookmark-level: 2 }
h3 { bookmark-level: 3 }
</pre>
</div>


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>bookmark-label</dfn>
    <tr>
      <td><em>Value:</em>
      <td>content() | attr() | &lt;string>
    <tr>
      <td><em>Initial:</em>
      <td>content()
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property specifies the label of the bookmark, i.e., the text
that will represent the bookmark in the bookmark structure.

<div class="example">
<pre>
a { bookmark-label: attr(title, string) }
h1 { bookmark-label: content() }
h2 { bookmark-label: content(before) }
#frog { bookmark-label: "The green frog" }
</pre>
</div>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>bookmark-target</dfn>
    <tr>
      <td><em>Value:</em>
      <td>none | &lt;uri> | &lt;attr>
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>For URI values, the absolute URI; for attr() values, the resulting URI or string; for other keywords, as specified.
</table>

<p>This property specifies the target of the bookmark link. 

<div class=example>
<pre>
.bookmark {
   bookmark-label: attr(title, string);
   bookmark-target: attr(href, url);
}
...
&lt;a class="bookmark" title="The green pear" href="#pears"/>
</pre>
</div>

<div class=example>
.exable { bookmark-label: url(http://www.example.com) }
</div>


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>bookmark-state</dfn>
    <tr>
      <td><em>Value:</em>
      <td>open | closed
    <tr>
      <td><em>Initial:</em>
      <td>open
    <tr>
      <td><em>Applies to:</em>
      <td>block-level elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property describes the initial state of a bookmark.

<div>
<pre>
* { bookmark-state: closed }
#open { bookmark-state: open }
</pre>
</div>



<h2>CMYK colors</h2>

<p>Printers do not use RGB colors, they (often) use CMYK: cyan,
magenta, yellow and black. A new functional value allows style sheets
to express CMYK colors.

<div class="example">
<pre>
h3 { color: cmyk(0.8, 0.5, 0.0, 0.3) }
</pre>
</div>

<p>The values representing the colors are between ''0'' and ''1''. 
Values outside this range are clipped. 

<p>It is not expected that screen-centric user agents support CMYK
colors and it is therefore important that existing CSS color values can
be combined with CMYK colors.

<div class="example">
<pre>
h3 {
  color: red;
  color: cmyk(0.5, 0.1, 0.0, 0.2);
}
</pre>

<p>User Agents that do not understand the <code>cmyk()</code> value, will use the first color (red). User agents that understand <code>cmyk()</code> will use the second color (which is bluish).
</div>

<h2>Page groups</h2>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>page-group</dfn>
    <tr>
      <td><em>Value:</em>
    <td>auto | start
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>block-level elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual, paged
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property offers a way of styling the first page of an element. It does so by introducing the notion of a "page group"; a page group starts on a new page, and can be styled with the :first pseudo-class in the page context.

<p>Values are:

<dl>
<dt>start<dd>The element forces a new page group to be started
<dt>auto<dd>The element does not force a new page group to be started
</dl>

<div class=example>
<p>This example contains several chapters. Each chapter starts on a new page which has different headers from subsequent pages. 

<pre>
@page chapter { @top-center { content: string(title) }}
@page chapter:first { @top-center { content: none }}
div.chapter { page: chapter; page-group: start }
h2 { string-set: title content() }
...

&lt;div class="chapter">
  &lt;h2>The first chapter&lt;/h2>
  ....
&lt;/div>
&lt;div class="chapter">
  &lt;h2>The second chapter&lt;/h2>
  ....
&lt;/div>
</pre>

<p>Note that the same effect can be achived with this style sheet:

<pre>
@page chapter { @top-center { content: string(chapter, first-except) }}
div.chapter { page: chapter }
h2 { string-set: chapter content() }
</pre>

<p>Page groups, however, allow for more advanced styling of pages. See next example.

</div>

<div class=example>
<p>In this example, the top margin of the first page in a page group is larger than the top margin of subsequent pages:

<pre>
@page chapter { margin: 3cm }
@page chapter:first { margin: 6cm 3cm 3cm 3cm }
</pre>

</div>

<!--

[12:26] <fantasai> Extensions to the float property  
# [12:27] <fantasai> Howcome: Discussed on the mailing list recently. Antenna House has lots of good ideas.  
# [12:27] <fantasai> Howcome: There are four different alternatives.  
# [12:27] <fantasai> Howcome: First we extend float with 'inside' and 'outside'.  
# [12:27] <fantasai> Howcome: synonyms for left and right depending on which page you're on  
# [12:27] <fantasai> Howcome: Then we add 'top' 'bottom  
# [12:27] <fantasai> Howcome: for vertical  
# [12:28] <fantasai> Thenw e have reference keywords: 'page', 'column', 'multi-column'  
# [12:28] <fantasai> Howcome: Then we have conditional keywords: 'unless-room' | 'hide-unless'  
# [12:28] <fantasai> Howcome: so that advertisers can use any unused whitespace on the page  
# [12:28] <fantasai> Alex: you could have adverts of different size  
# [12:29] <fantasai> s/hide-unless/hide-unless-room/  
# [12:31] <fantasai> Howcome: float: top next page unless-room; Moves figure to top of next page unless room on current page  
# [12:31] <fantasai> Alex: How is this different from the default behavior of floats?  
# [12:32] <fantasai> Howcome draws on the whiteboard two pages  
# [12:32] <fantasai> first page-half-filled with text  
# [12:32] <fantasai> then a large image  
# [12:32] <fantasai> that doesn't fit  
# [12:32] <fantasai> normally it gets pushed to the next page  
# [12:32] <fantasai> and text fills after the image  
# [12:32] <fantasai> this would allow the image to shift over to the next page  
# [12:32] <fantasai> bu the text to continue filling on the first page  
# [12:32] <fantasai> Alex: Couldn't that just be regular float and clear?  
# [12:34] <fantasai> top allows float to move above placeholder  
# [12:34] <fantasai> Peter: that can get you into potential race conditions  
# [12:34] <fantasai> Alex: that can be resolved  
# [12:34] <Bert> ("float: top next page unless room" could be more compactly be called "float: here")  
# [12:35] <fantasai> Bert: you want the image centered. You only float it if it doesn't fit: it's not floated to any side.  
# [12:37] <fantasai> Howcome: you might want it to go to the bottom of the next page if it doesn't fit  
# [12:37] <fantasai> Steve: There's two cases  
# [12:37] <fantasai> Steve: It either fits on the page with the callout or it doesn't  
# [12:37] <fantasai> Steve: If it fits on the page, there are subcases. It would fit at the top, the bottom, or somewhere near the callout  
# [12:38] <fantasai> Steve: If it doesn't fit on the page, you may want to specify where it should go when it doesn't fit  
# [12:38] <fantasai> Steve: You want to specify where to put it if it does fit, and where to put it if it doesn't fit.  
# [12:40] <fantasai> Peter: Can this be done with page-break controls, or widow orphans, or something else  
# [12:40] <fantasai> Howcome: This case ('here') is non-floating  
# [12:40] <fantasai> fits or not?  
# [12:40] <fantasai>   yes -- top | here bottom  
# [12:40] <fantasai> s/here bottom/here | bottom/  
# [12:41] <fantasai>   no --  
# [12:41] <fantasai> ...  
# [12:41] <fantasai> Alex: We want to allow multiple figures with columns... we have to communicate intent that this should be regular float that should be anchored  
# [12:41] <Bert> (Or a fallback list, comma-separated, max. two items: 'float: here, top')  
# [12:42] <fantasai> Howcome: There are some cases where you're not floating, but if there isn't room you want to float  
# [12:44] <fantasai> Peter: Maybe you want to break out the notion of whether it fits.  
# [12:44] <fantasai> Peter: Maybe you want to absolutely position the thing if it doesn't fits  
# [12:45] <fantasai> Steve: So here's an example. If it fits on this page I want it at the bottom. If it doesn't fit on this page I want it at the top of the next page  
# [12:45] <fantasai> Steve: other cases are it's not floated at all if it fits, but floated to next page if it doesn't  
# [12:45] <fantasai> Steve: You don't want a break in the text. You just want it to flow.  
# [12:47] <fantasai> Bert: I heard from Steve the use cases.  
# [12:48] <fantasai> Bert: You place it this way if it fits, that way if it doesn't  
# [12:48] <fantasai> Bert: Why not have a comma.  
# [12:48] <fantasai> Bert: to separate the alternatives.  
# [12:48] <fantasai> Bert: Then you don't have this unless keywords which ar so confusing.  
# [12:49] <fantasai> Howcome: Suppose I have to floats that say 'top'. Are these floats both at the top, or does one go to the next page.  
# [12:49] <fantasai> Howcome: so it can be at the top?  
# [12:49] <fantasai> Steve: They're both floated to the top, show up in source order.  
# [12:49] <fantasai> David: Pushing to the next page sounds like the clear property  
# [12:49] <dbaron> Steve: Having 50% wide float then 100% wide float on top looks ugly  
# [12:50] <dbaron> Håkon: With a very intelligent process you could fix that.  
# [12:50] <dbaron> Alex: Grid positioning, with places in grid for bigger and smaller images.  
# [12:50] <dbaron> Steve: Need a template.  
# [12:50] <dbaron> Alex: With templates ... handle wanting at most one picture per page.  
# [12:51] <dbaron> Håkon: float:top, clear: ?  
# [12:51] <dbaron> David: clear:top ?  
# [12:51] <fantasai> Alex: in this case you want just the float to clear, not the content that comes after  
# [12:52] <dbaron> Steve: If you think it's complicated now...  
# [12:52] <dbaron> Håkon: Maybe an argument for having separate vertical and horizontal floating properties?  
# [12:52] <dbaron> Elika: Better in the same property for cascading, etc.  
# [12:52] <dbaron> Elika: But maybe "unless-room", etc., could be a separate property.  
# [12:53] <dbaron> David: What if float:left and v-float: top?  
# [12:53] <dbaron> Steve, Alex: That's ok.  
# [12:54] <fantasai> Bert writes:  
# [12:54] <dbaron> Bert: float: left | right | here | top | bottom  
# [12:54] <fantasai> Bert: float property can accept two comma-separated values  
# [12:55] <dbaron> Bert: float: [left | right | none | top | bottom], [left | right | hidden | top | bottom]  
# [12:56] <dbaron> (People discuss whether none is in the second list.)  
# [12:56] <dbaron> float: none, * is the same as float: none  
# [12:57] <dbaron> Steve: 'float: top, none' means top if it fits on the page, in-flow if it doesn't (and at the top of the next page)  
# [12:57] <dbaron> Alex: I'd like to hear from a designer that they want this conditional fallback.  
# [12:58] <fantasai> Elika: Should you need the 'page' keyword for these examples?  
# [12:58] <fantasai> Howcome: that's another question, should 'top'/'bottom' imply 'page'?  
# [12:58] <fantasai> Howcome: There's a use case for floating to the top of the containing block.  
# [12:59] <fantasai> Elika: Designers really want that.  
# [13:01] <dbaron> Alex: For float anywhere on the page, we need keywords for top, left, right, bottom, plus keywords for abs pos CB and for page.  
# [13:01] <dbaron> Peter: I can see floating to an arbitrary grid line.  
# [13:02] <fantasai> Elika: Can we assume that these floats never escape the block formatting context we're in?  

-->


<h2>Page floats</h2>

<p>To support page floats, the <span class=property>'float'</span>
property is extended with several new values. In this list, the new
values are listed and categorized (along with the existing 'left',
'right' and 'none' keywords):

<ul>
<li>horizontal keywords: left right inside outside
<li>vertical keywords: top bottom 
<li>reference keywords: page multi-column
<li>modifier keyword: next 
<li>other keywords: none hide footnote
</ul>

<p>The keywords can be combined to form more complex expressions.

<div class="example">
<p>This code floats figures to the top of the next page:

<pre>
.figure { 
  float: top next page;
}
</pre>
</div>

<p>Further, the 'float' property is extended to accept a
comma-separated list of sets of keywords. If the first set of keywords
cannot be honored with the element remaining on the current page, the
second set of keywords will determine how the element is floated.

<div class="example">

<p>In this example, the element will be floated to the top of the next page unless it fits on the current page. 

<pre>
.figure { 
  float: none, top next page;
}
</pre>
</div>


<p>The new values have the following meaning:

<dl>
   <dt>inside

   <dd>On a right page, this value is synonymous with 'left'. On a left page, this value is synonymous with 'right'

   <dt>outside

   <dd>On a left page, this value is synonymous with 'left, On a right page, this value is synonymous with 'right'

   <dt>page
   <dd>This keyword indicates that the page box acts as containing block for the purpose of 'float'

   <dt>multi-column
   <dd>This keyword indicates that the multi-column element acts as containing block for the purpose of 'float'

   <dt>top
   <dd>This keyword indicates that the element is floated to the top of the containg block.

   <dt>bottom

   <dd>This keyword indicates that the element is floated to the bottom of the containg block.

   <dt>next

   <dd>The float is placed on top of the next page from its source location.
    If combined with <code class=css>'bottom'</code>, the float is placed on
    the bottom of the next page.

   <dt>hide
   <dd>As if 'display: none' is set.
   
</dl>


<p>The keywords can be combined into sets this way: 

<ul>
<li>only one horizontal keyword can appear in a set
<li>only one vertical keyword can appear in a set
<li>at least one horizontal or vertical keyword must appear, except that 'none', 'hide', and 'footnote' must appear alone
<li>'next' may appear once along with 'page' and 'multi-column
<li>keywords can appear in any order 
</ul>


<div class="example">
<p>Float element to the top of the page:

<pre>
.figure { 
  float: top page;
  width: 1gr;
}
</pre>
</div>

<div class="example">
<p>Float element to the top of the next page:

<pre>
.figure { 
  float: top next page;
  width: 1gr;
}
</pre>
</div>

<div class="example">
Float figure to the top right of the multi-column element:

<pre>
.figure { 
  float: top right multi-column;
  width: 1gr;
}
</pre>
</div>


<div class="example">
Place footnotes at the bottom of the inside columns:

<pre>
@footnote { 
  float: bottom inside multi-column; 
  width: 1gr;
}
</pre>
</div>


<div class="example">
Place figure on top of current column:

<pre>
.figure { 
  float: top;
}
</pre>
</div>



<div class="example">
If there is room on the current page, show the element in place.  If
there isn't room on the current page, hide the element. 

<pre>
.figure { 
  float: none, hide;
}
</pre>
</div>


<!--

<h2>Page floats alternative 1; one property, compound values</h2>


<p>To support page floats, the <span class=property>'float'</span> property is extended with several new values:

  <dl>

   <dt>page
   <dd>This keyword indicates that the page box is the containing block of the element. 

   <dt>inside

   <dd>The element generates a block box that is floated to the inside of the
    page. On a right page, it means the left side, and on a left page it
    means the right side.

   <dt>outside

   <dd>The element generates a block box that is floated to the outside of
    the page. On a right page, it means the right side, and on a left page it
    means the left side.

   <dt>top

   <dd>The element generates a block box that is floated to the top of the
    page.

   <dt>bottom

   <dd>The element generates a block box that is floated to the bottom of the
    page.

   <dt>next

   <dd>The float is placed on top of the next page from its source location.
    If combined with <code class=css>'bottom'</code>, the float is placed on
    the bottom of the next page.
  </dl>

<p>These values can appear along with the existing values on 'float'.
In order to float an element wrt. the page, the keywords can be combined this way:

<ul>
<li>the keyword 'page' must appear once
<li>only one horizontal keyword ('right', 'left', 'outside', 'inside') can appear in a value
<li>only one vertical keyword ('top', 'bottom') can appear in a value
<li>at least one horizontal or vertical keyword must appear
<li>keywords can appear in any order
<li>the keyword 'next' may be specified once 
</ul>


<div class=example>
<p>Here are some examples of page floats:

<pre>
img {
  float: next page;               /* float to the top next page */
  float: top next page;           /* float to the top next page */
  float: next top page;           /* float to the top next page */
  float: bottom next page;        /* float to the bottom of the next page */
  float: outside top page;        /* float to the top of the current page, away from the binding */
  float: next page bottom left;   /* float to the bottom left of the next page
  float: bottom page left right;  /* illegal, ignored */
}
</pre>
</div>


<p>For non-replaced elements in horizontal text, values that have a
horizontal component ('right', 'left', 'outside', 'inside') will
result in shrink-wrap width calculations as per CSS 2.1 section
10.3.5. Values that only have a vertical component ('top', 'bottom',
'next', not in combination with other values) will result in width
calculations as per CSS 2.1 section 10.3.3. In vertical text, width
calculations are vice versa.

<div class="example">

<p>Assuming horizontal text, these rules will result in the width of
<code>div</code> elements being equal to the width of the containing block:

<pre>
div { float: top; width: auto; 
  margin: 0; padding: 0; border: none } 
</pre>
</div>

<div class="example">

<p>Assuming horizontal text, these rules will result in the width of
<code>div</code> elements being determined by shrink-wrap:

<pre>
div { float: top left; width: auto; 
  margin: 0; padding: 0; border: none } 
</pre>
</div>

<p>If the width of a floating element is constrained, other content may be placed next to it.

<div class="example">

<p>Assuming horizontal text and a containing block wider than 200px,
these rules may result in other content being shown to the right of
the <code>div</code> element:

<pre>
div { float: top left; width: 200px; 
  margin: 0; padding: 0; border: none } 
</pre>
</div>

-->

<h2>Advanced multi-column layout</h2>

<p>In paged media, it is common for figures, captions, images, and
quotes to be laid out in certain positions for typographical reasons,
rather than for structural (as in content order) reasons. For example,
an image that illustrates a news story is often placed in the upper
right corner of the article, irrespective of its order in the content.
A poignant quote from the article may be shown in large type in the
column gap, pushing aside text in both columns, to get the attention
of the reader. 

<p>Basic multi-column layouts is described in a separated CSS3 module
[[CSS3COL]]. This section extends multi-column functionality so that
more advanced, but commonly used, layouts can be achieved.

<p>The proposed functionality relies on three new components:

<ul>
<li>one new value on float: ''multi-column'':
<li>one new property: 'float-offset'
<li>one new unit: ''gr''
</ul>

<p>The strategy for achieving advanced multi-column layout is similar
to page floats; elements escape their normal containing box by setting
a value on 'float'. In the case of column-layout, the keyword is
''multi-column'' (instead of ''page'') and it indicates that the
element should floated wrt. the multi-column element instead of the
column where it naturally occurs.

<p>To further enhance positioning, the 'float-offset' property is
introduced. It pushes elements in the opposite direction of the
positional keywords, both horizontally and vertically.

<p>The 'gr' unit is introduced to allow the grid lines of columns
(and, potentially, tables) to be used in the positioning of elements.
Each column has one grid line on each side corresponding to the
content edge of the content box. 

<p>The width of a column is therefore '1gr'. A value of '2gr' includes
one column width and one column gap. Further, '3gr' is the width of
two columns, including the gap between them, etc. Fractions on the
'gr' unit refer to the last distance added. A value of '1.5gr'
includes one column width and half the width of a column gap.

<p>For non-replaced elements in horizontal text, values that have a
horizontal component ('right', 'left', 'outside', 'inside') will
result in shrink-wrap width calculations as per CSS 2.1 section
10.3.5. Values that only have a vertical component ('top', 'bottom',
'next', not in combination with other values) will result in width
calculations as per CSS 2.1 section 10.3.3. In vertical text, width
calculations are vice versa.


<p class="issue">'float-offset' is a good concept for moving a float into
  the right position. For completeness it should apply to absolute
  positioning as well. We should reuse existing naming conventions
  already in place for abspos elements (e.g., 'offset-left, 'right',
  or call it 'shift left, 'shift right' etc.).


<div class="example">
<p>This code serves as the base document for the examples of this section:
<pre>
&lt;html>
&lt;style>
div {
  column-width: 15em;
  column-gap: 2em;               /* shown in red below */
  column-rule: thin solid black; /* shown in black below */
  padding: 1em;                  /* shown in blue below */
}
img {
  display: block;                /* shown in dark gray below */
}
&lt;/style>
&lt;body>
&lt;div>
Lorem ipsum dolor sit amet. Nam at jus.
&lt;img src="foo"/>
Sed imp er di et ris. Cur abi tur et sapen.
...
&lt;/div>
&lt;/body>
&lt;/html>
</pre>

<p>This code can be rendered as:

<div class=cols>
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.
<br><br><br><br><br><br><br>
Sed imp er di et ris.<br>Cur abi tur et sapen.

<div style="position: absolute; left: 175px; top: 0; z-index: 6;">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.</div>

<div style="position: absolute; left: 350px; top: 0; z-index: 6;">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.</div>

<div class=rep></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

</div>


<div class="example">

<p>If this code is added to the base document:

<pre>
img { float: right }
</pre>

<p>it may be rendered as:

<div class=cols>

<p>Lorem ipsum dolor<br>sit amet. Nam at jus.
<br>Sed<br> imp<br> er di<br> et ris.<br>Cur<br> abi<br> tur et sapen. Fusce<br> sed ligula a turpis.

<div style="position: absolute; left: 175px; top: 0; z-index: 6;">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.</div>

<div style="position: absolute; left: 350px; top: 0; z-index: 6;">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.</div>


<div class=rep style="left: 50px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>


</div>



<div class="example">
<p>This code floats images to the bottom of their containing blockand
sets the width to be that of the columnt.
<pre>
img { 
  float: bottom;
  width: 1gr;
}
</pre>

<p>If the image naturally appears in the first column, this is the result:

<div class=cols>

<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.


<div style="position: absolute; left: 175px; top: 0; z-index: 6;">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.</div>

<div style="position: absolute; left: 350px; top: 0; z-index: 6;">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.</div>


<div class=rep style="width: 150px; top: 90px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

</div>



<div class=example>
<p>This code floats figures to the top of the multi-column element. 

<pre>
div.figure { 
  float: top right multi-column; 
  width: 1gr }
</pre>

<p>The '1gr' value on
'width' is equal to the width of the containing block. Here is a possible rendering:



<div class=cols>

<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.

<div style="position: absolute; left: 175px; top: 0px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.
</div>

<div style="position: absolute; left: 350px; top: 115px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.
</div>


<div class=rep style="top: 0; left: 350px; width: 150px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>


</div>


<div class=example>
<p>In this code, the 'float' property floats the element to the top left of the multi-column element, while the 'float-offset' property pushes it to 
the right so that it ends up in the column next to it:

<pre>
div.quote { 
  float: top left multi-column; 
  float-offset: 2gr; 
  width: 1gr }
</pre>

<div class=cols>

<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.

<div style="position: absolute; left: 175px; top: 115px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.
</div>

<div style="position: absolute; left: 350px; top: 0px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.
</div>


<div class=rep style="top: 0; left: 175px; width: 150px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

<p>Assuming a three-column layout, the same rendering can be achieved
by floating the element to the right instead:

<pre>
div.quote { 
  float: top right multi-column; 
  float-offset: 2gr; 
  width: 1gr }
</pre>


</div>

<p>The floated element will never be pushed outside the content edges of the multicol element due to 'float-offset'.

<div class="example">

<pre>
img {
  float: top right multi-column;
  width: 3gr;
}
</pre>

<p>The code above floats the element to the top right of the multi-column element. Further, it sets the width of images to the width of two columns plus the gap between them. Here is a possible rendering. 


<div class=cols>

<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.

<div style="position: absolute; left: 175px; top: 115px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.
</div>

<div style="position: absolute; left: 350px; top: 115px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.
</div>


<div class=rep style="top: 0; left: 175px; width: 325px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

</div>



<div class="example">

<pre>
img {
  float: top right multi-column;
  width: 2gr;
}
</pre>

<p>The code above floats the element to the top right of the multi-column element. Further, it sets the width of the image to the width of one
column plus one column gap. Here is a possible rendering. 


<div class=cols>

<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.

<div style="position: absolute; left: 175px; top: 0px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.
</div>

<div style="position: absolute; left: 350px; top: 115px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.
</div>


<div class=rep style="top: 0; left: 325px; width: 175px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

</div>



<div class="example">

<pre>
img {
  float: top right multi-column;
  width: 1.5gr;
}
</pre>

<p>The code above floats the element to the top right of the multi-column element. Further, it sets the width of the image to the width of one
column plus half the column gap.


<div class=cols>

<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.

<div style="position: absolute; left: 175px; top: 0px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.
</div>

<div style="position: absolute; left: 350px; top: 115px; z-index: 6">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.
</div>


<div class=rep style="top: 0; left: 337.5px; width: 163px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

</div>


<div class="example">

<pre>
img { 
  float: top left multi-column;
  float-offset: 1.5gr 50%;
  width: 8em;
}
</pre>

<p>The first rule in the code above floats images to the top left of the multi-column element. The second rule pushes the float in the opposite directions: to the right and downwards. The horizontal component (''1.5gr'') means that the horizontal middle of the element should be in the middle of the gap between the left-most column and the one next to it. Vertically, element should be in the middle of the column. Here is a possible rendering:
 
<div class=cols>

<p>Lorem ipsum dolor<br>sit amet. Nam at jus.
<br>Sed<br> imp<br> er di<br> et ris.<br>Cur<br> abi<br> tur et sapen. Fusce<br> sed ligula a turpis.

<div style="position: absolute; left: 175px; top: 0; z-index: 6;">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.
<div style="margin-left: 100px">
Sed<br> imp<br> er di<br> et ris.<br>Cur<br> abi</div>
tur et sapen. Fusce
<br>
sed ligula a turpis.
</div>

<div style="position: absolute; left: 350px; top: 0; z-index: 6;">
<p>Lorem ipsum dolor<br>sit amet. Nam at jus.<br>
Sed imp er di et ris.<br>Cur abi tur et sapen.<br>
Vivamus a metus.<br> Aenean at risus<br> pharetra ante 
luctu<br> feugiat quis enim.<br> Cum sociis natoque<br> 
penatibus et magni.</div>


<div class=rep style="left: 50px; width: 220px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

</div>



<h3>The 'float-offset' property</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>float-offset</dfn>
    <tr>
      <td><em>Value:</em>
    <td>&lt;length> &lt;length> ? 
    <tr>
      <td><em>Initial:</em>
      <td>0 0 
    <tr>
      <td><em>Applies to:</em>
      <td>floated elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>refer to width and height of containing block
    <tr>
      <td><em>Media:</em>
      <td>visual, paged
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>one or two absolute lengths
</table>

<p>This property pushes floated elements in the opposite direction of
the where they have been floated with 'float'. If one value is
specified, it is the horizontal offset. If two values are specified,
the first is the horizontal and the second is the vertical offset. If
an element has only been floated horizontally (e.g., by setting
'float: right'), this property will only offset the float
horizontally, even if a vertical value also has been specified.
Likewise, if an element has only been floated vertically, this
property will only offset the float vertically. If an element has been
floated both horizontally and vertically, this property will offset
both horizontally and vertically. If no vertical value has been
specified, the vertical offset is set to zero.

<p>If the 'gr' unit or percentage unit is used, it means that the
middle of the float should be aligned with the specified grid line (or
portion thereof).

<p>If another unit is used, it means that the float is pushed a
distance equal to the specified length.



<h2>Page columns</h2>




<h2>Continuation markers</h2>

<p>Continuation markers are used to indicate that an element continues
from one page to the next. The ::before-page-break pseudo-element is shown
after the last line before the page break. The ::after-page-break
pseudo-element is shown before the first line after the page break.
Continuation markers otherwise act as ::marker pseudo-elements
[[!CSS3LIST]], except that the value of 'list-style-position' is
honored on the pseudo-elements rather than the host element.


<div class="example">
<pre>
p::before-page-break { 
   list-style-position: outside;
   content: url(to-arrow.png);
}
p::after-page-break { 
   list-style-position: outside;
   content: url(from-arrow.png);
}
</pre>
</div>



<h2>Change bars</h2>

<p>Change bars are used to indicate that a change has occurred in a
section of a document. The changed section does not necessarily
correspond to an element and (given the tree structure of common
markup languages) it is not always possible to create any such
element.

<p>To avoid these limitations, the beginning of a change mark is
associated with one element and the end of a change mark is
associated with another element.

<p>Change bars do not take up space in the layout.

<div class="example">
<pre>
p.change-start { 
  change-bar: thin solid red;
  change-bar-class: change1;
  change-bar-offset: 0.3em;
  change-bar-side: left; /* or right, inside, outside */
}

p.change-end { 
  change-bar-class: change1;
}
</pre>
</div>

<p class="note">This model is borrowed from <a
href="http://www.w3.org/TR/2006/CR-xsl11-20060220/#fo_change-bar-begin">XSL-FO</a>. 

<h2>Line numbers</h2>

<p class="issue">This is an early sketch of what may turn into a more complete proposal.

<p>Line numbers are sometimes used to reference particular lines of a
document. Line numbers can be generated through pseudo-elements.

<div class="example">
<p>In this example, line numbers are shown on the left side of every fifth line. Also, the line number counter is reset on every page.

<pre>
::line-number-left(5) { 
   font: 10pt serif; 
   content: counter(line);
}

@page { counter-reset: line }
</pre>
</div>

<p>These are the pseudo-elements that can set line numbers: 'line-number-left', 'line-number-right', 'line-number-inside', 'line-number-outside'.

<p>The ''line'' counter is set to zero at the beginning of the document and incremented by one for each line box of elements in the normal flow, excluding tables. 

<p class="issue">The use of multiple pseudo-elements to control where
the line counter appears seems clumsy, but there doesn't seem to be
any other way to get that functionality without adding more
properties.



<h2>Page lists</h2>

<p>In CSS 2.0, the 'page' property takes one value, and the value can
be 'auto' or a named page.

<p>In this specification, a space-separated list of named pages
(called a "page list") is allowed in the 'page' property and the
property is changed from inherited to non-inherited. Another change is
that a single named page will result in a page break both before and
after the element (in CSS 2.0 the page break after the element was
conditional on subsequent 'page' values).

<h3>The 'page' property</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>page</dfn>
    <tr>
      <td><em>Value:</em>
      <td>auto | [ &lt;identifier> ]+ auto? 
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>block-level elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>


<p>The values mean:

<dl>
<dt>auto

<dd>One single 'auto' value means that the element is laid out on the
current page using the current page list. If no page list has been
specified on this or ancestor element, the element is laid out the
default pages.

<dt>one or more named pages, optionally followed by 'auto'

<dd>A page break is generated before the element, thereafter the
content of the element is laid out by traversing the page list
linearly starting with the first item. One page is created per item in
the page list. If more pages are required than there are items in the
page list, the last item is repeated as many times as necessary to
display the element. If the page list ends with the 'auto' keyword,
the page list continues after the end of the element, otherwise a
page break is generated after the element. 

</dl>

<p>In the cases where page breaks are generated as result of this
property, the corresponding page break property ('page-break-before'
and/or 'page-break-after') are ignored.

<div class=example>

<pre>
  &lt;div class="chapter">
    &lt;h1>The beginning&lt;/h1>
    ....
  &lt;/div>

  &lt;div class="chapter">
    &lt;h1>The end&lt;/h1>
    ....
  &lt;/div>
</pre>

<p>Given the above markup, this style sheet will put the content on pages that have chapter titles at the top &mdash; except the first page of each chapter. 

<pre>
  @page chapter { 
    @top-center { content: string(title) }
  }
  @page chapter-start { 
    @top-center { content: none }
  }

  div.chapter { page: chapter-start chapter }
  h1 { string-set: title content() }
</pre>

<p>This code will do the same using the :first pseudo-class:

<pre>
  @page chapter { 
    @top-center { content: string(title) }
  }
  @page chapter:first { 
    @top-center { content: none }
  }

  div.chapter { page: chapter }
  h1 { string-set: title content() }
</pre>

</div>


<div class=example>
<pre>
  &lt;h1>The beginning&lt;/h1>
    ....
  &lt;h1>The end&lt;/h1>
    ....
</pre>

<p>Given the above markup, this style sheet will put the content on pages that have chapter titles at the top &mdash; except the first page of each chapter. 

<pre>
  @page chapter { 
    @top-center { content: string(title) }
  }
  @page chapter-start { 
    @top-center { content: none }
  }
  h1 { page: chapter-start chapter auto;
       string-set: title content() }
</pre>

<p>Elements following h1 elements will continue on page sequence specified on the h1 elements due to the 'auto' value at the end of the page list.

</div>


<div class=example>

<pre>
  &lt;table>...&lt;/table>
</pre>

<p>Given the above markup, this style sheet will put all tables on "rotated" pages, with a page break before and after each table:

<pre>
  @page rotated { size: landscape }
  table { page: rotated }
</pre>

</div>


<div class=example>
<pre>
  &lt;div>
    &lt;table>...&lt;/table>
    &lt;table>...&lt;/table>
    &lt;p>This text is rendered on a 'narrow' page&lt;/p>
  &lt;/div>
</pre>

<p>Given the above markup, this style sheet will put the two tables on
"rotated" pages. The tables will be placed on the same pages if there is room. There will be a page break after the last table due to the lack of 'auto' at the end of its page list. The paragraph will be placed on the "narrow" page. 

<pre>
  @page narrow { size: 9cm 18cm }
  @page rotated { size: landscape }
  div { page: narrow }
  table { page: rotated auto }
  table + *:not(table) { page: normal }
</pre>

</div>



<h2>Generated lists</h2>

<p>Books typically have sections that are extracted from the main
content, for example, a the table of contents (TOC) in the front and
an index at the back. Also, there are glossaries and lists of figures
(LOF) and lists of tables (LOT). These sections can all be referred to
as <em>generated lists</em>; they are generated from the main content,
and have the nature of lists. Some lists are sorted alphabetically
(e.g., an index and a glossary), and others reflect the order of the
content (e.g., TOCs, LOFs, and LOTs).

<p>To generate lists in CSS, a <em>prototype list</em> must be
established. Generated list items will be flowed into the prototype
list, but it can also contain content of its own. The prototype
list is identified with the 'prototype' property. To add generated
list items to the prototype list, the 'prototype-insert' property
is used. The 'prototype-insert-position' and 'prototype-insert-policy'
properties describe where and how generated list items are inserted
into the prototype list.

<h3>The prototype properties</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>prototype</dfn>
    <tr>
      <td><em>Value:</em>
      <td>list | none
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property declares that an element is a prototype list. A
prototype list can hold generated list items inside it. Prototype
lists cannot be nested. For each prototype list, the user
agent must remember the current insert position.

<p class="issue">Strictly, this property isn't necessary -- one could
infer from 'prototype-insert-position' or 'prototype-insert-policy'
that something is a prototype list.


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>prototype-insert</dfn>
    <tr>
      <td><em>Value:</em>
      <td>&lt;identifier> [ content() || content(before) || content(after) || content(first-letter) [, &lt;identifier> [ content() || content(before) || content(after) || content(first-letter) ] ]* | none
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property specifies a comma-separated list of elements that
should be generated in generated lists. The inital ''none'' value
means that no elements are generated. The comma-separated list
consists of the name of the ID attribute of a prototype element with a
starting '#', and a specification of the content which is to be
generated. The content is one or more of these, in any order:
content(), content(before), content(after), content(first-letter). The
content is inserted into prototype element if it is empty, otherwise
into the first empty element inside the prototype element.


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>prototype-insert-position</dfn>
    <tr>
      <td><em>Value:</em>
      <td>current | sorted
    <tr>
      <td><em>Initial:</em>
      <td>current
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>prototype-insert-policy</dfn>
    <tr>
      <td><em>Value:</em>
      <td>normal | unique 
    <tr>
      <td><em>Initial:</em>
      <td>normal
    <tr>
      <td><em>Applies to:</em>
      <td>all elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>all
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>





<h3>TOC</h3>

<div class="example">
<p>Here is an example of how to generate a TOC with leaders and page numbers.
<pre>
...
&lt;style>
  #toc { prototype: list }
  #toc-entry { 
    prototype-insert-position: current;
    font-size: 14pt }
  #toc-entry::after { content: leader('. ') source-counter(page) }
  h1.chapter { prototype-insert: #toc-entry content() }
&lt;/style>
...
&lt;div id="toc">
  &lt;h1>Table of contents&lt;/h1>
  &lt;div id="toc-entry">&lt;/div>
&lt;/div>
...
&lt;h1 class="chapter">Introduction&lt;/h1>
...
</pre>
</div>

<p>There are three new properties and one new value on the 'content'
property in the above example. This rule:

<pre>
  #toc { prototype: list }
</pre>

<p>declares that the #toc element is a prototype list that accepts
generated lists. This rule:

<pre>
    prototype-insert-position: current;
</pre>

<p>specifies that entities in the #toc are to be added at the current
position, i.e., inside or after the previous generated list item. This code:

<pre>
  #toc-entry::after { content: leader('. ') source-counter(page)} 
</pre>

<p>has one new value (''source-counter(page)'') which fetches the value
of the ''page'' counter from the source element, i.e., the element
which has a 'prototype-insert' declaration:

<pre>
  h1.chapter { prototype-insert: toc-entry content() }
</pre>

<p>The above rule creates one new element. The new element is
isomorphic to the #toc-entry element and is inserted according to the
'prototype-insert-position' of #toc-entry.


<h3>Glossary</h3>

<p>Glossaries provide a new kind of challenge: entries are sorted
alphabetically. 

<div class="example">
<p>Here is an example of how to generate a glossary:
<pre>
...
&lt;style>
#glossary { prototype: list }
#glossary-term { prototype-insert-position: sorted }
#glossary-definition { prototype-insert-position: current }
dfn { prototype-insert: glossary-term content(), glossary-definition attr(title) }

&lt;/style>
...
&lt;div id="glossary">
&lt;h2>Glossary of terms&lt;/h2>
&lt;dl>
  &lt;dt id="glossary-term">...&lt;/dt>
  &lt;dd id="glossary-definition">...&lt;/dd>
&lt;/dl>
&lt;/div>
...

&lt;p>The &lt;dfn title="Leading paragraph">introduction&lt;/dfn> comes first.&lt;/p>

</pre>

<p>By inserting the term ''sorted'' and the definition in the
''current'' position, terms will be sorted alphabetically with their
respective definition following.

</div>

<div class="example">

<p>Tables are commonly used to display lists. For example, a list of
terms and their definition can be presented this way:

<table style="border: thin solid black; border-collapse: collapse">
<tr>
	<th style="border: thin solid black">Term</th>
	<th style="border: thin solid black">Definition</th>

<tr>
	<td style="border: thin solid black">yes</td>
	<td style="border: thin solid black">expresses assent or agreement</td>
</tr>
<tr>
	<td style="border: thin solid black">no</td>
	<td style="border: thin solid black">expresses negation, dissent, denial, or refusal</td>
</tr>
</table>

<pre>
#glossary { prototype: container }
#glossary-term { prototype-insert-position: sorted  }
#glossary-definition { prototype-insert-position: current }
dfn { prototype-insert: #glossary-term content(), #glossary-definition attr(title) }

&lt;/style>
...
&lt;table id="glossary">
	&lt;th style="border: thin solid black">Term&lt;/th>
	&lt;th style="border: thin solid black">Definition&lt;/th>
&lt;tr id="glossary-term">
	&lt;td>&lt;/td>
	&lt;td id="glossary-definition">&lt;/td>
&lt;/tr>
&lt;/table>
...
&lt;p>The &lt;dfn title="Leading paragraph">introduction&lt;/dfn> comes first.&lt;/p>
</pre>

<p>Note that the #glossary-term element is a table row, while the
element is inserted into a table cell. This is due to the table row
being a non-empty element and that the first td element is the first
empty element.

</div>



<h3>Index</h3>

<p>An index is a generated list that is sorted alphabetically, just
like glossaries. In addition, indexes often have single letters in
large font sizes to help humans navigate. For example, all index
entries starting with "s" is placed under a large capital "S". There
should only be one large capital "S", and if there are no index entries
starting with "s" the large "S" isn't shown.

<p>To achieve this kind of presentation, the following strategy is
suggested: for every index entry that is encountered, two elements are
generated. One is the large capital letter, and the other is the index
entry itself. To avoid having one large capital letter before each
index entry, the 'prototype-insert-policy' property declares that identical
generated list elements are to be deleted.

<div class="example">
<pre>
...
&lt;style>
#index {
  prototype: list }
#index-marker {
  prototype-insert-position: sorted 
  prototype-insert-policy: unique; 
  text-transform: uppercase }
#index-entry {
  prototype-insert-position: sorted }
#index-entry::after {
  content: leader(". . ") source-counter(page) }
dfn.entry { 
  prototype-insert: #index-marker content(first-letter), #index-entry content() }
&lt;/style>
...

&lt;div id="index">
&lt;h2>Index&lt;/h2>
&lt;div id="index-marker">&lt;/div>
&lt;div id="index-entry">&lt;/div>
&lt;/div>

&lt;p>An &lt;dfn class="entry">emphasized element&lt;/dfn> stands out.&lt;/p>
...
</pre>
</div>


<h3>A more complex example</h3>

<div class=example>

<p>Here is a more complex example with several types of generated lists. Note how multilevel tocs require a prototype list without any additional content. Also, notice how the "acronym" element generates an entry both in the index and in the list of acronyms.

<pre>
&lt;style>
#toc-list {
  prototype: list }

#toc-entry-section {
  font-size: large;
  prototype-insert-position: current }

#toc-entry-subsection {
  font-size: medium;
  prototype-insert-position: current }

#toc-entry-section::after, #toc-entry-subsection::after {
  content: leader('. ') source-counter(page) }

#acronym-list {
  prototype: list }

#acronym-term {
  prototype-insert-position: sorted }

#acronym-definition {
  prototype-insert-position: current }

#index {
  prototype: list }

#index-marker {
  prototype-insert-position: sorted 
  prototype-insert-policy: unique;
}

#index-entry {
  prototype-insert-position: sorted }

#index-entry::after {
  content: leader('. . ') source-counter(page) }

h2 {
  prototype-insert: #toc-entry content() }

h3 {
  prototype-insert: #toc-entry content() }

acronym { 
  prototype-insert:
          #index-marker content(first-letter), 
          #index-entry content(), 
          #acronym content(), 
          #acronym-definition attr(title);
}

dfn { prototype-insert: 
          #index-marker content(first-letter), 
          #index-entry content();
}
&lt;/style>

&lt;div id="toc">
&lt;h2>Table of contents&lt;/h2>
  &lt;div id="toc-list">
    &lt;div id="toc-entry-section">&lt;/div>
    &lt;div id="toc-entry-subsection">&lt;/div>
  &lt;/div>
&lt;/div>

&lt;div id="acronym-list">
&lt;h2>List of acronyms&lt;/h2>
&lt;dl>
  &lt;dt id="acronym">&lt;/dt>
  &lt;dd id="acronym-definition">&lt;/dd>
&lt;/dl>
&lt;/div>

&lt;div id="index">
&lt;h2>Index&lt;/h2>
&lt;div id="index-marker">&lt;/div>
&lt;div id="index-entry">&lt;/div>
&lt;/div>

&lt;body>

&lt;h2>Introduction&lt;/h2>

&lt;p>This part defines the a acronym: &lt;acronym title="HyperText
Markup Language">HTML&lt;/acronym>.

&lt;h3>More to learn&lt;/h3>

&lt;p>An &lt;dfn>emphasized element&lt;/dfn> element stands out.

&lt;/body>

</pre>
</div>


<h2>Conformance</h2>

<h2>Appendix A: Default style sheet</h2>

<p class=issue>

<pre>
@page {
  counter-reset: footnote;
  @footnote {
    counter-increment: footnote;
    float: page bottom;
    width: 100%;
    height: auto;
  }
}

::footnote-call {
  counter-increment: footnote;
  content: counter(footnote, super-decimal); 
}
::footnote-marker {
  content: counter(footnote, super-decimal); 
}


h1 { bookmark-level: 1 }
h2 { bookmark-level: 2 }
h3 { bookmark-level: 3 }
h4 { bookmark-level: 4 }
h5 { bookmark-level: 5 }
h6 { bookmark-level: 6 }
</pre>


<h2 class=no-num id=acknowledgments>Acknowledgments</h2>

<p>This document has been improved by Bert Bos, Michael Day, Melinda
Grant, David Baron, Markus Mielke, Steve Zilles and Ian Hickson. [more
to be added] Laurens Holst, Mike Bremford, Allan Sandfeld Jensen,
Kelly Miller, Werner Donné, Tarquin (Mark) Wilton-Jones, Michel
Fortin, Christian Roth, Brady Duga, Del Merritt, Ladd Van Tol.</p>

<h2 class=no-num id=references>References</h2>

<h3 class="no-num" id="normative-references">Normative references</h3>
<!--begin-normative-->


<p>[Here will be inserted the file "normative.inc"]</p>
<!--end-normative-->


<h3 class="no-num" id="other-references">Other references</h3>
<!--begin-informative-->


<p>[Here will be inserted the file "informative.inc"]</p>
<!--end-informative-->


<h2 class="no-num" id="index">Index</h2>
<!--index-->

<h2 class="no-num" id="property-index">Property index</h2>
<!-- properties -->
</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

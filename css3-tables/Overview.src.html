<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
  <meta charset=utf8>
  <title>CSS3 Tables Module</title>
  <link rel="stylesheet" type="text/css" href="../default.css">
  <style type="text/css">
  /* Just in case an incorrect max-width occurs in default.css */
  body {max-width: none !important}
  </style>
  <link rel="stylesheet" type="text/css"
  href="https://www.w3.org/StyleSheets/TR/W3C-MO">
</head>

<body>

<div class="head">
<!--logo-->

<h1>CSS3 Tables Module</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE: 21 Feb 2002]</h2>
<dl>
  <dt>This version:</dt>
    <dd><a
      href="[VERSION]">http://www.w3.org/[YEAR]/MO-css3-tables-[CDATE]</a></dd>
  <dt>Latest version:</dt>
    <dd><a
      href="[LATEST]">[LATEST]</a></dd>
  <dt>Previous version:</dt>
    <dd><a
      href="[http://www.w3.org/PreviousVersionURI]">[http://www.w3.org/PreviousVersionURI]</a></dd>
  <dt>Feedback:</dt>
    <dd><a href="mailto:www-style@w3.org?subject=%5Bcss-tables%5D%20feedback">www-style@w3.org</a>
        with subject line &ldquo;<kbd>[css-tables] <var>&hellip; message topic &hellip;</var></kbd>&rdquo;
        (<a rel="discussion" href="http://lists.w3.org/Archives/Public/www-style/">archives</a>)
  <dt>Editors:</dt>
    <dd><a href="http://www.w3.org/People/Bos">Bert Bos</a>, <a
      href="http://www.w3.org/">W3C</a>, <a
      href="mailto:bert@w3.org">&lt;bert@w3.org&gt;</a></dd>
    <dd>[editor name, affiliation (opt.), email address (opt.)]</dd>
</dl>

<!--copyright-->

<hr title="Separator for header">
</div>


<h2 id=abstract class="no-num no-toc">Abstract</h2>

<p>CSS (Cascading Style Sheets) is a language for specifying the
rendering of a structured document (in HTML or XML). See the CSS3
introduction [[CSS3INTRO]] for more on CSS. The <em>CSS3 table
module</em> is one of the modules of level 3 of CSS and defines the
properties that specify how tables are to be displayed visually or
spoken by a speech synthesizer.

<p>This is a very rough draft. It consists of the text of
the CSS2 chapter on tables, with almost no changes yet., except for
the addition of the first section, "Tabs &amp; leaders."

<h2 id=status class="no-num no-toc">Status of this document</h2>

<details class="annoying-warning" open>
  <summary>This document is obsolete.</summary>
  This specification is not being actively maintained, and should not be used as a guide for implementations.  It may be revived in the future, but for now should be considered obsolete.  <br>If you have questions or comments on this specification, please send an email to the CSS Working Group's mailing list at <a href="mailto:www-style@w3.org">www-style@w3.org</a>.  (Before sending mail for the first time, you have to subscribe at <a href="http://lists.w3.org/Archives/Public/www-style/">http://lists.w3.org/Archives/Public/www-style/</a>.)
</details>

<!--status-->

<p>The text hasn't yet been synchronized with the latest version of
CSS 2.1.

<h2 class="no-num no-toc"><a name="contents">Table of contents</a></h2>

<!--toc-->

<hr>

<h2>Dependencies on other modules</h2>

<p>This CSS3 module depends on the following other CSS3 modules:
<ul>
  <li>CSS3 Box Model [[!CSS3BOX]]
  <li>CSS3 Syntax Module [[!CSS3SYN]]
  <li>CSS3 Values and Units Module [[!CSS3VAL]]
  <li>[module]
</ul>

<h2>The 'tab' properties: tabs and leaders</h2>

<p class="issue">[Does it belong here, or in the line box model?]

<p class="issue">[This material is new. (Well, actually, <a
href="css-tabs.html">it dates from 1996</a>, but it is new in this
draft.) Not reviewed yet in any way.]

<p class="issue">[The name "tab" maybe reminds people too much of the tab
character, which plays no role here at all. Maybe a different name is better.
"Anchor"?]

<p class="issue">[Could this be merged with the margin-left/margin-right
properties to save some properties? 'margin-left: 25% fixed' instead of 'tab:
25% left'?]

<p class=issue>Håkon will write a proposal for a
'leader(&lt;string&gt;)' notation that can be put in the 'content'
property, inside '::after' and '::before', independent of any tab
properties. It will push everything after it (up to the end of the
block or the explicit next line break, whichever comes first) forward,
so that it ends at the end of a line. Often, that may make tabs
unnecessary. [12 Jan 2005] That proposal is now in [[CSS3GCPM]].

<table class="propdef">
  <tbody>
    <tr>
      <td><em>Name:</em>
      <td><dfn>tab-position</dfn>

    <tr>
      <td><em>Value:</em>
      <td><var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var>

    <tr>
      <td><em>Initial:</em>
      <td>0

    <tr>
      <td><em>Applies to:</em>
      <td>inline-level elements

    <tr>
      <td><em>Inherited:</em>
      <td>no

    <tr>
      <td><em>Percentages:</em>
      <td>width* of containing block

    <tr>
      <td><em>Media:</em>
      <td>visual

    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>&lt;length&gt;

    <tr>
      <td colspan="2">*) if the containing block is 'horizontal', otherwise
        height


</table>

<table class="propdef">
  <tbody>
    <tr>
      <td><em>Name:</em>
      <td><dfn>tab-align</dfn>

    <tr>
      <td><em>Value:</em>
      <td>left | top | center | right | bottom | <var>&lt;string&gt;</var> |
        none

    <tr>
      <td><em>Initial:</em>
      <td>none

    <tr>
      <td><em>Applies to:</em>
      <td>inline-level elements

    <tr>
      <td><em>Inherited:</em>
      <td>no

    <tr>
      <td><em>Percentages:</em>
      <td>N/A

    <tr>
      <td><em>Media:</em>
      <td>visual

    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value


</table>

<table class="propdef">
  <tbody>
    <tr>
      <td><em>Name:</em>
      <td><dfn>tab-leaders</dfn>

    <tr>
      <td><em>Value:</em>
      <td><var>&lt;string&gt;</var>

    <tr>
      <td><em>Initial:</em>
      <td>"" (empty string)

    <tr>
      <td><em>Applies to:</em>
      <td>inline-level elements

    <tr>
      <td><em>Inherited:</em>
      <td>no

    <tr>
      <td><em>Percentages:</em>
      <td>N/A

    <tr>
      <td><em>Media:</em>
      <td>visual

    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value


</table>

<table class="propdef">
  <tbody>
    <tr>
      <td><em>Name:</em>
      <td><dfn>tab-leaders-alignment</dfn>

    <tr>
      <td><em>Value:</em>
      <td>aligned | centered | distributed

    <tr>
      <td><em>Initial:</em>
      <td>aligned

    <tr>
      <td><em>Applies to:</em>
      <td>inline-level elements

    <tr>
      <td><em>Inherited:</em>
      <td>no

    <tr>
      <td><em>Percentages:</em>
      <td>N/A

    <tr>
      <td><em>Media:</em>
      <td>visual

    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value


</table>

<table class="propdef">
  <tbody>
    <tr>
      <td><em>Name:</em>
      <td><dfn>tab</dfn>

    <tr>
      <td><em>Value:</em>
      <td>[ &lt;'tab-position'&gt; || &lt;'tab-align'&gt; ] [ / [
        &lt;'tab-leaders'&gt; || &lt;'tab-leaders-alignment'&gt; ] ]?

    <tr>
      <td><em>Initial:</em>
      <td>see individual properties

    <tr>
      <td><em>Applies to:</em>
      <td>inline-level elements

    <tr>
      <td><em>Inherited:</em>
      <td>no

    <tr>
      <td><em>Percentages:</em>
      <td>see individual properties

    <tr>
      <td><em>Media:</em>
      <td>visual

    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>see individual properties


</table>

<p>An inline element can be put at a specific position in the line by setting
the element's <span class="property">'tab'</span> property. The space that
creates before the element can be filled with <dfn>leaders</dfn> or left
blank.

<div class="example">
<p>Here are some examples:
<pre>signature { tab: 100% right }      /* right-aligned at end of line */
amount { tab: -1em "." }           /* aligned on dot, 1em from end of line */
desc { tab: 0 left }               /* left-aligned to start of line */
pageno { tab: 100% right / " . " } /* right-aligned, with dot leaders */
col2 { tab: 50% center / " · " }   /* centered in the line */</pre>

<p>With a document fragment like the following:
<pre>&lt;expenses&gt;
&lt;desc&gt;Hotel&lt;/desc&gt; &lt;amount&gt;374.55&lt;/amount&gt;
&lt;desc&gt;Travel&lt;/desc&gt; &lt;amount&gt;1460.10&lt;/amount&gt;
&lt;desc&gt;Miscellaneous, including presents and
tips&lt;/desc&gt; &lt;amount&gt;84.00&lt;/amount&gt;
&lt;desc&gt;Total&lt;/desc&gt; &lt;amount&gt;1918.65&lt;/amount&gt;
&lt;signature&gt;Ph. Fogg&lt;/signature&gt;
&lt;/expenses&gt;</pre>

<p>The rendering might be as follows:

<div class="figure">
<p><img src="tabs.png" alt="[image]">

<p class="caption">Possible rendering of a text with tabs and leaders
</div>
</div>

<p>The <span class="property">'tab-position'</span> and <span
class="property">'tab-align'</span> determine the position of the element in
the line. The element is positioned by inserting extra whitespace or leaders
before it. Setting a tab will never cause the element to overlap any other
element on the line (unless it would already overlap without the tab, because
of negative margins). It may be necessary for the UA to insert so much
whitespace/leaders, that the alignment point of the tab occurs on one of the
following lines. (The example above shows one such case.)

<p>The <span class="property">'tab-position'</span> gives the position of a
point on the line to which the element will be aligned. A negative
<var>&lt;length&gt;</var> is measured from the end of the line, a nonnegative
one from the beginning. Ditto for percentages, where percentages are relative
to the width of the <span>containing block</span> (or height, if the
containing block's <span>orientation</span> is vertical). It depends on the
writing mode of the containing block which edge is the start of the line.
<span class="issue">[Or is it more intuitive to always count positive lengths
from the left or top and negative ones from the right or bottom?]</span>

<p>The position is measured from the <em>content edge</em> of the containing
block and is independent of any floats that may make the line box narrower
than the content box. As usual for inline elements in the presence of floats,
the alignment point and the element to which it belongs will be moved to a
following line, if it would otherwise overlap the float.

<p class="note">Note that a value of '0' means the start of the line. Use
100% to refer to the end of the line.

<p><span class="property">'Tab-align'</span> specifies how the element is
aligned to the alignment point:
<dl>
  <dt>'none'</dt>
    <dd>The element is not aligned to any alignment point and is put
      immediately after the previous element, with no intervening
    leaders.</dd>
  <dt>'left', 'top'</dt>
    <dd>These are the same and mean that the left <em>margin edge</em> (or
      top, if vertical) of the element is at the given position in the line.
      <p>If the element consists of multiple boxes (because of bidi
      processing or line breaks), which of the boxes is aligned depends on
      the <span class="property">'direction'</span> of the containing block:
      the first box in the case of <span class="css">'ltr'</span>, the last
      box in the case of <span class="css">'rtl'</span>.
    </dd>
  <dt>'right', 'bottom'</dt>
    <dd>The right <em>margin edge</em> (or bottom, if vertical) is at the
      given position. If the <span class="property">'direction'</span> of the
      containing block is <span class="css">'ltr'</span>, the element's last
      box is aligned, otherwise the first box.</dd>
  <dt>'center'</dt>
    <dd>The element is centered around the given position. If a line break
      occurs inside the element, the element might not be centered
    exactly.</dd>
  <dt><var>&lt;string&gt;</var></dt>
    <dd>The beginning of the first occurrence of the string in the element is
      put at the alignment point. If the string does not occur in the
      element, the end of the content of the element is aligned.</dd>
</dl>

<p class="issue">[Do we need 'start' and 'end' keywords that dynamically
resolve to 'left' or 'right' depending on the writing direction? Probably not
very useful. Ltr and rtl are not symmetrical: even in rtl text, numbers are
right aligned.]

<p>The <span class="property">'tab-leaders'</span> property determines what
is inserted before the element to make it align. If the value is the empty
string, only whitespace is inserted, otherwise multiple copies of the string
are inserted, as many as needed. If there is not room for a whole number of
copies, the remaining part is filled with whitespace. The style (color, font,
etc.) of the leaders is that of the element's parent (i.e., not necessarily
the same as the element's own style).

<p>The values of <span class="property">'tab-leaders-alignment'</span> have
the following meaning:
<dl>
  <dt>'centered'</dt>
    <dd>If the space for the leaders is not a whole number of copies of the
      <span class="property">'tab-leaders'</span> string, half of the extra
      whitespace is inserted before the first string, and half after the last
      string. (If there is a line break the middle of the leaders, it may not
      be possible to have exactly half the space on both sides.)</dd>
  <dt>'distributed'</dt>
    <dd>Like for <span class="css">'centered'</span>, but the extra
      whitespace is inserted in equal amounts before the first, after the
      last and between the strings.</dd>
  <dt>'aligned'</dt>
    <dd>The <span class="property">'tab-leaders'</span> strings are
      positioned such that there is room for exactly a whole number of copies
      between the string and the left content edge of the containing block.
      <span class="note">Note that this has the effect that all 'aligned'
      leaders on different lines are aligned with each other, as if they were
      attached to a common grid. The dot leaders in the previous example form
      such a grid.</span></dd>
</dl>

<p>The <span class="property">'tab'</span> property is a shorthand to set all
four properties together. Omitted values default to their initial values.

<p class="note">Note the slash (/) in the value of <span
class="property">'tab'</span>: if leaders are specified, they must be
separated from the position &amp; alignment with a slash.

<p class="note">Note that <span class="css">'tab: 2em / "."'</span> is a
valid, and occasionally useful declaration, but by itself does not cause any
leaders to appear, because it implicitly sets <span
class="property">'tab-align'</span> to <span class="css">'none'</span>.

<p>Justification and line breaking algorithms may change the size of an
element, but leave it aligned at the alignment point. (Although different
algorithms and different settings of the relevant properties may cause the
alignment point to fall on different lines.)

<p class="issue">[Do we need keywords such as 'arrow-leader (for a stretchy
arrow) or 'double-arrow-leader', or can they be made from existing
characters? Or should 'tab-leaders' accept up to 3 strings, e.g., "\2190"
"\2500" "\2192" ("&#x2190;" "&#x2500;" "&#x2192;"), for start, middle and end
of the leaders?]

<h2>Introduction to tables</h2>

<p class=issue>What happens with tables in vertical text
('writing-mode: tb-rl' etc.)? Are tables rotated or not? Currently,
the specification says rows are horizontal and the only influence is
from 'direction', which may cause the next column to be on the left of
the current one instead of the right.

<p>Table mark-up in a source document typically represents a
particular relationship between three or more dimensions of data,
e.g., dates, products and the number of units sold. Table properties
in CSS are meant to style the representation of such data as a table.
But the properties can occasionally also be used to align elements in
rows and columns for purely visual reasons, rather than semantics.
Unlike, e.g., the <code class=html>table</code> element in HTML, the
<span class=property>'table'</span> keyword doesn't imply any
particular semantic relation between elements in the document.

<div class=example><p>
Here is a simple three-row, three-column
table described in HTML&nbsp;4:

<pre class="html-example">
&lt;TABLE&gt;
&lt;CAPTION&gt;This is a simple 3x3 table&lt;/CAPTION&gt;
&lt;TR id="row1"&gt;
   &lt;TH&gt;Header 1  &lt;TD&gt;Cell 1  &lt;TD&gt;Cell 2
&lt;TR id="row2"&gt;
   &lt;TH&gt;Header 2  &lt;TD&gt;Cell 3  &lt;TD&gt;Cell 4
&lt;TR id="row3"&gt;
   &lt;TH&gt;Header 3  &lt;TD&gt;Cell 5  &lt;TD&gt;Cell 6
&lt;/TABLE&gt;
</pre>

<p>This code creates one table (the <code class=html>TABLE</code>
element), three rows (the <code class=html>TR</code> elements), three
header cells (the <code class=html>TH</code> elements), and six data
cells (the <code class=html>TD</code> elements). Note that the three
columns of this example are specified implicitly: there are as many
columns in the table as required by header and data cells.

<p>The following CSS rule centers the text horizontally in the header
cells and presents the text in the header cells with a bold font
weight:

<pre>
th { text-align: center; font-weight: bold }
</pre>

<p>The next rules align the text of the header cells on their baseline
and vertically center the text in each data cell:

<pre>
th { vertical-align: baseline }
td { vertical-align: middle }
</pre>

<p>The next rules specify that the top row will be surrounded by a 3px
solid blue border and each of the other rows will be surrounded by a
1px solid black border:

<pre>
table   { border-collapse: collapse }
tr#row1 { border: 3px solid blue }
tr#row2 { border: 1px solid black }
tr#row3 { border: 1px solid black }
</pre>

<p>Note, however, that the borders around the rows overlap where the
rows meet. What color (black or blue) and thickness (1px or 3px) will
the border between row1 and row2 be? We discuss this in the section on
<a href="#border-conflict-resolution">border conflict resolution.</a>

<p>The following rule puts the table caption above the table:

<pre>
caption { caption-side: top }
</pre>

</div>

<p>The preceding example shows how CSS works with HTML 4 elements;
in HTML 4, the semantics of the various table elements (TABLE,
CAPTION, THEAD, TBODY, TFOOT, COL, COLGROUP, TH, and TD) are
well-defined. In other document languages (such as XML applications),
there may not be pre-defined table elements. Therefore, CSS&nbsp;2.1 allows
authors to <span class="index-inst" title="mapping elements to table
parts">"map"</span> document language elements to table elements via
the <span class="propinst-display">'display'</span> property. For
example, the following rule makes the FOO element act like an HTML
TABLE element and the BAR element act like a CAPTION element:</p>

<PRE class="example">
FOO { display : table }
BAR { display : table-caption }
</pre>

<p id=internal>We discuss the various table elements in the
following section. In
this specification, the term <span class="index-def" title="table
element"><dfn>table element</dfn></span> refers to any element
involved in the creation of a table. An <span class="index-def"
title="internal table element|table
element::internal">“internal”
table element</span> is one that produces a row, row group, column,
column group, or cell.

<h2>The CSS table model</h2>

<p>The CSS table model is based on the HTML&nbsp;4.0 table model, in
which the structure of a table closely parallels the visual layout of
the table. In this model, a table consists of an optional caption and
any number of rows of cells. The table model is said to be “row
primary,&#8221 since authors specify rows, not columns, explicitly in the
document language. Columns are derived once all the rows have been
specified: the first cell of each row belongs to the first column,
the second to the second column, etc.). Rows and columns may be
grouped structurally and this grouping reflected in presentation
(e.g., a border may be drawn around a group of rows).

<p>Thus, the table model consists of tables, captions, rows, row
groups, columns, column groups, and cells.

<p>The CSS model does not require that the <span>document
language</span> include elements
that correspond to each of these components.  For document languages
(such as XML applications) that do not have pre-defined table
elements, authors must map document language elements to table
elements; this is done with the
'display' property. The following
'display' values assign table
formatting rules to an arbitrary element:

<dl>
  <dt><dfn>table</dfn> (In HTML: TABLE) <dd>Specifies that an element
  defines a <em>block-level</em> table: it is a rectangular block that
  participates in a <em>block formatting context</em>.

  <dt><dfn>inline-table</dfn> (In HTML: TABLE) <dd>Specifies that an
  element defines an <em>inline-level</em> table: it is a rectangular
  block that participates in an <em>inline formatting context</em>.

  <dt><dfn>table-row</dfn> (In HTML:
  TR) <dd>Specifies that an element is a row of cells.

  <dt><dfn>table-row-group</dfn>
  (In HTML: TBODY) <dd>Specifies that an element groups one or more
  rows.

  <dt><dfn>table-header-group</dfn>
  (In HTML: THEAD) <dd>Like 'table-row-group', but for visual
  formatting, the row group is always displayed before all other rows
  and row groups and after any top captions. Print user agents may
  repeat header rows on each page spanned by a table. If a table
  contains multiple elements with 'display: table-header-group', only
  the first is rendered as a header; the others are treated as if they
  had 'display: table-row-group'.

  <dt><dfn>table-footer-group</dfn>
  (In HTML: TFOOT) <dd>Like 'table-row-group', but for visual
  formatting, the row group is always displayed after all other rows
  and row groups and before any bottom captions. Print user agents may
  repeat footer rows on each page spanned by a table. If a table
  contains multiple elements with 'display: table-footer-group', only
  the first is rendered as a footer; the others are treated as if they
  had 'display: table-row-group'.

  <dt><dfn>table-column</dfn> (In
  HTML: COL) <dd>Specifies that an element describes a column of
  cells.

  <dt><dfn>table-column-group</dfn>
  (In HTML: COLGROUP) <dd>Specifies that an element groups one or more
  columns.

  <dt><dfn>table-cell</dfn> (In HTML:
  TD, TH) <dd>Specifies that an element represents a table cell.

  <dt><dfn>table-caption</dfn> (In
  HTML: CAPTION) <dd>Specifies a caption for the table. All elements
  with 'display: table-caption' must be rendered, as described in
  <a href="#model">section [??].</a>
</dl>

<p>Replaced elements with these
'display' values are treated as their
given display types during layout. For example, an image that is set
to 'display: table-cell' will fill the available cell space, and its
dimensions might contribute towards the table sizing algorithms, as
with an ordinary cell.

<p>Elements with 'display' set
to 'table-column' or 'table-column-group' are not rendered (exactly as
if they had 'display: none'), but they are useful, because they may
have attributes which induce a certain style for the columns they
represent.

<div class=issue>
<p>The above, rewritten for 'display-model' and 'display-role':

<p>The values of <span class=property>'display-model'</span> that
apply to tables have the following meaning. (For the purposes of the
definitions in this section, any child elements with a <span
class=property>'display-role'</span> of <span class=css>'none'</span>
are considered to have been removed from the document tree.)

<dl>
  <dt>table
  <dd>
    <p>The child elements are laid out as a stack of row-groups. In
    detail:

    <p>Any uninterrupted sequence of child elements, including
    anonymous ones, with a role other than <span
    class=css>'table-{row,header,footer}-group'</span> or <span
    class=css>'table-caption'</span> is wrapped in an anonymous
    element with role and model both set to <span
    class=css>'table-row-group'</span>.

    <p>The resulting set of children is laid out as a stack of rows
    from top to bottom, with at the top any <span
    class=css>'table-header-group'</span> child, then the <span
    class=css>'table-row-group'</span> children, in the order of the
    document, and finally any <span
    class=css>'table-footer-group'</span> child. (Note also the
    difference between these three types for paged media, described <a
    href="#table-header-group">below.</a>)

  <dt>table-row-group
  <dd>
    <p>The children are laid out as a stack of rows. In detail:

    <p>Any uninterrupted sequence of child elements with a role other
    than <span class=css>'table-row'</span> is wrapped in an anonymous
    element with role set to <span class=css>'table-row'</span> and
    model set to <span class=css>'block-inside'</span>.

    <p>The resulting children are laid out as a stack of rows from top
    to bottom in the order of the document.

  <dt>table-row
  <dd>
    <p>The children are laid out as a row of table cells. In detail:

    <p>Any uninterrupted sequence of children with a role other than
    <span class=css>'table-cell'</span> is wrapped in an anonymous
    element with role set to <span class=css>'table-cell'</span> and
    model set to <span class=css>'block'</span>.

    <p>The resulting children are laid out from left to right in the
    order of the document.

  <dt>table-column-group
  <dd>
    <p>Any children with a role other than <span
    class=css>'table-column'</span> are ignored. The other children
    aren't rendered either, but some of their properties influence the
    style of the table. See the section <a
    href="#columns">Columns</a> below.

  <dt>table-column
  <dd>
    <p>All children are ignored (as if their <span
    class=property>'display-role'</span> was <span class=css>'none'</span>)
    See the section <a href="#columns">Columns</a> below for the
    function of properties on this element.
</dl>

<p>See <a href="#width-layout">Table width algorithms</a> and <a
href="#height-layout">Table height algorithms</a> for the size of the
various elements.

<p>Where it says “top to bottom” or “left to
right” in the definitions above, this should be replaced by the
appropriate direction based on the value of <span
class=property>'writing-mode'</span> of the enclosing <span
class=css>'table'</span> element, as follows. (Note that the writing
mode of other elements in the table may influence the direction of the
context of the table cells, but only the writing mode of the table
element itself determines the direction of the rows and columns.)

<dl>
  <dt>lr-tb <dd>Rows are stacked top to bottom and columns are laid
  out from left to right (i.e., as in the definitions above).

  <dt>rl-tb <dd>Rows are stacked top to bottom and columns are laid
  out right to left.

  <dt>tb-rl <dd>Rows are laid out from right to left and columns from
  top to bottom.

  <dt>tb-lr <dd>Rows are laid out from left to right and columns from
  top to bottom.
</dl>

<p class=note>Note that there are theoretically 8 ways that rows and
columns can be ordered, but only the above 4 are supported.

<p>The values of <span class=property>'table-role'</span> have the
following meaning

<dl>
  <dt>table-cell
  <dd>
    <p>The element is a cell in a table row. If the parent, anonymous
    or not, doesn't have the model <span class=css>'table-row'</span>,
    an anonymous element is wrapped around this element and all its
    sister elements with the same role that form an uninterupted
    sequence. The anonymous element has a role and a model of <span
    class=css>'table-row'</span>.

  <dt>table-caption
  <dd>
    <p>The element is the caption of a table. If the parent, anonymous
    or not, has a model other than <span class=css>'table'</span>, an
    anonymous element is wrapped around this element and any sisters
    with a role of 'table-{row,header,footer}-group', 'table-row',
    'table-column-group' or 'table-column' that form an uninterrupted
    sequence. The anonymous element has a role of <span
    class=css>'block'</span> and a model of <span
    class=css>'table'</span>.

    <p>If the <span class=css>'table'</span> element that is this
    element's parent has another child with role <span
    class=css>'table-caption'</span> earlier in the document, this
    element is treated as if it had a role of <span
    class=css>'block'</span> instead. <span class=issue>[In
    CSS&nbsp;2.1 we said this situation was undefined and authors
    should not use it...]</span>

  <dt>table-row-group
  <dd>
    <p>The element is a group of rows. If the parent, anonymous or
    not, has a model other than <span class=css>'table'</span>, an
    anonymous element is wrapped around this element and all its
    sister elements with a role of <span
    class=css>table-{row,header,footer}-group'</span> that form an
    uninterupted sequence. The anonymous element has a role of <span
    class=css>'block'</span> and a model of <span
    class=css>'table'</span>.

  <dt id="table-header-group">table-header-group
  <dd>
    <p>The element is a group of rows that is displayed at the top of
    the table, after any top caption. In paged media, if a page break
    occurs in the table, the header group is repeated at the top of
    the table after every page break.

    <p>If the parent, anonymous or not, has a model other than <span
    class=css>'table'</span>, an anonymous element is wrapped around
    this element and all its sister elements with a role of <span
    class=css>table-{row,header,footer}-group'</span> that form an
    uninterupted sequence. The anonymous element has a role of <span
    class=css>'block'</span> and a model of <span
    class=css>'table'</span>.

  <dt>table-footer-group
  <dd>
    <p>The element is a group of rows that is displayed at the bottom
    of the table, before any bottom caption. In paged media, if a page
    break occurs in the table, the footer group is repeated at the
    bottom of the table before every page break.

    <p>If the parent, anonymous or not, has a model other than <span
    class=css>'table'</span>, an anonymous element is wrapped around
    this element and all its sister elements with a role of <span
    class=css>table-{row,header,footer}-group'</span> that form an
    uninterupted sequence. The anonymous element has a role of <span
    class=css>'block'</span> and a model of <span
    class=css>'table'</span>.

  <dt>table-column
  <dd>
    <p>The element creates a column. It's contents are ignored.

    <p>If the parent, anonymous or not, has neither the model <span
    class=css>'table'</span> nor <span
    class=css>'table-column-group'</span>, an anonymous element is
wrapped around this element and any sisters with a role of
<dd>

</dl>
</div>

<p class="issue">An <a
href="http://lists.w3.org/Archives/Public/www-style/2002Mar/0023.html">
idea</a> by Dorothea Salo of Open eBook Forum: some way to scroll a
table and keep the headers and footers on screen, plus a a vertical
analogue. Such "header columns" would stay on the screen during
horizontal scrolling.

<div class=example>
<p>The <a href="http://www.w3.org/TR/CSS2/sample.html">default style sheet for HTML&nbsp;4.0</a>
in the appendix illustrates the use of these values for HTML&nbsp;4.0:

<pre>
table    { display: table }
tr       { display: table-row }
thead    { display: table-header-group }
tbody    { display: table-row-group }
tfoot    { display: table-footer-group }
col      { display: table-column }
colgroup { display: table-column-group }
td, th   { display: table-cell }
caption  { display: table-caption }
</pre>
</div>

<p>User agents may ignore these
'display' property values for
HTML table elements, since HTML tables may be rendered using other
algorithms intended for backwards compatible rendering. However, this
is not meant to discourage the use of 'display: table' on other,
non-table elements in HTML.

<p class=issue>Remove the above paragraph?

<h3 id="anonymous-boxes">Anonymous table objects</h3>

<p>Document languages other than HTML may not contain all the elements
in the CSS&nbsp;2.1 table model. In these cases, the “missing”
elements must be assumed in order for the table model to work. Any
table element will automatically generate necessary anonymous table
objects around itself, consisting of at least three nested objects
corresponding to a 'table'/'inline-table' element, a 'table-row'
element, and a 'table-cell' element. Missing elements generate
<em>anonymous</em> objects (e.g., anonymous
boxes in visual table layout) according to the following rules:

<ol>
  <li>If the parent P of a ''table-cell'' box T is not a
  ''table-row'', a box corresponding to a ''table-row'' will be
  generated between P and T. This box will span all consecutive
  'table-cell' sibling boxes of T.

  <li>If the parent P of a ''table-row'' box T is not a ''table'',
  ''inline-table'', ''table-header-group'', ''table-footer-group'' or
  ''table-row-group'' box, a box corresponding to a ''table''
  element will be generated between P and T.
  If P is an ''inline'' box, then the generated box must be an
  ''inline-table'' box instead of a ''table'' box.
  This box will span all
  consecutive sibling boxes of T that require a
  ''table'' parent: ''table-row'', ''table-row-group'',
  ''table-header-group'', ''table-footer-group'', ''table-column'',
  ''table-column-group'', and ''table-caption''. T and T's siblings may
  also be anonymous ''table-row'' boxes generated by rule&nbsp;1.

  <li>If the parent P of a ''table-column'' box T is not a ''table'',
  ''inline-table'', or ''table-column-group'' box, a box
  corresponding to a ''table'' element will be generated between P and
  T.
  If P is an ''inline'' box, then the generated box must be an
  ''inline-table'' box instead of a ''table'' box.
  This box will span all consecutive sibling boxes
  of T that require a ''table'' parent: ''table-row'',
  ''table-row-group'', ''table-header-group'', ''table-footer-group'',
  ''table-column'', ''table-column-group'', and ''table-caption'', including
  any anonymous ''table-row'' boxes generated by rule&nbsp;1.

  <li>If the parent P of a ''table-row-group'' (or ''table-header-group'',
  ''table-footer-group'', or ''table-column-group'' or ''table-caption'')
  box T is not a ''table'' or ''inline-table'', a box
  corresponding to a ''table'' element will be generated between P and
  T.
  If P is an ''inline'' box, then the generated box must be an
  ''inline-table'' box instead of a ''table'' box.
  This box will span all consecutive sibling boxess
  of T that require a ''table'' parent: ''table-row'',
  ''table-row-group'', ''table-header-group'', ''table-footer-group'',
  ''table-column'', ''table-column-group'', and ''table-caption'', including
  any anonymous ''table-row'' boxes generated by rule&nbsp;1.

  <li>If a child T of a ''table'' box (or ''inline-table'') P is not a
  ''table-row-group'', ''table-header-group'', ''table-footer-group'',
  ''table-caption'', ''table-column'', ''table-column-group'' or ''table-row''
  box, a box corresponding to a ''table-row'' element will be
  generated between P and T. This box spans all consecutive
  siblings of T that are not ''table-row-group'', ''table-header-group'',
  ''table-footer-group'', ''table-caption'', ''table-column'',
  ''table-column-group'' or ''table-row'' boxes.

  <li>If a child T of a ''table-row-group'' box (or
  ''table-header-group'' or ''table-footer-group'') P is not a ''table-row''
  box, a box corresponding to a ''table-row'' element will be
  generated between P and T. This box spans all consecutive
  siblings of T that are not ''table-row'' boxes.

  <li>If a child T of a ''table-row'' box P is not a ''table-cell''
  box, a box corresponding to a ''table-cell'' element will be
  generated between P and T. This box spans all consecutive
  siblings of T that are not ''table-cell'' boxes.
</ol>

<div class="example">
<p>In this XML example, a ''table'' element is assumed to contain the
HBOX element:

<pre>
&lt;HBOX&gt;
  &lt;VBOX&gt;George&lt;/VBOX&gt;
  &lt;VBOX&gt;4287&lt;/VBOX&gt;
  &lt;VBOX&gt;1998&lt;/VBOX&gt;
&lt;/HBOX&gt;
</pre>

<p>because the associated style sheet is:

<pre>
HBOX { display: table-row }
VBOX { display: table-cell }
</pre>
</div>

<div class="example">
<p>In this example, three ''table-cell'' elements are assumed to contain
the text in the ROWs. Note that the text is further encapsulated in
anonymous inline boxes, as explained in <span
class="issue">[where?]</span>:

<pre class="xml-example">
&lt;STACK&gt;
  &lt;ROW&gt;This is the &lt;D&gt;top&lt;/D&gt; row.&lt;/ROW&gt;
  &lt;ROW&gt;This is the &lt;D&gt;middle&lt;/D&gt; row.&lt;/ROW&gt;
  &lt;ROW&gt;This is the &lt;D&gt;bottom&lt;/D&gt; row.&lt;/ROW&gt;
&lt;/STACK&gt;
</pre>

<p>The style sheet is:

<pre>
STACK { display: inline-table }
ROW   { display: table-row }
D     { display: inline; font-weight: bolder }
</pre>
</div>

<h2 id=columns>Columns</h2>

<p>Table cells may belong to two contexts: rows and columns. However,
in the source document cells are descendants of rows, never of
columns. Nevertheless, some aspects of cells can be influenced by
setting properties on columns.

<p>The following properties apply to column and column-group elements:

<dl>
  <dt>'border'

    <dd>The various border properties apply to columns only if
    'border-collapse' is set
    to ''collapse'' on the table element. In that case, borders set on
    columns and column groups are input to the <a
    href="#border-conflict-resolution">conflict resolution
    algorithm</a> that selects the border styles at every cell edge.

  <dt>'background'

    <dd>The background properties set the background for cells in the
    column, but only if both the cell and row have transparent
    backgrounds. See <a href="#table-layers">“Table layers and
    transparency.”</a>

  <dt>'width'

    <dd>The 'width' property gives
    the minimum width for the column.

  <dt>'visibility'

    <dd>If the 'visibility' of a column is set to ''collapse'', none of
    the cells in the column are rendered, and cells that span into
    other columns are clipped. In addition, the width of the table is
    diminished by the width the column would have taken up. See <a
    href="#dynamic-effects">“Dynamic effects”</a> below. Other values
    for 'visibility' have no effect.
</dl>

<div class="example">
<p>Here are some examples of style rules that set properties on
columns. The first two rules together implement the "rules" attribute
of HTML 4 with a value of "cols". The third rule makes the "totals"
column blue, the final two rules shows how to make a column a fixed
size, by using the <a href="#fixed-table-layout">fixed layout
algorithm</a>.

<pre>
col { border-style: none solid }
table { border-style: hidden }
col.totals { background: blue }
table { table-layout: fixed }
col.totals { width: 5em }
</pre>
</div>

<h2 id=model>Tables in the visual formatting model</h2>

<p>In terms of the visual formatting model ([[!CSS3BOX]]), a table can
behave like a <em>block-level</em> (for 'display:
table') or <em>inline-level</em> (for
'display: inline-table') element.

<p>In both cases, the table box generates an anonymous box that
contains the table box itself and any caption boxes (in document
order), except those with 'caption-side' set to ''top-outside'' or
''bottom-outside''. The caption boxes are block-level boxes that
retain their own
content, padding, margin, and border areas, and are rendered as normal
blocks inside the anonymous box. Whether the caption boxes are placed
before or after the table box is decided by the 'caption-side'
property, as described below.

<p>The anonymous box is a ''block'' box if the table is block-level, and
an ''inline-block'' box if the table is inline-level, except that this
block is never considered as a block for ''run-in'' interaction, and
that the table box (not the anonymous box) is used when doing baseline
vertical alignment for an ''inline-table''. The width of the anonymous
box is the border-edge width of the table box inside it, as described
by <a href="#width-layout">section [??]</a>. Percentages on 'width' on
the table are relative to
the anonymous box's containing block, not the anonymous box itself.

<p>The computed values of properties 'position', 'float', 'margin-*',
'top', 'right', 'bottom', and 'left' on the table box are used on the
anonymous box instead of the table box. The table box uses the initial
values for those properties.

<div class="figure">
<p><img src="top-caption.png" alt="A table with a caption above
it">

<p class="caption">Diagram of a table with a caption above it; the
top margin of the caption is collapsed with the top margin of the
table.
</div>

<h3>Caption position and alignment</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>caption-side</dfn>
    <tr>
      <td><em>Value:</em>
      <td>[ top | bottom | left | right | before | after ] && outside?
    <tr>
      <td><em>Initial:</em>
      <td>top
    <tr>
      <td><em>Applies to:</em>
      <td>'table-caption' elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property specifies the position of the caption box with
respect to the table box. Values have the following meanings:

<dl>
  <dt><dfn title="top (caption-side)">top</dfn> <dd>Positions the
  caption box above the table box.

  <dt><dfn title="bottom (caption-side)">bottom</dfn> <dd>Positions
  the caption box below the table box.

  <dt><dfn title="left (caption-side)">left</dfn> <dd>Positions the
  caption box to the left of the table box.

  <dt><dfn title="right (caption-side)">right</dfn> <dd>Positions the
  caption box to the right of the table box.

  <dt><dfn title="before (caption-side)">before</dfn>
  <dd>The used value depends on the value of the element's 'writing-mode':
  <table class=data>
  <thead>
  <tr><th>Value of 'writing-mode' <th>Meaning of ''before''
  <tbody>
  <tr><th>''horizontal-tb'' <td>''top''
  <tr><th>''vertical-rl'' <td>''right''
  <tr><th>''vertical-lr'' <td>''left''
  </table>

  <dt><dfn title="after (caption-side)">after</dfn> <dd>The used value
  depends on the value of the element's 'writing-mode':
  <table class=data>
  <thead>
  <tr><th>Value of 'writing-mode' <th>Meaning of ''after''
  <tbody>
  <tr><th>''horizontal-tb'' <td>''bottom''
  <tr><th>''vertical-rl'' <td>''left''
  <tr><th>''vertical-lr'' <td>''right''
  </table>
</dl>

<p>Captions with the extra keyword ''outside'' are formatted
very much as if they were a block element before or after the table,
except that (1) they inherit inheritable properties from the table,
and (2) they are not considered to be a block box for the purposes of
any ''compact'' or ''run-in'' element that may precede the table.

<p>Such a caption also behaves like a block box for width and height
calculations; the width and height are calculated with respect to the
table box's containing block.

<p>For a caption that is on the left or right side of a table box, on
the other hand, a value other than ''auto'' for 'width' sets the width
explicitly, but ''auto''
tells the user agent to chose a “reasonable width.” This
may vary between “the narrowest possible box” to “a
single line,” so we recommend that users do not specify ''auto''
for left and right caption widths.

<p>To align caption content horizontally within the caption box, use
the 'text-align' property.

<p>For vertical alignment of a left or right caption box with respect
to the table box, use the 'vertical-align' property. The only meaningful
values in this case are ''top'', ''middle'', and ''bottom''. All other
values are treated the same as ''top''.

<p>All left captions are displayed side by side (left margin edge of
the first against right margin edge of the next, etc.).

<div class="example">
<p>In this example, the 'caption-side' property places
captions below tables.  The caption will be as wide as the parent of
the table, and caption text will be left-justified.

<pre>
caption { caption-side: bottom;
          width: auto;
          text-align: left }
</pre>
</div>

<div class="example">
<p>The following example shows how to put a caption in the left
margin. The table itself is centered, by setting its left and right
margins to 'auto', and the whole box with table and caption is shifted
into the left margin by the same amount as the width of the caption.

<pre>
body {
    margin-left: 8em }
table {
    margin-left: auto;
    margin-right: auto }
caption {
    caption-side: left;
    margin-left: -8em;
    width: 8em;
    text-align: right;
    vertical-align: bottom }
</pre>

<p>Assuming the width of the table is less than the available width, the
formatting will be similar to this:

<div class="figure">
<p><img src="left-caption"
alt="A centered table with a caption in the left margin of the page">

<p class="caption">Diagram showing a centered table with the caption
extending into the left margin, as a result of a negative 'margin-left'
property.
</div><!-- figure -->
</div><!-- example -->

<h2 id="Visual">Visual layout of table contents</h2>

<p>Internal table elements generate rectangular
boxes with content and borders.
Cells have padding as well. Internal table elements do not have
margins.

<p>The visual layout of these boxes is governed by a rectangular,
irregular grid of rows and columns. Each box occupies a whole number
of grid cells, determined according to the following rules. These
rules do not apply to HTML 4 or earlier HTML versions; HTML imposes
its own limitations on row and column spans.

<ol>
  <li>Each row box occupies one row of grid cells. Together, the row
  boxes fill the table from top to bottom in the order they occur in
  the source document (i.e., the table occupies exactly as many grid
  rows as there are row elements).

  <li>A row group occupies the same grid cells as the rows it
  contains.

  <li>A column box occupies one or more columns of grid cells. Column
  boxes are placed next to each other in the order they occur. The
  first column box may be either on the left or on the right,
  depending on the value of the 'direction' property of the table.

  <li>A column group box occupies the same grid cells as the columns
  it contains.

  <li>Cells may span several rows or columns. (See 'row-span'.) Each
  cell is thus a rectangular box, one
  or more grid cells wide and high. The top row of this rectangle is
  in the row specified by the cell's parent. The rectangle must be as
  far to the left as possible, but it may not overlap with any other
  cell box, and must be to the right of all cells in the same row that
  are earlier in the source document. (This constraint holds if the
  'direction' property of the table is 'ltr'; if the 'direction' is
  'rtl', interchange“left” and “right” in the previous sentence.)

  <li>A cell box cannot extend beyond the last row box of a table or
  row-group; the user agents must shorten it until it fits.
</ol>

<p>The edges of the rows, columns, row groups and column groups in the
<a href="#collapsing-borders">collapsing borders model</a> coincide
with the hypothetical grid lines on which the borders of the cells are
centered. (And thus, in this model, the rows together exactly cover
the table, leaving no gaps; ditto for the columns.) In the <a
href="#separated-borders">separated borders model,</a> the edges
coincide with the <em title="border edge">border edges</em> of
cells. (And thus, in this model, there may be gaps between the rows,
columns, row groups or column groups, corresponding to the
'border-spacing' property.)

<div class="note">
<p><strong>Note.</strong> Positioning and floating of table cells
can cause them not to be table cells anymore, according to the rules
in <a href="??">[Relationships between 'display', 'position', and
'float']</a>. When floating is used, the rules on <a
href="#anonymous-boxes">anonymous table objects</a> may cause an
anonymous cell object to be created as well.
</div>

<div class="html-example">
<p>Here are two examples. The first is assumed to occur in an HTML
document, the second an XHTML document:

<pre>
&lt;TABLE&gt;
&lt;TR&gt;&lt;TD&gt;1 &lt;TD rowspan="2"&gt;2 &lt;TD&gt;3 &lt;TD&gt;4
&lt;TR&gt;&lt;TD colspan="2"&gt;5
&lt;/TABLE&gt;
</pre>

<pre>
&lt;table&gt;
&lt;tr&gt;&lt;td&gt;1 &lt;/td&gt;&lt;td rowspan="2"&gt;2 &lt;/td&gt;&lt;td&gt;3 &lt;/td&gt;&lt;td&gt;4 &lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td colspan="2"&gt;5 &lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
</pre>

<p>The second is formatted as in the figure on the right. However, the
HTML table's rendering is explicitly undefined by HTML, and CSS
doesn't try to define it. User agents are free to render it, e.g., as
in the figure on the left.

<div class="figure">
<p><img src="table-overlap" alt="One table with overlapping cells and
one without">

<p class="caption">On the left, one possible rendering of an erroneous
HTML&nbsp;4 table; on the right, the only possible formatting of a
similar XHTML table.
</div>
</div>

<h3 id="table-layers">Table layers and transparency</h3>

<p>For the purposes of finding the background of each table cell, the
different table elements may be thought of as being on six
superimposed layers. The background set on an element in one of the
layers will only be visible if the layers above it have a transparent
background.

<div class="figure">
<p><img src="tbl-layers.png" alt="schema of table layers">

<p class="caption">Schema of table layers.
</div>

<ol>
  <li>The lowest layer is a single plane, representing the table box
  itself. Like all boxes, it may be transparent.

  <li>The next layer contains the column groups. Each column group
  extends from the top of the cells in the top row to the bottom of
  the cells on the bottom row and from the left edge of its leftmost
  column to the right edge of its rightmost column. The background
  extends to cover the full area of all cells that originate in the
  column group, but this extension does not affect background image
  positioning.

  <li>On top of the column groups are the areas representing the
  column boxes. Each column is as tall as the column groups and as
  wide as a normal (single-column-spanning) cell in the column. The
  background extends to cover the full area of all cells that
  originate in the column, even if they span outside the column, but
  this extension does not affect background image positioning.

  <li>Next is the layer containing the row groups. Each row group
  extends from the top left corner of its topmost cell in the first
  column to the bottom right corner of its bottommost cell in the last
  column.

  <li>The next to last layer contains the rows. Each row is as wide as
  the row groups and as tall as a normal (single-row-spanning) cell in
  the row. As with columns, the background extends to cover the full
  area of all cells that originate in the row, even if they span
  outside the row, but this extension does not affect background
  image positioning.

  <li>The topmost layer contains the cells themselves. As the figure
  shows, although all rows contain the same number of cells, not every
  cell may have specified content. If the value of their
  'empty-cells' property is 'hide'
  these “empty” cells are transparent through the cell, row, row
  group, column and column group backgrounds, letting the table
  background show through.
</ol>

<div class="html-example">
<p>In the following example, the first row contains four cells, but
the second row contains no cells, and thus the table background shines
through, except where a cell from the first row spans into this row.
The following HTML code and style rules.

<pre>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
    &lt;TITLE&gt;Table example&lt;/TITLE&gt;
    &lt;STYLE type="text/css"&gt;
      TABLE { background: #ff0; border-collapse: collapse;
              empty-cells: hide }
      TD    { background: red; border: double black }
    &lt;/STYLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;TABLE&gt;
      &lt;TR&gt;
        &lt;TD&gt; 1
        &lt;TD rowspan="2"&gt; 2
        &lt;TD&gt; 3
        &lt;TD&gt; 4
      &lt;/TR&gt;
      &lt;TR&gt;&lt;TD&gt;&lt;/TD&gt;&lt;/TR&gt;
    &lt;/TABLE&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;
</pre>

<p>might be formatted as follows:

<div class="figure">
  <p><img src="tbl-empty.png" alt="Table with three empty cells in
  bottom row">

  <p class="caption">Table with three empty cells in the bottom row.
</div>
</div>

<p>Note that if the table has 'border-collapse: separate', the
background of the area given by the
'border-spacing' property is
always the background of the table element. See <a
href="#separated-borders">the separated borders model</a>.

<h3 id="width-layout">Table width algorithms: the 'table-layout'
property</h3>

<p>CSS does not define an “optimal” layout for tables
since, in many cases, what is optimal is a matter of taste. CSS does
define constraints that user agents must respect when laying out a
table. User agents may use any algorithm they wish to do so, and are
free to prefer rendering speed over precision, except when the
“fixed layout algorithm” is selected.

<p>Note that this section overrides the rules that apply to
calculating widths as described in [[!CSS3BOX]]. In
particular, if the margins of a table are set to '0' and the width to
''auto'', the table will not automatically size to fill its containing
block. However, once the calculated value of 'width' for the table is
found (using the algorithms given below or, when appropriate, some
other UA dependent algorithm) then the other parts of the algorithm do
apply. Therefore a table <em>can</em> be centered using left and right
''auto'' margins, for instance.

<p>Future updates of CSS may introduce ways of making tables
automatically fit their containing blocks.


<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>table-layout</dfn>
    <tr>
      <td><em>Value:</em>
      <td>auto | fixed
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>'table' and 'inline-table' elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>The 'table-layout'
property controls the algorithm used to lay out the table cells, rows,
and columns. Values have the following meaning:

<dl>
  <dt><dfn>fixed</dfn> <dd>Use the fixed table layout algorithm

  <dt><dfn title="auto (table-layout)">auto</dfn> <dd>Use any
  automatic table layout algorithm
</dl>

<p>The two algorithms are described below.

<h4 id="fixed-table-layout">Fixed table layout</h4>

<p>With this (fast) algorithm, the horizontal layout of the table does
not depend on the contents of the cells; it only depends on the
table's width, the width of the columns, and borders or cell spacing.

<p>The table's width may be specified explicitly with the
'width' property. A value of ''auto'' (for
both 'display: table' and 'display: inline-table') means use the <a
href="#auto-table-layout">automatic table layout</a> algorithm.
However, if the table is a block-level table ('display: table') in
normal flow, a UA may (but does not have to) use the algorithm of <a
href="http://www.w3.org/TR/CSS2/visudet.html#q6">10.3.3</a> [Re-link this to the Box Model] to
compute a width and apply fixed table layout even if the specified
width is 'auto'.

<div class="example">
<p>If a UA supports fixed table layout when 'width' is 'auto', the
following will create a table that is 4em narrower than its containing
block:

<pre>
table { table-layout: fixed;
        margin-left: 2em;
        margin-right: 2em }
</pre>
</div>

<p>In the fixed table layout algorithm, the width of each column is
determined as follows:

<ol>
  <li>A column element with a value other than 'auto' for the
  'width' property sets the width for
  that column.

  <li>Otherwise, a cell in the first row with a value other than
  'auto' for the 'width' property
  determines the width for that column. If the cell spans more than
  one column, the width is divided over the columns.

  <li>Any remaining columns equally divide the remaining horizontal
  table space (minus borders or cell spacing).
</ol>

<p>The width of the table is then the greater of the value of the
'width' property for the table
element and the sum of the column widths (plus cell spacing or
borders). If the table is wider than the columns, the extra space
should be distributed over the columns.

<p>If a subsequent row has more columns than the first, then
additional columns must not be rendered. When using 'table-layout:
fixed', authors should not omit columns from the first row.

<p>In this manner, the user agent can begin to lay out the table once
the entire first row has been received. Cells in subsequent rows do
not affect column widths. Any cell that has content that overflows
uses the 'overflow' property to
determine whether to clip the overflow content.

<h4 id="auto-table-layout">Automatic table layout</h4>

<p>In this algorithm (which generally requires no more than two
passes), the table's width is given by the width of its columns (and
intervening <a href="#borders">borders</a>). This algorithm reflects
the behavior of several popular HTML user agents at the writing of
this specification. UAs are not required to implement this algorithm
to determine the table layout in the case that <span
class="propinst-table-layout">'table-layout'</span> is 'auto'; they
can use any other algorithm even if it results in different behavior.

<p>Input to the automatic table layout must only include the width of
the containing block and the content of, and any CSS properties set
on, the table and any of its descendants.

<div class=issue>
<p>This should be defined in more detail.
</div>

<p><em>The remainder of this section is non-normative.</em>

<p>This algorithm may be inefficient since it requires the user agent
to have access to all the content in the table before determining the
final layout and may demand more than one pass.

<p>Column widths are determined as follows:

<ol>
  <li><p>Calculate the minimum content width (MCW) of each cell: the
  formatted content may span any number of lines but may not overflow
  the cell box. If the specified
  'width' (W) of the cell is greater
  than MCW, W is the minimum cell width. A value of ''auto'' means that
  MCW is the minimum cell width.

  <p>Also, calculate the "maximum" cell width of each cell: formatting
  the content without breaking lines other than where explicit line
  breaks occur.

  <li><p>For each column, determine a maximum and minimum column width
  from the cells that span only that column. The minimum is that
  required by the cell with the largest minimum cell width (or the
  column 'width', whichever is
  larger). The maximum is that required by the cell with the largest
  maximum cell width (or the column
  'width', whichever is larger).

  <li><p>For each cell that spans more than one column, increase the
  minimum widths of the columns it spans so that together, they are at
  least as wide as the cell. Do the same for the maximum widths. If
  possible, widen all spanned columns by approximately the same
  amount.

  <li><p>For each column group element with a 'width' other than
  ''auto'', increase the minimum widths of the columns it spans, so that
  together they are at least as wide as the column group's 'width'.

</ol>

<p>This gives a maximum and minimum width for each column. Column
widths influence the final table width as follows:

<ol>
  <li>If the 'table' or 'inline-table' element's
  'width' property has a computed value
  (W) other than 'auto', the property's value as used for layout is
  the greater of W and the minimum width required by all the columns
  plus cell spacing or borders (MIN). If W is greater than MIN, the
  extra width should be distributed over the columns.

  <li>If the ''table'' or ''inline-table'' element has 'width: auto',
  the table width used for layout is the greater of the table's
  containing block width and MIN. However, if the maximum width
  required by the columns plus cell spacing or borders (MAX) is less
  than that of the containing block, use MAX.
</ol>

<p>A percentage value for a column width is relative to the table
width. If the table has 'width: auto', a percentage represents a
constraint on the column's width, which a UA should try to satisfy.
(Obviously, this is not always possible: if the column's width is
'110%', the constraint cannot be satisfied.)

<p class=note>In this algorithm, rows (and row
groups) and columns (and column groups) both constrain and are
constrained by the dimensions of the cells they contain. Setting the
width of a column may indirectly influence the height of a row, and
vice versa.

<h3 id="height-layout">Table height algorithms</h3>

<p>The height of a table is given by the
'height' property for the 'table' or
'inline-table' element. A value of 'auto' means that the height is the
sum of the row heights plus any cell spacing or borders. Any other
value specifies the height explicitly; the table may thus be taller or
shorter than the height of its rows.
The 'height' property on ''table''
boxes is treated as a minimum height. CSS3 does not define how
extra space is distributed when the 'height' property causes the table
to be taller than it otherwise would be.
<span class=issue>Specify this?</span>

<p>The height of a ''table-row'' element's box is calculated once the
user agent has all the cells in the row available: it is the maximum
of the row's specified 'height' and the minimum height (MIN) required
by the cells. A 'height' value of 'auto' for a ''table-row'' means the
row height used for layout is MIN. MIN depends on cell box heights and
cell box alignment (much like the calculation of a <em>line box</em>
height). Percentage heights on table cells, table rows, and table row
groups compute to ''auto''.

<p>In CSS3, the height of a cell box is the maximum of the table
cell's 'height' property and the minimum height required by the
content (MIN). A value of 'auto' for 'height' implies that the value
MIN will be used for layout. CSS3 does not define what percentage
values of 'height' refer to when specified for table cells.

<p>CSS3 does not specify how cells that span more than one row
affect row height calculations except that the sum of the row heights
involved must be great enough to encompass the cell spanning the rows.

<p>The 'vertical-align' property of each table cell determines its
alignment within the row. Each cell's content has a baseline, a top, a
middle, and a bottom, as does the row itself. In the context of
tables, values for 'vertical-align' have the following meanings:

<dl>
  <dt><dfn>baseline</dfn>

    <dd>The baseline of the cell is put at the same height as the
    baseline of the first of the rows it spans (see below for the
    definition of baselines of cells and rows).

  <dt><dfn>top</dfn>

    <dd>The top of the cell box is aligned with the top of the first
    row it spans.

  <dt><dfn>bottom</dfn>

    <dd>The bottom of the cell box is aligned with the bottom of the
    last row it spans.

  <dt><dfn>middle</dfn>

    <dd>The center of the cell is aligned with the center of the rows
    it spans.

  <dt>sub, <dt>super, <dt>text-top, <dt>text-bottom,
  <dt>&lt;length&gt;, <dt>&lt;percentage&gt;

    <dd>These values do not apply to cells; the cell is aligned at the
    baseline instead.
</dl>

<p>The baseline of a cell is the baseline of the first in-flow
<em>line box</em> in the cell, or the first in-flow table-row in the
cell, whichever comes first. If there is no such line box or
table-row, the baseline is the bottom of content edge of the cell box.
For the purposes of finding a baseline, in-flow boxes with a scrolling
mechanisms (see the 'overflow' property) must be considered as if
scrolled to their origin position. Note that the baseline of a cell
may end up below its bottom border, see the <a
href="#baseline-below">example</a> below.

<p>The maximum distance between the top of the cell box and the
baseline over all cells that have 'vertical-align: baseline' is used
to set the <dfn title="baseline of a row">baseline of the row.</dfn>
Here is an example:

<div class="figure">
  <p><img src="cell-align.png" alt="Example of vertically aligning the
  cells">

  <p class="caption">Diagram showing the effect of various values of
  'vertical-align' on table cells.
</div>

<p>Cell boxes 1 and 2 are aligned at their baselines. Cell box 2 has
the largest height above the baseline, so that determines the baseline
of the row.

<p>If a row has no cell box aligned to its baseline, the baseline of
that row is the bottom content edge of the lowest cell in the row.

<p>To avoid ambiguous situations, the alignment of cells proceeds in
the following order:

<ol>
  <li>First the cells that are aligned on their baseline are
  positioned. This will establish the baseline of the row. Next the
  cells with 'vertical-align: top' are positioned.

  <li>The row now has a top, possibly a baseline, and a provisional
  height, which is the distance from the top to the lowest bottom of
  the cells positioned so far. (See conditions on the cell padding
  below.)

  <li>If any of the remaining cells, those aligned at the bottom or
  the middle, have a height that is larger than the current height of
  the row, the height of the row will be increased to the maximum of
  those cells, by lowering the bottom.

  <li>Finally the remaining cells are positioned.
</ol>

<p>Cell boxes that are smaller than the height of the row receive
extra top or bottom padding.

<div class=example id=baseline-below>
<p>The cell in this example has a baseline below its bottom border:

<pre>
div { height: 0; overflow: hidden; }

&lt;table>
 &lt;tr>
  &lt;td>
   &lt;div> Test &lt;/div>
  &lt;/td>
 &lt;/tr>
&lt;/table>
</pre>
</div>

<h3 id="column-alignment">Horizontal alignment in a column</h3>

<p>The horizontal alignment of a cell's content within a cell box is
specified with the 'text-align' property.

<p>When the 'text-align' property for more than one cell in a column
is set to a &lt;string&gt; value, the content of those cells is
aligned along a vertical axis. The beginning of the string touches
this axis. Character directionality determines whether the string lies
to the left or right of the axis.

<p>Aligning text in this way is only useful if the text fits on one
line. The result is undefined if the cell content spans more than one
line.

<p>If value of 'text-align' for a table cell is a string but the
string doesn't occur in the cell content, the end of the cell's
content touches the vertical axis of alignment.

<p>Note that the strings do not have to be the same for each cell,
although they usually are.

<p>CSS does not provide a way specify the offset of the vertical
alignment axis with respect to the edge of a column box.

<div class="example">
<p>The following style sheet:

<pre>
TD { text-align: "." }
TD:before { content: "$" }
</pre>

<p>will cause the column of dollar figures in the following HTML
table:

<pre>
&lt;TABLE&gt;
  &lt;COL width="40"&gt;
  &lt;TR&gt; &lt;TH&gt;Long distance calls
  &lt;TR&gt; &lt;TD&gt; 1.30
  &lt;TR&gt; &lt;TD&gt; 2.50
  &lt;TR&gt; &lt;TD&gt; 10.80
  &lt;TR&gt; &lt;TD&gt; 111.01
  &lt;TR&gt; &lt;TD&gt; 85.
  &lt;TR&gt; &lt;TD&gt; 90
  &lt;TR&gt; &lt;TD&gt; .05
  &lt;TR&gt; &lt;TD&gt; .06
  &lt;/TABLE&gt;
</pre>

<p>to align along the decimal point. For fun, we have used the <span
class=css>:before</span> pseudo-element to insert a dollar sign before
each figure. The table might be rendered as follows:

<pre>
Long distance calls
              $1.30
              $2.50
             $10.80
            $111.01
             $85.
             $90
               $.05
               $.06
</pre>
</div>

<!-- dynamic effect -->

<h3 id="dynamic-effects">Dynamic row and column effects</h3>

<p>The 'visibility' property
takes the value ''collapse'' for row, row group, column, and column
group elements. This value causes the entire row or column to be
removed from the display, and the space normally taken up by the row
or column to be made available for other content. Contents of spanned
rows and columns that intersect the collapsed column or row are
clipped. The suppression of the row or column, however, does not
otherwise affect the layout of the table. This allows dynamic effects
to remove table rows or columns without forcing a re-layout of the
table in order to account for the potential change in column
constraints.

<h2 id="borders">Borders</h2>

<p>There are two distinct models for setting borders on table cells in
CSS. One is most suitable for so-called <em>separated borders</em>
around individual
cells, the other is suitable for borders that are continuous from one
end of the table to the other. Many border styles can be achieved with
either model, so it is often a matter of taste which one is used.

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>border-collapse</dfn>
    <tr>
      <td><em>Value:</em>
      <td>collapse | separate
    <tr>
      <td><em>Initial:</em>
      <td>collapse
    <tr>
      <td><em>Applies to:</em>
      <td>'table' and 'inline-table' elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property selects a table's border model. The value 'separate'
selects the separated borders border model. The value 'collapse'
selects the collapsing borders model. The models are described below.

<h3 id="separated-borders">The separated borders model</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>border-spacing</dfn>
    <tr>
      <td><em>Value:</em>
      <td>&lt;length&gt; &lt;length&gt;?
    <tr>
      <td><em>Initial:</em>
      <td>0
    <tr>
      <td><em>Applies to:</em>
      <td>'table' and 'inline-table' elements*
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p class="note">*) Note: user agents may also apply the
border-spacing' property to frameset elements. Which elements are
frameset elements is not defined by this specification and is up to
the document language. For example, HTML4 defines a &lt;FRAMESET>
element, and XHTML 1.0 defines a &lt;frameset> element. The
'border-spacing' property on a frameset element can be thus used as a
valid substitute for the nonstandard framespacing attribute.

<p class="issue">[During the 20 Aug 2001 ftf, we decided to add a
property to let the designer choose what background is drawn in
border-spacing: the table's background (as in CSS2), half of the
cells' background on either side, half of the rows' background on
either side, some completely different background...]

<p>The lengths specify the distance that separates adjoining cell
borders. If one length is specified, it gives both the horizontal and
vertical spacing. If two are specified, the first gives the horizontal
spacing and the second the vertical spacing. Lengths may not be
negative.

<p>The distance between the table border and the borders of the cells
on the edge of the table is the table's padding for that side, plus
the relevant border spacing distance. For example, on the right hand
side, the distance is <var>padding-right</var> + <var>horizontal
border-spacing</var>.

<p>The width of the table is the distance from the left inner padding
edge to the right inner padding edge (including the border spacing but
excluding padding and border).

<p>However, in HTML and XHTML1, the width of the &lt;table&gt;
element is the distance from the left border edge to the right border
edge.

<p class=issue>Remove the previous paragraph and instead add
'box-sizing' to the sample style for HTML.

<p>In this model, each cell has an individual border. The
'border-spacing' property specifies the distance between the borders
of adjoining cells. In this space, the row, column, row group, and
column group backgrounds are invisible, allowing the table background
to show through. Rows, columns, row groups, and column groups cannot
have borders (i.e., user agents must ignore the border properties for
those elements).

<div class="example">
<p>The table in the figure below could be the result of a style sheet
like this:

<pre>
table      { border: outset 10pt;
             border-collapse: separate;
             border-spacing: 15pt }
td         { border: inset 5pt }
td.special { border: inset 10pt }  /* The top-left cell */
</pre>

<div class=figure>
  <p><img src="tbl-spacing.png" alt="A table with border-spacing">

  <p class="caption">A table with 'border-spacing' set to a length
  value. Note that each cell has its own border, and the table has a
  separate border as well.
</div>
</div>

<h4 id="empty-cells">Borders around empty cells: the 'empty-cells'
property</h4>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>empty-cells</dfn>
    <tr>
      <td><em>Value:</em>
      <td>show | hide
    <tr>
      <td><em>Initial:</em>
      <td>show
    <tr>
      <td><em>Applies to:</em>
      <td>'table-cell' elements
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified
</table>

<p>In the separated borders model, this property controls the
rendering of borders and backgrounds around cells that have no visible
content. Empty cells and cells with the
'visibility' property set to
'hidden' are considered to have no visible content.
Cells are empty unless they contain one or more of the following:
<ul>
<li>floating content (including empty elements),
<li>in-flow content (including empty elements) other than whitespace
that has been collapsed away by the 'white-space' property handling.
</ul>

<p>When this property has the value 'show', borders and backgrounds
are drawn around/behind empty cells (like normal cells).

<p>A value of 'hide' means that no borders or backgrounds are drawn
around/behind empty cells (see point 6 in <a
href="#table-layers">“Table layers and transparency”</a>).
Furthermore, if all the cells in a
row have a value of 'hide' and have no visible content, the entire row
behaves as if it had 'display: none'.

<div class="example">
<p>The following rule causes borders and backgrounds to be drawn
around all cells:

<pre>
table { empty-cells: show }
</pre>
</div>

<h3 id="collapsing-borders">The collapsing border model</h3>

<p>In the collapsing border model, it is possible to specify borders
that surround all or part of a cell, row, row group, column, and
column group. Borders for HTML's "rule" attribute can be specified
this way.

<p>Borders are centered on the grid lines between the cells. User
agents must find a consistent rule for rounding off in the case of an
odd number of discrete units (screen pixels, printer dots).

<p>The diagram below shows how the width of the table, the widths of
the borders, the padding, and the cell width interact. Their relation
is given by the following equation, which holds for every row of the
table:

<blockquote>
<p><var>row-width</var> = (0.5 * <var>border-width</var><sub>0</sub>)
+ <var>padding-left</var><sub>1</sub> + <var>width</var><sub>1</sub> +
<var>padding-right</var><sub>1</sub> +
<var>border-width</var><sub>1</sub> +
<var>padding-left</var><sub>2</sub> +...+
<var>padding-right</var><sub><var>n</var></sub> + (0.5 *
<var>border-width</var><sub><var>n</var></sub>)
</blockquote>

<p>Here <var>n</var> is the number of cells in the row,
<var>padding-left</var><sub><var>i</var></sub> and
<var>padding-right</var><sub><var>i</var></sub> refer to the left
(resp., right) padding of cell <var>i</var>, and
<var>border-width</var><sub><var>i</var></sub> refers to the border
between cells <var>i</var> and <var>i</var> + 1.

<p>UAs must compute an initial left and right border width for the
table by examining the first and last cells in the first row of the
table. The left border width of the table is half of the first cell's
collapsed left border, and the right border width of the table is half
of the last cell's collapsed right border. If subsequent rows have
larger collapsed left and right borders, then any excess spills into
the margin area of the table.

<p>The top border width of the table is computed by examining all
cells who collapse their top borders with the top border of the table.
The top border width of the table is equal to half of the maximum
collapsed top border. The bottom border width is computed by examining
all cells whose bottom borders collapse with the bottom of the table.
The bottom border width is equal to half of the maximum collapsed
bottom border.

<p>Any borders that spill into the margin are taken into account when
determining if the table overflows some ancestor (see <span
class="propinst-overflow">'overflow'</span>).</p>

<div class="figure">
  <p><img src="tbl-width.png" alt="Schema showing the widths of cells
  and borders and the padding of cells">

  <p class="caption">Schema showing the widths of cells and borders
  and the padding of cells.
</div>

<p>Note that in this model, the width of the table includes half the
table border. Also, in this model, a table doesn't have padding (but
does have margins).

<p>CSS3 does not define where the edge of a background on a
table element lies.

<h4 id="border-conflict-resolution">Border conflict resolution</h4>

<p>In the collapsing border model, borders at every edge of every cell
may be specified by border properties on a variety of elements that
meet at that edge (cells, rows, row groups, columns, column groups,
and the table itself), and these borders may vary in width, style, and
color. The rule of thumb is that at each edge the most "eye catching"
border style is chosen, except that any occurrence of the style
'hidden' unconditionally turns the border off.

<p>The following rules determine which border style “wins”in case of
a conflict:

<ol>
  <li>Borders with the 'border-style' of ''hidden'' take precedence
  over all other conflicting borders. Any border with this value
  suppresses all borders at this location.

  <li>Borders with a style of ''none'' have the lowest priority. Only
  if the border properties of all the elements meeting at this edge
  are ''none'' will the border be omitted (but note that ''none'' is
  the default value for the border style.)

  <li>If none of the styles are ''hidden'' and at least one of them is
  not ''none'', then narrow borders are discarded in favor of wider
  ones. If several have the same 'border-width' then styles are
  preferred in this order: ''double'', ''solid'', ''dashed'',
  ''dotted'', ''ridge'', ''outset'', ''groove'', and the lowest:
  ''inset''.

  <li>If border styles differ only in color, then a style set on a
  cell wins over one on a row, which wins over a row group, column,
  column group and, lastly, table. When two elements of the same type
  conflict, then the one further to the left (if the table's
  'direction' is ''ltr''; right, if it is ''rtl'') and further to the
  top wins.
</ol>

<div class="example">
<p>The following example illustrates the application of these
precedence rules. This style sheet:

<pre>
table          { border-collapse: collapse;
                 border: 5px solid yellow; }
*#col1         { border: 3px solid black; }
td             { border: 1px solid red; padding: 1em; }
td.cell5       { border: 5px dashed blue; }
td.cell6       { border: 5px solid green; }
</pre>

<p>with this HTML source:

<pre>
&lt;TABLE&gt;
&lt;COL id=&quot;col1&quot;&gt;&lt;COL id=&quot;col2&quot;&gt;&lt;COL id=&quot;col3&quot;&gt;
&lt;TR id=&quot;row1&quot;&gt;
    &lt;TD&gt; 1
    &lt;TD&gt; 2
    &lt;TD&gt; 3
&lt;/TR&gt;
&lt;TR id=&quot;row2&quot;&gt;
    &lt;TD&gt; 4
    &lt;TD class="cell5"&gt; 5
    &lt;TD class="cell6"&gt; 6
&lt;/TR&gt;
&lt;TR id=&quot;row3&quot;&gt;
    &lt;TD&gt; 7
    &lt;TD&gt; 8
    &lt;TD&gt; 9
&lt;/TR&gt;
&lt;TR id=&quot;row4&quot;&gt;
    &lt;TD&gt; 10
    &lt;TD&gt; 11
    &lt;TD&gt; 12
&lt;/TR&gt;
&lt;TR id=&quot;row5&quot;&gt;
    &lt;TD&gt; 13
    &lt;TD&gt; 14
    &lt;TD&gt; 15
&lt;/TR&gt;
&lt;/TABLE&gt;
</pre>

<p>would produce something like this:

<div class="figure">
  <p><img src="tbl-border-conflict.png" alt="An example of a table
  with collapsed borders">

  <p class="caption">An example of a table with collapsed borders.
</div>
</div>

<div class="example">
<p>Here is an example of hidden collapsing borders:

<div class="figure">
  <p><img src="CSStbl3.png" alt="Table with two omitted borders">

  <p class="caption"> Table with two omitted internal borders.
</div>

<p>HTML source:

<pre class="html-example">
&lt;TABLE style="border-collapse: collapse; border: solid;"&gt;
&lt;TR&gt;&lt;TD style="border-right: hidden; border-bottom: hidden"&gt;foo&lt;/TD&gt;
    &lt;TD style="border: solid"&gt;bar&lt;/TD&gt;&lt;/TR&gt;
&lt;TR&gt;&lt;TD style="border: none"&gt;foo&lt;/TD&gt;
    &lt;TD style="border: solid"&gt;bar&lt;/TD&gt;&lt;/TR&gt;
&lt;/TABLE&gt;
</pre>
</div>

<h4 id="collapsed-bg">Backgrounds in the collapsed border model</h4>

<!--
<p>CSS3 does not define where the edge of a background on a table
element lies. <span class=issue>It still doesn't?</span>
-->

<p>Backgrounds of cells, rows, columns, etc., are drawn inside the
grid lines that enclose that cell, row, etc. I.e., if there is a
border, the background starts in the middle of the border. The
adjoining cell draws the background of the other half of the border.

<p>The exception are the outer edges of the table. Here the background
doesn't start in the middle of the border, but starts a little further
outside. How far outside is determined by the <span
class=property>border-width</span> property of the table element: the
background starts half the value of border-width outside the grid.

<p class=note>Note that this means that, if the cells, rows, etc.,
don't specify any borders that collapse with the table's border, the
background will be drawn under the whole border, from border edge to
border edge, exactly as for non-table elements.

<div class=example>
<p>Here is a table with three rows and a yellow background. The table
element has a 0.5em border, but the first cell has a 1em border, which
will therefore not be fully covered by the table's background:

<pre>
&lt;table style="background: yellow; border: 0.5em dotted"&gt;
  &lt;tr&gt;
    &lt;td style="border: 1em dotted"&gt;... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;... &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;... &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</pre>

<div class="figure">
  <p><img src="bg.png" alt="The background covers the small dots, but
  not the big ones">

  <p class="caption">The background extends to the width given by the
  border-width property of the table element. The border-width of the
  first row is larger and thus the border extends outside the
  background.
</div>
</div>

<h3>Border styles</h3>

<p>Some of the values of the 'border-style' have different meanings in
tables than for other elements. In the list below they are marked with
an asterisk.

<dl>
  <dt><dfn>none</dfn>

    <dd>No border.

  <dt>*<dfn>hidden</dfn>

    <dd>Same as 'none', but in the <a
    href="#collapsing-borders">collapsing border model</a>, also
    inhibits any other border (see the section on <a
    href="#border-conflict-resolution">border conflicts</a>).

  <dt><dfn>dotted</dfn>

    <dd>The border is a series of dots.

  <dt><dfn>dashed</dfn>

    <dd>The border is a series of short line segments.

  <dt><dfn>solid</dfn>

    <dd>The border is a single line segment.

  <dt><dfn>double</dfn>

    <dd>The border is two solid lines. The sum of the two lines and
    the space between them equals the value of 'border-width'.

  <dt><dfn>groove</dfn>

    <dd>The border looks as though it were carved into the canvas.

  <dt><dfn>ridge</dfn>

    <dd>The opposite of ''groove'': the border looks as though it were
    coming out of the canvas.

  <dt>*<dfn>inset</dfn>

    <dd>In the <a href="#separated-borders">separated borders
    model</a>, the border makes the entire box look as though it were
    embedded in the canvas. In the <a
    href="#collapsing-borders">collapsing border model</a>, same as
    'ridge'.

  <dt>*<dfn>outset</dfn>

    <dd>In the <a href="#separated-borders">separated borders
    model</a>, the border makes the entire box look as though it were
    coming out of the canvas. In the <a
    href="#collapsing-borders">collapsing border model</a>, same as
    'groove'.
</dl>

<h2>The 'table-column-span' and 'table-row-span' properties</h2>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>table-column-span</dfn>, <dfn>table-row-span</dfn>
    <tr>
      <td><em>Value:</em>
      <td>auto | attr(...)
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>table cells
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>The properties 'table-column-span' and
'table-row-span' specify which attributes in
the source document contain the number of columns, resp. rows that the
element spans. See <a href="#Visual">“visual layout of table
contents.”</a> It only affects elements that are rendered as
table cells (<span class="css">'display: table-cell'</span>).

<p>A value of 'attr(<var>X</var>)' means that
the attribute <var>X</var> of the current element must be parsed as a
number. If there is no attribute <var>X</var> or it does not contain a
number, the effect is as if the number were a "1".

<p>The UA must ignore leading and trailing whitespace in the attribute
<var>X</var> and accept <span class="issue">only (or at least?)</span>
decimal integers. Numbers less than 1 are interpreted as "1". <span
class="issue">[Specify what we mean by "decimal integer"? Leading
zeros? Ignore trailing garbage, as in "2rows" -&gt; "2"? Special rules
for "0" or "*" to span as many rows/columns as possible?]</span>

<p>A value of ''auto'' means that the UA should apply its built-in
knowledge of the document format to determine the number of
rows/columns to span, or assume "1" if it has no such knowledge.

<p class="issue">[Relaxed conformance requirements for HTML?]

<div class="example">
<p>The following rules might be found in a UA style sheet for HTML or
XHTML:

<pre>
td, th {
  table-column-span: attr(colspan);
  table-row-span: attr(rowspan) }
</pre>
</div>

<p>The specified value is the computed value, i.e.,
'attr(<var>X</var>)' is <em>not</em> replaced by the value of
<var>X</var>.

<p class="issue">In this proposal, 'col-span' and 'row-span' do not
accept explicit numbers (&lt;<em>integer&gt;</em>), on the grounds
that a table in the source is (at least in the ideal case) a
structural element and the spans in it make structural sense.
Therefore the spans can be used by CSS, but not changed. On the other
hand, if you use CSS to display something as a table for visual
purposes (e.g., to display a DL element as a 2-column table), it makes
sense to allow certain elements to span columns or rows (e.g., a title
across the top of the DL list).


<h2>Aligning tables: 'table-baseline' property</h2>

<!-- See CSS ftf 9-11 Oct 2006 -->

<p class=issue>This property was decided during the CSS meeting of
9&ndash;11 October 2006 in Mountain View on the request of George
Chavchanidze. It can help align matrices and other table-like
constructs in mathematics to the surrounding text.

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>table-baseline</dfn>
    <tr>
      <td><em>Value:</em>
      <td><var>&lt;integer&gt;</var>
    <tr>
      <td><em>Initial:</em>
      <td>1
    <tr>
      <td><em>Applies to:</em>
      <td>tables and inline-tables
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>The property sets the baselines of the table for use by
'vertical-align': If the value is <var>N</var>, the <dfn
title="baseline of a table">baselines of the table</dfn> are the <em
title="baseline of a row">baselines of the <var>N</var>th row.</em> If
<var>N</var> is less than 1, use the first row; if <var>N</var> is
greater than the number of rows, use the last row.

<p>However, if 'vertical-align' is ''top'' or ''bottom'', the alignment is with respect to the top or bottom border edge of the table, not the row.

<p class=note>Note that both inline (''inline-table'') and displayed
(''table'') tables have a baseline. The latter is used, e.g., when a
table is nested in another table's cell and has to be aligned to other
cells in the same row.



<div class=example>
<p>The following example shows a 3×3 table that is aligned on the
baseline of the middle row:

<pre>
&lt;p
</pre>
</div>


<h2>Audio rendering of tables</h2>

<p class=issue>Move this section to Speech module?

<p>When a table is spoken by a speech generator, the relation between
the data cells and the header cells must be expressed in a different
way than by horizontal and vertical alignment. Some speech browsers
may allow a user to move around in the 2-dimensional space, thus
giving them the opportunity to map out the spatially represented
relations. When that is not possible, the style sheet must specify at
which points the headers are spoken.

<h3 id="speak-headers">Speaking headers: the 'speak-header'
property</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>speak-header</dfn>
    <tr>
      <td><em>Value:</em>
      <td>once | always
    <tr>
      <td><em>Initial:</em>
      <td>once
    <tr>
      <td><em>Applies to:</em>
      <td>elements that have table header information
    <tr>
      <td><em>Inherited:</em>
      <td>yes
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>aural
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property specifies whether table headers are spoken before
every cell, or only before a cell when that cell is associated with a
different header than the previous cell. Values have the following
meanings:

<dl>
  <dt>once <dd>The header is spoken one time, before a series of
  cells.

  <dt>always <dd>The header is spoken before every pertinent cell.
</dl>

<p>Each document language may have different mechanisms that allow
authors to specify headers. For example, in HTML&nbsp;4 ([[HTML40]]),
it is possible to specify header information with three different
attributes ("headers", "scope", and "axis"), and the specification
gives an algorithm for determining header information when these
attributes have not been specified.

<div class="html-example">

<div class="figure">
  <p><img src="table1.png" alt="Image of a table created in MS Word">

  <p class="caption">Image of a table with header cells ("San Jose"
  and "Seattle") that are not in the same column or row as the data
  they apply to.
</div>

<p>This HTML example presents the money spent on meals, hotels and
transport in two locations (San Jose and Seattle) for successive days.
Conceptually, you can think of the table in terms of an n-dimensional
space. The headers of this space are: location, day, category and
sub-total. Some cells define marks along an axis while others give
money spent at points within this space. The mark-up for this table
is:

<pre>
&lt;TABLE&gt;
&lt;CAPTION&gt;Travel Expense Report&lt;/CAPTION&gt;
&lt;TR&gt;
  &lt;TH&gt;&lt;/TH&gt;
  &lt;TH&gt;Meals&lt;/TH&gt;
  &lt;TH&gt;Hotels&lt;/TH&gt;
  &lt;TH&gt;Transport&lt;/TH&gt;
  &lt;TH&gt;sub-total&lt;/TH&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH id="san-jose" axis="san-jose"&gt;San Jose&lt;/TH&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH headers="san-jose"&gt;25-Aug-97&lt;/TH&gt;
  &lt;TD&gt;37.74&lt;/TD&gt;
  &lt;TD&gt;112.00&lt;/TD&gt;
  &lt;TD&gt;45.00&lt;/TD&gt;
  &lt;TD&gt;&lt;/TD&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH headers="san-jose"&gt;26-Aug-97&lt;/TH&gt;
  &lt;TD&gt;27.28&lt;/TD&gt;
  &lt;TD&gt;112.00&lt;/TD&gt;
  &lt;TD&gt;45.00&lt;/TD&gt;
  &lt;TD&gt;&lt;/TD&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH headers="san-jose"&gt;sub-total&lt;/TH&gt;
  &lt;TD&gt;65.02&lt;/TD&gt;
  &lt;TD&gt;224.00&lt;/TD&gt;
  &lt;TD&gt;90.00&lt;/TD&gt;
  &lt;TD&gt;379.02&lt;/TD&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH id="seattle" axis="seattle"&gt;Seattle&lt;/TH&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH headers="seattle"&gt;27-Aug-97&lt;/TH&gt;
  &lt;TD&gt;96.25&lt;/TD&gt;
  &lt;TD&gt;109.00&lt;/TD&gt;
  &lt;TD&gt;36.00&lt;/TD&gt;
  &lt;TD&gt;&lt;/TD&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH headers="seattle"&gt;28-Aug-97&lt;/TH&gt;
  &lt;TD&gt;35.00&lt;/TD&gt;
  &lt;TD&gt;109.00&lt;/TD&gt;
  &lt;TD&gt;36.00&lt;/TD&gt;
  &lt;TD&gt;&lt;/TD&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH headers="seattle"&gt;sub-total&lt;/TH&gt;
  &lt;TD&gt;131.25&lt;/TD&gt;
  &lt;TD&gt;218.00&lt;/TD&gt;
  &lt;TD&gt;72.00&lt;/TD&gt;
  &lt;TD&gt;421.25&lt;/TD&gt;
&lt;/TR&gt;
&lt;TR&gt;
  &lt;TH&gt;Totals&lt;/TH&gt;
  &lt;TD&gt;196.27&lt;/TD&gt;
  &lt;TD&gt;442.00&lt;/TD&gt;
  &lt;TD&gt;162.00&lt;/TD&gt;
  &lt;TD&gt;800.27&lt;/TD&gt;
&lt;/TR&gt;
&lt;/TABLE&gt;
</pre>

<p>By providing the data model in this way, authors make it possible
for speech enabled-browsers to explore the table in rich ways, e.g.,
each cell could be spoken as a list, repeating the applicable headers
before each data cell:

<pre>
San Jose, 25-Aug-97, Meals:  37.74
San Jose, 25-Aug-97, Hotels:  112.00
San Jose, 25-Aug-97, Transport:  45.00
...
</pre>

<p>The browser could also speak the headers only when they change:

<pre>
San Jose, 25-Aug-97, Meals: 37.74
    Hotels: 112.00
    Transport: 45.00
  26-Aug-97, Meals: 27.28
    Hotels: 112.00
...
</pre>
</div>

<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

<p>[acknowledgments]

<h2 class="no-num" id="references">References</h2>

<h3 class="no-num">Normative references</h3>
<!--normative-->

<h3 class="no-num">Other references</h3>
<!--informative-->

<h2 class="no-num">Index</h2>
<!--index-->

<h2 class="no-num" id="property-index">Property index</h2>
<!-- properties -->

<p>The following properties are defined in other modules: [Update when
border and background are merged.]

<ul>
  <li><dfn>'background'</dfn> [[CSS3BG]]

  <li><dfn>'border'</dfn>, <dfn>'border-style'</dfn>,
  <dfn>'border-width'</dfn> [[CSS3BORDER]]

  <li><dfn>'direction'</dfn>, <dfn>'text-align'</dfn> [[CSS3TEXT]]

  <li><dfn>'display</dfn>, <dfn>'height'</dfn>, <dfn>'overflow'</dfn>,
  <dfn>'width'</dfn> [[!CSS3BOX]]

  <li><dfn>'vertical-align'</dfn> [[CSS3LINE]]

  <li><dfn>'visibility'</dfn> [?]
</ul>

</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode:sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
End:
-->


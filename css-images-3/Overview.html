<!DOCTYPE html><html lang=en><head>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>CSS Image Values and Replaced Content Module Level 3</title>
  <link href=../default.css rel=stylesheet type=text/css>
  <link href=../csslogo.ico rel="shortcut icon" type=image/x-icon>
  <style>
  body {
    background: url("https://www.w3.org/StyleSheets/TR/logo-ED") top left no-repeat white;
    background-attachment: fixed;
    color: black;
    font-family: sans-serif;
    margin: 0 auto;
    max-width: 50em;
    padding: 2em 1em 2em 70px;
  }
  :link { color: #00C; background: transparent }
  :visited { color: #609; background: transparent }
  a[href]:active { color: #C00; background: transparent }
  a[href]:hover { background: #ffa }

  a[href] img { border-style: none }

  h1, h2, h3, h4, h5, h6 { text-align: left }
  h1, h2, h3 { color: #005A9C; }
  h1 { font: 170% sans-serif }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  h4 { font: bold 100% sans-serif }
  h5 { font: italic 100% sans-serif }
  h6 { font: small-caps 100% sans-serif }

  .hide { display: none }

  div.head { margin-bottom: 1em }
  div.head h1 { margin-top: 2em; clear: both }
  div.head table { margin-left: 2em; margin-top: 2em }

  p.copyright { font-size: small }
  p.copyright small { font-size: small }

  pre { margin-left: 2em }
  dt { font-weight: bold }

  ul.toc, ol.toc {
    list-style: none;
  }
  </style>
</head>
<body class=h-entry>
<div class=head>
  <p data-fill-with=logo><a class=logo href=http://www.w3.org/>
    <img alt=W3C height=48 src=https://www.w3.org/Icons/w3c_home width=72>
</a>
</p>
  <h1 class="p-name no-ref" id=title>CSS Image Values and Replaced Content Module Level 3</h1>
  <h2 class="no-num no-toc no-ref heading settled" id=subtitle><span class=content>Editor’s Draft,
    <span class=dt-updated><span class=value-title title=20140924>24 September 2014</span></span></span></h2>
  <div data-fill-with=spec-metadata><dl><dt>This version:<dd><a class=u-url href=http://dev.w3.org/csswg/css-images-3/>http://dev.w3.org/csswg/css-images-3/</a><dt>Latest version:<dd><a href=http://www.w3.org/TR/css3-images/>http://www.w3.org/TR/css3-images/</a><dt>Previous Versions:<dd><a href=http://www.w3.org/TR/2012/CR-css3-images-20120417/ rel=previous>http://www.w3.org/TR/2012/CR-css3-images-20120417/</a><dd><a href=http://www.w3.org/TR/2012/WD-css3-images-20120112/ rel=previous>http://www.w3.org/TR/2012/WD-css3-images-20120112/</a><dt>Feedback:<dd><span><a href="mailto:www-style@w3.org?subject=[css-images] feedback">www-style@w3.org</a> with subject line “<kbd>[css-images] <var>… message topic …</var></kbd>” (<a href=http://lists.w3.org/Archives/Public/www-style/ rel=discussion>archives</a>)</span><dt>Editors:<dd><div class="p-author h-card vcard"><a class="p-name fn u-url url" href=http://xanthir.com/contact/>Tab Atkins Jr.</a> (<span class="p-org org">Google</span>)</div><dd><div class="p-author h-card vcard"><a class="p-name fn u-url url" href=http://fantasai.inkedblade.net/contact>fantasai</a> (<span class="p-org org">Mozilla</span>)</div><dt>Issue Tracking:<dd><span><a href=http://www.w3.org/Style/CSS/Tracker/products/27>http://www.w3.org/Style/CSS/Tracker/products/27</a></span></dl></div>
  <div data-fill-with=warning></div>
  <p class=copyright data-fill-with=copyright><a href=http://www.w3.org/Consortium/Legal/ipr-notice#Copyright>Copyright</a> © 2014 <a href=http://www.w3.org/><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href=http://www.csail.mit.edu/><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href=http://www.ercim.eu/><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href=http://www.keio.ac.jp/>Keio</a>, <a href=http://ev.buaa.edu.cn/>Beihang</a>), All Rights Reserved. W3C <a href=http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer>liability</a>, <a href=http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks>trademark</a> and <a href=http://www.w3.org/Consortium/Legal/copyright-documents>document use</a> rules apply.
</p>
  <hr title="Separator for header">
</div>

<h2 class="no-num no-toc no-ref heading settled" id=abstract><span class=content>Abstract</span></h2>
<div class=p-summary data-fill-with=abstract><p>This module contains the features of CSS level 3 relating to the <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> type and replaced elements. It includes and extends the functionality of CSS level 2 <a data-biblio-type=informative data-link-type=biblio href=#biblio-css21 title=CSS21>[CSS21]</a>. The main extensions compared to CSS2.1 are the generalization of the <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#url-value title="<url>">&lt;url&gt;</a> type to the <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> type, several additions to the <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> type, a generic sizing algorithm for images and other replaced content in CSS, definitions for interpolating several <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> types, and several properties controlling the interaction of replaced elements and CSS’s layout models.</p>

<a href=http://www.w3.org/TR/CSS/>CSS</a> is a language for describing the rendering of structured documents 
(such as HTML and XML) 
on screen, on paper, in speech, etc.</div>

<h2 class="no-num no-toc no-ref heading settled" id=status><span class=content>Status of this document</span></h2>
<div data-fill-with=status><p>
	This is a public copy of the editors’ draft. 
	It is provided for discussion only and may change at any moment. 
	Its publication here does not imply endorsement of its contents by W3C. 
	Don’t cite this document other than as work in progress.

<p>
	The (<a href=http://lists.w3.org/Archives/Public/www-style/>archived</a>) public mailing list
	<a href="mailto:www-style@w3.org?Subject=%5Bcss-images%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a> 
	(see <a href=http://www.w3.org/Mail/Request>instructions</a>) 
	is preferred for discussion of this specification. 
	When sending e-mail, 
	please put the text “css-images” in the subject, 
	preferably like this:
	“[css-images] <em>…summary of comment…</em>”

<p>
	This document was produced by the <a href=http://www.w3.org/Style/CSS/members>CSS Working Group</a> 
	(part of the <a href=http://www.w3.org/Style/>Style Activity</a>).

<p>
	This document was produced by a group operating under 
	the <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/>5 February 2004 W3C Patent Policy</a>. 
	W3C maintains a <a href=http://www.w3.org/2004/01/pp-impl/32061/status rel=disclosure>public list of any patent disclosures</a> 
	made in connection with the deliverables of the group; 
	that page also includes instructions for disclosing a patent. 
	An individual who has actual knowledge of a patent which the individual believes contains <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential>Essential Claim(s)</a> 
	must disclose the information in accordance with <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure>section 6 of the W3C Patent Policy</a>.</div>
<div data-fill-with=at-risk></div>

<h2 class="no-num no-toc no-ref heading settled" id=contents><span class=content>Table of Contents</span></h2>
<div data-fill-with=table-of-contents><ul class=toc><li><a href=#intro><span class=secno>1</span> <span class=content>
Introduction</span></a><li><a href=#image-values><span class=secno>2</span> <span class=content>
Image Values: the <span class=production data-link-type=type title="<image>">&lt;image&gt;</span> type</span></a><ul class=toc><li><a href=#url-notation><span class=secno>2.1</span> <span class=content>
Image References and Image Slices: the <span class=production data-link-type=type title="<url>">&lt;url&gt;</span> type and <span class=css>url()</span> notation</span></a><li><a href=#image-notation><span class=secno>2.2</span> <span class=content>
Image Fallbacks and Annotations: the <span class=css data-link-type=maybe title=image()>image()</span> notation</span></a><ul class=toc><li><a href=#image-fallbacks><span class=secno>2.2.1</span> <span class=content>
Image Fallbacks</span></a><li><a href=#image-fragments><span class=secno>2.2.2</span> <span class=content>
Image Fragments</span></a><li><a href=#color-images><span class=secno>2.2.3</span> <span class=content>
Solid-color Images</span></a></ul><li><a href=#image-set-notation><span class=secno>2.3</span> <span class=content>
Resolution Negotiation: the <span class=css data-link-type=maybe title=image-set()>image-set()</span> notation</span></a><li><a href=#cross-fade-function><span class=secno>2.4</span> <span class=content>
Combining images: the <span class=css data-link-type=maybe title=cross-fade()>cross-fade()</span> notation</span></a></ul><li><a href=#gradients><span class=secno>3</span> <span class=content>
Gradients</span></a><ul class=toc><li><a href=#linear-gradients><span class=secno>3.1</span> <span class=content>
Linear Gradients: the <span class=css data-link-type=maybe title=linear-gradient()>linear-gradient()</span> notation</span></a><li><a href=#radial-gradients><span class=secno>3.2</span> <span class=content>
Radial Gradients: the <span class=css data-link-type=maybe title=radial-gradient()>radial-gradient()</span> notation</span></a><li><a href=#repeating-gradients><span class=secno>3.3</span> <span class=content>
Repeating Gradients: the <span class=css data-link-type=maybe title=repeating-linear-gradient()>repeating-linear-gradient()</span>, <span class=css data-link-type=maybe title=repeating-radial-gradient()>repeating-radial-gradient()</span>, and <span class=css>repeating-conic-gradient()</span> notations</span></a><li><a href=#color-stop-syntax><span class=secno>3.4</span> <span class=content>
Gradient Color-Stops</span></a></ul><li><a href=#sizing><span class=secno>4</span> <span class=content>
Sizing Images and Objects in CSS</span></a><ul class=toc><li><a href=#sizing-terms><span class=secno>4.1</span> <span class=content>
Object-Sizing Terminology</span></a><li><a href=#object-negotiation><span class=secno>4.2</span> <span class=content>
CSS⇋Object Negotiation</span></a><li><a href=#concrete-size-resolution><span class=secno>4.3</span> <span class=content>
Concrete Object Size Resolution</span></a><ul class=toc><li><a href=#default-sizing><span class=secno>4.3.1</span> <span class=content>
Default Sizing Algorithm</span></a><li><a href=#cover-contain><span class=secno>4.3.2</span> <span class=content>
Cover and Contain Constraint Sizing</span></a></ul><li><a href=#object-sizing-examples><span class=secno>4.4</span> <span class=content>
Examples of CSS Object Sizing</span></a><li><a href=#the-object-fit><span class=secno>4.5</span> <span class=content>
Sizing Objects: the <span class=property data-link-type=propdesc title=object-fit>object-fit</span> property</span></a><li><a href=#the-object-position><span class=secno>4.6</span> <span class=content>
Positioning Objects: the <span class=property data-link-type=propdesc title=object-position>object-position</span> property</span></a></ul><li><a href=#image-processing><span class=secno>5</span> <span class=content>
Image Processing</span></a><ul class=toc><li><a href=#the-image-resolution><span class=secno>5.1</span> <span class=content>
Overriding Image Resolutions: the <span class=property data-link-type=propdesc title=image-resolution>image-resolution</span> property</span></a><li><a href=#the-image-orientation><span class=secno>5.2</span> <span class=content>
Orienting an Image on the Page: the <span class=property data-link-type=propdesc title=image-orientation>image-orientation</span> property</span></a><li><a href=#the-image-rendering><span class=secno>5.3</span> <span class=content>
Determing How To Scale an Image: the <span class=property data-link-type=propdesc title=image-rendering>image-rendering</span> property</span></a></ul><li><a href=#interpolation><span class=secno>6</span> <span class=content>
Interpolation</span></a><ul class=toc><li><a href=#interpolating-images><span class=secno>6.1</span> <span class=content>
Interpolating <span class=production data-link-type=type title="<image>">&lt;image&gt;</span></span></a><li><a href=#interpolating-image-combinations><span class=secno>6.2</span> <span class=content>
Interpolating cross-fade()</span></a><li><a href=#interpolating-gradients><span class=secno>6.3</span> <span class=content>
Interpolating <span class=production data-link-type=type title="<gradient>">&lt;gradient&gt;</span></span></a></ul><li><a href=#serialization><span class=secno>7</span> <span class=content>
Serialization</span></a><li><a href=#changes><span class=secno>8</span> <span class=content>
Changes since Images 3</span></a><li><a href=#conformance><span class=secno></span> <span class=content>
Conformance</span></a><ul class=toc><li><a href=#conventions><span class=secno></span> <span class=content>
Document conventions</span></a><li><a href=#conformance-classes><span class=secno></span> <span class=content>
Conformance classes</span></a><li><a href=#partial><span class=secno></span> <span class=content>
Partial implementations</span></a><li><a href=#experimental><span class=secno></span> <span class=content>
Experimental implementations</span></a><li><a href=#testing><span class=secno></span> <span class=content>
Non-experimental implementations</span></a></ul><li><a href=#references><span class=secno></span> <span class=content>
References</span></a><ul class=toc><li><a href=#normative><span class=secno></span> <span class=content>
Normative References</span></a><li><a href=#informative><span class=secno></span> <span class=content>
Informative References</span></a></ul><li><a href=#index><span class=secno></span> <span class=content>
Index</span></a><li><a href=#property-index><span class=secno></span> <span class=content>
Property index</span></a><li><a href=#issues-index><span class=secno></span> <span class=content>Issues Index</span></a></ul></div>


<h2 class="heading settled" data-level=1 id=intro><span class=secno>1 </span><span class=content>
Introduction</span><a class=self-link href=#intro></a></h2>

<p><em>This section is not normative.</em></p>

<p>In CSS Levels 1 and 2,
	image values, such as those used in the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-image title=background-image>background-image</a> property,
	could only be given by a single URL value.
	This module introduces additional ways of representing 2D images,
	for example as <a data-section="" href=#image-notation>a URL with color fallback</a>
	or as <a data-section="" href=#gradients>a gradient</a>.</p>

<p>This module also defines several properties for <a data-section="" href=#image-processing>manipulating raster images</a>
	and for <a data-section="" href=#the-object-fit>sizing</a>
	or <a data-section="" href=#the-object-position>positioning</a>
	replaced elements such as images within the box determined by the CSS layout algorithms.
	It also defines in a generic way CSS’s <a data-section="" href=#sizing>sizing algorithm</a> for images and other replaced elements.</p>


<h2 class="heading settled" data-level=2 id=image-values><span class=secno>2 </span><span class=content>
Image Values: the <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> type</span><a class=self-link href=#image-values></a></h2>

<p>The <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> value type denotes a 2D image. It can be a
	<a data-section="" href=#url-notation>url reference</a>,
	<a data-section="" href=#image-notation>image notation</a>,
	or <a data-section="" href=#gradients>gradient notation</a>.
	Its syntax is:</p>

<pre class=prod><dfn data-dfn-type=type data-export="" id=typedef-image>&lt;image&gt;<a class=self-link href=#typedef-image></a></dfn> = <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#url-value title="<url>">&lt;url&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=function href=#funcdef-image title=image()>&lt;image()&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=function href=#funcdef-image-set title=image-set()>&lt;image-set()&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=function href=http://dev.w3.org/csswg/css-gcpm-3/#funcdef-element title=element()>&lt;element()&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=function href=#funcdef-cross-fade title=cross-fade()>&lt;cross-fade()&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=type href=#typedef-gradient title="<gradient>">&lt;gradient&gt;</a></pre>

<p>An <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> can be used in many CSS properties,
	including the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-image title=background-image>background-image</a>, <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-lists-3/#propdef-list-style-image title=list-style-image>list-style-image</a>, <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-ui-3/#cursor0 title=cursor>cursor</a> properties <a data-biblio-type=normative data-link-type=biblio href=#biblio-css21 title=CSS21>[CSS21]</a>
	(where it replaces the <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#url-value title="<url>">&lt;url&gt;</a> component in the property’s value).</p>

<p>In some cases, an image is invalid,
	such as a <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#url-value title="<url>">&lt;url&gt;</a> pointing to a resource that is not a valid image format.
	An <dfn data-dfn-type=dfn data-export="" id=invalid-image>invalid image<a class=self-link href=#invalid-image></a></dfn> is rendered as a solid-color <span class=css>transparent</span> image with no intrinsic dimensions.
	However, <a data-link-type=dfn href=#invalid-image title="invalid images">invalid images</a> have special behavior in some contexts,
	such as the <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> notation.</p>


<h3 class="heading settled" data-level=2.1 id=url-notation><span class=secno>2.1 </span><span class=content>
Image References and Image Slices: the <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#url-value title="<url>">&lt;url&gt;</a> type and <span class=css>url()</span> notation</span><a class=self-link href=#url-notation></a></h3>

<p>The simplest way to indicate an image is to reference an image file by URL.
	This can be done with the <span class=css>url()</span> notation, defined in <a data-biblio-type=informative data-link-type=biblio href=#biblio-css3val title=css3val>[css3val]</a>.</p>

	<div class=example>
		In the example below, a background image is specified with <span class=css>url()</span>syntax:

<pre>background-image: url(wavy.png);</pre>
	</div>

<p>If the UA cannot download, parse, or otherwise successfully display the contents at the URL as an image,
	it must be treated as an <a data-link-type=dfn href=#invalid-image title="invalid image">invalid image</a>.</p>


<h3 class="heading settled" data-level=2.2 id=image-notation><span class=secno>2.2 </span><span class=content>
Image Fallbacks and Annotations: the <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> notation</span><a class=self-link href=#image-notation></a></h3>

<p>The <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> function allows an author to:</p>

<ul><li data-md=""><p>use <a href=http://www.w3.org/TR/media-frags/>media fragments</a> to clip out a portion of an image</p>
<li data-md=""><p>use a solid color as an image</p>
<li data-md=""><p>fallback to a solid-color image, when the image at the specified url can’t be downloaded or decoded</p>
<li data-md=""><p>automatically respect the image orientation specified in the image’s metadata</p>
</ul>
<p>The <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> notation is defined as:</p>

	<pre class=prod><dfn data-dfn-type=function data-export="" id=funcdef-image>image()<a class=self-link href=#funcdef-image></a></dfn> = image( [ [ <a class=production data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#string-value title="<string>">&lt;string&gt;</a> ]<a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-comma title=,>,</a> <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-color-3/#valuea-def-color title="<color>">&lt;color&gt;</a><a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a> ]<a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-req title=!>!</a> )
</pre>

<p>A <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#string-value title="<string>">&lt;string&gt;</a> used in <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> represents a <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#url-value title="<url>">&lt;url&gt;</a>.
	As usual for URLs in CSS,
	relative URLs are resolved to an absolute URL
	(as described in Values &amp; Units <a data-biblio-type=normative data-link-type=biblio href=#biblio-css3val title=CSS3VAL>[CSS3VAL]</a>)
	when a specified <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> value is computed.</p>

<p>If the image has an orientation specified in its metadata,
	such as EXIF,
	the UA must rotate or flip the image to correctly orient it
	as the metadata specifies.</p>

<h4 class="heading settled" data-level=2.2.1 id=image-fallbacks><span class=secno>2.2.1 </span><span class=content>
Image Fallbacks</span><a class=self-link href=#image-fallbacks></a></h4>

<p>If both a URL and a <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-color-3/#valuea-def-color title="<color>">&lt;color&gt;</a> are specified in <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a>,
	then whenever the URL represents an <a data-link-type=dfn href=#invalid-image title="invalid image">invalid image</a>,
	the <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> function renders as if the URL were not specified at all;
	it generates a solid-color image as specified in <a data-section="" href=#color-images>§2.2.3 
Solid-color Images</a>.</p>

	<div class=example>
		The fallback color can be used to ensure that text is still readable
		even when the image fails to load.
		For example, the following legacy code works fine if the image is rectangular and has no transparency:

		<pre>body      { color: black; background: white; }
p.special { color: white; background: url("dark.png") black; }
</pre>

<p>When the image doesn’t load,
		the background color is still there to ensure that the white text is readable.
		However, if the image has some transparency,
		the black will be visible behind it,
		which is probably not desired.
		The <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> function addresses this:</p>

		<pre>body      { color: black; background: white; }
p.special { color: white; background: image("dark.png", black); }
</pre>

<p>Now, the black won’t show at all if the image loads,
		but if for whatever reason the image fails,
		it’ll pop in and prevent the white text from being set against a white background.</p>
	</div>

<h4 class="heading settled" data-level=2.2.2 id=image-fragments><span class=secno>2.2.2 </span><span class=content>
Image Fragments</span><a class=self-link href=#image-fragments></a></h4>

<p>When a URL specified in <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> represents a portion of a resource
	(e.g. by the use of <a href=http://www.w3.org/TR/media-frags/#naming-space>media fragment identifiers</a>)
	that portion is clipped out of its context and used as a standalone image.</p>

	<div class=example>
		For example, given the following image and CSS:

<p><a href=images/sprites.svg>
			<img alt="[9 circles, with 0 to 8 eighths filled in]" height=20 src=images/sprites.svg width=180>
		</a></p>

<pre>background-image: image('sprites.svg#xywh=40,0,20,20')</pre>

<p>...the background of the element will be the portion of the image that starts at (40px,0px) and is 20px wide and tall,
		which is just the circle with a quarter filled in.</p>
	</div>

<p>So that authors can take advantage of CSS’s forwards-compatible parsing rules to provide a fallback for image slices,
	implementations that support the <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> notation
	<em>must</em> support the <code>xywh=#,#,#,#</code> form of media fragment identifiers
	for images specified via <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a>. <a data-biblio-type=normative data-link-type=biblio href=#biblio-media-frags title=MEDIA-FRAGS>[MEDIA-FRAGS]</a></p>

	<div class=example>
		Note that image fragments can also be used with the <span class=css>url()</span> notation.
		However, a legacy UA that doesn’t understand the media fragments notation
		will ignore the fragment and simply display the entirety of the image.

<p>Since the <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> notation requires UAs to support media fragments,
		authors can take advantage of CSS’s forward-compatible parsing rules
		to provide a fallback when using an image fragment URL:</p>

		<pre>background-image: url('swirl.png'); /* old UAs */
background-image: image('sprites.png#xywh=10,30,60,20'); /* new UAs */
</pre>
	</div>

<p>If a URL uses a fragment identifier syntax that the implementation does not understand,
	or does not consider valid for that type of image,
	the URL must be treated as representing an <a data-link-type=dfn href=#invalid-image title="invalid image">invalid image</a>.</p>

<p class=note>Note: This error-handling is limited to <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a>,
	and not in the definition of URL,
	for legacy compat reasons.</p>


<h4 class="heading settled" data-level=2.2.3 id=color-images><span class=secno>2.2.3 </span><span class=content>
Solid-color Images</span><a class=self-link href=#color-images></a></h4>

<p>If the <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> function is specified with only a <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-color-3/#valuea-def-color title="<color>">&lt;color&gt;</a> argument (no URL),
	it represents a solid-color image of the specified color with no intrinsic dimensions.</p>

	<div class=example>
		For example,
		one can use this as a simple way to "tint" a background image,
		by overlaying a partially-transparent color over the top of the other image:

<pre>background-image: image(rgba(0,0,255,.5)), url("bg-image.png");</pre>

<p><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-color title=background-color>background-color</a> does not work for this,
		as the solid color it generates always lies <em>beneath</em> all the background images.</p>
	</div>


<h3 class="heading settled" data-level=2.3 id=image-set-notation><span class=secno>2.3 </span><span class=content>
Resolution Negotiation: the <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> notation</span><a class=self-link href=#image-set-notation></a></h3>

<p>Delivering the most appropriate image resolution for a user’s device can be a difficult task.
	Ideally, images should be in the same resolution as the device they’re being viewed in,
	which can vary between users.
	However, other factors can factor into the decision of which image to send;
	for example, if the user is on a slow mobile connection,
	they may prefer to receive lower-res images
	rather than waiting for a large proper-res image to load.
	The <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> function allows an author to ignore most of these issues,
	simply providing multiple resolutions of an image
	and letting the UA decide which is most appropriate in a given situation.</p>

<p class=issue id=issue-34671d1c><a class=self-link href=#issue-34671d1c></a>This solution assumes that resolution is a proxy for filesize,
	and therefore doesn’t appropriately handle multi-resolution sets of vector images,
	or mixing vector images with raster ones (e.g. for icons).
	For example, use a vector for high-res,
	pixel-optimized bitmap for low-res,
	and same vector again for low-bandwidth (because it’s much smaller, even though it’s higher resolution).</p>

<p>The syntax for <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> is:</p>

	<pre class=prod><dfn data-dfn-type=function data-export="" id=funcdef-image-set>image-set()<a class=self-link href=#funcdef-image-set></a></dfn> = image-set( <a class=production data-link-type=type href=#typedef-image-set-option title="<image-set-option>">&lt;image-set-option&gt;</a><a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-comma title=#>#</a> )
<dfn data-dfn-type=type data-export="" id=typedef-image-set-option>&lt;image-set-option&gt;<a class=self-link href=#typedef-image-set-option></a></dfn> = [ <a class=production data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#string-value title="<string>">&lt;string&gt;</a> ] <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#resolution-value title="<resolution>">&lt;resolution&gt;</a>
</pre>

<p>The <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> function can not be nested inside of itself,
	either directly
	or indirectly
	(as an argument to another <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> type).</p>

<p class=issue id=issue-92756fb8><a class=self-link href=#issue-92756fb8></a>Is this restriction needed?</p>

<p>Each <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#string-value title="<string>">&lt;string&gt;</a> inside <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> represents a <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#url-value title="<url>">&lt;url&gt;</a>,
	just like in <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a>.</p>

<p>Every <a class="production css" data-link-type=type href=#typedef-image-set-option title="<image-set-option>">&lt;image-set-option&gt;</a> in a given <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> must have a different <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#resolution-value title="<resolution>">&lt;resolution&gt;</a>,
	or else the function is invalid.</p>

<p>UAs must make a UA-specific choice of which <a class="production css" data-link-type=type href=#typedef-image-set-option title="<image-set-option>">&lt;image-set-option&gt;</a> to load,
	based on whatever criteria they find relevant
	(such as the resolution of the display,
		connection speed,
		etc).
	The <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> then represents the image associated with the URL of that choice.
	The image’s <a data-link-type=dfn href=#intrinsic-resolution title="intrinsic resolution">intrinsic resolution</a> is the resolution associated with that choice.
	UAs <strong>may</strong> change which <a class="production css" data-link-type=type href=#typedef-image-set-option title="<image-set-option>">&lt;image-set-option&gt;</a> they wish to use for a given <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a>
	over the lifetime of the page,
	if the criteria used to determine which option to choose change significantly enough to make it worthwhile in the UA’s estimation.</p>

	<div class=example>
		This example shows how to use <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> to provide an image in three versions:
		a "normal" version,
		a "high-res" version,
		and an extra-high resolution version for use in high-quality printing
		(as printers can have <em>extremely</em> high resolution):

		<pre>background-image: image-set( "foo.png" 1x,
                             "foo-2x.png" 2x,
                             "foo-print.png" 600dpi );
</pre>
	</div>



<h3 class="heading settled" data-level=2.4 id=cross-fade-function><span class=secno>2.4 </span><span class=content>
Combining images: the <a class=css data-link-type=maybe href=#funcdef-cross-fade title=cross-fade()>cross-fade()</a> notation</span><a class=self-link href=#cross-fade-function></a></h3>

<p>When transitioning between images,
	CSS requires a way to explicitly refer to the intermediate image
	that is a combination of the start and end images.
	This is accomplished with the <a class=css data-link-type=maybe href=#funcdef-cross-fade title=cross-fade()>cross-fade()</a> function,
	which indicates the two images to be combined
	and how far along in the transition the combination is.</p>

<p class=note>Note: Authors can also use the <a class=css data-link-type=maybe href=#funcdef-cross-fade title=cross-fade()>cross-fade()</a> function for many simple image manipulations,
	such as tinting an image with a solid color
	or highlighting a particular area of the page by combining an image with a radial gradient.</p>

<p>The syntax for <a class=css data-link-type=maybe href=#funcdef-cross-fade title=cross-fade()>cross-fade()</a> is defined as:</p>

	<pre class=prod><dfn data-dfn-type=function data-export="" id=funcdef-cross-fade>cross-fade()<a class=self-link href=#funcdef-cross-fade></a></dfn> = cross-fade( <a class=production data-link-type=type href=#typedef-cf-mixing-image title="<cf-mixing-image>">&lt;cf-mixing-image&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-comma title=,>,</a> <a class=production data-link-type=type href=#typedef-cf-final-image title="<cf-final-image>">&lt;cf-final-image&gt;</a><a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a> )
<dfn data-dfn-type=type data-export="" id=typedef-cf-mixing-image>&lt;cf-mixing-image&gt;<a class=self-link href=#typedef-cf-mixing-image></a></dfn> = <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a><a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a> &amp;&amp; <a class=production data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a>
<dfn data-dfn-type=type data-export="" id=typedef-cf-final-image>&lt;cf-final-image&gt;<a class=self-link href=#typedef-cf-final-image></a></dfn> = <a class=production data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-color-3/#valuea-def-color title="<color>">&lt;color&gt;</a>
</pre>

<p>The function represents an image generated by
	combining two images.</p>

<p>The <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> represents how much of the first image is retained
	when it is blended with the second image.
	The <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> must be between <span class=css>0%</span> and <span class=css>100%</span> inclusive;
	any other value is invalid.
	If omitted,
	it defaults to the value <span class=css>50%</span>.</p>

<p>If the last argument is a <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-color-3/#valuea-def-color title="<color>">&lt;color&gt;</a>,
	it represents a solid-color image with the same intrinsic dimensions as the first image
	(as if it were an <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> function with the color as its sole argument).
	If omitted,
	it defaults to the color <span class=css>transparent</span>.</p>

<p>More precisely,
	given <span class=css>cross-fade(<var>p</var> <var>A</var>, <var>B</var>)</span>,
	where <var>A</var> and <var>B</var> are images
	and <var>p</var> is a percentage between 0% and 100%,
	the function represents an image
	with width equal to <code>width<sub>A</sub> × <var>p</var> + width<sub>B</sub> × (1-<var>p</var>)</code>
	and height equal to <code>height<sub>A</sub> × <var>p</var> + height<sub>B</sub> × (1-<var>p</var>)</code>.
	The contents of the image must be constructed by
	first scaling <var>A</var> and <var>B</var> to the size of the generated image,
	then applying <code>dissolve(<var>A</var>,<var>p</var>) plus dissolve(<var>B</var>,1-<var>p</var>)</code>.
	The "dissolve()" function and "plus" compositing operator are defined in the literature by Porter-Duff. <a data-biblio-type=informative data-link-type=biblio href=#biblio-porterduff title=PORTERDUFF>[PORTERDUFF]</a></p>


<h2 class="heading settled" data-level=3 id=gradients><span class=secno>3 </span><span class=content>
Gradients</span><a class=self-link href=#gradients></a></h2>

<p>A gradient is an image that smoothly fades from one color to another.
	These are commonly used for subtle shading in background images, buttons, and many other things.
	The gradient notations described in this section allow an author to specify such an image in a terse syntax,
	so that the UA can generate the image automatically when rendering the page.
	The syntax of a <a class="production css" data-link-type=type href=#typedef-gradient title="<gradient>">&lt;gradient&gt;</a> is:</p>

	<pre class=prod><dfn data-dfn-type=type data-export="" id=typedef-gradient>&lt;gradient&gt;<a class=self-link href=#typedef-gradient></a></dfn> =
  <a class=production data-link-type=function href=#funcdef-linear-gradient title=linear-gradient()>&lt;linear-gradient()&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=function href=#funcdef-repeating-linear-gradient title=repeating-linear-gradient()>&lt;repeating-linear-gradient()&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a>
  <a class=production data-link-type=function href=#funcdef-radial-gradient title=radial-gradient()>&lt;radial-gradient()&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class=production data-link-type=function href=#funcdef-repeating-radial-gradient title=repeating-radial-gradient()>&lt;repeating-radial-gradient()&gt;</a>
</pre>

	<div class=example>

<p>As with the other <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a> types defined in this specification,
		gradients can be used in any property that accepts images.
		For example:</p>

		<ul>
			<li><code>background: linear-gradient(white, gray);</code>
			<li><code>list-style-image: radial-gradient(circle, #006, #00a 90%, #0000af 100%, white 100%)</code>
		</ul>
	</div>

<p>A gradient is drawn into a box with the dimensions of the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>,
	referred to as the <dfn data-dfn-type=dfn data-export="" id=gradient-box>gradient box<a class=self-link href=#gradient-box></a></dfn>.
	However, the gradient itself has no <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a>.</p>

	<div class=example>
		For example, if you use a gradient as a background,
		by default the gradient will draw into a <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> the size of the element’s padding box.
		If <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-size title=background-size>background-size</a> is explicitly set to a value such as <span class=css>100px 200px</span>,
		then the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> will be 100px wide and 200px tall.
		Similarly, for a gradient used as a <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-lists-3/#propdef-list-style-image title=list-style-image>list-style-image</a>,
		the box would be a 1em square,
		which is the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> for that property.
	</div>

<p>Gradients are specified by defining the <dfn data-dfn-type=dfn data-noexport="" id=starting-point>starting point<a class=self-link href=#starting-point></a></dfn> and <dfn data-dfn-type=dfn data-noexport="" id=ending-point>ending point<a class=self-link href=#ending-point></a></dfn>
	of a <dfn data-dfn-type=dfn data-export="" id=gradient-line>gradient line<a class=self-link href=#gradient-line></a></dfn>
	(which, depending on the type of gradient,
	may be technically a line, or a ray, or a spiral),
	and then specifying colors at points along this line.
	The colors are smoothly blended to fill in the rest of the line,
	and then each type of gradient defines how to use the color of the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> to produce the actual gradient.</p>


<h3 class="heading settled" data-level=3.1 id=linear-gradients><span class=secno>3.1 </span><span class=content>
Linear Gradients: the <a class=css data-link-type=maybe href=#funcdef-linear-gradient title=linear-gradient()>linear-gradient()</a> notation</span><a class=self-link href=#linear-gradients></a></h3>

<p>A linear gradient is created by specifying a straight <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>,
	and then several colors placed along that line.
	The image is constructed by creating an infinite canvas
	and painting it with lines perpendicular to the gradient line,
	with the color of the painted line being the color of the gradient line where the two intersect.
	This produces a smooth fade from each color to the next,
	progressing in the specified direction.</p>

<h4 class="no-toc heading settled" data-level=3.1.1 id=linear-gradient-syntax><span class=secno>3.1.1 </span><span class=content>
linear-gradient() syntax</span><a class=self-link href=#linear-gradient-syntax></a></h4>

<p>The linear gradient syntax is:</p>

	<pre class=prod><dfn data-dfn-type=function data-export="" id=funcdef-linear-gradient>linear-gradient()<a class=self-link href=#funcdef-linear-gradient></a></dfn> = linear-gradient(
  [ <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> to <a class=production data-link-type=type href=#typedef-side-or-corner title="<side-or-corner>">&lt;side-or-corner&gt;</a> ]<a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-comma title=,>,</a>
  <a class=production data-link-type=type href=#typedef-color-stop-list title="<color-stop-list>">&lt;color-stop-list&gt;</a>
)
<dfn data-dfn-type=type data-export="" id=typedef-side-or-corner>&lt;side-or-corner&gt;<a class=self-link href=#typedef-side-or-corner></a></dfn> = [left <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> right] <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-any title=||>||</a> [top <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> bottom]
</pre>

<p>The first argument to the function specifies the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>,
	which gives the gradient a direction and determines how color-stops are positioned.
	It may be omitted;
	if so, it defaults to <span class=css>to bottom</span>.</p>

<p>The <a data-link-type=dfn href=#gradient-line title="gradient line’s">gradient line’s</a> direction may be specified in two ways:</p>

	<dl>
		<dt>using angles
		<dd>
			For the purpose of this argument,
			<span class=css>0deg</span> points upward,
			and positive angles represent clockwise rotation,
			so <span class=css>90deg</span> point toward the right.

		<dt>using keywords
		<dd>
			If the argument is <span class=css>to top</span>, <span class=css>to right</span>, <span class=css>to bottom</span>, or <span class=css>to left</span>,
			the angle of the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> is <span class=css>0deg</span>, <span class=css>90deg</span>, <span class=css>180deg</span>, or <span class=css>270deg</span>, respectively.

<p>If the argument instead specifies a corner of the box such as <span class=css>to top left</span>,
			the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> must be angled such that it points into the same quadrant as the specified corner,
			and is perpendicular to a line intersecting the two neighboring corners of the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a>.
			<span class=note>This causes a color-stop at 50% to intersect the two neighboring corners (see <a href=#corner-gradient-example>example</a>).</span></p>
	</dl>

<p>Starting from the center of the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a>,
	extend a line at the specified angle in both directions.
	The ending point is the point on the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>
	where a line drawn perpendicular to the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>
	would intersect the corner of the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> in the specified direction.
	The starting point is determined identically, but in the opposite direction.</p>

	<div class=note>
		Given:

		<ul>
			<li><var>A</var> the angle (in any quadrant) defining the gradient line’s direction such that 0 degrees points upwards and positive angles represent clockwise rotation,
			<li><var>W</var> the width of the gradient box,
			<li><var>H</var> the height of the gradient box,
		</ul>

<p>The length of the gradient line (between the <a data-link-type=dfn href=#starting-point title="starting point">starting point</a> and <a data-link-type=dfn href=#ending-point title="ending point">ending point</a>) is:</p>

<p><code>abs(<var>W</var> * sin(<var>A</var>)) + abs(<var>H</var> * cos(<var>A</var>))</code></p>
	</div>

<p class=note>Note: It is expected that the next level of this module will provide the ability to define the gradient’s direction relative to the current text direction and writing-mode.</p>

	<div class=example>
		<div style="overflow: hidden">
			<img alt="[An image showing a box with a background shading gradually from white in the bottom-left corner to black in the top-right corner.  There is a line, illustrating the gradient line, angled at 45 degrees and passing through the center of the box.  The starting point and ending point of the gradient line are indicated by the intersection of the gradient line with two additional lines that pass through the bottom-left and top-right corners of the box.]" src=images/gradient-diagram.png style="float: right; margin-left: 1em;">

<p>This example illustrates visually how to calculate the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> from the rules above.
			This shows the starting and ending point of the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>,
			long with the actual gradient,
			produced by an element with <a class=css data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background title=background>background: linear-gradient(45deg, white, black);</a>.</p>

<p>Notice how, though the starting point and ending point are outside of the box,
			they’re positioned precisely right so that the gradient is pure white <em>exactly</em> at the corner,
			and pure black <em>exactly</em> at the opposite corner.
			That’s intentional, and will always be true for linear gradients.</p>
		</div>
	</div>

	<div class=note>
		Given:

		<ul>
			<li>
				<var>A</var> the angle defining the gradient line’s direction
				such that 0 degrees points upwards and positive angles represent clockwise rotation,
			<li><var>W</var> the width of the gradient box,
			<li><var>H</var> the height of the gradient box,
		</ul>

<p>The length of the gradient line (between the starting and ending point) is:
		<code>abs(W * sin(A)) + abs(H * cos(A))</code></p>
	</div>

<p>The gradient’s color stops are typically placed between the starting point and ending point on the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>,
	but this isn’t required -
	the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> extends infinitely in both directions.
	The starting point and ending point are merely arbitrary location markers -
	the starting point defines where 0%, 0px, etc are located when specifying color-stops,
	and the ending point defines where 100% is located.
	Color-stops are allowed to have positions before 0% or after 100%.</p>

<p>The color of the gradient at any point is determined
	by finding the unique line passing through that point that is perpendicular to the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>.
	The point’s color is the color of the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>
	at the point where this line intersects it.</p>


<h4 class="no-toc heading settled" data-level=3.1.2 id=linear-gradient-examples><span class=secno>3.1.2 </span><span class=content>
Linear Gradient Examples</span><a class=self-link href=#linear-gradient-examples></a></h4>

<p>All of the following <a class=css data-link-type=maybe href=#funcdef-linear-gradient title=linear-gradient()>linear-gradient()</a> examples are presumed to be backgrounds applied to a box that is 200px wide and 100px tall.</p>

	<div class=example>
		Below are various ways of specifying a basic vertical gradient:

		<pre>linear-gradient(yellow, blue);
linear-gradient(to bottom, yellow, blue);
linear-gradient(180deg, yellow, blue);
linear-gradient(to top, blue, yellow);
linear-gradient(to bottom, yellow 0%, blue 100%);
</pre>

<p><img alt="" src=images/linear1.png></p>
	</div>

	<div class=example>
		This demonstrates the use of an angle in the gradient.
		Note that, though the angle is not exactly the same as the angle between the corners,
		the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> is still sized so as to make the gradient yellow exactly at the upper-left corner,
		and blue exactly at the lower-right corner.

		<pre>linear-gradient(135deg, yellow, blue);
linear-gradient(-45deg, blue, yellow);
</pre>

<p><img alt="" src=images/linear3.png></p>
	</div>

	<div class=example>

<p>This demonstrates a 3-color gradient, and how to specify the location of a stop explicitly:</p>

<pre>linear-gradient(yellow, blue 20%, #0f0);</pre>

<p><img alt="" src=images/linear4.png></p>
	</div>

	<div class=example id=corner-gradient-example><a class=self-link href=#corner-gradient-example></a>
		This demonstrates a corner-to-corner gradient specified with keywords.
		Note how the gradient is red and blue exactly in the bottom-left and top-right corners, respectively,
		exactly like the second example.
		Additionally, the angle of the gradient is automatically computed so that the color at 50% (in this case, white)
		stretches across the top-left and bottom-right corners.

<pre>linear-gradient(to top right, red, white, blue)</pre>

		<object data=images/gradient1.svg height=100 width=200>(Image requires SVG)</object>
	</div>


<h3 class="heading settled" data-level=3.2 id=radial-gradients><span class=secno>3.2 </span><span class=content>
Radial Gradients: the <a class=css data-link-type=maybe href=#funcdef-radial-gradient title=radial-gradient()>radial-gradient()</a> notation</span><a class=self-link href=#radial-gradients></a></h3>

<p>In a radial gradient,
	rather than colors smoothly fading from one side of the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> to the other
	as with linear gradients,
	they instead emerge from a single point
	and smoothly spread outward in a circular or elliptical shape.</p>

<p>A radial gradient is specified by indicating the center of the gradient
	(where the 0% ellipse will be)
	and the size and shape of the <dfn data-dfn-type=dfn data-noexport="" id=ending-shape>ending shape<a class=self-link href=#ending-shape></a></dfn>
	(the 100% ellipse).
	Color stops are given as a list,
	just as for <a class=css data-link-type=maybe href=#funcdef-linear-gradient title=linear-gradient()>linear-gradient()</a>.
	Starting from the <a data-link-type=dfn href=#gradient-center title="gradient center">gradient center</a>
	and progressing towards (and potentially beyond) the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a>
	uniformly-scaled concentric ellipses are drawn and colored
	according to the specified color stops.</p>


<h4 class="no-toc heading settled" data-level=3.2.1 id=radial-gradient-syntax><span class=secno>3.2.1 </span><span class=content>
radial-gradient() Syntax</span><a class=self-link href=#radial-gradient-syntax></a></h4>

<p>The radial gradient syntax is:</p>

	<pre><dfn data-dfn-type=function data-export="" id=funcdef-radial-gradient>radial-gradient()<a class=self-link href=#funcdef-radial-gradient></a></dfn> = radial-gradient(
  [ <a class=production data-link-type=type title="<ending-shape>">&lt;ending-shape&gt;</a> || <a class=production data-link-type=type href=#typedef-size title="<size>">&lt;size&gt;</a> ]? [ at <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a> ]? ,
  <a class=production data-link-type=type href=#typedef-color-stop-list title="<color-stop-list>">&lt;color-stop-list&gt;</a>
)
</pre>

	<div class=example>
		Here is an example of a circular radial gradient 5em wide
		and positioned with its center in the top left corner:

<pre>radial-gradient(5em circle at top left, yellow, blue)</pre>
	</div>

	<p class=issue id=issue-403592eb><a class=self-link href=#issue-403592eb></a>
		We should add the ability to move the focus of the gradient,
		as in the original -webkit-gradient() function.
		See proposal in <a href=http://lists.w3.org/Archives/Public/www-style/2011Nov/0210.html>http://lists.w3.org/Archives/Public/www-style/2011Nov/0210.html</a>
		for "from <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a>" and "from offset <a class="production css" data-link-type=type title="<offset>">&lt;offset&gt;</a>".

<p>The arguments are defined as follows:</p>

	<dl data-dfn-for="radial-gradient() repeating-radial-gradient()" data-dfn-type=value>
		<dt><dfn class=css data-dfn-for="radial-gradient() repeating-radial-gradient()" data-dfn-type=value data-export="" id=valdef-radial-gradient-repeating-radial-gradient-position><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a><a class=self-link href=#valdef-radial-gradient-repeating-radial-gradient-position></a></dfn>
		<dd>
			Determines the <dfn data-dfn-type=dfn data-noexport="" id=gradient-center>gradient center<a class=self-link href=#gradient-center></a></dfn> of the gradient.
			The <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a> value type
			(which is also used for <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-position title=background-position>background-position</a>)
			is defined in <a data-biblio-type=normative data-link-type=biblio href=#biblio-css3val title=CSS3VAL>[CSS3VAL]</a>,
			and is resolved using the center-point as the object area
			and the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> as the positioning area.
			If this argument is omitted,
			it defaults to <span class=css>center</span>.

		<dt><dfn class=css data-dfn-for="radial-gradient() repeating-radial-gradient()" data-dfn-type=value data-export="" id=valdef-radial-gradient-repeating-radial-gradient-ending-shape><a class="production css" data-link-type=type title="<ending-shape>">&lt;ending-shape&gt;</a><a class=self-link href=#valdef-radial-gradient-repeating-radial-gradient-ending-shape></a></dfn>
		<dd>
			Can be either <span class=css>circle</span> or <span class=css>ellipse</span>;
			determines whether the gradient’s <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> is a circle or an ellipse, respectively.
			If <a class="production css" data-link-type=type title="<ending-shape>">&lt;ending-shape&gt;</a> is omitted,
			the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> defaults to a circle
			if the <a class="production css" data-link-type=type href=#typedef-size title="<size>">&lt;size&gt;</a> is a single <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>,
			and to an ellipse otherwise.

		<dt><dfn class=css data-dfn-for="radial-gradient() repeating-radial-gradient()" data-dfn-type=value data-export="" id=valdef-radial-gradient-repeating-radial-gradient-size><a class="production css" data-link-type=type href=#typedef-size title="<size>">&lt;size&gt;</a><a class=self-link href=#valdef-radial-gradient-repeating-radial-gradient-size></a></dfn>
		<dd>
			Determines the size of the gradient’s <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a>.
			If omitted it defaults to <a class=css data-link-type=maybe href=#valdef-size-farthest-corner title=farthest-corner>farthest-corner</a>.
			It can be given explicitly or by keyword.
			For the purpose of the keyword definitions,
			consider the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> edges as extending infinitely in both directions,
			rather than being finite line segments.

<p>If the ending-shape is an ellipse,
			its axises are aligned with the horizontal and vertical axises.</p>

<p>Both <span class=css>circle</span> and <span class=css>ellipse</span> gradients accept the following keywords as their <dfn class=css data-dfn-for="" data-dfn-type=type data-export="" id=typedef-size>&lt;size&gt;<a class=self-link href=#typedef-size></a></dfn>:</p>

			<dl data-dfn-for="<size>">
				<dt><dfn class=css data-dfn-for="<size>" data-dfn-type=value data-export="" id=valdef-size-closest-side>closest-side<a class=self-link href=#valdef-size-closest-side></a></dfn>
				<dd>
					The <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> is sized so that
					it exactly meets the side of the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> closest to the gradient’s center.
					If the shape is an ellipse,
					it exactly meets the closest side in each dimension.

				<dt><dfn class=css data-dfn-for="<size>" data-dfn-type=value data-export="" id=valdef-size-farthest-side>farthest-side<a class=self-link href=#valdef-size-farthest-side></a></dfn>
				<dd>
					Same as <a class=css data-link-type=maybe href=#valdef-size-closest-side title=closest-side>closest-side</a>,
					except the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> is sized based on the farthest side(s).

				<dt><dfn class=css data-dfn-for="<size>" data-dfn-type=value data-export="" id=valdef-size-closest-corner>closest-corner<a class=self-link href=#valdef-size-closest-corner></a></dfn>
				<dd>
					The <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> is sized so that
					it passes through the corner of the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> closest to the gradient’s center.
					If the shape is an ellipse,
					the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> is given the same aspect-ratio it would have if <a class=css data-link-type=maybe href=#valdef-size-closest-side title=closest-side>closest-side</a> were specified.

				<dt><dfn class=css data-dfn-for="<size>" data-dfn-type=value data-export="" id=valdef-size-farthest-corner>farthest-corner<a class=self-link href=#valdef-size-farthest-corner></a></dfn>
				<dd>
					Same as <a class=css data-link-type=maybe href=#valdef-size-closest-corner title=closest-corner>closest-corner</a>,
					except the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> is sized based on the farthest corner.
					If the shape is an ellipse,
					the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> is given the same aspect ratio it would have if <a class=css data-link-type=maybe href=#valdef-size-farthest-side title=farthest-side>farthest-side</a> were specified.
			</dl>

<p>If <a class="production css" data-link-type=type title="<ending-shape>">&lt;ending-shape&gt;</a> is specified as <span class=css>circle</span> or is omitted,
			the <a class="production css" data-link-type=type href=#typedef-size title="<size>">&lt;size&gt;</a> may be given explicitly as:</p>

			<dl>
				<dt><dfn class=css data-dfn-for="<size>" data-dfn-type=value data-export="" id=valdef-size-length>&lt;length&gt;<a class=self-link href=#valdef-size-length></a></dfn>
				<dd>
					Gives the radius of the circle explicitly.
					Negative values are invalid.

<p class=note>Note: Percentages are <em>not</em> allowed here;
					they can only be used to specify the size of an elliptical gradient,
					not a circular one.
					This restriction exists because there is are multiple reasonable answers as to which dimension the percentage should be relative to.
					A future level of this module may provide the ability to size circles with percentages,
					perhaps with more explicit controls over which dimension is used.</p>

			</dl>

<p>If <a class="production css" data-link-type=type title="<ending-shape>">&lt;ending-shape&gt;</a> is specified as <span class=css>ellipse</span> or is omitted,
			<a class="production css" data-link-type=type href=#typedef-size title="<size>">&lt;size&gt;</a> may instead be given explicitly as:</p>

			<dl>
				<dt><dfn class=css data-dfn-for="<size>" data-dfn-type=value data-export="" id=valdef-size--length>[ <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a> | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> ]{2}<a class=self-link href=#valdef-size--length></a></dfn>
				<dd>
					Gives the size of the ellipse explicitly.
					The first value represents the horizontal radius,
					the second the vertical radius.
					Percentages values are relative to the corresponding dimension of the <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a>.
					Negative values are invalid.
			</dl>
	</dl>

	<div class=note>
		Expanded with the above definitions,
		the grammar becomes:

		<pre>radial-gradient() = radial-gradient(
  [ [ circle               || <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a> ]                          [ at <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a> ]? , |
    [ ellipse              || [ <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a> | <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> ]{2} ]    [ at <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a> ]? , |
    [ [ circle | ellipse ] || <a class=production data-link-type=type href=#typedef-extent-keyword title="<extent-keyword>">&lt;extent-keyword&gt;</a> ]                  [ at <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a> ]? , |
    at <a class=production data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a> ,
  ]?
  <a class=production data-link-type=type href=#typedef-color-stop title="<color-stop>">&lt;color-stop&gt;</a> [ , <a class=production data-link-type=type href=#typedef-color-stop title="<color-stop>">&lt;color-stop&gt;</a> ]+
)
<dfn data-dfn-type=type data-noexport="" id=typedef-extent-keyword>&lt;extent-keyword&gt;<a class=self-link href=#typedef-extent-keyword></a></dfn> = closest-corner | closest-side | farthest-corner | farthest-side
</pre>
	</div>


<h4 class="no-toc heading settled" data-level=3.2.2 id=radial-color-stops><span class=secno>3.2.2 </span><span class=content>
Placing Color Stops</span><a class=self-link href=#radial-color-stops></a></h4>

<p>Color-stops are placed on a <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> shaped like a ray
	(a line that starts at one point, and extends infinitely in a one direction),
	similar to the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> of linear gradients.
	The <a data-link-type=dfn href=#gradient-line title="gradient line’s">gradient line’s</a> <a data-link-type=dfn href=#starting-point title="starting point">starting point</a> is at the center of the gradient,
	and it extends toward the right,
	with the <a data-link-type=dfn href=#ending-point title="ending point">ending point</a> on the point where the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> intersects the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a>.
	A color-stop can be placed at a location before 0%;
	though the negative region of the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> is never directly consulted for rendering,
	color stops placed there can affect the color of non-negative locations on the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> through interpolation or repetition
	(see <a data-section="" href=#repeating-gradients>repeating gradients</a>).
	For example, <span class=css>radial-gradient(red -50px, yellow 100px)</span> produces an elliptical gradient
	that starts with a reddish-orange color in the center
	(specifically, #f50)
	and transitions to yellow.
	Locations greater than 100% simply specify a location a correspondingly greater distance from the center of the gradient.</p>

<p>The color of the gradient at any point is determined by
	first finding the unique ellipse passing through that point
	with the same center, orientation, and ratio between major and minor axises as the ending-shape.
	The point’s color is then the color of the positive section of the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> at the location where this ellipse intersects it.</p>

<h4 class="no-toc heading settled" data-level=3.2.3 id=degenerate-radials><span class=secno>3.2.3 </span><span class=content>
Degenerate Radial Gradients</span><a class=self-link href=#degenerate-radials></a></h4>

<p>Some combinations of position, size, and shape
	will produce a circle or ellipse with a radius of 0.
	This will occur, for example,
	if the center is on a <a data-link-type=dfn href=#gradient-box title="gradient box">gradient box</a> edge and <a class=css data-link-type=maybe href=#valdef-size-closest-side title=closest-side>closest-side</a> or <a class=css data-link-type=maybe href=#valdef-size-closest-corner title=closest-corner>closest-corner</a> is specified
	or if the size and shape are given explicitly and either of the radiuses is zero.
	In these degenerate cases,
	the gradient must be be rendered as follows:</p>

	<dl>
		<dt>If the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> is a circle with zero radius:
		<dd>
			Render as if the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> was
			a circle whose radius was an arbitrary very small number greater than zero.
			<span class=note>This will make the gradient continue to look like a circle.</span>

		<dt>If the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> has zero width (regardless of the height):
		<dd>
			Render as if the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> was
			an ellipse whose height was an arbitrary very large number
			and whose width was an arbitrary very small number greater than zero.
			<span class=note>This will make the gradient look similar to a horizontal linear gradient
			that is mirrored across the center of the ellipse.
			It also means that all color-stop positions specified with a percentage resolve to <span class=css>0px</span>.</span>

		<dt>Otherwise, if the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> has zero height:
		<dd>
			Render as if the <a data-link-type=dfn href=#ending-shape title="ending shape">ending shape</a> was
			an ellipse whose width was an arbitrary very large number
			and whose height was an arbitrary very small number greater than zero.
			<span class=note>This will make the gradient look like a solid-color image
			equal to the color of the last color-stop,
			or equal to the average color of the gradient if it’s repeating.</span>
	</dl>


<h4 class="no-toc heading settled" data-level=3.2.4 id=radial-gradient-examples><span class=secno>3.2.4 </span><span class=content>
Radial Gradient Examples</span><a class=self-link href=#radial-gradient-examples></a></h4>

<p>All of the following examples are applied to a box that is 200px wide and 100px tall.</p>

	<div class=example>
		These examples demonstrate different ways to write the basic syntax for radial gradients:

		<pre>radial-gradient(yellow, green);
radial-gradient(ellipse at center, yellow 0%, green 100%);
radial-gradient(farthest-corner at 50% 50%, yellow, green);
</pre>

<p><img alt="" src=images/radial1.png></p>

<pre>radial-gradient(circle, yellow, green);</pre>

<p><img alt="" src=images/radial2.png></p>

<pre>radial-gradient(red, yellow, green);</pre>

<p><img alt="" src=images/radial3.png></p>
	</div>

	<div class=example>
		This image shows a gradient originating from somewhere other than the center of the box:

<pre>radial-gradient(farthest-side at left bottom, red, yellow 50px, green);</pre>

<p><img alt="" src=images/radial4.png></p>
	</div>

	<div class=example>
		Here we illustrate a <a class=css data-link-type=maybe href=#valdef-size-closest-side title=closest-side>closest-side</a> gradient.

		<pre>radial-gradient(closest-side at 20px 30px, red, yellow, green);
radial-gradient(20px 30px at 20px 30px, red, yellow, green);
</pre>

<p><img alt="" src=images/radial6.png></p>

		<pre>radial-gradient(closest-side circle at 20px 30px, red, yellow, green);
radial-gradient(20px 20px at 20px 30px, red, yellow, green);
</pre>

<p><img alt="" src=images/radial7.png></p>
	</div>

<h3 class="heading settled" data-level=3.3 id=repeating-gradients><span class=secno>3.3 </span><span class=content>
Repeating Gradients: the <a class=css data-link-type=maybe href=#funcdef-repeating-linear-gradient title=repeating-linear-gradient()>repeating-linear-gradient()</a>, <a class=css data-link-type=maybe href=#funcdef-repeating-radial-gradient title=repeating-radial-gradient()>repeating-radial-gradient()</a>, and <span class=css>repeating-conic-gradient()</span> notations</span><a class=self-link href=#repeating-gradients></a></h3>

<p>In addition to <a class=css data-link-type=maybe href=#funcdef-linear-gradient title=linear-gradient()>linear-gradient()</a> and <a class=css data-link-type=maybe href=#funcdef-radial-gradient title=radial-gradient()>radial-gradient()</a>,
	this specification defines <dfn class=css data-dfn-type=function data-export="" id=funcdef-repeating-linear-gradient>repeating-linear-gradient()<a class=self-link href=#funcdef-repeating-linear-gradient></a></dfn>
	and <dfn class=css data-dfn-type=function data-export="" id=funcdef-repeating-radial-gradient>repeating-radial-gradient()<a class=self-link href=#funcdef-repeating-radial-gradient></a></dfn> values.
	These notations take the same values
	and are interpreted the same
	as their respective non-repeating siblings defined previously.</p>

<p>When rendered, however, the color-stops are repeated infinitely in both directions,
	with their positions shifted by multiples of the difference between
	the last specified color-stop’s position
	and the first specified color-stop’s position.
	For example, <span class=css>repeating-linear-gradient(red 10px, blue 50px)</span>
	is equivalent to <span class=css>linear-gradient(..., red -30px, blue 10px, red 10px, blue 50px, red 50px, blue 90px, ...)</span>.
	Note that the last color-stop and first color-stop will always coincide at the boundaries of each group,
	which will produce sharp transitions if the gradient does not start and end with the same color.</p>

	<div class=example>
		Repeating gradient syntax is identical to that of non-repeating gradients:

<pre>repeating-linear-gradient(red, blue 20px, red 40px)</pre>
<p><img alt="" src=images/repeating1.png></p>

<pre>repeating-radial-gradient(red, blue 20px, red 40px)</pre>
<p><img alt="" src=images/repeating2.png></p>

<pre>repeating-radial-gradient(circle closest-side at 20px 30px, red, yellow, green 100%, yellow 150%, red 200%)</pre>
<p><img alt="" src=images/repeating3.png></p>

	</div>

<p>If the gradient has only a single color-stop,
	it must render as a solid-color image equal to the color of that color-stop.</p>

<p>If the distance between the first and last color-stops is non-zero,
	but is small enough that the implementation knows that the physical resolution of the output device is insufficient to faithfully render the gradient,
	the implementation must <a data-link-type=dfn href=#gradient-average-color title=gradient-average-color>find the average color of the gradient</a>
	and render the gradient as a solid-color image equal to the average color.</p>

<p>If the distance between the first and last color-stops is zero
	(or rounds to zero due to implementation limitations),
	the implementation must <a data-link-type=dfn href=#gradient-average-color title=gradient-average-color>find the average color of a gradient</a>
	with the same number and color of color-stops,
	but with the first and last color-stop an arbitrary non-zero distance apart,
	and the remaining color-stops equally spaced between them.
	Then it must render the gradient as a solid-color image equal to that average color.</p>

<p>If the width of the ending shape of a repeating radial gradient is non-zero
	and the height is zero,
	or is close enough to zero that the implementation knows that the physical resolution of the output device is insufficient to faithfully render the gradient,
	the implementation must <a data-link-type=dfn href=#gradient-average-color title=gradient-average-color>find the average color of the gradient</a>
	and render the gradient as a solid-color image equal to the average color.</p>

<p class=note>Note: The <a data-section="" href=#degenerate-radials>Degenerate Radial Gradients</a> section
	describes how the ending shape is adjusted when its width is zero.</p>

<p>To <dfn data-dfn-type=dfn data-noexport="" id=gradient-average-color title=gradient-average-color>find the average color of a gradient<a class=self-link href=#gradient-average-color></a></dfn>,
	run these steps:</p>

	<ol>
		<li>
			Define <var>list</var> as an initially-empty list of premultiplied RGBA colors,
			and <var>total-length</var> as the distance between first and last color stops.

		<li>
			For each adjacent pair of color-stops,
			define <var>weight</var> as half the distance between the two color-stops,
			divided by <var>total-length</var>.
			Add two entries to <var>list</var>,
			the first obtained by representing the color of the first color-stop in premultiplied sRGBA
			and scaling all of the components by <var>weight</var>,
			and the second obtained in the same way with the second color-stop.

		<li>
			Sum the entries of <var>list</var> component-wise to produce the average color,
			and return it.
	</ol>

<p class=note>Note: As usual, implementations may use whatever algorithm they wish,
	so long as it produces the same result as the above.</p>

	<div class=example>
		For example, the following gradient is rendered as a solid light-purple image (equal to <code>rgb(75%,50%,75%)</code>):

<pre class=css>repeating-linear-gradient(red 0px, white 0px, blue 0px);</pre>

<p>The following gradient would render the same as the previous under normal circumstances
		(because desktop monitors can’t faithfully render color-stops 1/10th of a pixel apart),
		but would render as a normal repeating gradient if, for example,
		the author applied "zoom:100;" to the element on which the gradient appears:</p>

<pre class=css>repeating-linear-gradient(red 0px, white .1px, blue .2px);</pre>
	</div>


<h3 class="heading settled" data-level=3.4 id=color-stop-syntax><span class=secno>3.4 </span><span class=content>
Gradient Color-Stops</span><a class=self-link href=#color-stop-syntax></a></h3>

	<pre class=prod><dfn data-dfn-type=type data-export="" id=typedef-color-stop-list>&lt;color-stop-list&gt;<a class=self-link href=#typedef-color-stop-list></a></dfn> = <a class=production data-link-type=type href=#typedef-color-stop title="<color-stop>">&lt;color-stop&gt;</a>{2<a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-comma title=,>,</a>}
<dfn data-dfn-type=type data-export="" id=typedef-color-stop>&lt;color-stop&gt;<a class=self-link href=#typedef-color-stop></a></dfn> = <color> [ <percentage> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <length> ]<a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a>
</length></percentage></color></pre>

<p>The colors in gradients are specified using <a data-link-type=dfn href=#color-stop title="color stops">color stops</a>.
	A <dfn data-dfn-type=dfn data-export="" id=color-stop>color stop<a class=self-link href=#color-stop></a></dfn> is a combination of a color and a position.
	(Depending on the type of gradient, that position can be a length, angle, or percentage.)
	While every color stop conceptually has a position,
	the position can be omitted in the syntax.
	(It gets automatically filled in by the user agent; see below for details.)</p>

<p>Color stops are organized into a <dfn data-dfn-type=dfn data-export="" id=color-stop-list>color stop list<a class=self-link href=#color-stop-list></a></dfn>,
	which is a list of one or more <a data-link-type=dfn href=#color-stop title="color stops">color stops</a>.</p>

<p><a data-link-type=dfn href=#color-stop title="Color stops">Color stops</a> are placed on a <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>,
	which defines the colors at every point of a gradient.
	The gradient function defines the shape and length of the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>,
	along with its <a data-link-type=dfn href=#starting-point title="starting point">starting point</a> and <a data-link-type=dfn href=#ending-point title="ending point">ending point</a>.</p>

<p><a data-link-type=dfn href=#color-stop title="Color stops">Color stops</a> must be specified in order.
	Percentages refer to the length of the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a> between the <a data-link-type=dfn href=#starting-point title="starting point">starting point</a> and <a data-link-type=dfn href=#ending-point title="ending point">ending point</a>,
	with 0% being at the starting point
	and 100% being at the ending point.
	Lengths are measured from the <a data-link-type=dfn href=#starting-point title="starting point">starting point</a> in the direction of the <a data-link-type=dfn href=#ending-point title="ending point">ending point</a> along the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>.
	Angles are measured with 0deg pointing up,
	and positive angles corresponding to clockwise rotations from there.</p>

<p><a data-link-type=dfn href=#color-stop title="Color stops">Color stops</a> are usually placed between the <a data-link-type=dfn href=#starting-point title="starting point">starting point</a> and <a data-link-type=dfn href=#ending-point title="ending point">ending point</a>,
	but that’s not required;
	the gradient line extends infinitely in both directions,
	and a <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> can be placed at any position on the <a data-link-type=dfn href=#gradient-line title="gradient line">gradient line</a>.</p>

<p>The position of a <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> can be omitted.
	This causes the <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> to position itself automatically
	between the two surrounding stops.
	If multiple stops in a row lack a position,
	they space themselves out equally.</p>

<p>The following steps must be applied <em>in order</em> to process the list of <a data-link-type=dfn href=#color-stop title="color stops">color stops</a>.
	After applying these rules,
	all <a data-link-type=dfn href=#color-stop title="color stops">color stops</a> will have a definite position and color
	and they will be in ascending order:</p>

	<ol>
		<li>
			If the first <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> does not have a position,
			set its position to 0%.
			If the last <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> does not have a position,
			set its position to 100%.

		<li>
			If a <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> has a position that is less than the specified position of any <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> before it in the list,
			set its position to be equal to the largest specified position of any <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> before it.

		<li>
			If any <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> still does not have a position,
			then, for each run of adjacent <a data-link-type=dfn href=#color-stop title="color stops">color stops</a> without positions,
			set their positions so that they are evenly spaced between the preceding and following <a data-link-type=dfn href=#color-stop title="color stops">color stops</a> with positions.
	</ol>

	<p class=issue id=issue-ffe26cbe><a class=self-link href=#issue-ffe26cbe></a>
		This requires us to wait until <em>after</em> layout to do fix-up,
		because implied-position stops (set by step 3)
		may depend on stops that need layout information to place,
		and which may be corrected by step 2.
		Swapping steps 2 and 3 would let us interpolate <a data-link-type=dfn href=#color-stop title="color stops">color stops</a> purely at computed-value time,
		which is a nice plus,
		at the cost of changing behavior from level 3 for some edge cases that triggered fixup.
		Make sure this is handled well in the serialization rules.

<p>At each <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> position,
	the line is the color of the <a data-link-type=dfn href=#color-stop title="color stop">color stop</a>.
	Between two <a data-link-type=dfn href=#color-stop title="color stops">color stops</a>,
	the line’s color is interpolated between the colors of the two <a data-link-type=dfn href=#color-stop title="color stops">color stops</a>,
	with the interpolation taking place in premultiplied RGBA space.</p>

<p>Before the first <a data-link-type=dfn href=#color-stop title="color stop">color stop</a>,
	the line is the color of the first <a data-link-type=dfn href=#color-stop title="color stop">color stop</a>.
	After the last <a data-link-type=dfn href=#color-stop title="color stop">color stop</a>, the line is the color of the last <a data-link-type=dfn href=#color-stop title="color stop">color stop</a>.</p>

<p>If multiple <a data-link-type=dfn href=#color-stop title="color stops">color stops</a> have the same position,
	they produce an infinitesimal transition from the one specified first in the rule
	to the one specified last.
	In effect, the color suddenly changes at that position rather than smoothly transitioning.</p>

	<div class=example>
		Below are several pairs of gradients.
		The latter of each pair is a manually "fixed-up" version of the former,
		obtained by applying the above rules.
		For each pair, both gradients will render identically.
		<span class=note>The numbers in each arrow specify which fixup steps are invoked in the transformation.</span>

		<pre>1. linear-gradient(red, white 20%, blue)
   =1=&gt;
   linear-gradient(red 0%, white 20%, blue 100%)
2. linear-gradient(red 40%, white, black, blue)
   =13=&gt;
   linear-gradient(red 40%, white 60%, black 80%, blue 100%)
3. linear-gradient(red -50%, white, blue)
   =13=&gt;
   linear-gradient(red -50%, white 25%, blue 100%)
4. linear-gradient(red -50px, white, blue)
   =13=&gt;
   linear-gradient(red -50px, white calc(-25px + 50%), blue 100%)
5. linear-gradient(red 20px, white 0px, blue 40px)
   =2=&gt;
   linear-gradient(red 20px, white 20px, blue 40px)
6. linear-gradient(red, white -50%, black 150%, blue)
   =12=&gt;
   linear-gradient(red 0%, white 0%, black 150%, blue 150%)
7. linear-gradient(red 80px, white 0px, black, blue 100px)
   =23=&gt;
   linear-gradient(red 80px, white 80px, black 90px, blue 100px)
</pre>
	</div>

	<div class=example>
		The following example illustrates the difference between
		a gradient transitioning in pre-multiplied sRGBA
		and one transitioning (incorrectly) in non-premultiplied.
		In both of these example,
		the gradient is drawn over a white background.
		Both gradients could be written with the following value:

<pre>linear-gradient(90deg, red, transparent, blue)</pre>

<p>In premultiplied space,
		transitions to or from "transparent" always look nice:</p>

		<object data=images/gradient2.svg height=100 width=200>(Image requires SVG)</object>

<p>On the other hand,
		if a gradient were to incorrectly transition in non-premultiplied space,
		the colors near "transparent" would noticeably darken to a grayish color,
		because "transparent" is actually a shorthand for <span class=css>rgba(0,0,0,0)</span>, or transparent black:</p>

		<object data=images/gradient3.svg height=100 width=200>(Image requires SVG)</object>
	</div>

<p class=note>Note: It is recommended that authors not mix different types of units,
	such as px, em, or %,
	in a single rule,
	as this can cause a <a data-link-type=dfn href=#color-stop title="color stop">color stop</a> to unintentionally try to move before an earlier one.
	For example, the rule <a class=css data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-image title=background-image>background-image: linear-gradient(yellow 100px, blue 50%)</a>
	wouldn’t require any fix-up as long as the background area is at least 200px tall.
	If it was 150px tall, however,
	the blue <a data-link-type=dfn href=#color-stop title="color stop’s">color stop’s</a> position would be equivalent to "75px",
	which precedes the yellow <a data-link-type=dfn href=#color-stop title="color stop">color stop</a>,
	and would be corrected to a position of 100px.</p>

<p class=note>Note: The definition and implications of "premultiplied" color spaces are given elsewhere in the technical literature,
	but a quick primer is given here to illuminate the process.
	Given a color expressed as an rgba() 4-tuple,
	one can convert this to a premultiplied representation
	by multiplying the red, green, and blue components by the alpha component.
	For example, a partially-transparent blue may be given as rgba(0,0,255,.5),
	which would then be expressed as [0, 0, 127.5, .5] in its premultiplied representation.
	Interpolating colors using the premultiplied representations
	rather than the plain rgba representations
	tends to produce more attractive transitions,
	particularly when transitioning from a fully opaque color to fully transparent.
	Note that transitions where either the transparency or the color are held constant
	(for example, transitioning between rgba(255,0,0,100%) and rgba(0,0,255,100%),
	or rgba(255,0,0,100%) and rgba(255,0,0,0%))
	have identical results whether the color interpolation is done in premultiplied or non-premultiplied color-space.
	Differences only arise when both the color and transparency differ between the two endpoints.</p>


<h2 class="heading settled" data-level=4 id=sizing><span class=secno>4 </span><span class=content>
Sizing Images and Objects in CSS</span><a class=self-link href=#sizing></a></h2>

<p>Images used in CSS may come from a number of sources:
	from binary image formats (such as gif, jpeg, etc),
	dedicated markup formats (such as SVG),
	and CSS-specific formats (such as the linear-gradient() value type defined in this specification).
	As well, a document may contain many other types of objects,
	such as video, plugins, or nested documents.
	These images and objects
	(just <dfn data-dfn-type=dfn data-noexport="" id=objects>objects<a class=self-link href=#objects></a></dfn> hereafter)
	may offer many types of sizing information to CSS,
	or none at all.
	This section defines generically the size negotiation model between the object and the CSS layout algorithms.</p>


<h3 class="heading settled" data-level=4.1 id=sizing-terms><span class=secno>4.1 </span><span class=content>
Object-Sizing Terminology</span><a class=self-link href=#sizing-terms></a></h3>

<p>In order to define this handling,
	we define a few terms,
	to make it easier to refer to various concepts:</p>

	<dl>
		<dt><dfn data-dfn-type=dfn data-export="" id=intrinsic-dimensions>intrinsic dimensions<a class=self-link href=#intrinsic-dimensions></a></dfn>
		<dd>
			The term intrinsic dimensions refers to the set of
			the <dfn data-dfn-type=dfn data-export="" id=intrinsic-height>intrinsic height<a class=self-link href=#intrinsic-height></a></dfn>,
			<dfn data-dfn-type=dfn data-export="" id=intrinsic-width>intrinsic width<a class=self-link href=#intrinsic-width></a></dfn>,
			and <dfn data-dfn-type=dfn data-export="" id=intrinsic-aspect-ratio>intrinsic aspect ratio<a class=self-link href=#intrinsic-aspect-ratio></a></dfn>
			(the ratio between the width and height),
			each of which may or may not exist for a given object.
			These intrinsic dimensions represent a preferred or natural size of the object itself;
			that is, they are not a function of the context in which the object is used.
			CSS does not define how the intrinsic dimensions are found in general.

<p>Raster images are an example of an object with all three intrinsic dimensions.
			SVG images designed to scale might have only an intrinsic aspect ratio;
			SVG images can also be created with only an intrinsic width or height.
			CSS gradients, defined in this specification, are an example of an object with no intrinsic dimensions at all.
			Another example of this is embedded documents,
			such as the <code>&lt;iframe&gt;</code> element in HTML.
			An object cannot have only two intrinsic dimensions,
			as any two automatically define the third.</p>

<p>If an object (such as an icon) has multiple sizes,
			then the largest size (by area) is taken as its intrinsic size.
			If it has multiple aspect ratios at that size,
			or has multiple aspect ratios and no size,
			then the aspect ratio closest to the aspect ratio of the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> is used.
			Determine this by seeing which aspect ratio produces the largest area
			when fitting it within the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> using a <a data-link-type=dfn href=#contain-constraint title="contain constraint">contain constraint</a> fit;
			if multiple sizes tie for the largest area,
			the wider size is chosen as its intrinsic size.</p>


		<dt><dfn data-dfn-type=dfn data-export="" id=specified-size>specified size<a class=self-link href=#specified-size></a></dfn>
		<dd>
			The specified size of an object is given by CSS,
			such as through the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visudet.html#propdef-width title=width>width</a> and <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visudet.html#propdef-height title=height>height</a> or <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-size title=background-size>background-size</a> properties.
			The specified size can be a definite width and height,
			a set of constraints,
			or a combination thereof.

		<dt><dfn data-dfn-type=dfn data-export="" id=concrete-object-size>concrete object size<a class=self-link href=#concrete-object-size></a></dfn>
		<dd>
			The <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is the result of combining
			an object’s <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a> and <a data-link-type=dfn href=#specified-size title="specified size">specified size</a>
			with the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> of the context it’s used in,
			producing a rectangle with a definite width and height.

		<dt><dfn data-dfn-type=dfn data-export="" id=default-object-size>default object size<a class=self-link href=#default-object-size></a></dfn>
		<dd>
			The <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> is a rectangle with a definite height and width
			used to determine the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>
			when both the <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a> and <a data-link-type=dfn href=#specified-size title="specified size">specified size</a> are missing dimensions.

	</dl>


<h3 class="heading settled" data-level=4.2 id=object-negotiation><span class=secno>4.2 </span><span class=content>
CSS⇋Object Negotiation</span><a class=self-link href=#object-negotiation></a></h3>

<p>Objects in CSS are sized and rendered by the <dfn data-dfn-type=dfn data-export="" id=object-size-negotiation>object size negotiation<a class=self-link href=#object-size-negotiation></a></dfn> algorithm as follows:</p>

	<ol>
		<li>
			When an image or object is specified in a document,
			such as through a <span class=css>url()</span> value in a <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-image title=background-image>background-image</a> property
			or a <code>src</code> attribute on an <code>&lt;img&gt;</code> element,
			CSS queries the object for its <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a>.

		<li>
			Using the <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a>,
			the <a data-link-type=dfn href=#specified-size title="specified size">specified size</a>,
			and the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> for the context the image or object is used in,
			CSS then computes a <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>.
			(See the <a data-section="" href=#default-sizing>following section</a>.)
			This defines the size and position of the region the object will render in.

		<li>
			CSS asks the object to render itself at the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>.
			CSS does not define how objects render when the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is different from the object’s <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a>.
			The object may adjust itself to match the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> in some way,
			or even render itself larger or smaller than the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> to satisfy sizing constraints of its own.

		<li>
			Unless otherwise specified by CSS,
			the object is then clipped to the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>.
	</ol>


<h3 class="heading settled" data-level=4.3 id=concrete-size-resolution><span class=secno>4.3 </span><span class=content>
Concrete Object Size Resolution</span><a class=self-link href=#concrete-size-resolution></a></h3>

<p>Currently the rules for sizing objects are described in each context that such objects are used.
	This section defines some common sizing constraints
	and how to resolve them
	so that future specs can refer to them instead of redefining size resolution in each instance.</p>

<h4 class="heading settled" data-level=4.3.1 id=default-sizing><span class=secno>4.3.1 </span><span class=content>
Default Sizing Algorithm</span><a class=self-link href=#default-sizing></a></h4>

<p>The <dfn data-dfn-type=dfn data-export="" id=default-sizing-algorithm>default sizing algorithm<a class=self-link href=#default-sizing-algorithm></a></dfn> is a set of rules commonly used to find an object’s <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>.
	It resolves the simultaneous constraints presented by the object’s <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a>
	and either an unconstrained <a data-link-type=dfn href=#specified-size title="specified size">specified size</a>
	or one consisting of only a definite width and/or height.</p>

<p>Some object sizing rules
	(such as those for <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-lists-3/#propdef-list-style-image title=list-style-image>list-style-image</a>)
	correspond exactly to the <a data-link-type=dfn href=#default-sizing-algorithm title="default sizing algorithm">default sizing algorithm</a>.
	Others
	(such as those for <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#border-image title=border-image>border-image</a>)
	invoke the default sizing algorithm
	but also apply additional sizing rules before arriving at a final <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>.</p>

<p>The <a data-link-type=dfn href=#default-sizing-algorithm title="default sizing algorithm">default sizing algorithm</a> is defined as follows:</p>

	<ul>
		<li>
			If the <a data-link-type=dfn href=#specified-size title="specified size">specified size</a> is a definite width and height,
			the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is given that width and height.

		<li>
			If the <a data-link-type=dfn href=#specified-size title="specified size">specified size</a> is only a width or height (but not both)
			then the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is given that specified width or height.
			The other dimension is calculated as follows:

			<ol>
				<li>
					If the object has an <a data-link-type=dfn href=#intrinsic-aspect-ratio title="intrinsic aspect ratio">intrinsic aspect ratio</a>,
					the missing dimension of the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>
					is calculated using the <a data-link-type=dfn href=#intrinsic-aspect-ratio title="intrinsic aspect ratio">intrinsic aspect ratio</a> and the present dimension.

				<li>
					Otherwise, if the missing dimension is present in the object’s <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a>,
					the missing dimension is taken from the object’s <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a>.

				<li>
					Otherwise, the missing dimension of the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is taken from the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a>.
			</ol>


		<li>
			If the <a data-link-type=dfn href=#specified-size title="specified size">specified size</a> has no constraints:

			<ol>
				<li>
					If the object has an intrinsic height or width,
					its size is resolved as if its <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a> were given as the <a data-link-type=dfn href=#specified-size title="specified size">specified size</a>.

				<li>
					Otherwise, its size is resolved as a <a data-link-type=dfn href=#contain-constraint title="contain constraint">contain constraint</a> against the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a>.
			</ol>

	</ul>

<h4 class="heading settled" data-level=4.3.2 id=cover-contain><span class=secno>4.3.2 </span><span class=content>
Cover and Contain Constraint Sizing</span><a class=self-link href=#cover-contain></a></h4>

<p>Two other common specified sizes are the <a data-link-type=dfn href=#contain-constraint title="contain constraint">contain constraint</a> and the <a data-link-type=dfn href=#cover-constraint title="cover constraint">cover constraint</a>,
	both of which are resolved against a specified <dfn data-dfn-type=dfn data-export="" id=constraint-rectangle>constraint rectangle<a class=self-link href=#constraint-rectangle></a></dfn>
	using the object’s <a data-link-type=dfn href=#intrinsic-aspect-ratio title="intrinsic aspect ratio">intrinsic aspect ratio</a>:</p>

	<ul>
		<li>
			A <dfn data-dfn-type=dfn data-export="" id=contain-constraint>contain constraint<a class=self-link href=#contain-constraint></a></dfn> is resolved
			by setting the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> to the largest rectangle that has the object’s <a data-link-type=dfn href=#intrinsic-aspect-ratio title="intrinsic aspect ratio">intrinsic aspect ratio</a>
			and additionally has neither width nor height larger than the constraint rectangle’s width and height, respectively.

		<li>
			A <dfn data-dfn-type=dfn data-export="" id=cover-constraint>cover constraint<a class=self-link href=#cover-constraint></a></dfn> is resolved
			by setting the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> to the smallest rectangle that has the object’s <a data-link-type=dfn href=#intrinsic-aspect-ratio title="intrinsic aspect ratio">intrinsic aspect ratio</a>
			and additionally has neither width nor height smaller than the constraint rectangle’s width and height, respectively.
	</ul>

<p>In both cases,
	if the object doesn’t have an intrinsic aspect ratio,
	the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is the specified constraint rectangle.</p>

<h3 class="heading settled" data-level=4.4 id=object-sizing-examples><span class=secno>4.4 </span><span class=content>
Examples of CSS Object Sizing</span><a class=self-link href=#object-sizing-examples></a></h3>

	<div class=example>
		The following examples show how the <a href=http://www.w3.org/TR/CSS21/>CSS 2.1</a>
		and <a href=http://www.w3.org/TR/css3-background/>CSS3 Backgrounds &amp; Borders</a> sizing algorithms
		correspond to concepts defined in this specification.

		<dl>
			<dt><a href=http://www.w3.org/TR/css3-background/#the-background-image><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-image title=background-image>background-image</a></a>
			<dd>
				The rules for calculating the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> of a background
				are defined in <a href=http://www.w3.org/TR/CSS21/colors.html#background-properties>CSS2.1§14.2.1</a>
				and <a href=http://www.w3.org/TR/css3-background/#the-background-size>CSS3BG§3.9</a>.
				CSS2.1 uses the <a data-link-type=dfn href=#default-sizing-algorithm title="default sizing algorithm">default sizing algorithm</a>
				with no <a data-link-type=dfn href=#specified-size title="specified size">specified size</a>
				and the <a data-link-type=dfn title="background positioning area">background positioning area</a> as the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a>. <a data-biblio-type=normative data-link-type=biblio href=#biblio-css21 title=CSS21>[CSS21]</a>
				In CSS3, <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-size title=background-size>background-size</a> property can give a sizing constraint,
				invoking either the <a data-link-type=dfn href=#default-sizing-algorithm title="default sizing algorithm">default sizing algorithm</a>
				or one of the <a data-link-type=dfn href=#contain-constraint title="contain constraint">contain</a> or <a data-link-type=dfn href=#cover-constraint title="cover constraint">cover</a> constraints.
				The concrete object size is further adjusted in later steps if <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-repeat title=background-repeat>background-repeat</a> has a <span class=css>round</span> value. <a data-biblio-type=informative data-link-type=biblio href=#biblio-css3bg title=CSS3BG>[CSS3BG]</a>

			<dt><a href=http://www.w3.org/TR/CSS21/generate.html#propdef-list-style-image><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-lists-3/#propdef-list-style-image title=list-style-image>list-style-image</a></a>
			<dd>
				The rules for calculating the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> of a list-style image
				are defined in <a href=http://www.w3.org/TR/CSS21/generate.html#propdef-list-style-image>CSS2.1§12.5.1</a>.
				They use the <a data-link-type=dfn href=#default-sizing-algorithm title="default sizing algorithm">default sizing algorithm</a>
				with no <a data-link-type=dfn href=#specified-size title="specified size">specified size</a>
				and a <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> of 1em square.

			<dt><a href=http://www.w3.org/TR/css3-background/#border-images><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#border-image title=border-image>border-image</a></a>
			<dd>
				Border images are sized twice:
				first the entire image is sized to determine the slice points,
				then the slices are sized to decorate the border.
				The first sizing operation is defined in <a href=http://www.w3.org/TR/css3-background/#the-border-image-slice>CSS3BG§6.2</a>
				and uses the <a data-link-type=dfn href=#default-sizing-algorithm title="default sizing algorithm">default sizing algorithm</a>
				with no <a data-link-type=dfn href=#specified-size title="specified size">specified size</a>,
				and the <a href=http://www.w3.org/TR/css3-background/#border-image-area>border image area</a> as the <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a>.
				The second operation is defined in <a href=http://www.w3.org/TR/css3-background/#border-image-process>CSS3BG§6.2</a>:
				the <a data-link-type=dfn href=#default-sizing-algorithm title="default sizing algorithm">default sizing algorithm</a> is used to determine an initial size for each slice
				with the corresponding <a data-link-type=dfn title="border image area">border image area</a> part as the default object size.
				By default the <a data-link-type=dfn href=#specified-size title="specified size">specified size</a> matches this <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a>;
				however the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#border-image-repeat title=border-image-repeat>border-image-repeat</a> property can drop the specified size in one or more directions
				and may also apply an additional rounding step. <a data-biblio-type=informative data-link-type=biblio href=#biblio-css3bg title=CSS3BG>[CSS3BG]</a>


			<dt><a href=http://www.w3.org/TR/CSS21/ui.html#cursor-props><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-ui-3/#cursor0 title=cursor>cursor</a></a>
			<dd>
				The rules for calculating the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> of a cursor
				are defined in <a href=http://www.w3.org/TR/CSS21/ui.html#cursor-props>CSS2.1 § 18.1: Cursors</a>.
				The <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> is a UA-defined size
				that should be based on the size of a typical cursor on the UA’s operating system.  <a data-biblio-type=normative data-link-type=biblio href=#biblio-css21 title=CSS21>[CSS21]</a>

			<dt><a href=http://www.w3.org/TR/CSS21/generate.html#content><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-content-3/#content title=content>content</a></a>
			<dd>
				Objects inserted via the CSS2.1 <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-content-3/#content title=content>content</a> property
				are anonymous <a href=http://www.w3.org/TR/CSS21/conform.html#replaced-element>replaced elements</a>,
				and are sized the same way. <a data-biblio-type=normative data-link-type=biblio href=#biblio-css21 title=CSS21>[CSS21]</a>
				Note that such anonymous elements have all their non-inherited properties (including <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visudet.html#propdef-width title=width>width</a>, <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visudet.html#propdef-height title=height>height</a>, etc.)
				set to their initial values.

			<dt><a href=http://www.w3.org/TR/CSS21/conform.html#replaced-element>replaced elements</a>
			<dd>
				<a href=http://www.w3.org/TR/CSS21/>CSS 2.1</a> defines the sizing of replaced elements
				(including those inserted as <a href=http://www.w3.org/TR/CSS21/generate.html#content>generated content</a> via <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-content-3/#content title=content>content</a>)
				in sections <a href=http://www.w3.org/TR/CSS21/visudet.html#inline-replaced-width>10.3.2</a>,
				<a href=http://www.w3.org/TR/CSS2/visudet.html#min-max-widths>10.4</a>,
				<a href=http://www.w3.org/TR/CSS21/visudet.html#inline-replaced-height>10.6.2</a>,
				and <a href=http://www.w3.org/TR/CSS2/visudet.html#min-max-heights>10.7</a>. <a data-biblio-type=normative data-link-type=biblio href=#biblio-css21 title=CSS21>[CSS21]</a>
				The <a class=property data-link-type=propdesc href=#propdef-object-fit title=object-fit>object-fit</a> property defined below defines how the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> corresponds to the element’s used width and height;
				by default they coincide.
		</dl>
	</div>

<h3 class="heading settled" data-level=4.5 id=the-object-fit><span class=secno>4.5 </span><span class=content>
Sizing Objects: the <a class=property data-link-type=propdesc href=#propdef-object-fit title=object-fit>object-fit</a> property</span><a class=self-link href=#the-object-fit></a></h3>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css data-dfn-type=property data-export="" id=propdef-object-fit>object-fit<a class=self-link href=#propdef-object-fit></a></dfn><tr><th>Value:<td class=prod>fill <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> contain <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> cover <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> none <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> scale-down<tr><th>Initial:<td>fill<tr><th>Applies to:<td>replaced elements<tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>specified value<tr><th>Percentages:<td>n/a<tr><th>Animatable:<td>no</table>

<p>The <a class=property data-link-type=propdesc href=#propdef-object-fit title=object-fit>object-fit</a> property specifies how the contents of a replaced element
	should be fitted to the box established by its used height and width.</p>

	<dl data-dfn-for=object-fit data-dfn-type=value>
		<dt><dfn class=css data-dfn-for=object-fit data-dfn-type=value data-export="" id=valdef-object-fit-fill>fill<a class=self-link href=#valdef-object-fit-fill></a></dfn>
		<dd>
			The replaced content is sized to fill the element’s content box:
			the object’s <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is the element’s used width and height.

		<dt><dfn class=css data-dfn-for=object-fit data-dfn-type=value data-export="" id=valdef-object-fit-contain>contain<a class=self-link href=#valdef-object-fit-contain></a></dfn>
		<dd>
			The replaced content is sized to maintain its aspect ratio
			while fitting within the element’s content box:
			its <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is resolved as a <a data-link-type=dfn href=#contain-constraint title="contain constraint">contain constraint</a>
			against the element’s used width and height.

		<dt><dfn class=css data-dfn-for=object-fit data-dfn-type=value data-export="" id=valdef-object-fit-cover>cover<a class=self-link href=#valdef-object-fit-cover></a></dfn>
		<dd>
			The replaced content is sized to maintain its aspect ratio
			while filling the element’s entire content box:
			its <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> is resolved as a <a data-link-type=dfn href=#cover-constraint title="cover constraint">cover constraint</a>
			against the element’s used width and height.

		<dt><dfn class=css data-dfn-for=object-fit data-dfn-type=value data-export="" id=valdef-object-fit-none>none<a class=self-link href=#valdef-object-fit-none></a></dfn>
		<dd>
			The replaced content is not resized to fit inside the element’s content box:
			determine the object’s <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>
			using the <a data-link-type=dfn href=#default-sizing-algorithm title="default sizing algorithm">default sizing algorithm</a> with no specified size,
			and a <a data-link-type=dfn href=#default-object-size title="default object size">default object size</a> equal to the replaced element’s used width and height.

		<dt><dfn class=css data-dfn-for=object-fit data-dfn-type=value data-export="" id=valdef-object-fit-scale-down>scale-down<a class=self-link href=#valdef-object-fit-scale-down></a></dfn>
		<dd>
			Size the content as if <a class=css data-link-type=maybe href=#valdef-object-fit-none title=none>none</a> or <a class=css data-link-type=maybe href=#valdef-object-fit-contain title=contain>contain</a> were specified,
			whichever would result in a smaller <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>.

<p class=note>Note: Both <a class=css data-link-type=maybe href=#valdef-object-fit-none title=none>none</a> and <a class=css data-link-type=maybe href=#valdef-object-fit-contain title=contain>contain</a> respect the content’s intrinsic aspect ratio,
			so the concept of "smaller" is well-defined.</p>
	</dl>

<p>If the content does not completely fill the replaced element’s content box,
	the unfilled space shows the replaced element’s background.
	Since replaced elements always clip their contents to the content box,
	the content will never overflow.
	See the <a class=property data-link-type=propdesc href=#propdef-object-position title=object-position>object-position</a> property for positioning the object with respect to the content box.</p>

	<figure>
		<img alt="" src=images/img_scale.png style="border: thin solid black;">

		<figcaption>
			An example showing how four of the values of <a class=property data-link-type=propdesc href=#propdef-object-fit title=object-fit>object-fit</a> cause the replaced element (blue figure)
			to be scaled to fit its height/width box (shown with a green background),
			using the initial value for <a class=property data-link-type=propdesc href=#propdef-object-position title=object-position>object-position</a>.
			The fifth value, <a class=css data-link-type=maybe href=#valdef-object-fit-scale-down title=scale-down>scale-down</a>,
			in this case looks identical to <a class=css data-link-type=maybe href=#valdef-object-fit-contain title=contain>contain</a>.
		</figcaption>
	</figure>

<p class=note>Note: The <a class=property data-link-type=propdesc href=#propdef-object-fit title=object-fit>object-fit</a> property has similar semantics to
	the <code>fit</code> attribute in <a data-biblio-type=informative data-link-type=biblio href=#biblio-smil10 title=SMIL10>[SMIL10]</a>
	and the <a class="production css" data-link-type=type title="<meetOrSlice>">&lt;meetOrSlice&gt;</a> parameter
	on the <a href=http://www.w3.org/TR/SVG11/coords.html#PreserveAspectRatioAttribute><code>preserveAspectRatio</code> attribute</a> in <a data-biblio-type=informative data-link-type=biblio href=#biblio-svg11 title=SVG11>[SVG11]</a>.</p>

<p class=note>Note: Per the <a data-link-type=dfn href=#object-size-negotiation title="object size negotiation">object size negotiation</a> algorithm,
	the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a>
	(or, in this case, the size of the content)
	does not directly scale the object itself -
	it is merely passed to the object as information about the size of the visible canvas.
	How to then draw into that size is up to the image format.
	In particular, raster images always scale to the given size,
	while SVG uses the given size as the size of the "SVG Viewport"
	(a term defined by SVG)
	and then uses the values of several attributes on the root <code>&lt;svg&gt;</code> element to determine how to draw itself.</p>

<h3 class="heading settled" data-level=4.6 id=the-object-position><span class=secno>4.6 </span><span class=content>
Positioning Objects: the <a class=property data-link-type=propdesc href=#propdef-object-position title=object-position>object-position</a> property</span><a class=self-link href=#the-object-position></a></h3>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css data-dfn-type=property data-export="" id=propdef-object-position>object-position<a class=self-link href=#propdef-object-position></a></dfn><tr><th>Value:<td class=prod><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a><tr><th>Initial:<td>50% 50%<tr><th>Applies to:<td>replaced elements<tr><th>Inherited:<td>no<tr><th>Media:<td>visual<tr><th>Computed value:<td>specified value<tr><th>Canonical order:<td>the horizontal component of the <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a>, followed by the vertical component<tr><th>Percentages:<td>refer to width and height of element itself<tr><th>Animatable:<td>yes</table>

<p>The <a class=property data-link-type=propdesc href=#propdef-object-position title=object-position>object-position</a> property determines the alignment of the replaced element inside its box.
	The <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a> value type
	(which is also used for <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-position title=background-position>background-position</a>)
	is defined in <a data-biblio-type=normative data-link-type=biblio href=#biblio-css3val title=CSS3VAL>[CSS3VAL]</a>,
	and is resolved using the <a data-link-type=dfn href=#concrete-object-size title="concrete object size">concrete object size</a> as the object area
	and the content box as the positioning area.</p>

<p class=note>Note: Areas of the box not covered by the replaced element will show the element’s background.</p>



<h2 class="heading settled" data-level=5 id=image-processing><span class=secno>5 </span><span class=content>
Image Processing</span><a class=self-link href=#image-processing></a></h2>

<h3 class="heading settled" data-level=5.1 id=the-image-resolution><span class=secno>5.1 </span><span class=content>
Overriding Image Resolutions: the <a class=property data-link-type=propdesc href=#propdef-image-resolution title=image-resolution>image-resolution</a> property</span><a class=self-link href=#the-image-resolution></a></h3>

<p>The <dfn data-dfn-type=dfn data-export="" id=image-resolution>image resolution<a class=self-link href=#image-resolution></a></dfn> is defined as
	the number of image pixels per unit length,
	e.g., pixels per inch.
	Some image formats can record information about the resolution of images.
	This information can be helpful when determining the actual size of the image in the formatting process.
	However, the information can also be wrong,
	in which case it should be ignored.
	By default, CSS assumes a resolution of one image pixel per CSS <span class=css>px</span> unit;
	however, the <a class=property data-link-type=propdesc href=#propdef-image-resolution title=image-resolution>image-resolution</a> property allows using some other resolution.</p>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css data-dfn-type=property data-export="" id=propdef-image-resolution>image-resolution<a class=self-link href=#propdef-image-resolution></a></dfn><tr><th>Value:<td class=prod>[ from-image <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-any title=||>||</a> <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#resolution-value title="<resolution>">&lt;resolution&gt;</a> ] &amp;&amp; snap<a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a><tr><th>Initial:<td>1dppx<tr><th>Applies to:<td>all elements<tr><th>Inherited:<td>yes<tr><th>Media:<td>visual<tr><th>Computed value:<td>as specified, except with <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#resolution-value title="<resolution>">&lt;resolution&gt;</a> possibly altered by computed for <a class=css data-link-type=maybe href=#valdef-image-resolution-snap title=snap>snap</a> (see below)<tr><th>Animatable:<td>no</table>

	<p class=issue id=issue-21efe18d><a class=self-link href=#issue-21efe18d></a>
		The <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> notation can alter the intrinsic resolution of an image,
		which ideally would be automatically honored without having to set this property.
		How should we best address this?
		Change the initial value to <a class=css data-link-type=maybe href=#valdef-image-rendering-auto title=auto>auto</a>, meaning "1dppx, unless CSS says otherwise"?
		Say that image-resolution has no effect on images whose resolution was set by something else in CSS?
		Or somehow wordsmithing <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> in some way such that it always produces <span class=css>1dppx</span> images somehow?

<p>The <a class=property data-link-type=propdesc href=#propdef-image-resolution title=image-resolution>image-resolution</a> property specifies the <a data-link-type=dfn href=#intrinsic-resolution title="intrinsic resolution">intrinsic resolution</a> of all raster images used in or on the element.
	It affects both content images
	(e.g. replaced elements and generated content)
	and decorative images
	(such as <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-image title=background-image>background-image</a>).
	The <dfn data-dfn-type=dfn data-export="" id=intrinsic-resolution>intrinsic resolution<a class=self-link href=#intrinsic-resolution></a></dfn> of an image is used to determine the image’s <a data-link-type=dfn href=#intrinsic-dimensions title="intrinsic dimensions">intrinsic dimensions</a>.
	Values have the following meanings:</p>

	<dl data-dfn-for=image-resolution data-dfn-type=value>
		<dt><dfn class=css data-dfn-for=image-resolution data-dfn-type=value data-export="" id=valdef-image-resolution-resolution><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#resolution-value title="<resolution>">&lt;resolution&gt;</a><a class=self-link href=#valdef-image-resolution-resolution></a></dfn>
		<dd>
			Specifies the intrinsic resolution explicitly.
			A "dot" in this case corresponds to a single image pixel.

		<dt><dfn class=css data-dfn-for=image-resolution data-dfn-type=value data-export="" id=valdef-image-resolution-from-image>from-image<a class=self-link href=#valdef-image-resolution-from-image></a></dfn>
		<dd>
			The image’s intrinsic resolution is taken as that specified by the image format.
			If the image does not specify its own resolution,
			the explicitly specified resolution is used (if given),
			else it defaults to <span class=css>1dppx</span>.

		<dt><dfn class=css data-dfn-for=image-resolution data-dfn-type=value data-export="" id=valdef-image-resolution-snap>snap<a class=self-link href=#valdef-image-resolution-snap></a></dfn>
		<dd>
			If the "snap" keyword is provided,
			the computed <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#resolution-value title="<resolution>">&lt;resolution&gt;</a> (if any)
			is the specified resolution rounded to the nearest value
			that would map one image pixel to an integer number of device pixels.
			If the resolution is taken from the image,
			then the used intrinsic resolution is the image’s native resolution similarly adjusted.
	</dl>

<p>As vector formats such as SVG do not have an intrinsic resolution,
	this property has no effect on vector images.</p>

	<div class=example>
		Printers tend to have substantially higher resolution than computer monitors;
		due to this, an image that looks fine on the screen may look pixellated when printed out.
		The <a class=property data-link-type=propdesc href=#propdef-image-resolution title=image-resolution>image-resolution</a> property can be used to embed a high-resolution image into the document
		and maintain an appropriate size,
		ensuring attractive display both on screen and on paper:

		<pre>img.high-res {
  image-resolution: 300dpi;
}
</pre>

<p>With this set, an image meant to be 5 inches wide at 300dpi
		will actually display as 5in wide;
		without this set,
		the image would display as approximately 15.6in wide
		since the image is 15000 image pixels across,
		and by default CSS displays 96 image pixels per inch.</p>
	</div>


	<div class=example>
		Some image formats can encode the image resolution into the image data.
		This rule specifies that the UA should use the image resolution found in the image itself,
		falling back to 1 image pixel per CSS <span class=css>px</span> unit.

<pre>img { image-resolution: from-image }</pre>

<p>These rules both specify that the UA should use the image resolution found in the image itself,
		but if the image has no resolution,
		the resolution is set to <span class=css>300dpi</span> instead of the default <span class=css>1dppx</span>.</p>

		<pre>img { image-resolution: from-image 300dpi }
img { image-resolution: 300dpi from-image }
</pre>

	</div>

	<div class=example>

<p>Using this rule, the image resolution is set to 300dpi.
		(The resolution in the image, if any, is ignored.)</p>

<pre>img { image-resolution: 300dpi }</pre>

<p>This rule, on the other hand,
		if used when the screen’s resolution is 96dpi,
		would instead render the image at 288dpi
		(so that 3 image pixels map to 1 device pixel):</p>

<pre>img { image-resolution: 300dpi snap; }</pre>

<p>The <a class=css data-link-type=maybe href=#valdef-image-resolution-snap title=snap>snap</a> keyword can also be used when the resolution is taken from the image:</p>

<pre>img { image-resolution: snap from-image; }</pre>

<p>An image declaring itself as 300dpi will,
		in the situation above,
		display at 288dpi
		(3 image pixels per device pixel)
		whereas an image declaring 72dpi will render at 96dpi
		(1 image pixel per device pixel).</p>
	</div>

<h3 class="heading settled" data-level=5.2 id=the-image-orientation><span class=secno>5.2 </span><span class=content>
Orienting an Image on the Page: the <a class=property data-link-type=propdesc href=#propdef-image-orientation title=image-orientation>image-orientation</a> property</span><a class=self-link href=#the-image-orientation></a></h3>

<p class=issue id=issue-8d35d0df><a class=self-link href=#issue-8d35d0df></a>This property is likely going to be deprecated and its functionality moved to HTML.
	At minimum, it will likely lose all but its initial value and <a class=css data-link-for=image-orientation data-link-type=maybe href=#valdef-image-orientation-from-image title=from-image>from-image</a>.</p>

<p>If a picture is taken with a camera turned on its side,
	or a document isn’t positioned correctly within a scanner,
	the resultant image may be "sideways" or even upside-down.
	The <a class=property data-link-type=propdesc href=#propdef-image-orientation title=image-orientation>image-orientation</a> property provides a way to apply an "out-of-band" rotation to image source data to correctly orient an image.</p>

<p class=note>Note: This property is not intended to specify layout transformations
	such as arbitrary rotation or flipping the image in the horizontal or vertical direction.
	(See <a data-biblio-type=informative data-link-type=biblio href=#biblio-css3-2d-transforms title=CSS3-2D-TRANSFORMS>[CSS3-2D-TRANSFORMS]</a> for a feature designed to do that.)
	It is also not needed to correctly orient an image when printing in landscape versus portrait orientation,
	as that rotation is done as part of layout. (See <a data-biblio-type=informative data-link-type=biblio href=#biblio-css3page title=CSS3PAGE>[CSS3PAGE]</a>.)
	It should only be used to correct incorrectly-oriented images.</p>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css data-dfn-type=property data-export="" id=propdef-image-orientation>image-orientation<a class=self-link href=#propdef-image-orientation></a></dfn><tr><th>Value:<td class=prod>from-image <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a> <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> [ <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a><a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a> flip ]<tr><th>Initial:<td>0deg<tr><th>Applies to:<td>all elements<tr><th>Inherited:<td>yes<tr><th>Media:<td>visual<tr><th>Computed value:<td>an <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a>, rounded and normalized (see text), plus optionally a <span class=css>flip</span> keyword<tr><th>Animatable:<td>no</table>

<p>This property specifies an orthogonal rotation to be applied to an image before it is laid out.
	It applies only to content images
	(e.g. replaced elements and generated content),
	not decorative images
	(such as <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-backgrounds-3/#background-image title=background-image>background-image</a>).
	CSS layout processing applies to the image <em>after</em> rotation.
	This implies, for example:</p>

	<ul>
		<li>
			The intrinsic height and width are derived from the rotated rather than the original image dimensions.

		<li>
			The height (width) property applies to the vertical (horizontal) dimension of the image,
			<em>after</em> rotation.
	</ul>

<p>Values have the following meanings:</p>

	<dl data-dfn-for=image-orientation data-dfn-type=value>
		<dt><dfn class=css data-dfn-for=image-orientation data-dfn-type=value data-export="" id=valdef-image-orientation-from-image>from-image<a class=self-link href=#valdef-image-orientation-from-image></a></dfn>
		<dd>
			If the image has an orientation specified in its metadata,
			such as EXIF,
			this value computes to the angle that the metadata specifies is necessary to correctly orient the image.
			If necessary, this angle is then rounded and normalized as described above for an <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a> value.
			If there is no orientation specified in its metadata,
			this value computes to <span class=css>0deg</span>.

		<dt><dfn class=css data-dfn-for=image-orientation data-dfn-type=value data-export="" id=valdef-image-orientation-angle><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a><a class=self-link href=#valdef-image-orientation-angle></a></dfn>
		<dd>
			Positive values cause the image to be rotated to the right
			(in a clockwise direction),
			while negative values cause a rotation to the left.
			The computed value of the property is calculated
			by rounding the specified angle to the nearest quarter-turn
			(90deg, 100grad, .25turn, etc.),
			rounding away from 0
			(that is, 45deg is rounded  to 90deg, while -45deg is rounded to -90deg),
			then moduloing the value by 1 turn (360deg, 400grad, etc.).

		<dt><dfn class=css data-dfn-for=image-orientation data-dfn-type=value data-export="" id=valdef-image-orientation-angle-flip><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a>? flip<a class=self-link href=#valdef-image-orientation-angle-flip></a></dfn>
		<dd>
			Identical to the plain <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a> case,
			except that after rotation the image is flipped horizontally.
			If the <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a> is omitted,
			it defaults to <span class=css>0deg</span>.

<p class=note>Note: This value is only necessary to represent all 8 possible EXIF orientations that <a class=css data-link-for=image-orientation data-link-type=value href=#valdef-image-orientation-from-image title=from-image>from-image</a> can produce.</p>
	</dl>

<p>The <a class=property data-link-type=propdesc href=#propdef-image-orientation title=image-orientation>image-orientation</a> property must be applied before any other transformations,
	such as being specified in the <a class=css data-link-type=maybe href=#funcdef-image title=image()>image()</a> function with an opposite directionality to its context,
	or using CSS Transforms.</p>

	<div class=example>

<p>The following example rotates the image 90 degrees clockwise:</p>

		<pre>img.ninety     { image-orientation: 90deg }
...
&lt;img class="ninety" src=...&gt;
</pre>

<p>The same effect could be achieved with, for example,
		an angle of -270deg or 450deg.</p>
	</div>

<h3 class="heading settled" data-level=5.3 id=the-image-rendering><span class=secno>5.3 </span><span class=content>
Determing How To Scale an Image: the <a class=property data-link-type=propdesc href=#propdef-image-rendering title=image-rendering>image-rendering</a> property</span><a class=self-link href=#the-image-rendering></a></h3>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css data-dfn-type=property data-export="" id=propdef-image-rendering>image-rendering<a class=self-link href=#propdef-image-rendering></a></dfn><tr><th>Value:<td class=prod>auto <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> crisp-edges <a class=prod-punc data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> pixelated<tr><th>Initial:<td>auto<tr><th>Applies to:<td>all elements<tr><th>Inherited:<td>yes<tr><th>Media:<td>visual<tr><th>Computed value:<td>specified value<tr><th>Animatable:<td>no</table>

<p>The <a class=property data-link-type=propdesc href=#propdef-image-rendering title=image-rendering>image-rendering</a> property provides a hint to the user-agent
	about what aspects of an image are most important to preserve when the image is scaled,
	to aid the user-agent in the choice of an appropriate scaling algorithm.
	When specified on an element,
	it applies to all images given in properties for the element,
	such as background images,
	list-style images,
	or the content of replaced elements when they represent an image that must be scaled.
	The values of the <a class=property data-link-type=propdesc href=#propdef-image-rendering title=image-rendering>image-rendering</a> property are interpreted as follows:</p>

	<dl data-dfn-for=image-rendering data-dfn-type=value>
		<dt><dfn class=css data-dfn-for=image-rendering data-dfn-type=value data-export="" id=valdef-image-rendering-auto>auto<a class=self-link href=#valdef-image-rendering-auto></a></dfn>
		<dd>
			The image should be scaled with an algorithm that maximizes the appearance of the image.
			In particular, scaling algorithms that "smooth" colors are acceptable,
			such as bilinear interpolation.
			This is intended for images such as photos.

		<dt><dfn class=css data-dfn-for=image-rendering data-dfn-type=value data-export="" id=valdef-image-rendering-crisp-edges>crisp-edges<a class=self-link href=#valdef-image-rendering-crisp-edges></a></dfn>
		<dd>
			The image must be scaled with an algorithm that preserves contrast and edges in the image,
			and which does not smooth colors or introduce blur to the image in the process.
			This is intended for images such as pixel art.

		<dt><dfn class=css data-dfn-for=image-rendering data-dfn-type=value data-export="" id=valdef-image-rendering-pixelated>pixelated<a class=self-link href=#valdef-image-rendering-pixelated></a></dfn>
		<dd>
			The image must be scaled with the "nearest neighbor" or similar algorithm,
			to preserve a "pixelated" look as the image changes in size.
	</dl>

	<p class=issue id=issue-c0a2c82d><a class=self-link href=#issue-c0a2c82d></a>
		Should we move the current <a class=css data-link-type=maybe href=#valdef-image-rendering-auto title=auto>auto</a> behavior to a well-named keyword (<span class=css>smooth</span>?)
		and just define <a class=css data-link-type=maybe href=#valdef-image-rendering-auto title=auto>auto</a> to be "whatever the UA wants",
		which is what <a class=css data-link-type=maybe href=#valdef-image-rendering-auto title=auto>auto</a> usually means?

<p>This property does not dictate any particular scaling algorithm to be used.
	For example, with <a class=css data-link-type=propdesc href=#propdef-image-rendering title=image-rendering>image-rendering: auto</a>,
	a user agent might scale images with bilinear interpolation by default,
	switch to nearest-neighbor interpolation in high-load situations,
	and switch to a high-quality scaling algorithm like Lanczos interpolation for static images that aren’t moving or changing.
	Similarly, with 'image-rendering: crisp-edges',
	a user agent might scale images with nearest-neighbor interpolation by default,
	and switch to EPX interpolation in low-load situations.</p>

<p>This property previously accepted the values <span class=css>optimizeSpeed</span> and <span class=css>optimizeQuality</span>.
	These are now deprecated;
	a user agent must accept them as valid values
	but must treat them as having the same behavior as <a class=css data-link-for=image-rendering data-link-type=value href=#valdef-image-rendering-auto title=auto>auto</a>,
	and authors must not use them.</p>


<h2 class="heading settled" data-level=6 id=interpolation><span class=secno>6 </span><span class=content>
Interpolation</span><a class=self-link href=#interpolation></a></h2>

<p>This section describes how to interpolate between new value types defined in this specification,
	for use with modules such as CSS Transitions and CSS Animations.</p>

<p>If an algorithm below simply states that two values should be "interpolated" or "transitioned" without further details,
	then the value should be interpolated as described by the Transitions spec.
	Otherwise, the algorithm may reference a variable "t" in its detailed description of the interpolation.
	This is a number which starts at 0% and goes to 100%,
	and is set to a value that represents the progress through the transition,
	based on the duration of the transition,
	the elapsed time,
	and the timing function in use.
	For example, with a linear timing function and a 1s duration,
	after .3s t is equal to 30%.</p>

<h3 class="heading settled" data-level=6.1 id=interpolating-images><span class=secno>6.1 </span><span class=content>
Interpolating <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a></span><a class=self-link href=#interpolating-images></a></h3>

<p>All images can be interpolated,
	though some special types of images
	(like some gradients)
	have their own special interpolation rules.
	In general terms,
	images are interpolated by scaling them to the size of the start image
	and cross-fading the two while they transition to the size of the end image.</p>

<p>In specific terms,
	at each point in the interpolation
	the image is equal to <code>cross-fade( (100% - t) <var>start image</var>, <var>end image</var>)</code>.</p>

	<p class=issue id=issue-804aa4d4><a class=self-link href=#issue-804aa4d4></a>
		Special-case interpolating to/from no image,
		like "background-image: url(foo);" to "background-image: none;".


<h3 class="heading settled" data-level=6.2 id=interpolating-image-combinations><span class=secno>6.2 </span><span class=content>
Interpolating cross-fade()</span><a class=self-link href=#interpolating-image-combinations></a></h3>

<p>If both the starting and ending images are <a data-link-type=functionish href=#funcdef-cross-fade title=cross-fade()>cross-fade()</a>s
	which differ only by by their <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a>,
	they must be interpolated by interpolating their <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a>.
	Otherwise, they must be interpolated as generic <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a>s.</p>


<h3 class="heading settled" data-level=6.3 id=interpolating-gradients><span class=secno>6.3 </span><span class=content>
Interpolating <a class="production css" data-link-type=type href=#typedef-gradient title="<gradient>">&lt;gradient&gt;</a></span><a class=self-link href=#interpolating-gradients></a></h3>

	<p class=issue id=issue-4a9ae5c3><a class=self-link href=#issue-4a9ae5c3></a>
		This section needs review and improvement.
		In particular, I believe the handling of linear-gradient() is incomplete -
		I think we want to specifically interpolate the "length" of the gradient line
		(the distance between 0% and 100%)
		between the starting and ending positions explicitly,
		so it doesn’t grow and then shrink over a single animation.

<p>Gradient images can be interpolated directly in CSS transitions and animations,
	smoothly animating from one gradient to another.
	There are only a few restrictions on what gradients are allowed to be interpolated:</p>

	<ol>
		<li>
			Both the starting and ending gradient must be expressed with the same function.
			(For example, you can transition from a <a class=css data-link-type=maybe href=#funcdef-linear-gradient title=linear-gradient()>linear-gradient()</a> to a <a class=css data-link-type=maybe href=#funcdef-linear-gradient title=linear-gradient()>linear-gradient()</a>,
			but not from a <a class=css data-link-type=maybe href=#funcdef-linear-gradient title=linear-gradient()>linear-gradient()</a> to a <a class=css data-link-type=maybe href=#funcdef-radial-gradient title=radial-gradient()>radial-gradient()</a> or a <a class=css data-link-type=maybe href=#funcdef-repeating-linear-gradient title=repeating-linear-gradient()>repeating-linear-gradient()</a>.)

		<li>
			Both the starting and ending gradient must have the same number of <a class="production css" data-link-type=type href=#typedef-color-stop title="<color-stop>">&lt;color-stop&gt;</a>s.
			<span class=note>Note that one can pad a gradient with additional <a class="production css" data-link-type=type href=#typedef-color-stop title="<color-stop>">&lt;color-stop&gt;</a>s placed atop each other,
			if necessary to make two gradients have the same number of <a class="production css" data-link-type=type href=#typedef-color-stop title="<color-stop>">&lt;color-stop&gt;</a>s.)</span>

<p>For this purpose, all repeating gradients are considered to have "infinite" color stops,
			and thus all repeating gradients match in this respect.</p>
	</ol>

<p>If the two gradients satisfy both of those constraints,
	they must be interpolated as described below.
	If not, they must be interpolated as a generic <a class="production css" data-link-type=type href=#typedef-image title="<image>">&lt;image&gt;</a>.</p>

	<ol>
		<li>
			Convert both the start and end gradients to their explicit forms:

			<dl>
				<dt>For linear gradients:
				<dd>
					<ul>
						<li>
							If the direction is specified as an	<a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a>,
							it is already in its explicit form.

						<li>
							Otherwise,
							change its direction to an <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#angle-value title="<angle>">&lt;angle&gt;</a> in [<span class=css>0deg</span>,<span class=css>360deg</span>)
							that would produce an equivalent rendering.

<p>If both the start and end gradients had their direction specified with keywords,
							and the absolute difference between the angles their directions mapped to is greater than 180deg,
							add 360deg to the direction of the gradient with the smaller angle.
							<span class=note>This ensures that a transition from, for example,
							"to left" (270deg) to "to top" (0deg)
							rotates the gradient a quarter-turn clockwise,
							as expected,
							rather than rotating three-quarters of a turn counter-clockwise.</span></p>
					</ul>


				<dt>For radial gradients:
				<dd>
					<ul>
						<li>
							If the size is specified as two <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>s or <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a>s,
							it is already in its explicit form.

						<li>
							Otherwise, the size must be changed to a pair of <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>s
							that would produce an equivalent ending-shape.
							If the <a class="production css" data-link-type=type title="<ending-shape>">&lt;ending-shape&gt;</a> was specified as <span class=css>circle</span>,
							change it to <span class=css>ellipse</span>.
					</ul>
			</dl>


		<li>
			Interpolate each component and color-stop of the gradients independently.
			For linear gradients,
			the only component is the angle.
			For radial gradients,
			the components are the horizontal and vertical position of the center
			and the horizontal and vertical axis lengths.

		<li>
			To interpolate a color-stop,
			first match each color-stop in the start gradient
			to the corresponding color-stop at the same index in the end gradient.
			For repeating gradients,
			the first specified color-stop in the start and end gradients
			are considered to be at the same index,
			and all other color-stops following and preceding are indexed appropriately,
			repeating and shifting each gradient’s list of color-stops as needed.
			Then, for each pair of color-stops,
			interpolate the position and color independently.
	</ol>

<h2 class="heading settled" data-level=7 id=serialization><span class=secno>7 </span><span class=content>
Serialization</span><a class=self-link href=#serialization></a></h2>

<p>This section describes the serialization of all new properties and value types introduced in this specification,
	for the purpose of interfacing with the CSS Object Model <a data-biblio-type=informative data-link-type=biblio href=#biblio-cssom title=CSSOM>[CSSOM]</a>.</p>

<p>To serialize any function defined in this module,
	serialize it per its individual grammar,
	in the order its grammar is written in,
	omitting components when possible without changing the meaning,
	joining space-separated tokens with a single space,
	and following each serialized comma with a single space.</p>

<p>For <a class=css data-link-type=maybe href=#funcdef-cross-fade title=cross-fade()>cross-fade()</a>,
	always serialize the <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a>.</p>

	<div class=example>

<p>For example, a gradient specified as:</p>

<pre>Linear-Gradient( to bottom, red 0%,yellow,black 100px)</pre>

<p>must serialize as:</p>

<pre>linear-gradient(red, yellow, black 100px)</pre>
	</div>


<h2 class="heading settled" data-level=8 id=changes><span class=secno>8 </span><span class=content>
Changes since Images 3</span><a class=self-link href=#changes></a></h2>

	<ul>
		<li>added <span class=css>x</span> unit (or rather, put in an issue about adding it as a general alias for <span class=css>dppx</span>)
		<li>restored the ltr/rtl keywords in image(), but in a different place
		<li>added <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a>
		<li>re-added <a class=css data-link-type=maybe href=http://dev.w3.org/csswg/css-gcpm-3/#funcdef-element title=element()>element()</a>
		<li>re-added <a class=css data-link-type=maybe href=#funcdef-cross-fade title=cross-fade()>cross-fade()</a>
			<ul>
	    		<li>changed the syntax a bit to allow interesting things
	    	</ul>
		<li>added issue for focus-moving to <a class=css data-link-type=maybe href=#funcdef-radial-gradient title=radial-gradient()>radial-gradient()</a>
		<li>added <span class=css>conic-gradient()</span>
		<li>added two-position syntax for color-stops
		<li>allowed the color to be omitted from color-stops
		<li>loosened the syntax for color-stops to allow color/length in either order
		<li>added <span class=css>image-orientation:from-image</span>
		<li>re-added <a class=property data-link-type=propdesc href=#propdef-image-rendering title=image-rendering>image-rendering</a>
		<li>added interpolation section
		<li>added serialization section
	</ul>

<h2 class="no-ref no-num heading settled" id=conformance><span class=content>
Conformance</span><a class=self-link href=#conformance></a></h2>

<h3 class="no-ref heading settled" id=conventions><span class=content>
Document conventions</span><a class=self-link href=#conventions></a></h3>

    <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification.

    <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-biblio-type=normative data-link-type=biblio href=#biblio-rfc2119 title=RFC2119>[RFC2119]</a></p>

    <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this:

    <div class=example>
        <p>This is an example of an informative example.</p>
    </div>

    <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

    <p class=note>Note, this is an informative note.</p>

    <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code>&lt;strong class="advisement"&gt;</code>, like
    this:

    <strong class=advisement>
        UAs MUST provide an accessible alternative.
    </strong>

<h3 class="no-ref heading settled" id=conformance-classes><span class=content>
Conformance classes</span><a class=self-link href=#conformance-classes></a></h3>

    <p>Conformance to this specification
    is defined for three conformance classes:
    <dl>
        <dt>style sheet
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#style-sheet>CSS
            style sheet</a>.
        <dt>renderer
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that interprets the semantics of a style sheet and renders
            documents that use them.
        <dt>authoring tool
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that writes a style sheet.
    </dl>

    <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module.

    <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.)

    <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module.

<h3 class="no-ref heading settled" id=partial><span class=content>
Partial implementations</span><a class=self-link href=#partial></a></h3>

    <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong>
    treat as invalid (and <a href=http://www.w3.org/TR/CSS21/conform.html#ignore>ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>

<h3 class="no-ref heading settled" id=experimental><span class=content>
Experimental implementations</span><a class=self-link href=#experimental></a></h3>

    <p>To avoid clashes with future CSS features, the CSS2.1 specification
    reserves a <a href=http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords>prefixed
    syntax</a> for proprietary and experimental extensions to CSS.

    <p>Prior to a specification reaching the Candidate Recommendation stage
    in the W3C process, all implementations of a CSS feature are considered
    experimental. The CSS Working Group recommends that implementations
    use a vendor-prefixed syntax for such features, including those in
    W3C Working Drafts. This avoids incompatibilities with future changes
    in the draft.
    </p>

<h3 class="no-ref heading settled" id=testing><span class=content>
Non-experimental implementations</span><a class=self-link href=#testing></a></h3>

    <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec.

    <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group.

    <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at
    <a href=http://www.w3.org/Style/CSS/Test/>http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the
    <a href=http://lists.w3.org/Archives/Public/public-css-testsuite>public-css-testsuite@w3.org</a>
    mailing list.

<h2 class="no-num no-ref heading settled" id=references><span class=content>
References</span><a class=self-link href=#references></a></h2>

<h3 class="no-num no-ref heading settled" id=normative><span class=content>
Normative References</span><a class=self-link href=#normative></a></h3>
<div data-fill-with=normative-references><dl><dt id=biblio-css21 title=CSS21><a class=self-link href=#biblio-css21></a>[CSS21]<dd>Bert Bos; et al. <a href=http://www.w3.org/TR/2011/REC-CSS2-20110607>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>7 June 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-CSS2-20110607>http://www.w3.org/TR/2011/REC-CSS2-20110607</a><dt id=biblio-css3val title=CSS3VAL><a class=self-link href=#biblio-css3val></a>[CSS3VAL]<dd>Håkon Wium Lie; Tab Atkins; Elika J. Etemad. <a href=http://www.w3.org/TR/2013/CR-css3-values-20130730/>CSS Values and Units Module Level 3</a>30 July 2013. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2013/CR-css3-values-20130730/>http://www.w3.org/TR/2013/CR-css3-values-20130730/</a><dt id=biblio-media-frags title=media-frags><a class=self-link href=#biblio-media-frags></a>[media-frags]<dd>Raphaël Troncy; et al. <a href=http://www.w3.org/TR/media-frags/>Media Fragments URI 1.0 (basic)</a>REC. URL: <a href=http://www.w3.org/TR/media-frags/>http://www.w3.org/TR/media-frags/</a><dt id=biblio-rfc2119 title=rfc2119><a class=self-link href=#biblio-rfc2119></a>[rfc2119]<dd>S. Bradner. <a href=http://www.ietf.org/rfc/rfc2119.txt>Key words for use in RFCs to Indicate Requirement Levels</a>Best Current Practice. URL: <a href=http://www.ietf.org/rfc/rfc2119.txt>http://www.ietf.org/rfc/rfc2119.txt</a></dl></div>

<h3 class="no-num no-ref heading settled" id=informative><span class=content>
Informative References</span><a class=self-link href=#informative></a></h3>
<div data-fill-with=informative-references><dl><dt id=biblio-css3bg title=CSS3BG><a class=self-link href=#biblio-css3bg></a>[CSS3BG]<dd>Bert Bos; Elika J. Etemad; Brad Kemper. <a href=http://www.w3.org/TR/2012/CR-css3-background-20120724/>CSS Backgrounds and Borders Module Level 3</a>24 July 2012. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/CR-css3-background-20120724/>http://www.w3.org/TR/2012/CR-css3-background-20120724/</a><dt id=biblio-css3page title=CSS3PAGE><a class=self-link href=#biblio-css3page></a>[CSS3PAGE]<dd>Melinda Grant; et al. <a href=http://www.w3.org/TR/2013/WD-css3-page-20130314/>CSS Paged Media Module Level 3</a>14 March 2013. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2013/WD-css3-page-20130314/>http://www.w3.org/TR/2013/WD-css3-page-20130314/</a><dt id=biblio-porterduff title=PORTERDUFF><a class=self-link href=#biblio-porterduff></a>[PORTERDUFF]<dd>Thomas Porter; Tom Duff. Compositing digital images. July 1984. ISSN 0097-8930 <dt id=biblio-smil10 title=SMIL10><a class=self-link href=#biblio-smil10></a>[SMIL10]<dd>Philipp Hoschka. <a href=http://www.w3.org/TR/smil/>Synchronized Multimedia Integration Language (SMIL) 1.0 Specification</a>REC. URL: <a href=http://www.w3.org/TR/smil/>http://www.w3.org/TR/smil/</a><dt id=biblio-svg11 title=SVG11><a class=self-link href=#biblio-svg11></a>[SVG11]<dd>Erik Dahlström; et al. <a href=http://www.w3.org/TR/SVG11/>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</a>REC. URL: <a href=http://www.w3.org/TR/SVG11/>http://www.w3.org/TR/SVG11/</a><dt id=biblio-css3-2d-transforms title=css3-2d-transforms><a class=self-link href=#biblio-css3-2d-transforms></a>[css3-2d-transforms]<dd>Simon Fraser; et al. <a href=http://www.w3.org/TR/css3-2d-transforms/>CSS 2D Transforms</a>WD. URL: <a href=http://www.w3.org/TR/css3-2d-transforms/>http://www.w3.org/TR/css3-2d-transforms/</a><dt id=biblio-cssom title=cssom><a class=self-link href=#biblio-cssom></a>[cssom]<dd>Simon Pieters; Glenn Adams. <a href=http://www.w3.org/TR/cssom/>CSS Object Model (CSSOM)</a>WD. URL: <a href=http://www.w3.org/TR/cssom/>http://www.w3.org/TR/cssom/</a></dl></div>

<h2 class="no-num no-ref heading settled" id=index><span class=content>
Index</span><a class=self-link href=#index></a></h2>
<div data-fill-with=index><ul class=indexlist><li>&lt;angle&gt;, <a href=#valdef-image-orientation-angle title="section 5.2">5.2</a><li>&lt;angle&gt;? flip, <a href=#valdef-image-orientation-angle-flip title="section 5.2">5.2</a><li>auto, <a href=#valdef-image-rendering-auto title="section 5.3">5.3</a><li>&lt;cf-final-image&gt;, <a href=#typedef-cf-final-image title="section 2.4">2.4</a><li>&lt;cf-mixing-image&gt;, <a href=#typedef-cf-mixing-image title="section 2.4">2.4</a><li>closest-corner, <a href=#valdef-size-closest-corner title="section 3.2.1">3.2.1</a><li>closest-side, <a href=#valdef-size-closest-side title="section 3.2.1">3.2.1</a><li>color stop, <a href=#color-stop title="section 3.4">3.4</a><li>&lt;color-stop&gt;, <a href=#typedef-color-stop title="section 3.4">3.4</a><li>&lt;color-stop-list&gt;, <a href=#typedef-color-stop-list title="section 3.4">3.4</a><li>color stop list, <a href=#color-stop-list title="section 3.4">3.4</a><li>concrete object size, <a href=#concrete-object-size title="section 4.1">4.1</a><li>constraint rectangle, <a href=#constraint-rectangle title="section 4.3.2">4.3.2</a><li>contain, <a href=#valdef-object-fit-contain title="section 4.5">4.5</a><li>contain constraint, <a href=#contain-constraint title="section 4.3.2">4.3.2</a><li>cover, <a href=#valdef-object-fit-cover title="section 4.5">4.5</a><li>cover constraint, <a href=#cover-constraint title="section 4.3.2">4.3.2</a><li>crisp-edges, <a href=#valdef-image-rendering-crisp-edges title="section 5.3">5.3</a><li>cross-fade(), <a href=#funcdef-cross-fade title="section 2.4">2.4</a><li>default object size, <a href=#default-object-size title="section 4.1">4.1</a><li>default sizing algorithm, <a href=#default-sizing-algorithm title="section 4.3.1">4.3.1</a><li>ending point, <a href=#ending-point title="section 3">3</a><li>&lt;ending-shape&gt;, <a href=#valdef-radial-gradient-repeating-radial-gradient-ending-shape title="section 3.2.1">3.2.1</a><li>ending shape, <a href=#ending-shape title="section 3.2">3.2</a><li>&lt;extent-keyword&gt;, <a href=#typedef-extent-keyword title="section 3.2.1">3.2.1</a><li>farthest-corner, <a href=#valdef-size-farthest-corner title="section 3.2.1">3.2.1</a><li>farthest-side, <a href=#valdef-size-farthest-side title="section 3.2.1">3.2.1</a><li>fill, <a href=#valdef-object-fit-fill title="section 4.5">4.5</a><li>from-image<ul><li>value for image-resolution, <a href=#valdef-image-resolution-from-image title="section 5.1">5.1</a><li>value for image-orientation, <a href=#valdef-image-orientation-from-image title="section 5.2">5.2</a></ul><li>&lt;gradient&gt;, <a href=#typedef-gradient title="section 3">3</a><li>gradient-average-color, <a href=#gradient-average-color title="section 3.3">3.3</a><li>gradient box, <a href=#gradient-box title="section 3">3</a><li>gradient center, <a href=#gradient-center title="section 3.2.1">3.2.1</a><li>gradient line, <a href=#gradient-line title="section 3">3</a><li>image(), <a href=#funcdef-image title="section 2.2">2.2</a><li>&lt;image&gt;, <a href=#typedef-image title="section 2">2</a><li>image-orientation, <a href=#propdef-image-orientation title="section 5.2">5.2</a><li>image-rendering, <a href=#propdef-image-rendering title="section 5.3">5.3</a><li>image-resolution, <a href=#propdef-image-resolution title="section 5.1">5.1</a><li>image resolution, <a href=#image-resolution title="section 5.1">5.1</a><li>image-set(), <a href=#funcdef-image-set title="section 2.3">2.3</a><li>&lt;image-set-option&gt;, <a href=#typedef-image-set-option title="section 2.3">2.3</a><li>intrinsic aspect ratio, <a href=#intrinsic-aspect-ratio title="section 4.1">4.1</a><li>intrinsic dimensions, <a href=#intrinsic-dimensions title="section 4.1">4.1</a><li>intrinsic height, <a href=#intrinsic-height title="section 4.1">4.1</a><li>intrinsic resolution, <a href=#intrinsic-resolution title="section 5.1">5.1</a><li>intrinsic width, <a href=#intrinsic-width title="section 4.1">4.1</a><li>invalid image, <a href=#invalid-image title="section 2">2</a><li>&lt;length&gt;, <a href=#valdef-size-length title="section 3.2.1">3.2.1</a><li>[ &lt;length&gt; | &lt;percentage&gt; ]{2}, <a href=#valdef-size--length title="section 3.2.1">3.2.1</a><li>linear-gradient(), <a href=#funcdef-linear-gradient title="section 3.1.1">3.1.1</a><li>none, <a href=#valdef-object-fit-none title="section 4.5">4.5</a><li>object-fit, <a href=#propdef-object-fit title="section 4.5">4.5</a><li>object-position, <a href=#propdef-object-position title="section 4.6">4.6</a><li>objects, <a href=#objects title="section 4">4</a><li>object size negotiation, <a href=#object-size-negotiation title="section 4.2">4.2</a><li>pixelated, <a href=#valdef-image-rendering-pixelated title="section 5.3">5.3</a><li>&lt;position&gt;, <a href=#valdef-radial-gradient-repeating-radial-gradient-position title="section 3.2.1">3.2.1</a><li>radial-gradient(), <a href=#funcdef-radial-gradient title="section 3.2.1">3.2.1</a><li>repeating-linear-gradient(), <a href=#funcdef-repeating-linear-gradient title="section 3.3">3.3</a><li>repeating-radial-gradient(), <a href=#funcdef-repeating-radial-gradient title="section 3.3">3.3</a><li>&lt;resolution&gt;, <a href=#valdef-image-resolution-resolution title="section 5.1">5.1</a><li>scale-down, <a href=#valdef-object-fit-scale-down title="section 4.5">4.5</a><li>&lt;side-or-corner&gt;, <a href=#typedef-side-or-corner title="section 3.1.1">3.1.1</a><li>&lt;size&gt;<ul><li>value for radial-gradient(), repeating-radial-gradient(), <a href=#valdef-radial-gradient-repeating-radial-gradient-size title="section 3.2.1">3.2.1</a><li>type for , <a href=#typedef-size title="section 3.2.1">3.2.1</a></ul><li>snap, <a href=#valdef-image-resolution-snap title="section 5.1">5.1</a><li>specified size, <a href=#specified-size title="section 4.1">4.1</a><li>starting point, <a href=#starting-point title="section 3">3</a></ul></div>

<h2 class="no-num no-ref heading settled" id=property-index><span class=content>
Property index</span><a class=self-link href=#property-index></a></h2>
<div data-fill-with=property-index><table class="proptable data"><thead><tr><th scope=col>Name<th scope=col>Value<th scope=col>Initial<th scope=col>Applies to<th scope=col>Inh.<th scope=col>%ages<th scope=col>Media<th scope=col>Animatable<th scope=col>Canonical order<th scope=col>Computed value<tbody><tr><th scope=row><a class=css data-link-type=property href=#propdef-object-fit title=object-fit>object-fit</a><td>fill | contain | cover | none | scale-down<td>fill<td>replaced elements<td>no<td>n/a<td>visual<td>no<td><td>specified value<tr><th scope=row><a class=css data-link-type=property href=#propdef-object-position title=object-position>object-position</a><td>&lt;position&gt;<td>50% 50%<td>replaced elements<td>no<td>refer to width and height of element itself<td>visual<td>yes<td>the horizontal component of the &lt;position&gt;, followed by the vertical component<td>specified value<tr><th scope=row><a class=css data-link-type=property href=#propdef-image-resolution title=image-resolution>image-resolution</a><td>[ from-image || &lt;resolution&gt; ] &amp;&amp; snap?<td>1dppx<td>all elements<td>yes<td><td>visual<td>no<td><td>as specified, except with &lt;resolution&gt; possibly altered by computed for snap (see below)<tr><th scope=row><a class=css data-link-type=property href=#propdef-image-orientation title=image-orientation>image-orientation</a><td>from-image | &lt;angle&gt; | [ &lt;angle&gt;? flip ]<td>0deg<td>all elements<td>yes<td><td>visual<td>no<td><td>an &lt;angle&gt;, rounded and normalized (see text), plus optionally a flip keyword<tr><th scope=row><a class=css data-link-type=property href=#propdef-image-rendering title=image-rendering>image-rendering</a><td>auto | crisp-edges | pixelated<td>auto<td>all elements<td>yes<td><td>visual<td>no<td><td>specified value</table></div>


<h2 class="no-num heading settled" id=issues-index><span class=content>Issues Index</span><a class=self-link href=#issues-index></a></h2><div style="counter-reset: issue"><div class=issue>This solution assumes that resolution is a proxy for filesize,
	and therefore doesn’t appropriately handle multi-resolution sets of vector images,
	or mixing vector images with raster ones (e.g. for icons).
	For example, use a vector for high-res,
	pixel-optimized bitmap for low-res,
	and same vector again for low-bandwidth (because it’s much smaller, even though it’s higher resolution).<a href=#issue-34671d1c> ↵ </a></div><div class=issue>Is this restriction needed?<a href=#issue-92756fb8> ↵ </a></div><div class=issue>
		We should add the ability to move the focus of the gradient,
		as in the original -webkit-gradient() function.
		See proposal in <a href=http://lists.w3.org/Archives/Public/www-style/2011Nov/0210.html>http://lists.w3.org/Archives/Public/www-style/2011Nov/0210.html</a>
		for "from <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-backgrounds-3/#position title="<position>">&lt;position&gt;</a>" and "from offset <a class="production css" data-link-type=type title="<offset>">&lt;offset&gt;</a>".

<a href=#issue-403592eb> ↵ </a></div><div class=issue>
		This requires us to wait until <em>after</em> layout to do fix-up,
		because implied-position stops (set by step 3)
		may depend on stops that need layout information to place,
		and which may be corrected by step 2.
		Swapping steps 2 and 3 would let us interpolate <a data-link-type=dfn href=#color-stop title="color stops">color stops</a> purely at computed-value time,
		which is a nice plus,
		at the cost of changing behavior from level 3 for some edge cases that triggered fixup.
		Make sure this is handled well in the serialization rules.

<a href=#issue-ffe26cbe> ↵ </a></div><div class=issue>
		The <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> notation can alter the intrinsic resolution of an image,
		which ideally would be automatically honored without having to set this property.
		How should we best address this?
		Change the initial value to <a class=css data-link-type=maybe href=#valdef-image-rendering-auto title=auto>auto</a>, meaning "1dppx, unless CSS says otherwise"?
		Say that image-resolution has no effect on images whose resolution was set by something else in CSS?
		Or somehow wordsmithing <a class=css data-link-type=maybe href=#funcdef-image-set title=image-set()>image-set()</a> in some way such that it always produces <span class=css>1dppx</span> images somehow?

<a href=#issue-21efe18d> ↵ </a></div><div class=issue>This property is likely going to be deprecated and its functionality moved to HTML.
	At minimum, it will likely lose all but its initial value and <a class=css data-link-for=image-orientation data-link-type=maybe href=#valdef-image-orientation-from-image title=from-image>from-image</a>.<a href=#issue-8d35d0df> ↵ </a></div><div class=issue>
		Should we move the current <a class=css data-link-type=maybe href=#valdef-image-rendering-auto title=auto>auto</a> behavior to a well-named keyword (<span class=css>smooth</span>?)
		and just define <a class=css data-link-type=maybe href=#valdef-image-rendering-auto title=auto>auto</a> to be "whatever the UA wants",
		which is what <a class=css data-link-type=maybe href=#valdef-image-rendering-auto title=auto>auto</a> usually means?

<a href=#issue-c0a2c82d> ↵ </a></div><div class=issue>
		Special-case interpolating to/from no image,
		like "background-image: url(foo);" to "background-image: none;".


<a href=#issue-804aa4d4> ↵ </a></div><div class=issue>
		This section needs review and improvement.
		In particular, I believe the handling of linear-gradient() is incomplete -
		I think we want to specifically interpolate the "length" of the gradient line
		(the distance between 0% and 100%)
		between the starting and ending positions explicitly,
		so it doesn’t grow and then shrink over a single animation.

<a href=#issue-4a9ae5c3> ↵ </a></div></div>
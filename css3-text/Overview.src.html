<!DOCTYPE html public '-//W3C//DTD HTML 4.01//EN'
  'http://www.w3.org/TR/html4/strict.dtd'>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Text Level 3</title>
  <link rel="stylesheet" type="text/css" href="default.css">

  <style type="text/css">
    .data, .proptable {
      margin: 1em auto;
      border-collapse: collapse;
      border: solid #005A9B;
    }
    .data caption {
      width: 100%;
      text-align: center;
    }
    .data td, .data th,
    .proptable td, .proptable th {
      border: thin solid;
      padding: 0.2em;
      text-align: center;
    }
    .data thead th[scope="row"],
    .proptable thead th[scope="row"] {
      text-align: right;
      background: #A4C8E2;
      color: inherit;
    }
    .data thead,
    .proptable thead {
      background: #EEEEEE;
      color: inherit;
    }
    .data tbody th:first-child,
    .proptable tbody th:first-child {
      text-align: right;
      background: #EEEEEE;
      color: inherit;
    }
    .data thead,
    .data tbody,
    .data tfoot,
    .data colgroup {
      border: solid;
    }

    table.propdef {
      table-layout: auto;
    }
    .propdef th {
      font-style: italic;
      font-weight: normal;
      text-align: left;
      width: 3em;
    }
    dt dfn code {
      font-size: inherit;
    }

  </style>

  <style type="text/css">
    .egbidiwsaA,.egbidiwsbB,.egbidiwsaB,.egbidiwsbC
      { white-space:pre;font-size:80%;font-family:monospace; vertical-align:2px; margin:1px }
    .egbidiwsaA { background:lime;padding:2px; }
    .egbidiwsbB { border:2px solid blue }
    .egbidiwsaB { background:yellow;border:2px dotted white }
    .egbidiwsbC { border:2px dotted red }

    .char { border: 1px dotted gray; }
    tt[lang="ja"] { font-family: "MS Gothic", "Osaka", monospace }
  </style>

  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-WD.css">
</head>

<body>

<div class="head">

<p><a href="http://www.w3.org/"><img height="48" width="72" alt="W3C" src="http://www.w3.org/Icons/w3c_home"></a></p>

<h1>CSS Text Level 3</h1>

<!--
<h2 class="no-num no-toc">Editor's Draft $Date$</h2>
-->
<h2 class="no-num no-toc">W3C Working Draft 5 October 2010</h2>

<dl>
  <dt>This version:</dt>
    <!-- <dd><a href="http://dev.w3.org/csswg/css3-text/Overview.html">$Date$ (CVS $Revision$)</a> -->
    <dd><a
      href="http://www.w3.org/TR/2010/WD-css3-text-20101005/">http://www.w3.org/TR/2010/WD-css3-text-20101005/</a></dd>
  <dt>Latest version:</dt>
    <dd><a
      href="http://www.w3.org/TR/css3-text/">http://www.w3.org/TR/css3-text/</a></dd>
  <dt>Previous version:</dt>
    <dd><a
      href="http://www.w3.org/TR/2007/WD-css3-text-20070306/">http://www.w3.org/TR/2007/WD-css3-text-20070306/</a></dd>
  <dt>Editors:</dt>
    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a> (Invited Expert)</dd>
    <dd><a href="mailto:kojiishi@gluesoft.co.jp">Koji Ishii</a> (Antenna House)</dd>
    <dd><a href="mailto:murakami@antenna.co.jp">Shinyu Murakami</a> (Antenna House)</dd>
</dl>

   <p class="copyright"><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
    Copyright</a> &copy; 2007 <a href="http://www.w3.org/"><abbr title="World
    Wide Web Consortium">W3C</abbr></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of
    Technology">MIT</abbr></a>, <a href="http://www.ercim.org/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>This CSS3 module defines properties for text manipulation and
    specifies their processing model. It covers line breaking, justification
    and alignment, white space handling, text decoration and text
    transformation.</p>

<h2 class="no-num no-toc" id="status">Status of This Document</h2>

  <p><em>This section describes the status of this document at the time of
   its publication. Other documents may supersede this document. A list of
   current W3C publications and the latest revision of this technical report
   can be found in the <a href="http://www.w3.org/TR/">W3C technical reports
   index at http://www.w3.org/TR/.</a></em>

  <p>Publication as a Working Draft does not imply endorsement by the W3C
   Membership. This is a draft document and may be updated, replaced or
   obsoleted by other documents at any time. It is inappropriate to cite this
   document as other than work in progress.

  <p>This CSS module has been produced as a combined effort of the <a
    href="http://www.w3.org/International/Activity">W3C Internationalization Activity</a>,
    and the <a href="http://www.w3.org/Style/Activity">Style Activity</a> and is maintained
    by the <a href="http://www.w3.org/Style/CSS/members">CSS Working Group</a>. It also
    includes contributions made by participants in the <a
    href="http://www.w3.org/Style/XSL/Group/">XSL Working Group</a> (<a
    href="http://cgi.w3.org/MemberAccess/AccessRequest">members
    only</a>).

  <p>This document was produced by a group operating under the <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February
   2004 W3C Patent Policy</a>. W3C maintains a <a
   href="http://www.w3.org/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
   6 of the W3C Patent Policy</a>.</p>

  <p>This Text module and a separate (upcoming) Writing Modes module
    replace and obsolete the <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/">May
    2003 CSS3 Text Module Candidate Recommendation</a>. Since this is a
    thorough overhaul of the previous CR, a <a href="#changes">list
    of changes</a> has been provided.</p>

  <p><strong>Feedback on this draft should be posted to the
    (<a href="http://lists.w3.org/Archives/Public/www-style/">archived</a>)
    public mailing list <a href="mailto:www-style@w3.org">www-style@w3.org</a></strong>
    (see <a href="http://www.w3.org/Mail/Request">instructions</a>) <strong>with
    <kbd>[css3-text]</kbd> in the subject line.</strong>
    You are strongly encouraged to complain if you see something stupid
    in this draft. The editors will do their best to respond to all feedback.</p>

  <p><strong>If you have implemented properties from the
    <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/">May 2003
    CSS3 Text CR</a></strong>
    <em>please</em> let us know so we can take that into account as
    we redraft the spec. You can post to
    <a href="http://lists.w3.org/Archives/Public/www-style/">www-style</a> (public),
    post to the <a href="http://lists.w3.org/Archives/Member/w3c-css-wg/">CSS WG mailing list</a>
    (<a href="http://cgi.w3.org/MemberAccess/AccessRequest">Member-restricted</a>),
    or <a href="http://fantasai.inkedblade.net/contact">email fantasai directly</a> (personal).</p>

  <p>The following features are at risk and may be cut from the spec during
    its CR period: the 'text-outline' property, the ''unrestricted'' value
    of 'text-wrap'</p>

<h2 class="no-num no-toc" id="contents">Table of Contents</h2>

<!--toc-->

<h2 id="intro">
  Introduction</h2>

<p>[document here]</p>

<h2 id="conformance">
  Conformance</h2>

  <p>Conformance requirements are expressed with a combination of
  descriptive assertions and RFC 2119 terminology. The key words “MUST”,
  “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
  “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
  document are to be interpreted as described in RFC 2119.
  However, for readability, these words do not appear in all uppercase
  letters in this specification. All of the text of this specification is
  normative except sections explicitly marked as non-normative, examples,
  and notes. [[!RFC2119]]</p>

  <p>Examples in this specification are introduced with the words “for example”
  or are set apart from the normative text with <code>class="example"</code>,
  like this:

  <div class="example">
    <p>This is an example of an informative example.</p>
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from the
  normative text with <code>class="note"</code>, like this:

  <p class="note">Note, this is an informative note.</p>

  <p>Conformance to CSS Text Level 3 is defined for three classes:</p>

  <dl>
    <dt><dfn title="style sheet!!as conformance class">style sheet</dfn>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
      style sheet</a>.
    <dt><dfn>renderer</dfn></dt>
      <dd>A UA that interprets the semantics of a style sheet and renders
      <span>documents</span> that use them.
    <dt><dfn id="authoring-tool">authoring tool</dfn></dt>
      <dd>A UA that writes a style sheet.
  </dl>

  <p>A style sheet is conformant to CSS Text Level 3
  if all of its declarations that use properties defined in this module
  have values that are valid according to the generic CSS grammar and the
  individual grammars of each property as given in this module.

  <p>A renderer is conformant to CSS Text Level 3
  if, in addition to interpreting the style sheet as defined by the
  appropriate specifications, it supports all the properties defined
  by CSS Text Level 3 by parsing them correctly
  and rendering the document accordingly. However the inability of a
  UA to correctly render a document due to limitations of the device
  does not make the UA non-conformant. (For example, a UA is not
  required to render color on a monochrome monitor.)

  <p>An authoring tool is conformant to CSS Text
  Level 3 if it writes syntactically correct style sheets, according
  to the generic CSS grammar and the individual grammars of each
  property in this module.</p>

  <h3 id="partial-impl">
    Partial and Experimental Implementations</h3>

  <p>UAs must treat as invalid any properties or values they do not support.
    Experimental implementations of a feature should support only a
    vendor-prefixed syntax for the property/value.</p>

<h2 id="transforming">
  Transforming Text</h2>

  <h3 id="text-transform">
    <a name="caps-prop"></a>
    Transforming Text: the 'text-transform' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-transform</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | capitalize | uppercase | lowercase | fullwidth | large-kana
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
      </tbody>
    </table>

    <p>This property transforms text for the styling purpose.
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="text-transform:none"><code>none</code></dfn></dt>
        <dd>No effects.</dd>
      <dt><dfn title="text-transform:capitalize"><code>capitalize</code></dfn></dt>
        <dd>Puts all words in titlecase.</dd>
      <dt><dfn title="text-transform:uppercase"><code>uppercase</code></dfn></dt>
        <dd>Puts all characters in uppercase.</dd>
      <dt><dfn title="text-transform:lowercase"><code>lowercase</code></dfn></dt>
        <dd>Puts all characters in lowercase.</dd>
      <dt><dfn title="text-transform:fullwidth"><code>fullwidth</code></dfn></dt>
        <dd>Puts all characters in fullwidth form.
          If the character does not have corresponding fullwidth form,
          it is left as is.
          This value is typically used to typeset Latin characters and digits
          like ideographic characters.
          <p class="issue">should try fallback if the glyph is missing.
            should it also check fullwidth variants before falling back to next font?</p></dd>
      <dt><dfn title="text-transform:large-kana"><code>large-kana</code></dfn></dt>
        <dd>Converts all small Kana characters to normal Kana.
          This value is typically used for ruby annotation text,
          where all small Kana should be drawn as large Kana.
          <p class="issue">need to work on interoperability with OpenType and CSS3 Fonts font-variant:ruby</p></dd>
    </dl>

    <p>Although limited, the case mapping process has some language dependencies.
      Some well known examples are Turkish and Greek. If the content language
      is known then any such language-specific rules must be used.</p>

    <p>The case mapping rules for the character repertoire specified by the
      Unicode Standard can be found on the Unicode Consortium Web site.
      [[!UNICODE]] Only characters belonging to bicameral scripts are
      affected.</p>

    <p>The definition of fullwidth and halfwidth forms can be found on the
      Unicode consortium web site at [[!UAX11]].</p>

    <div class="example">
      <p>The following example converts the ASCII characters in abbreviations
        in Japanese to their fullwidth variants so that they lay out and line
        break like ideographs:
      <pre>abbr:lang(ja) { text-transform: fullwidth; }</pre>
    </div>

<h2 id="white-space-processing">
  White Space Processing</h2>

  <p>The source text of a document often contains formatting that
    is not relevant to the final rendering: for example, breaking
    the source into segments (lines) for ease of editing or adding
    white space characters such as tabs and spaces to indent the
    source code. CSS white space processing allows the author to
    control interpretation of such formatting: to preserve or
    collapse it away when rendering the document.

  <p>Segments in the document source can be separated by a carriage
    return (U+000D), a linefeed (U+000A) or both (U+000D U+000A),
    or by some other mechanism that identifies the beginning
    and end of document segments, such as the SGML RECORD-START
    and RECORD-END tokens.
    If no segmentation rules are specified for the document language,
    each line feed (U+000A), carriage return (U+000D) and CRLF sequence
    (U+000D U+000A) in the text is considered a segment break. (This
    default rule also applies to generated content.)
    In CSS, each such segment break is treated as a single line feed
    character (U+000A).

  <p>White space processing in CSS interprets white space characters
    for rendering: it has no effect on the underlying document data.
    In the context of CSS, the document white space set is defined
    to be any space characters (Unicode value U+0020), tab characters
    (U+0009), and line feeds (U+000A).

  <p class="note">Note that the document parser may have not only normalized
    segment breaks, but also collapsed other space characters or
    otherwise processed white space according to markup rules. Because CSS
    processing occurs <em>after</em> the parsing stage, it is not possible
    to restore these characters for styling. Therefore, some of the
    behavior specified below can be affected by these limitations and
    may be user agent dependent.</p>

  <p>Control characters other than U+0009 (tab), U+000A (line feed),
    U+0020 (space), and U+202x (bidi formatting characters) are treated
    as characters to render in the same way as any normal character.
    <span class="issue">Copied from CSS2.1 but this has got to be wrong.</span>

  <h3 id="white-space-collapsing">
    White Space Collapsing: the 'white-space-collapsing' property</h3>

    <p class="issue">This section is still under discussion and may change in future drafts.</p>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>white-space-collapsing</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>collapse | discard | [ [preserve | preserve-breaks] && trim-inner ]</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>collapse</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p class="issue">Rename to white-space-trim or white-space-adjust? white-space-collapsing has an 'ing' and is confusing with XSL</p>

    <p>This property declares whether and how
      <a href="#white-space-processing">white space</a> inside the element is
      collapsed. Values have the following meanings, which must be interpreted
      according to the <a href="#white-space-rules">white space processing
      rules</a>:</p>

    <dl>
      <dt><dfn title="white-space-collapsing:collapse"><code>collapse</code></dfn></dt>
      <dd>This value directs user agents to collapse sequences of white space
        into a single character (or <a href="#line-break-transform">in some
        cases</a>, no character).</dd>
      <dt><dfn title="white-space-collapsing:preserve"><code>preserve</code></dfn></dt>
      <dd>This value prevents user agents from collapsing sequences
      of white space. Segment breaks are preserved as forced line breaks.</dd>
      <dt><dfn title="white-space-collapsing:preserve-breaks"><code>preserve-breaks</code></dfn></dt>
      <dd>This value collapses white space as for ''collapse'', but preserves
        segment breaks as forced line breaks.</dd>
      <dt><dfn title="white-space-collapsing:discard"><code>discard</code></dfn></dt>
      <dd>This value directs user agents to "discard" all white space in the
        element.
      <dt><dfn title="white-space-collapsing:trim-inner"><code>trim-inner</code></dfn></dt>
      <dd>This value directs UAs to discard all whitespace at the beginning of
        a block up to and including the last line break before the first
        non-white-space character in the block as well as to discard all white
        space at the end of a block starting with the first line break after
        the last non-white-space character in the block.</dd>
    </dl>

  <h3 id="white-space-rules">
    The White Space Processing Rules</h3>

    <p>For each inline (including anonymous inlines), white space
      characters are handled as follows, ignoring bidi formatting
      characters as if they were not there:</p>

    <ul>
    <li id="collapse"><p>If <span class="property">'white-space-collapsing'</span>
      is set to 'collapse' or 'preserve-breaks', white space characters
      are considered <dfn>collapsible</dfn> and are processed by
      performing the following steps:</p>
      <ol>
        <li>All spaces and tabs immediately following a line feed character
          are removed. (This has the effect of discarding all white space
          at the start of a line but preserving a trailing space if one
          exists at the end.)</li>
        <li>If <span class="property">'white-space-collapsing'</span> is not
          'preserve-breaks', line feed characters are transformed for
          rendering according to the <a href="#line-break-transform">line
          break transformation rules</a>.
        </li>
        <li>Every tab (U+0009) is converted to a space (U+0020)</li>
        <li>Any space (U+0020) following another collapsible space
          (U+0020)&mdash;even a space before the inline&mdash;is removed.
          However, if removing this space would eliminate a line breaking
          opportunity in the text, that opportunity is still considered
          to exist.</li>
      </ol>
    </li>
    <li><p>If <span class="property">'white-space-collapsing'</span> is set to
      'preserve', any sequence of spaces (U+0020) unbroken by an element
      boundary is treated as a sequence of non-breaking spaces. However,
      a line breaking opportunity exists at the end of the sequence.</p></li>
    <li><p>If <span class="property">'white-space-collapsing'</span> is set to
      'discard', the first white space character in every white space
      sequence is converted to a zero width non-joiner (U+200C) and
      the rest of the sequence is removed.</p>
    </ul>

    <p>Then, the entire block is rendered. Inlines are laid out, taking bidi
      reordering into account, and wrapping as specified by the
      <span class="property">'text-wrap'</span> property.</p>

    <p>As each line is laid out,</p>
    <ol>
      <li>A sequence of collapsible spaces (U+0020) at the beginning of a
        line is removed.</li>
      <li>Each tab (U+0009) is rendered as a horizontal shift that lines up
        the start edge of the next glyph with the next tab stop.
        Tab stops occur at points that are multiples of 8 times the width
        of a space (U+0020) rendered in the block's font from the block's
        starting content edge.</li>
      <li>A sequence of collapsible spaces (U+0020) at the end of a line
        is removed.</li>
      <li>If spaces (U+0020) or tabs (U+0009) at the end of a line are
        non-collapsible but have 'text-wrap' set to 'normal' or 'suppress'
        the UA may visually collapse them.
    </ol>

    <div class="example">
    <h4 id="egbidiwscollapse">
      Example of bidirectionality with white space collapsing</h4>

      <p>Consider the following markup fragment, taking special note of spaces
        (with varied backgrounds and borders for emphasis and identification):
        </p>
      <pre><code>&lt;ltr&gt;A<span class="egbidiwsaA">&#160;</span>&lt;rtl&gt;<span class="egbidiwsbB">&#160;</span>B<span class="egbidiwsaB">&#160;</span>&lt;/rtl&gt;<span class="egbidiwsbC">&#160;</span>C&lt;/ltr&gt;</code></pre>

      <p>where the <code>&lt;ltr&gt;</code> element represents a left-to-right
        embedding and the <code>&lt;rtl&gt;</code> element represents a
        right-to-left embedding. If the 'white-space-collapsing' property is set
        to 'collapse', the above processing model would result in the
        following:</p>

      <ul style="line-height:1.3">
        <li>The space before the B (<span class="egbidiwsbB">&#160;</span>)
          would collapse with the space after the A (<span
          class="egbidiwsaA">&#160;</span>).</li>
        <li>The space before the C (<span class="egbidiwsbC">&#160;</span>)
          would collapse with the space after the B (<span
          class="egbidiwsaB">&#160;</span>).</li>
      </ul>

      <p>This would leave two spaces, one after the A in the left-to-right
        embedding level, and one after the B in the right-to-left embedding
        level. This is then ordered according to the Unicode bidirectional
        algorithm, with the end result being:</p>

      <pre>A<span class="egbidiwsaA">&#160;</span><span class="egbidiwsaB">&#160;</span>BC</pre>

      <p>Note that there are two spaces between A and B, and none between B
        and C. This is best avoided by putting spaces outside the element
        instead of just inside the opening and closing tags and, where
        practical, by relying on implicit bidirectionality instead of explicit
        embedding levels.</p>
    </div>

    <h4 id="line-break-transform">
      Line Break Transformation Rules</h4>

      <p>When line feeds are <a href="#collapse">collapsible</a>, they are
        either transformed into a space (U+0020) or removed depending on the
        script context before and after the line break.</p>

      <p>The script context is determined by the Unicode-given script value
        [[!UAX24]] of the first character that side of the line feed. However,
        characters such as punctuation that belong to the COMMON and INHERITED
        scripts are ignored in this check; the next character is examined
        instead. The UA must not examine characters outside the block and may
        limit its examination to as few as four characters on each side of the
        line feed. If the check fails to find an acceptable script value
        (i.e. it has hit the check limits), then the script context is neutral.</p>

      <p class="note">Note that the white space processing rules have already
        removed any tabs and spaces after the line feed before these checks
        take place.</p>

      <ul>
        <li>If the character immediately before or immediately after the line
          feed is the zero width space character (U+200B), then the line feed
          is removed.
        <li>Otherwise, if the script context on one side of the line feed is
          Han, Yi, Hiragana, or Katakana and the context on the other side is
          Han, Yi, Hiragana, Katakana, or neutral, then the line feed is removed.
          <p class="issue">IE removes line feed not only between two Hiragana
            but also Hiragana and fullwidth alphabets.
            Firefox, Opera, and Safari does not remove line breaks even between
            two Hiragana.
            Should fullwidth Latin be considered in this rule?</p>
        <li>Otherwise, if ''text-autospace'' property is set to add extra spaces
          for the combination of the character before the line feed and after,
          then the line break is removed.
          <p class="issue">Any feedback on this behavior is appreciated.
            Now that we have text-autospace property, it makes sense to favor it than inserting spaces.
            However, we also want to preserve backward compatibility as much as possible.
            That is the reason why the line feed should be removed only if text-autospace inserts spaces instead.</p></li>
        <li>Otherwise, the line feed is converted to a space (U+0020).
      </ul>

      <p class="issue">Comments on how well this would work in practice would
        be very much appreciated, particularly from people who work with
        Thai and similar scripts.</p>

    <h4 id="white-space-summary">
      Informative Summary of White Space Collapsing Effects</h4>

      <ul>
        <li>Consecutive white space collapses into a single space.
        <li>A sequence of line breaks and other white space between
          two ideographic characters collapses into nothing unless
          there is a space before the first line break in the sequence.
        <li>A zero width space immediately before or anywhere after
          a line break causes the entire sequence of white space
          beginning with the line break to collapse into a zero width
          space.
      </ul>

  <h3 id="white-space">
    White Space and Text Wrapping Shorthand: the 'white-space' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>white-space</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | pre | nowrap | pre-wrap | pre-line</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>not defined for shorthand properties</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>see individual properties</td>
        </tr>
      </tbody>
    </table>

    <p>The 'white-space' property is a shorthand for the
      <a href="#white-space-collapsing">'white-space-collapsing'</a>
      and <a href="#text-wrap">'text-wrap'</a> properties.
      Not all combinations are represented.
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="white-space:normal"><code>normal</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'collapse' and
        'text-wrap' to 'normal'</dd>
      <dt><dfn title="white-space:pre"><code>pre</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'preserve' and
        'text-wrap' to 'none'</dd>
      <dt><dfn title="white-space:nowrap"><code>nowrap</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'collapse' and
        'text-wrap' to 'none'</dd>
      <dt><dfn title="white-space:pre-wrap"><code>pre-wrap</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'preserve' and
        'text-wrap' to 'normal'</dd>
      <dt><dfn title="white-space:pre-line"><code>pre-line</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'preserve-breaks' and
        'text-wrap' to 'normal'</dd>
    </dl>

    <p>The following informative table summarizes the behavior of various
      'white-space' values:</p>

    <table class="data">
      <thead>
        <tr>
          <th></th>
          <th>New Lines</th>
          <th>Spaces and Tabs</th> 
          <th>Text Wrapping</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>normal</th>
          <td>Collapse</td>
          <td>Collapse</td>
          <td>Wrap</td>
        </tr>
        <tr>
          <th>pre</th>
          <td>Preserve</td>
          <td>Preserve</td>
          <td>No wrap</td>
        </tr>
        <tr>
          <th>nowrap</th>
          <td>Collapse</td>
          <td>Collapse</td>
          <td>No wrap</td>
        </tr>
        <tr>
          <th>pre-wrap</th>
          <td>Preserve</td>
          <td>Preserve</td>
          <td>Wrap</td>
        </tr>
        <tr>
          <th>pre-line</th>
          <td>Preserve</td>
          <td>Collapse</td>
          <td>Wrap</td>
      </tbody>
    </table>

<h2 id="line-breaking">
  Line Breaking and Word Boundaries</h2>

  <p>For most scripts, in the absence of hyphenation a line break occurs
    only at word boundaries. Many writing systems use spaces or
    punctuation to explicitly separate words, and line break opportunities
    can be identified by these characters. Scripts such as Thai, Lao, and
    Khmer, however, do not use spaces or punctuation to separate words.
    Although the zero width space (U+200B) can be used as an explicit word
    delimiter in these scripts, this practice is not common. As a result,
    a lexical resource is needed to correctly identify break points in such
    texts.

  <p>In several other writing systems, (including Chinese, Japanese, Yi,
    and sometimes also Korean) a line break opportunities are based on
    syllable boundaries, not words. In these systems a line can break
    anywhere <em>except</em> between certain character combinations.
    Additionally the level of strictness in these restrictions can vary
    with the typesetting style.</p>

  <p>CSS does not fully define where line breaking opportunities occur,
    however some controls are provided to distinguish common variations.

  <p>Floated and absolutely-positioned elements do not introduce a line
    breaking opportunity. The line breaking behavior of a replaced element
    is equivalent to that of a Latin character.</p>

  <p class="issue">There is a question of what the default line breaking
    of Korean should be, and whether dictionary-based breaking is needed
    for typical layout (e.g. novels).</p>

  <p class="issue">It is not clear whether this section handles Southeast Asian
    scripts well. Additionally, some guidance should be provided on how to
    break or not break Southeast Asian in the absence of a dictionary.</p>

  <h3 id="line-break">
    Line Breaking Restrictions for CJK Scripts: the 'line-break' property</h3>

    <p>This property specifies line break opportunities for CJK scripts.</p>

    <p>CSS distinguishes between three levels of strictness in the rules for
      implicit line breaking in CJK text. The precise set of rules in effect
      for the strict and loose levels is up to the UA and should follow
      language conventions. However, this specification does recommend that:</p>

    <ul>
      <li>Following breaks be forbidden in strict line breaking and allowed in normal:
        <ul>
          <li>breaks before Japanese small kana
          <li>breaks before the KATAKANA-HIRAGANA PROLONGED SOUND MARK (U+30FC)
          <li>breaks before the hyphens (U+2010, U+2013, U+301C, U+30A0)
        </ul>
      <li>Following breaks be forbidden in normal and strict line breaking and allowed in newspaper:
        <ul>
          <li>breaks before Japanese iteration marks (U+3005, U+303B, U+309D, U+309E, U+30FD, U+30FE)
          <li>breaks before the middle dots (U+003A, U+003B, U+30FB, U+FF1A, U+FF1B, U+FF65)</li>
          <li>breaks before the dividing punctuation marks (U+0021, U+003F, U+203C, U+2047, U+2048, U+2049, U+FF01, U+FF1F)</li>
          <li>breaks before the inseparatable characters (U+2014, U+2025, U+2026, U+3033, U+3034, U+3035)</li>
          <li>breaks before the iteration marks (U+3005, U+303B, U+309D, U+309E, U+30FD, U+30FE)</li>
          <li>breaks before the postfixes (U+0025, U+00A2, U+00B0, U+2030, U+2032, U+2033, U+2103, U+FF05, U+FFE0)</li>
          <li>breaks after the prefixes (U+0024, U+00A3, U+00A5, U+20AC, U+2116, U+FF04, U+FFE1, U+FFE5)</li>
        </ul>
    </ul>

    <p class="note">Information on line breaking conventions can be found in
      [[JIS4051]] for Japanese,
      [[ZHMARK]] for Chinese, and [?] for Korean, and
      in [[!UAX14]] for all scripts in Unicode.
      <!-- The CSS Working Group notes that although UAX 14 contains a wealth of
      information about line breaking conventions, a literal implementation
      of its algorithm has been found to be inadequate in multiple situations. --></p>

    <p class="issue">Any guidance for appropriate references here would be
      much appreciated.</p>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>line-break</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>auto | newspaper | normal | strict | keep-all</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>auto</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies what set of line breaking restrictions are in
      effect within the element.
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="line-break:auto"><code>auto</code></dfn></dt>
      <dd>The UA determines the set of line-breaking restrictions to use for CJK scripts,
        and it may vary the restrictions based on the length of the line; e.g., 
        use a less restrictive set of line-break rules for short lines.</dd>
      <dt><dfn title="line-break:newspaper"><code>newspaper</code></dfn></dt>
      <dd>Breaks CJK scripts using the least restrictive set of line-breaking
        rules. Typically used for short lines, such as in newspapers.</dd>
      <dt><dfn title="line-break:normal"><code>normal</code></dfn></dt>
      <dd>Breaks CJK scripts using a normal set of line-breaking rules.</dd>
      <dt><dfn title="line-break:strict"><code>strict</code></dfn></dt>
      <dd>Breaks CJK scripts using a more restrictive set of line-breaking
        rules than 'normal'.</dd>
      <dt><dfn title="line-break:keep-all"><code>keep-all</code></dfn></dt>
      <dd>Sequences of CJK characters can no longer break on implied break points.
        This option should only be used where the presence of word separator
        characters still creates line-breaking opportunities, as in Korean.</dd>
    </dl>

  <h3 id="word-break">
    Line Breaking Rules for non-CJK Scripts: the 'word-break' property</h3>

    <p>This property specifies line break opportunities for non-CJK scripts.</p>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>word-break</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | break-all | hyphenate </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <dl>
      <dt><dfn title="word-break:normal"><code>normal</code></dfn></dt>
      <dd>Breaks non-CJK scripts according to their own rules.</dd>
      <dt><dfn title="word-break:break-all"><code>break-all</code></dfn></dt>
      <dd>Lines may break between any two grapheme clusters for non-CJK scripts.
        This option is used mostly in a context where
        the text is predominantly using CJK characters with few non-CJK excerpts
        and it is desired that the text be better distributed on each line.</dd>
      <dt><dfn title="word-break:hyphenate"><code>hyphenate</code></dfn></dt>
      <dd>Words may be broken at an appropriate hyphenation point. This requires
        that the user agent have an hyphenation resource appropriate to the
        language of the text being broken.
        <p class="issue">This value is proposed to replace 'hyphenate' property currently defined in
          <a href="http://www.w3.org/TR/2007/WD-css3-gcpm-20070205/#hyphenation">Generated
          Content for Paged Media</a> draft. Note there are other values in
          the editor's draft, which could be added as ''word-break: hyphenate-all''
          and ''word-break: none''...</p></dd>
    </dl>

    <p>When shaping scripts such as Arabic are allowed to break within words
      due to 'break-all' or hyphenation, the characters must still be shaped
      as if the word were not broken.</p>

<h2 id="wrapping">
  Text Wrapping</h2>

  <p>Text wrapping is controlled by the 'text-wrap' and 'word-wrap' properties:</p>

  <h3 id="text-wrap">
    Text Wrap Settings: the 'text-wrap' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-wrap</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | unrestricted | none | suppress</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the mode for text wrapping. Possible values:</p>

    <dl>
    <dt><dfn title="text-wrap:normal"><code>normal</code></dfn></dt>
    <dd>Lines may break at allowed break points, as determined by the
      line-breaking rules in effect. Line breaking behavior defined
      for the WJ, ZW, and GL line-breaking classes in
      [<a href="#UAX14">UAX14</a>] must be honored.
    <dt><dfn title="text-wrap:none"><code>none</code></dfn></dt>
    <dd>Lines may not break; text that does not fit within the block container
      overflows it.</dd>
    <dt><dfn title="text-wrap:unrestricted"><code>unrestricted</code></dfn></dt>
    <dd>Lines may break between any two grapheme clusters. Line-breaking
      restrictions have no effect and hyphenation does not take place.
      Character shaping is performed on each side of the break as if
      the break had not occurred. <span class="issue">This value is
      for terminal-style dumb line breaking. But has no use cases.</span></dd>
    <dt><dfn title="text-wrap:suppress"><code>suppress</code></dfn></dt>
    <dd>Line breaking is suppressed within the element: the UA may only break
      within the element if there are no other valid break points in the
      line. If the text breaks, line-breaking restrictions are honored as for
      'normal'.
    </dl>

    <p>Regardless of the 'text-wrap' value, lines always break at forced breaks:
     for all values, line-breaking behavior defined for the BK, CR, LF, CM
     NL, and SG line breaking classes in [<a href="#UAX14">UAX14</a>] must
     be honored.</p>

    <p>When <span class="property">'text-wrap'</span> is set to 'normal' or
      'suppress', UAs that allow breaks at punctuation other than spaces
      should prioritize breakpoints.
      For example, if breaks after slashes have a lower priority than spaces,
      the sequence "check /etc" will never break between the '/' and the 'e'.
      The UA may use the width of the containing block, the text's language,
      and other factors in assigning priorities.
      As long as care is taken to avoid such awkward breaks, allowing breaks at
      appropriate punctuation other than spaces is recommended, as it results
      in more even-looking margins, particularly in narrow measures.</p>

    <!-- add a sample prioritization algorithm -->

    <div class="example">
      <h4 id="example-suppress">Example of using 'text-wrap: suppress' in presenting a footer</h4>
      <p>The priority of breakpoints can be set to reflect the intended
        grouping of text.</p>

      <p>Given the rules</p>
      <pre>
<!-- -->footer { text-wrap: suppress; /* inherits to all descendants */ }
      </pre>
      <p>and the following markup:</p>
      <pre>
<!-- -->&lt;footer>
<!-- -->  &lt;venue>27th Internationalization and Unicode Conference&lt;/venue>
<!-- -->  &amp;#8226; &lt;date>April 7, 2005&lt;/date> &amp;#8226;
<!-- -->  &lt;place>Berlin, Germany&lt;/place>
<!-- -->&lt;/footer>
      </pre>

      <p>In a narrow window the footer could be broken as</p>
      <pre>
<!-- -->27th Internationalization and Unicode Conference &#8226;
<!-- -->April 7, 2005 &#8226; Berlin, Germany
      </pre>
      <p>or in a narrower window as</p>
      <pre>
<!-- -->27th Internationalization and Unicode
<!-- -->Conference &#8226; April 7, 2005 &#8226;
<!-- -->Berlin, Germany
      </pre>
      <p>but not as</p>
      <pre>
<!-- -->27th Internationalization and Unicode Conference &#8226; April
<!-- -->7, 2005 &#8226; Berlin, Germany
      </pre>
    </div>

  <h3 id="word-wrap">
    Emergency Wrapping: the 'word-wrap' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>word-wrap</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | break-word</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies whether the UA may break within a word
      to prevent overflow when an otherwise-unbreakable string is too
      long to fit within the line box. It only has an effect when
      'text-wrap' is either 'normal' or 'suppress'. Possible values:</p>

    <dl>
    <dt><dfn title="word-wrap:normal"><code>normal</code></dfn></dt>
    <dd>Lines may break only at allowed break points.</dd>
    <dt><dfn title="word-wrap:break-word"><code>break-word</code></dfn></dt>
    <dd>An unbreakable "word" may be broken at an arbitrary point if
      there are no otherwise-acceptable break points in the line.
      Shaping characters are still shaped as if the word were not
      broken, and grapheme clusters must together stay as one unit.</dd>
    </dl>

    <p class="issue">If Korean is set to keep-all, and the word doesn't
      fit, should it break anyway? Do we need an 'auto' value here for
      scripts where it's OK to break even if it's not ideal vs. scripts
      (like Latin) where breaking in the middle of a word is wrong?</p>

<h2 id="justification">
  Alignment and Justification</h2>

  <h3 id="text-align">
    Text Alignment: the 'text-align' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-align</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>[start | end | left | right | center | justify | match-parent ] ||
            <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-string"><span class="value-inst-string">&lt;string&gt;</span></a>
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>start</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value, except for 'match-parent' (see prose)</td>
        </tr>
      </tbody>
    </table>

    <p>This property describes how inline contents of a block are horizontally aligned
      if the contents do not completely fill the line box. Values have the following
      meanings:</p>

    <dl>
    <dt><dfn title="text-align:start"><code>start</code></dfn></dt>
      <dd>The inline contents are aligned to the start edge of the line box.
    <dt><dfn title="text-align:end"><code>end</code></dfn></dt>
      <dd>The inline contents are aligned to the end edge of the line box.
    <dt><dfn title="text-align:left"><code>left</code></dfn></dt>
      <dd>The inline contents are aligned to the left edge of the line box.
        In vertical text, 'left' aligns to the edge of the line box that
        would be the start edge for left-to-right text.</dd>
    <dt><dfn title="text-align:right"><code>right</code></dfn></dt>
      <dd>The inline contents are aligned to the right edge of the line box.
        In vertical text, 'right' aligns to the edge of the line box that
        would be the end edge for left-to-right text.</dd>
    <dt><dfn title="text-align:center"><code>center</code></dfn></dt>
      <dd>The inline contents are centered within the line box.
    <dt><dfn title="text-align:justify"><code>justify</code></dfn></dt>
      <dd>The text is justified according to the method specified by the
      <a href="#text-justify" class="property">'text-justify'</a> property.
    <dt><dfn title="text-align:&lt;string>"><code><span title="&lt;string&gt;"><a
      class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-string"
      ><span class="value-inst-string">&lt;string&gt;</span></a></span></code></dfn></dt>
      <dd>The string must be a single character; otherwise the declaration must
        be <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignored</a>.
        When applied to a table cell, specifies a character on which all cells
        in its table column that also have a &lt;string&gt; value for 'text-align'
        will align (see the section on <a href="http://www.w3.org/TR/2008/REC-CSS2-20080411/tables.html#column-alignment">horizontal
        alignment in a column</a> for details and an example).
      </dd>
    <dt><dfn title="text-align:match-parent"><code>match-parent</code></dfn></dt>
      <dd>This value behaves the same as 'inherit' except that an inherited
        value of 'start' or 'end' is calculated against its parent's 'direction'
        value and results in a computed value of either 'left' or 'right'.
    </dl>

    <p>A block of text is a stack of
      <a href="http://www.w3.org/TR/CSS21/visuren.html#line-box">line boxes</a>.
      In the case of 'start', 'end', 'left', 'right' and 'center', this
      property specifies how the inline boxes within each line box align
      within the line box: alignment is not with respect to the
      <a href="http://www.w3.org/TR/CSS21/visuren.html#viewport">viewport</a>
      or containing block. In the case of 'justify', the UA may stretch
      the inline boxes in addition to adjusting their positions. (See also
      the <a href="#text-justify" class="property">'text-justify'</a>,
      <a href="#letter-spacing" class="property">'letter-spacing'</a>
      and <a href="#word-spacing" class="property">'word-spacing'</a>.)

    <p>A keyword value may be specified in conjunction with the &lt;string&gt;
      value; if it is not given, it defaults to 'end'. This value is used
      when &lt;string&gt; alignment is applied to boxes that are not table
      cells, when the alignment character appears more than once, and when
      the text wraps to multiple lines. Also, if the column is wide enough
      that the string value alone does not determine the alignment of its
      &lt;string&gt;-aligned contents, the fallback value of the first cell
      in the column with a &lt;string&gt; alignment is used to determine
      the aligned contents' alignment within the column.
      <span class="issue">Use this value also to determine alignment wrt
      the axis instead of using the "character directionality", which is
      not defined for punctuation...</span></p>

  <h3 id="text-align-last">
    Last Line Alignment: the 'text-align-last' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-align-last</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>start | end | left | right | center | justify
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>start</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property describes how the last line of a block or a line right before
      a forced line break is aligned when
      <a href="#text-align" class="property">'text-align'</a> is set to 'justify'.
      Values have the same meaning as for
      <a href="#text-align" class="property">'text-align'</a>.</p>

  <h3 id="text-justify">
    Justification Method: the 'text-justify' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-justify</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>auto |
            [ trim || [ inter-word | inter-ideograph | inter-cluster | distribute | kashida ] ]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>auto</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers and, optionally, inline elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property selects the justification method used when
      <a href="#text-align" class="property">'text-align'</a>
      is set to <span class="css">'justify'</span>.
      The property applies to block containers, but the UA may (but
      is not required to) also support it on inline elements.
      It takes the following values:</p>

    <dl>
      <dt><dfn title="text-justify:auto"><code>auto</code></dfn></dt>
        <dd>The UA determines the justification algorithm to follow, based
          on a balance between performance and adequate presentation quality.
          <p class="note">One possible algorithm is to determine the behavior
          based on the language of the paragraph: the UA can then choose
          appropriate value for the language, like ''trim inter-ideograph''
          for CJK, or ''inter-word'' for English.
          Another possibility is to use a justification method that is a
          universal compromise for all scripts, e.g. the ''distribute'' method
          with discrete scripts dropped to second priority.</p>
        </dd>
      <dt><dfn title="text-justify:inter-word"><code>inter-word</code></dfn></dt>
        <dd>Justification primarily changes spacing at word separators.
          This value is typically used for languages that separate words using
          spaces, like English or (sometimes) Korean.</dd>
      <dt><dfn title="text-justify:inter-ideographic"><code>inter-ideograph</code></dfn></dt>
        <dd>Justification primarily changes spacing at word separators and
          at inter-graphemic boundaries in scripts that use no word spaces.
          This value is typically used for <abbr title="Chinese/Japanse/Korean">CJK</abbr>
          languages.</dd>
      <dt><dfn title="text-justify:inter-cluster"><code>inter-cluster</code></dfn></dt>
        <dd>Justification primarily changes spacing at word separators and at
          grapheme cluster boundaries in <a href="#clustered-scripts">clustered
          scripts</a>.
          This value is typically used for Southeast Asian scripts such as Thai.</dd>
      <dt><dfn title="text-justify:distribute"><code>distribute</code></dfn></dt>
        <dd>Justification primarily changes spacing both at word separators
          and at grapheme cluster boundaries in all scripts except those in
          the connected and cursive groups.
          This value is sometimes used in e.g. Japanese, often with the
          'text-align-last' property.</dd>
      <dt><a name="kashida-prop"></a><a name="text-kashida-space"></a>
        <dfn title="text-justify:kashida"><code>kashida</code></dfn></dt>
        <dd>Justification primarily stretches Arabic and related scripts
          through the use of kashida or other calligraphic elongation.</dd>
      <dt><a name="text-justify-trim-prop"></a><a name="text-justify-trim"></a>
        <dfn title="text-justify:trim"><code>trim</code></dfn></dt>
        <dd>This keyword specifies that compression is preferred to expansion
          and enables the trimming of blank space in glyphs where allowed
          by typographic tradition (for example, in spaces and fullwidth
          punctuation glyphs). If specified alone, the exact justification
          algorithm is UA-defined (as for ''auto'').
        </dd>
    </dl>

    <p>When justifying text, the user agent takes the remaining space between
      the ends of a line's contents and the edges of its line box, and
      distributes that space throughout its contents so that the contents
      exactly fill the line box. If the 'letter-spacing' and 'word-spacing'
      property values allow it, the user agent may also distribute negative
      space, putting more content on the line than would otherwise fit under
      normal spacing conditions. The exact justification algorithm is
      UA-dependent; however, CSS provides some general guidelines which should
      be followed when any justification method other than 'auto' is
      specified.</p>

    <p>Justification affects different types of writing systems in different ways.
      For justification purposes, characters are grouped as follows:</p>

    <dl>
      <dt id="block-scripts">block</dt>
        <dd>CJK (including Hangul and half-width kana) and by extension all
          "wide" characters. (See [[!UAX11]])</dd>
      <dt id="clustered-scripts">clustered</dt>
        <dd>South-East Asian scripts that have discrete units but do not
          use space between words (such as Thai, Lao, Khmer, Myanmar). This
          category also includes the Tibetan script.</dd>
      <dt id="discrete-scripts">discrete</dt>
        <dd>Scripts that use spaces between words and have discrete,
          unconnected (in print) units within words, such as Latin,
          Greek, Cyrillic, Hebrew.</dd>
      <dt id="cursive-scripts">cursive</dt>
        <dd>Arabic and similar cursive scripts</dd>
      <dt id="connected-scripts">connected</dt>
        <dd>Devanagari and other scripts such as such as Bengali and Gurmukhi,
          that use spaces between words and baseline connectors within words.
          The Ogham script also falls into this category.</dd>
    </dl>

    <p class="issue">Where do scripts like Tamil fit in?</p>

    <p>The UA may enable or break optional ligatures or use other font
      features such as alternate glyphs to help justify the text under
      any method. This behavior is not defined by CSS.</p>

    <p id="expansion-opportunity">CSS defines <dfn>expansion opportunities</dfn>
      as points where the justification algorithm may alter spacing within
      the text. These expansion opportunities fall into priority
      levels as defined by the justification method.
      Within a line, higher priority expansion opportunities should be
      expanded or compressed to their limits before lower priority
      expansion opportunities are adjusted. (Expansion and compression
      limits are given by the <a href="#letter-spacing">letter-spacing</a>
      and <a href="#word-spacing">word-spacing</a> properties.</p>

    <p>How any remaining space is distributed once all expansion opportunities reach their
      limits is up to the UA. If the inline contents of a line cannot be
      stretched to the full width of the line box, then they must be
      aligned as specified by the
      <span class="property"><a href="#text-align-last">'text-align-last'</a></span>
      property (or as 'start' if 'text-align-last' is 'justify').</p>

    <p>The expansion opportunity priorities for values of 'text-justify'
      are given in the table below. Space must be distributed evenly
      among all types of expansion opportunities in a given prioritization
      group, but may vary within a line due to changes in the font or
      letter-spacing and word-spacing values.
      The different types of expansion opportunities are defined as follows:</p>

    <dl>
      <dt>spaces</dt>
         <dd>An expansion opportunity exists at spaces and other
           <a href="#word-separator">word separators</a>.
           Expand as for <a href="#word-spacing">'word-spacing'</a>.</dd>
      <dt>block</dt>
      <dt>clustered</dt>
      <dt>discrete</dt>
         <dd>An expansion opportunity exists between two
           <a href="#grapheme-cluster">grapheme clusters</a> when at least
           one of them belongs to the affected script group and the spacing
           that point has not already been altered at a higher priority.
           <p class="issue">I'm not sure grapheme clusters are the right unit
           to use for some of these complex scripts...</p>
         </dd>
      <dt>cursive</dt>
         <dd>Words may be expanded through kashida elongation or other cursive
           expansion processes. Kashida may be applied in discrete units or
           continuously, and the prioritization of kashida points is UA-dependent:
           for example, the UA may apply more at the end of the line. The
           UA should not apply kashida to fonts for which it is inappropriate.
           It may instead rely on other justification methods that lengthen
           or shorten Arabic segments (e.g. by substituting in swash forms or
           optional ligatures). Because elongation rules depend on the typeface
           style, the UA should rely on on the font whenever possible rather
           than inserting kashida based on a font-independent ruleset. The UA
           should limit elongation so that, e.g. in multi-script lines a short
           stretch of Arabic will not be forced to soak up too much of the
           extra space by itself. If the UA does not support cursive elongation,
           then no expansion points exist between grapheme clusters of these
           scripts.</dd>
      <dt id="punctuation-symbols">punctuation</dt>
        <dd>An expansion opportunity exists between a pair of characters
          from the Unicode symbols (S*) and punctuation (P*) classes and
          at enabled <a href="#text-autospace">autospace</a> points.
          The default justification priority of these points depends on the
          justification method as defined below; however there may be
          additional rules controlling their justification behavior due to
          typographic tradition.
          For example, there are traditionally no expansion opportunities
          between consecutive EM DASH U+2014, HORIZONTAL BA U+2015, HORIZONTAL
          ELLIPSIS U+2026, or TWO DOT LEADER U+2025 characters. [[JIS4051]]
          The UA may introduce additional levels of priority to handle expansion
          opportunities involving punctuation.</dd>
      <dt>connected</dt>
        <dd>No expansion opportunities occur between pairs of connected script
          grapheme clusters. <span class="issue">Is this correct?</span></dd>
    </dl>

    <table class="data">
      <caption>Prioritization of Expansion Points</caption>
      <colgroup></colgroup>
      <colgroup span=2></colgroup>
      <colgroup span=2></colgroup>
      <colgroup span=2></colgroup>
      <colgroup span=2></colgroup>
      <colgroup span=3></colgroup>
      <colgroup span=3></colgroup>
      <colgroup span=1></colgroup>
      <thead>
        <tr>
          <th scope="row">method:</th>
          <th colspan="2">inter-word</th>
          <th colspan="2">inter-ideograph</th>
          <th colspan="2">distribute</th>
          <th colspan="2">inter-cluster</th>
          <th colspan="3">kashida</th>
          <th colspan="2">auto</th>
        </tr>
        <tr>
          <th scope="row">priority:</th>

          <th>1st</th>
          <th>2nd</th>

          <th>1st</th>
          <th>2nd</th>

          <th>1st</th>
          <th>2nd</th>

          <th>1st</th>
          <th>2nd</th>

          <th>1st</th>
          <th>2nd</th>
          <th>3rd</th>

          <th>1st</th>
          <th>2nd</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">spaces</th>
          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>
          <td></td>

          <td>¿?</td>
          <td></td>
        </tr>

        <tr>
          <th scope="row">block</th>
          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td></td>
          <td>&#8226;</td>

          <td>¿?</td>
          <td></td>
        </tr>

        <tr>
          <th scope="row">clustered</th>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td></td>
          <td>&#8226;</td>

          <td>¿?</td>
          <td></td>
        </tr>

        <tr>
          <th scope="row">cursive</th>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>
          <td></td>

          <td></td>
          <td>¿?</td>
        </tr>

        <tr>
          <th scope="row">discrete</th>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>¿?</td>
        </tr>

        <tr>
          <th scope="row">connected</th>
          <td></td>
          <td></td>

          <td></td>
          <td></td>

          <td></td>
          <td></td>

          <td></td>
          <td></td>

          <td></td>
          <td></td>
          <td></td>

          <td></td>
          <td></td>
        </tr>
        <tr>
          <th scope="row">punctuation</th>

          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td><span class="issue">???</span></td>
          <td><span class="issue">???</span></td>

          <td></td>
          <td></td>
          <td>&#8226;</td>

          <td>¿?</td>
          <td>¿?</td>
        </tr>
      </tbody>
    </table>

    <p class="note">The ''auto'' column defined above is informative.</p>

    <div class="example">
      <p>Japanese is one of the language that prefers compression to expansion on justification.
        JIS X-4051 [[JIS4051]] defines how a text formatter can justify Japanese text.
        Here is one example of the interpretation of JIS X-4051 with slight modification.</p>
        <ol>
          <li>If no justification is necessary, neither compression nor expansion occur.</li>
          <li>If justification is necessary,
            take the first line break opportunity beyond the end of line
            and apply the following rules (in order) to compress until it fits.
            <ol>
              <li>Compress space characters up to the minimum value specified by ''word-spacing'' property, or up to 1/4em.</li>
              <li>Compress <a href="#fullwidth-middle-dot-punctuation">fullwidth middle dot punctuations</a>
                and <a href="#fullwidth-colon-punctuation">fullwidth colon punctuations</a>
                up to 1/2em, by trimming the same amount of spaces from both sides of the characters.</li>
              <li>Compress the left side of <a href="#fullwidth-opening-punctuation">fullwidth opening punctuations</a>
                and the right side of <a href="#fullwidth-closing-punctuation">fullwidth closing punctuations</a>
                up to 1/2em.</li>
              <li>Compress spaces created by ''text-autospace'' property up to 1/8em.</li>
            </ol></li>
          <li>If the compression fails to fit the line,
            take the last line break opportunity before the end of line,
            and apply the following rules (in order) to expand until it fits.
            <ol>
              <li>Expand space characters up to the maximum value specified by ''word-spacing'' property, or up to 1/2em.</li>
              <li>Expand spaces created by ''text-autospace'' property up to 1/2em.</li>
              <li>Expand all expansion opportunities as defined above in equal percent of the size of each character.</li>
            </ol></li>
        </ol>
    </div>

<h2 id="spacing">
  Spacing</h2>

  <p id="spacing-limit">The next two properties refer to the &lt;spacing-limit&gt;
    value type, which is defined as follows:</p>

    <dl>
      <dt><dfn title="<spacing-limit>"><code>&lt;spacing-limit&gt;</code></dfn></dt>
      <dd>
        [ normal | <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span
                 class="value-inst-length">&lt;length&gt;</span></a>
               | <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-percentage"><span
                 class="value-inst-percentage">&lt;percentage&gt;</span></a> ]
      </dd>
      <dt><dfn title="&lt;spacing-limit>:normal"><code>normal</code></dfn></dt>
        <dd>Specifies the normal optimum/minimum/maximum spacing, as defined
          by the current font and/or the user agent. Normal spacing should be
          percentage-based. Normal minimum and maximum spacing must be based
          on the optimum spacing so that the minimum and maximum limits
          increase and decrease with changes to the optimum spacing.
          Normal minimum and maximum spacing may also vary according to some
          measure of the amount of text on a line (e.g. block width divided by
          font size): larger measures can accommodate tighter spacing constraints.
          Normal optimum/minimum/maximum spacing may also vary based on the
          value of the <a href="#text-justify">'text-justify'</a> property,
          the element's language, and other factors.
        </dd>
      <dt><dfn title="&lt;spacing-limit>:&lt;length>|&lt;percentage>"><code><a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span
          class="value-inst-length">&lt;length&gt;</span></a> or
          <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-percentage"><span
          class="value-inst-percentage">&lt;percentage&gt;</span></a></code></dfn></dt>
        <dd>Specifies extra spacing <em>in addition to</em> the normal spacing.
          Percentages are with respect to the width of a space (U+0020). Values
          may be negative, but there may be implementation-dependent limits.
        </dd>
    </dl>

  <h3 id="word-spacing">
    Word Spacing: the 'word-spacing' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>word-spacing</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td><a href="#spacing-limit">&lt;spacing-limit&gt;</a> {1,3}
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>refers to width of space (U+0020) glyph</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>'normal' or computed value or percentage</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the minimum, maximum, and optimal spacing
      between words. If only one value is specified, then it represents
      the optimal spacing and the minimum and maximum are both 'normal'.
      If two values are specified, then the first represents both the
      optimal spacing and the minimum spacing, and the second represents
      the maximum spacing. If three values are specified, they represent
      the optimum, minimum, and maximum respectively.</p>

    <p>If the value of the optimum or maximum spacing is less than the
      value of the minimum spacing, then its used value is the minimum
      spacing. If the optimum spacing is greater than the maximum spacing
      then its used value is the maximum spacing. (This substitution
      occurs after inheritance.)</p>

     <p>In the absence of justification the optimal spacing must be used.
      The text justification process may alter the spacing
      from its optimum (see the <a href="#text-justify">'text-justify'</a>
      property, above) but must not violate the minimum spacing limit
      and should also avoid exceeding the maximum.</p>

    <p id="word-separator">Spacing is applied to each word-separator character
      left in the text after the <a href="#white-space-rules">white space
      processing rules</a> have been applied and should be applied half on
      each side of the character.
    <span class="issue">This is correct for Ethiopian and doesn't matter for invisible spaces, but is it correct for Tibetan? Most publications seem to add space <em>after</em> the tsek mark during justification.</span>
      Word-separator characters include the space (U+0020), the no-break space
      (U+00A0), the Ethiopic word space (U+1361),
      the Aegean word separators (U+10100,U+10101), the Ugaritic word divider
      (U+1039F), and the Tibetan tsek (U+0F0B, U+0F0C).
      <span class="issue">Is this list correct?</span>

      If there are no word-separator characters, or if the word-separating
      character has a zero advance width (such as the zero width space U+200B)
      then the user agent must not create an additional spacing between words.

      General punctuation and fixed-width spaces (such as U+3000 and U+2000
      through U+200A) are not considered word-separators.</p>

  <h3 id="letter-spacing">
    Tracking: the 'letter-spacing' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>letter-spacing</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td><a href="#spacing-limit">&lt;spacing-limit&gt;</a>{1,3}
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>refers to width of space (U+0020) glyph</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>'normal' or computed value or percentage</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the minimum, maximum, and optimal spacing
      between grapheme clusters. If only one value is specified, then it
      represents all three values. If two values are specified, then the
      first represents both the optimal spacing and the minimum spacing,
      and the second represents the maximum spacing. If three values are
      specified, they represent the optimum, minimum, and maximum
      respectively.</p>

    <p>If the value of the optimum or maximum spacing is less than the
      value of the minimum spacing, then its used value is the minimum
      spacing. If the optimum spacing is greater than the maximum spacing
      then its used value is the maximum spacing. (This substitution
      occurs after inheritance.)</p>

    <p>In the absence of justification the optimal spacing must be used.
      The text justification process may alter the spacing from its
      optimum (see the <a href="#text-justify">'text-justify'</a> property,
      above) but must not violate the minimum spacing limit and should
      also avoid exceeding the maximum. Letter-spacing is applied in
      addition to any word-spacing. 'normal' optimum letter-spacing is
      typically zero.</p>

    <p id="grapheme-cluster">A <dfn>grapheme cluster</dfn> is what
      a language user considers to be a character or a basic unit of the
      script. The term is described in detail in the Unicode Technical Report:
      Text Boundaries [[!UAX29]]. This
      specification relies on the default (not tailored) rules <em>only</em>.</p>

    <p>Letter-spacing must not be applied at the beginning or at the end
       of a line. At element boundaries, the letter spacing is given by
       and rendered within the innermost element that <em>contains</em>
       the boundary.</p>

    <div class="example">
      <p>For example, given the markup</p>

      <pre>&lt;P&gt;a&lt;LS&gt;b&lt;Z&gt;cd&lt;/Z&gt;&lt;Y&gt;ef&lt;/Y&gt;&lt;/LS&gt;g&lt;/P&gt;</pre>

      <p>and the style sheet</p>

      <pre><!--
     -->LS { letter-spacing: 1em; }
<!-- -->Z { letter-spacing: 0.3em; }
<!-- -->Y { letter-spacing: 0.4em; }</pre>

      <p>the spacing would be</p>

      <pre>a[0]b[1em]c[0.3em]d[1em]e[0.4em]f[0]g</pre>
    </div>

    <p>UAs may apply letter-spacing to cursive scripts. In this case, UAs
      should extend the space between disjoint graphemes as specified above
      <em>and</em> extend the visible connection between cursively connected
      graphemes by the same amount (rather than leaving a gap). The UA may
      use glyph substitution or other font capabilities to spread out the
      letters. If the UA  cannot expand a cursive script without breaking
      the cursive connections, it should not apply letter-spacing between
      grapheme clusters of that script at all.</p>

    <p>When the resulting space between two characters is not the same as the
      default space, user agents should not use optional ligatures.</p>

  <h3 id="punctuation-trim">
    Fullwidth Punctuation Kerning: the 'punctuation-trim' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>punctuation-trim</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | [start || [ end | allow-end ] || adjacent]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property determines whether or not a fullwidth punctuation
      character should be trimmed (kerned) if it appears at the start
      or end of a line, or adjacent to another fullwidth punctuation
      character. Values are defined as follows:</p>

    <dl>
      <dt><dfn title="punctuation-trim:none">none</dfn></dt>
      <dd>Do not trim or kern the blank half of fullwidth opening or closing
        punctuation glyphs.</dd>
      <dt><dfn title="punctuation-trim:start">start</dfn></dt>
      <dd>Trim (kern) the blank half of fullwidth opening punctuation at
        the beginning of each line.</dd>
      <dt><dfn title="punctuation-trim:end">end</dfn></dt>
      <dd>Trim (kern) the blank half of fullwidth closing punctuation at
        the end of each line.</dd>
      <dt><dfn title="punctuation-trim:allow-end">allow-end</dfn></dt>
      <dd>Trim (kern) the blank half of fullwidth closing punctuation at
        the end of each line if it does not otherwise fit prior to
        justification.</dd>
      <dt><dfn title="punctuation-trim:adjacent">adjacent</dfn></dt>
      <dd>Trim (kern) the blank half of fullwidth opening punctuation if its
        previous adjacent character is a fullwidth opening punctuation,
        fullwidth middle dot punctuation, fullwidth closing punctuation, or
        ideographic space (U+3000).
        Trim (kern) the blank half of fullwidth closing punctuation if its
        next adjacent character is a fullwidth closing punctuation, fullwidth
        middle dot punctuation, or ideographic space (U+3000).</dd>
    </dl>

    <p class="issue">
      add description for what to do if the font has kerning pair defined.
      add description for what to do if the character is not 1em.
      classes and Unicode code point should be re-reviewed.</p>

    <div class="example">
      <p>The following example table lists the punctuation pairs affected by
        the 'adjacent' value. It uses halfwidth equivalents to approximate
        the trimming effect.</p>
      <table class="data">
        <caption>Demonstration of 'adjacent' punctuation trimming</caption>
        <thead>
          <tr><th>Combination</th> <th>Sample Pair</th> <th>Looks Like</th>
        </thead>

        <tbody>
          <tr><th>Opening&#8212;Opening</th>
              <td><tt lang="ja" class="char">〔</tt>+<tt lang="ja" class="char">（</tt>
              <td><tt lang="ja" class="char">〔</tt><tt lang="ja" class="char">(</tt>
          <tr><th>Middle Dot&#8212;Opening</th>

              <td><tt lang="ja" class="char">・</tt>+<tt lang="ja" class="char">（</tt>
              <td><tt lang="ja" class="char">・</tt><tt lang="ja" class="char">(</tt>
          <tr><th>Closing&#8212;Opening</th>
              <td><tt lang="ja" class="char">〕</tt>+<tt lang="ja" class="char">（</tt>

              <td><tt lang="ja" class="char">〕</tt><tt lang="ja" class="char">(</tt>
          <tr><th>Ideographic Space&#8212;Opening</th>
              <td><tt lang="ja" class="char">　</tt>+<tt lang="ja" class="char">（</tt>
              <td><tt lang="ja" class="char">　</tt><tt lang="ja" class="char">(</tt>

          <tr><th>Closing&#8212;Closing</th>
              <td><tt lang="ja" class="char">）</tt>+<tt lang="ja" class="char">〕</tt>
              <td><tt lang="ja" class="char">)</tt><tt lang="ja" class="char">〕</tt>
          <tr><th>Closing&#8212;Middle Dot</th>

              <td><tt lang="ja" class="char">）</tt>+<tt lang="ja" class="char">・</tt>
              <td><tt lang="ja" class="char">)</tt><tt lang="ja" class="char">・</tt>
          <tr><th>Closing&#8212;Ideographic Space</th>
              <td><tt lang="ja" class="char">）</tt>+<tt lang="ja" class="char">　</tt>

              <td><tt lang="ja" class="char">)</tt><tt lang="ja" class="char">　</tt>
        </tbody>
      </table>
    </div>
    <p>In the context of this property the following definitions apply:</p>

    <dl>
      <dt id="fullwidth-opening-punctuation"><dfn>fullwidth opening punctuation</dfn></dt>
      <dd>Includes any opening punctuation character (Unicode category
        <code>Ps</code>) that belongs to the <i>CJK Symbols and Punctuation</i>
        block (U+3000&#8211;U+303F) or is categorized as <i>East Asian
        Fullwidth (F)</i> by [[!UAX11]]. Also includes
        LEFT SINGLE QUOTATION MARK (U+2018) and LEFT DOUBLE QUOTATION MARK
        (U+201C).
        When trimmed, the left (for horizontal text) or top (for vertical
        text) half is kerned.</dd>
      <dt id="fullwidth-closing-punctuation"><dfn>fullwidth closing punctuation</dfn></dt>
      <dd>Includes any closing punctuation character (Unicode category
        <code>Pe</code>) that belongs to the <i>CJK Symbols and Punctuation</i>
        block (U+3000&#8211;U+303F) or is categorized as <i>East Asian Fullwidth
        (F)</i> by [[!UAX11]]. Also includes RIGHT SINGLE
        QUOTATION MARK (U+2019) and RIGHT DOUBLE QUOTATION MARK (U+201D). May
        also include fullwidth colon punctuation and/or fullwidth dot
        punctuation (see below).
        When trimmed, the right (for horizontal text) or bottom (for vertical
        text) half is kerned.</dd>
      <dt id="fullwidth-middle-dot-punctuation"><dfn>fullwidth middle dot punctuation</dfn></dt>
      <dd>Includes MIDDLE DOT (U+00B7), HYPHENATION POINT (U+2027), and
        KATAKANA MIDDLE DOT (U+30FB). May also include fullwidth colon
        punctuation and/or fullwidth dot punctuation (see below).</dd>
      <dt id="fullwidth-colon-punctuation"><dfn>fullwidth colon punctuation</dfn></dt>
      <dd>Includes FULLWIDTH COLON (U+FF1A) and FULLWIDTH SEMICOLON (U+FF1B).</dd>
      <dt id="fullwidth-dot-punctuation"><dfn>fullwidth dot punctuation</dfn></dt>
      <dd>Includes IDEOGRAPHIC COMMA (U+3001), IDEOGRAPHIC FULL STOP (U+3002),
        FULLWIDTH COMMA (U+FF0C), FULLWIDTH FULL STOP (U+FF0E).</dd>
    </dl>

    <p>Fullwidth opening and closing punctuation must not be trimmed if the
      glyph is not actually fullwidth. A fullwidth glyph is one that has the
      same advance width as a typical Han character in the same font.</p>

    <p>Whether fullwidth colon punctuation and fullwidth dot punctuation should
      be considered fullwidth closing punctuation or fullwidth middle dot
      punctuation depends on where in the glyph's box the punctuation is drawn.
      If the punctuation is centered, then it should be considered middle dot
      punctuation. If the punctuation is drawn to one side (left in horizontal
      text, top in vertical text) and the other half is therefore blank then
      the punctuation should be considered closing punctuation and trimmed
      accordingly.</p>

    <p>The UA must classify fullwidth colon punctuation and fullwidth dot
      punctuation under either the fullwidth closing punctuation category or
      the fullwidth middle dot punctuation category as appropriate. The UA
      may rely on language conventions and the layout orientation (horizontal
      vs. vertical), and/or font information to determine this categorization.
      The UA may also add additional characters to any category as appropriate.</p>

    <div class="note">
      <p>The following informative table summarizes language conventions for
      classifying fullwidth colon and dot punctuation:</p>

      <table class="data">
        <thead>
          <tr><td></td> <th>colon punctuation</th> <th>dot punctuation</th>
        </thead>
        <tbody>
          <tr><th>Simplified Chinese (horizontal)</th> <td>closing</td> <td>closing</td>
          <tr><th>Simplified Chinese (vertical)</th> <td>closing</td> <td>closing</td>
          <tr><th>Traditional Chinese</th> <td>middle dot</td> <td>middle dot</td>
          <tr><th>Korean</th> <td>middle dot</td> <td>closing</td>
          <tr><th>Japanese</th> <td>middle dot</td> <td>closing</td>
        </tbody>
      </table>

      <p>Note, that for Chinese fonts at least, the author observes that the
        standard convention is often not followed.</p>
    </div>

  <h3 id="text-autospace">
    <a name="text-autospace-prop"></a>
    <a name="text-autospace">Adding space: the 'text-autospace' property</a></h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-autospace</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | [ ideograph-numeric || ideograph-alpha || ideograph-space || ideograph-parenthesis ]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>When a run of non-ideographic or numeric characters appears inside of
      ideographic text, a certain amount of space is often preferred on both sides
      of the non-ideographic text to separate it from the surrounding ideographic
      glyphs. This property controls the creation of that space when rendering the
      text. That added width does not correspond to the insertion of additional
      space characters, but instead to the width increment of existing glyphs.

    <p>(A commonly used algorithm for determining this behavior is specified in
      JIS X-4051 [[JIS4051]].)

    <p>This property is additive with the <span class="property"><a
      href="#word-spacing">'word-spacing'</a></span> and <span class="property"><a
      href="#letter-spacing">'letter-spacing'</a></span> [[!CSS21]] properties.
      That is, the amount of spacing
      contributed by the 'letter-spacing' setting (if any) is added to the spacing
      created by <span class="property"><a
      href="#text-autospace">'text-autospace'</a></span>. The same applies to <span
      class="property"><a href="#word-spacing">'word-spacing'</a></span>.

    <p>The space added can be compressed or expanded during the justification process
      as specified in the 'text-justify' property.</p>

    <p>This property applies only to the same inline element context,
      and can apply across elements if in the same inline element context.</p>

    <p>Values have the following meanings:</p>

    <dl>
      <dt><dfn title="text-autospace:none"><code>none</code></dfn></dt>
        <dd>No extra space is created.</dd>
      <dt><dfn title="text-autospace:ideograph-numeric"><code>ideograph-numeric</code></dfn></dt>
        <dd>Creates 1/4em extra spacing between runs of ideographic letters and numeric glyphs.</dd>
      <dt><dfn title="text-autospace:ideograph-alpha"><code>ideograph-alpha</code></dfn></dt>
        <dd>Creates 1/4em extra spacing between runs of ideographic letters and
          non-ideographic letters, such as Latin-based, Cyrillic, Greek, Arabic or Hebrew.</dd>
      <dt><dfn title="text-autospace:ideograph-space"><code>ideograph-space</code></dfn></dt>
        <dd>Extends the width of the space character while surrounded by ideographs.</dd>
      <dt><dfn title="text-autospace:ideograph-parenthesis"><code>ideograph-parenthesis</code></dfn></dt>
        <dd>Creates extra spacing between normal (non wide) parenthesis and ideographs.</dd>
      <dt><dfn title="text-autospace:punctuation"><code>punctuation</code></dfn>
        <dd>Creates extra non-breaking spacing around punctuation as required by
          language-specific typographic conventions. For example, if the
          element's content language is French, narrow no-break space (U+202F)
          and no-break space (U+00A0) should be inserted where required by
          <a href="http://unicode.org/udhr/n/notes_fra.html">French typographic
          guidelines</a>.
    </dl>
    <p class="issue">We are considering to cut ideograph-space and ideograph-parenthesis
      as these two, unlike others, are to fix errors in the document
      and are not purposed for styling.
      ideograph-parenthesis can also make text-justify: trim harder and more complex.</p>
    <p class="issue">It was requested to add a value for doubling the space after
      periods.</p>

    <p>Ideograph letters in this definitions includes the following characters.</p>
    <ul>
      <li>All characters that belongs to Unicode Letters, Other [Lo] category in the range of
        U+3041 to U+31FF.</li>
      <li>All CJK ideographs, which includes
        CJK Ideograph Extension A (U+3400 to U+4DB5),
        CJK Ideograph (U+4E00 to U+9FCB),
        CJK Compatibility Ideograph (U+F900 to U+FAD9),
        CJK Ideograph Extension B (U+20000 to U+2A6D6),
        CJK Ideograph Extension C (U+2A700 to U+2B734),
        and CJK Compatibility Ideograph (U+2F800 to U+2FA1D).</li>
    </ul>

<h2 id="edge-effects">
  Edge Effects</h2>

  <h3 id="text-indent">
    First Line Indentation: the 'text-indent' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-indent</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>[ <span class="value-inst-length"><a href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length">&lt;length&gt;</a></span>
              | <span class="value-inst-percentage"><a href="http://www.w3.org/TR/CSS21/syndata.html#value-def-percentage">&lt;percentage&gt;</a></span>
              ] && [ hanging || each-line ]?
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>0</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>refers to width of containing block</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>the percentage as specified or the absolute length</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the indentation applied to lines of inline
      content in a block. The indent is treated as a margin applied to
      the start edge of the line box. Unless otherwise specified via the
      ''each-line'' and/or ''hanging'' keywords, only lines that are the
      <a href="http://www.w3.org/TR/CSS21/selector.html#first-line-pseudo">first
      formatted line</a> of an element. For example, the first line of
      an anonymous block box is only affected if it is the first child
      of its parent element.

    <p>Values have the following meanings:</p>

    <dl>
      <dt>&lt;length&gt;</dt>
      <dd>Gives the amount of the indent as an absolute length.</dd>
      <dt>&lt;percentage&gt;</dt>
      <dd>Gives the amount of the indent as a percentage of the containing
        block's logical width.</dd>
      <dt><dfn><code>each-line</code></dfn>
      <dd>Indentation affects the first line of the block container as
        well as each line after a forced line break, but does not affect
        lines after a text wrap break.
      <dt><dfn><code>hanging</code></dfn>
      <dd>Inverts which lines are affected.</dd>
    </dl>

    <div class="example">
      <p>If 'text-align' is 'start' and 'text-indent' is '5em' in
      left-to-right text with no floats present, then first line of text
      will start 5em into the block:</p>

      <pre><!--
       -->     Since CSS1 it has been possible
<!--   -->to indent the first line of a block
<!--   -->element using the 'text-indent'
<!--   -->property.<!--
   --></pre>
    </div>

    <p class="note">Note that since the 'text-indent' property inherits,
      when specified on a block element, it will affect descendant
      inline-block elements.
      For this reason, it is often wise to specify 'text-indent: 0' on
      elements that are specified 'display: inline-block'.</p>

  <h3 id="hanging-punctuation">
    Hanging Punctuation: the 'hanging-punctuation' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>hanging-punctuation</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | [ first || last || [ allow-end | force-end ] ]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
      </tbody>
    </table>

    <p>This property determines whether a punctuation mark, if one is present,
      may be placed outside the line box at the start or at the end of a
      full line of text.
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="hanging-punctuation:first"><code>first</code></dfn></dt>
        <dd>Punctuation (specifically, opening brackets and quotes) may hang
          outside the start edge of the first line.</dd>
      <dt><dfn title="hanging-punctuation:last"><code>last</code></dfn></dt>
        <dd>Punctuation (specifically, closing brackets and quotes) may hang
          outside the end edge of the last line.</dd>
      <dt><dfn title="hanging-punctuation:allow-end"><code>allow-end</code></dfn></dt>
        <dd>Punctuation (specifically, stops and commas) may hang outside the
          end edge of all lines if the punctuation does not otherwise fit
          prior to justification.</dd>
      <dt><dfn title="hanging-punctuation:force-end"><code>force-end</code></dfn></dt>
        <dd>Punctuation (specifically, stops and commas) may hang outside the
          end edge of all lines. If justification is enabled on this line, then
          it will force the punctuation to hang.</dd>
    </dl>

    <p>In all cases only one punctuation character may hang outside the edge
      of the line. </p>

    <p class="issue">Need to work on the description. Add Unicode character classes.
      Cover indentation as well. Check for Western use-cases. Add <code>hyphens</code> value?</p>

<h2 id="decoration">
  <a name="text-decoration">Text Decoration</a></h2>

  <h3 id="line-decoration">
    Line Decoration: Underline, Overline, and Strike-Through</h3>

    <p class="issue">Sync this against CSS2.1.</p>

    <p>The following properties describe line decorations that are added
      to the content of an element. When specified on an inline element,
      such decoration affects all the boxes generated by that element;
      for all other elements, the decorations are propagated to an
      anonymous inline box that wraps all the in-flow inline children of
      the element, and to any block-level in-flow descendants. They are
      not, however, further propagated to floating and absolutely positioned
      descendants, nor to the contents of
      <a href="http://www.w3.org/TR/CSS21/visuren.html#display-prop"><code>inline-table</code></a>
      and <a href="http://www.w3.org/TR/CSS21/visuren.html#display-prop"><code>inline-block</code></a>
      descendants. The value of the <code>text-decoration-line</code>
      property on descendant elements therefore cannot have any effect on
      the decoration of the ancestor; to skip descendants, use the
      <code>text-decoration-skip</code> property.</p>

    <p>By default underlines, overlines, and line-throughs are applied only
      to text (including white space, letter spacing, and word spacing):
      margins, borders, and padding are skipped. Elements containing
      no text, such as images, are likewise not decorated.
      The <a href="#text-decoration-skip"><code>text-decoration-skip</code></a>
      property can be used to modify this behavior, for example allowing
      inline replaced elements to be underlined or requiring that white
      space be skipped.</p>

    <p>In determining the position and thickness of text decoration lines,
      user agents may consider the font sizes and dominant baselines of
      descendants, but for a given element's decoration must use the same
      baseline and thickness on <!-- throughout? --> each line. Relatively positioning a descendant
      moves all text decorations affecting it along with the descendant's text;
      it does not affect calculation of the decoration's initial position on
      that line. The <a href="#text-decoration-color">color</a> and
      <a href="#text-decoration-style">line style</a> of decorations must
      remain the same on all decorations applied by a given element, even
      if descendant elements have different color or line style values.</p>

    <div class="example">
      <p>The following figure shows the averaging for underline: 
      <p><img alt="In the first rendering of the underlined text '1st a'
                   with 'st' as a superscript, both the '1st' and the 'a'
                   are rendered in a small font. In the second rendering,
                   the 'a' is rendered in a larger font. In the third, both
                   '1st' and 'a' are large."
              height="105" src="underline-averaging.gif" width="326">
      <p>In the three fragments of underlined text, the underline is drawn
        consecutively lower and thicker as the ratio of large text to small
        text increases.</p>
    </div>

    <div class="example">
      <p>In the following style sheet and document fragment:</p>
      <pre><code class="css">
<!-- -->   blockquote { text-decoration: underline; color: blue; }
<!-- -->   em { display: block; }
<!-- -->   cite { color: fuchsia; }
<!----></code></pre>
      <pre><code class="html">
<!-- -->   &lt;blockquote&gt;
<!-- -->    &lt;p&gt;
<!-- -->     &lt;span&gt;
<!-- -->      Help, help!
<!-- -->      &lt;em&gt; I am under a hat! &lt;/em&gt;
<!-- -->
<!-- -->      &lt;cite&gt; &mdash;GwieF &lt;/cite&gt;
<!-- -->     &lt;/span&gt;
<!-- -->    &lt;/p&gt;
<!-- -->   &lt;/blockquote&gt;
<!----></code></pre>
      <p>...the underlining for the blockquote element is propagated to an
      anonymous inline element that surrounds the span element, causing 
      the text "Help, help!" to be blue, with the blue underlining from 
      the anonymous inline underneath it, the color being taken from the 
      blockquote element. The <code>&lt;em&gt;text&lt;/em&gt;</code> 
      in the em block is also underlined, as it is in an in-flow block to
      which the underline is propagated. The final line of text is fuchsia,
      but the underline underneath it is still the blue underline from the
      anonymous inline element.</p>
      <p><img src="underline-example.png" alt="Sample rendering of the above underline example"></p>
      <p>This diagram shows the boxes involved in the example above. The
      rounded aqua line represents the anonymous inline element wrapping
      the inline contents of the paragraph element, the rounded blue line
      represents the span element, and the orange lines represent the
      blocks.</p>
    </div>

    <h4 id="text-decoration-line">
      Text Decoration Lines: the 'text-decoration-line' property</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration-line</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td>none | [ underline || overline || line-through ]
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>none</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>no (but see prose)</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>Specifies what line decorations, if any, are added to the element.
        Values have the following meanings:</p>

      <dl>
        <dt>none</dt>
        <dd>Produces no text decoration.</dd>
        <dt>underline</dt>
        <dd>Each line of text is underlined.</dd>
        <dt>overline</dt>
        <dd>Each line of text has a line above it (i.e. on the opposite
          side from an underline).</dd>
        <dt>line-through</dt>
        <dd>Each line of text has a line through the middle.</dd>
      </dl>

    <h4 id="text-decoration-color">
      Text Decoration Color: the 'text-decoration-color' property</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration-color</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td><a href="http://www.w3.org/TR/css3-color/#color0"><span class="value-inst-color">&lt;color&gt;</span></a>
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>currentColor</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>no</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>This property specifies the color of text decoration (underlines
        overlines, and line-throughs) set on the element with
        <code>text-decoration-line</code>.</p>

    <h4 id="text-decoration-style">
      Text Decoration Style: the 'text-decoration-style' property</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration-style</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td>solid | double | dotted | dashed | wave
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>solid</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>no</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>This property specifies the style of the line(s) drawn for
        text decoration specified on the element. Values have the
        same meaning as for the
        <a href="http://www.w3.org/TR/css3-background/#the-border-style">border-style
        properties</a> [[!CSS3BG]].</p>

    <h4 id="text-decoration">
      Text Decoration Shorthand: the 'text-decoration' property</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td><var><a href="#text-decoration-line">&lt;text-decoration-line&gt;</a></var> ||
                <var><a href="#text-decoration-color">&lt;text-decoration-color&gt;</a></var> ||
                <var><a href="#text-decoration-style">&lt;text-decoration-style&gt;</a></var> || blink
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>none</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>no</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>This property is a shorthand for setting
        <code>text-decoration-line</code>, <code>text-decoration-color</code>,
        and <code>text-decoration-style</code> in one declaration. Omitted
        values are set to their initial values. A <code>text-decoration</code>
        declaration that omits both the <code>text-decoration-color</code>
        and <code>text-decoration-style</code> values is backwards-compatible
        with CSS Levels 1 and 2.</p>

      <p>If the <code>blink</code> keyword is specified the text blinks
        (alternates between visible and invisible). Conforming user agents
        may simply not blink the text. Note that not blinking the text is
        one technique to satisfy
        <a href="http://www.w3.org/TR/UAAG/guidelines.html#tech-on-off-blinking-text">checkpoint 3.3 of WAI-UAAG</a>.</p>

      <div class="example">
        <p>The following example underlines unvisited links with a solid blue
        underline in CSS1 and CSS2 UAs and a navy dotted underline in CSS3 UAs.</p>

        <pre><code class="css">
<!--   -->:link {
<!--   -->    color: blue;
<!--   -->    text-decoration: underline;
<!--   -->    text-decoration: navy dotted underline; /* <a href="http://www.w3.org/TR/CSS21/syndata.html#ignore">Ignored</a> in CSS1/CSS2 UAs */
<!--   -->}
<!-- --></code></pre>
      </div>

    <h4 id="text-decoration-skip">
      Text Decoration Line Continuity: the 'text-decoration-skip' property</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration-skip</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td>none | [ images || spaces || ink || all ]
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>images</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>yes</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

        <p>This property specifies what parts of the element's content
        any text decoration affecting the element must skip over. It
        controls all text decoration lines drawn by the element
        and also any text decoration lines drawn by its ancestors.
        Values have the following meanings:</p>

      <dl>
        <dt><dfn title="text-decoration-skip:none">none</dfn></dt>
        <dd>Skip nothing: text-decoration is drawn for all text content
          and for inline replaced elements.</dd>
        <dt><dfn title="text-decoration-skip:images">images</dfn></dt>
        <dd>Skip this element if it is an inline replaced element.</dd>
        <dt><dfn title="text-decoration-skip:spaces">spaces</dfn></dt>
        <dd>Skip white space: this includes regular spaces (U+0020) and
          tabs (U+0009), as well as nbsp (U+00A0), ideographic space
          (U+3000), all fixed width spaces (such as U+2000&ndash;U+200A,
          U+202F and U+205F), and any adjacent letter-spacing or
          word-spacing.</dd>
        <dt><dfn title="text-decoration-skip:ink">ink</dfn></dt>
        <dd>Skip over where glyphs are drawn: interrupt the decoration
          line to let text show through where the text decoration would
          otherwise cross over a glyph. The UA may also skip a small
          distance to either side of the glyph outline.</dd>
        <dt><dfn title="text-decoration-skip:all">all</dfn></dt>
        <dd>Skip over all content in this element. This value does
          <em>not</em> affect text decorations drawn by this element.</dd>
      </dl>

      <p class="issue">Do we need a value that <em>doesn't</em> skip
        margins and padding?</p>

      <p>Note that this property inherits and that descendant elements
        can have a different setting. Therefore a child of an element
        with <code>text-decoration-skip: all</code> can cause its
        grandparent's underline to be drawn by specifying
        <code>text-decoration-skip: none</code>.</p>

    <h4 id="text-underline-position">
      Text Underline Position: the 'text-underline-position' property</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-underline-position</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td>auto | under | alphabetic | over
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>auto</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>yes</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>This property sets the position of an underline specified
        on the same element: it does not affect underlines specified by
        ancestor elements. The can appear either "over" or "under"
        the run of text in relation to its baseline orientation.
        This property is typically used in vertical writing contexts
        such as in Japanese documents where it often desired to have
        the underline appear "over" (to the right of) the affected
        run of text. Values have the following meanings:</p>

      <dl>
        <dt>auto</dt>
        <dd>The user agent may use any algorithm to determine the
          underline's position. In horizontal line layout, the underline
          should be aligned as for <code>alphabetic</code>. In vertical
          line layout, if the language is set to Japanese or Korean,
          the underline should be aligned as for <code>over</code>.
          <span class="issue">this suggestion needs some refinement</span></dd>
        <dt>alphabetic</dt>
        <dd>The underline is aligned with the alphabetic baseline. In
          this case the underline is likely to cross some descenders.</dd>
        <dt>under</dt>
        <dd>The underline is aligned with the "bottom" (left in vertical
          writing) edge of the element's em-box. In this case the underline
          usually does not cross the descenders. This is sometimes called
          "accounting" underline.</dd>
        <dt>over</dt>
        <dd>The underline is aligned with the "top" (right in vertical
          writing) edge of the element's em-box. In this mode, an
          overline also switches sides.</dd>
      </dl>

  <h3 id="emphasis-marks">
    Emphasis Marks</h3>

    <p>East Asian documents traditionally use small symbols next to each glyph to emphasize
      a run of text. For example:</p>

    <div class="figure">
      <p>
        <img alt="Example of emphasis in Japanese appearing above the text"
             class="example" src="text-emphasis-ja.gif" height="28" width="225"></p>
      <p>Accent emphasis (shown in blue for clarity) applied to Japanese text</p>
    </div>

    <h4 id="text-emphasis-style">
      Emphasis Mark Style: the 'text-emphasis-style' property</h4>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-emphasis-style</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none |
              [ [ filled | open ] || [ dot | circle | double-circle | triangle | sesame ] ] |
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-string"><span class="value-inst-string">&lt;string&gt;</span></a>
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>'none', a pair of keywords representing the shape and fill, or
            a string</td>
        </tr>
      </tbody>
    </table>

    <p>This property applies emphasis marks to the element's text.
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="text-emphasis:none"><code>none</code></dfn></dt>
        <dd>No emphasis marks.</dd>
      <dt><dfn title="text-emphasis:filled"><code>filled</code></dfn></dt>
        <dd>The shape is filled with solid color.</dd>
      <dt><dfn title="text-emphasis:open"><code>open</code></dfn></dt>
        <dd>The shape is hollow.</dd>
      <dt><dfn title="text-emphasis:dot"><code>dot</code></dfn></dt>
        <dd>Draw small circles as marks.
          The filled dot is U+2022 '&#x2022;', and the open dot is U+25E6 '&#x25e6;'.</dd>
      <dt><dfn title="text-emphasis:circle"><code>circle</code></dfn></dt>
        <dd>Draw large circles as marks.
          The filled circle is U+25CF '&#x25cf;', and the open circle is U+25CB '&#x25cb;'.</dd>
      <dt><dfn title="text-emphasis:double-circle"><code>double-circle</code></dfn></dt>
        <dd>Draw double circles as marks.
          The filled double-circle is U+25C9 '&#x25c9;', and the open double-circle is U+25CE '&#x25ce;'.</dd>
      <dt><dfn title="text-emphasis:triangle"><code>triangle</code></dfn></dt>
        <dd>Draw triangles as marks.
          The filled triangle is U+25B2 '&#x25b2;', and the open triangle is U+25B3 '&#x25b3;'.</dd>
      <dt><dfn title="text-emphasis:sesame"><code>sesame</code></dfn></dt>
        <dd>Draw sesames as marks.
          The filled sesame is U+FE45 '&#xfe45;', and the open sesame is U+FE46 '&#xfe46;'.</dd>
      <dt><dfn title="text-emphasis:sesame"><code><var>&lt;string&gt;</var></code></dfn></dt>
        <dd>Draw the given string as marks.
          Authors should not specify more than one grapheme cluster in &lt;string&gt;.
          The UA may truncate or ignore strings consisting of more than one grapheme cluster.</dd>
    </dl>

    <p>If a shape keyword is specified but neither of 'filled' nor 'open' is
      specified, 'filled' is assumed. If only 'filled' or 'open is specified,
      the shape keyword computes to 'dot' in horizontal writing mode and
      'sesame' in vertical writing mode.</p>

    <p>The marks should be drawn using the element's font settings with its
      size scaled down to 50%. UA should fall back to an appropriate font if
      the glyph is missing in the font. The marks may instead be synthesized
      by the UA.</p>

    <p class="issue">This rendering scheme is based on ruby algorithm and the one used in Japanese printing industries.
      But the size of glyphs varies so much that this may result in inconsistent and/or bad visuals.
      If you have any feedback on this, it's appreciated.</p>

    <p>The marks are drawn once for each grapheme cluster. However,
      emphasis marks are not drawn for a grapheme cluster consisting of:</p>
    <ul>
      <li>Characters for which ruby is drawn in the same position as
        the emphasis mark.</li>
      <li><a href="#word-separator">Word separators</a> or characters
        belonging to the Unicode separator classes (Z*).
        (But note that emphasis marks <em>are</em> drawn for a space
         that combines with any combining characters.)</li>
      <li>Characters belonging to the Unicode classes for control codes
        and unassigned characters (Cc, Cf, Cn).</li>
      <li><span class="issue">Anything else? Probably need to exclude
        punctuation, but which punctuation exactly? Can we determine
        that Unicode-wide?</span></li>
    </ul>

    <h4 id="text-emphasis-color">
      Emphasis Mark Color: the 'text-emphasis-color' property</h4>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-emphasis-color</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>&lt;color&gt;</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>currentcolor</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
      </tbody>
    </table>

    <p>This property describes the foreground color of the emphasis marks.</p>

    <h4 id="text-emphasis">
      Emphasis Mark Shorthand: the 'text-emphasis' property</h4>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-emphasis</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>'&lt;<a href="#text-emphasis-style">text-emphasis-style</a>&gt;' || '&lt;<a href="#text-emphasis-color">text-emphasis-color</a>&gt;'
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>see individual properties</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>see individual properties</td>
        </tr>
      </tbody>
    </table>

    <p>This property is a shorthand for setting
      <code>text-emphasis-style</code> and <code>text-emphasis-color</code>
      in one declaration.
      Omitted values are set to their initial values.</p>

    <p class="note">Note that 'text-emphasis-position' is not reset in this
      shorthand. This is because typically the shape and color vary, but the
      position is consistent for a particular language throughout the document.
      Therefore the position should inherit independently.</p>

    <h4 id="text-emphasis-position">
      Emphasis Mark Position: the 'text-emphasis-position' property</h4>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-emphasis-position</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>over | under
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>over <span class="issue">Is this the right default?</span></td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
      </tbody>
    </table>

    <p>This property describes where emphasis marks are drawn at.
      The values have following meanings:</p>

    <dl>
      <dt><dfn title="text-emphasis:over"><code>over</code></dfn></dt>
        <dd>Draw marks above the text in horizontal layout, to the right in
          vertical layout. This is the default position.</dd>
      <dt><dfn title="text-emphasis:under"><code>under</code></dfn></dt>
        <dd>Draw marks below the text in horizontal layout, to the left in
          vertical layout.</dd>
    </dl>

    <p>Emphasis marks are drawn exactly as if each grapheme cluster was
      assigned the mark as its ruby annotation text with the ruby position
      given by 'text-emphasis-position' and the ruby alignment as centered.

    <p>The effect of emphasis marks on the line height is the same as for
      ruby text.</p>

    <p class="issue">The values 'over' and 'under' are chosen over 'before'
      and 'after' here because in Mongolian, baseline is not alined with
      the block progression.</p>

    <p class="issue">Steve Zilles points out that these values may
      not make much sense if vertical text is laid out so that horizontal
      scripts' glyph tops point left. An alternative set of values could
      be <code>[ top | bottom ] && [ left | right ]</code>, with the appropriate
      value used for the current writing mode. This also makes it simple
      for PRC Chinese text to specify the correct behavior in the UA style
      sheet.</p>

    <div class="note">
      <p>Note, the preferred position of emphasis marks depends on the
        language. In Japanese for example, the preferred position is 'over'.
        In Chinese used in the PRC, on the other hand, the preferred position
        is 'under'. The informative table below summarizes the preferred
        emphasis mark position for Chinese and Japanese:</p>

      <table class="data">
        <caption>Preferred emphasis mark and ruby position</caption>
        <thead>
          <tr>
            <th scope="col" rowspan=2>Language</th>
            <th scope="col" colspan=2>Preferred mark position</th>
            <th scope="col" colspan=2 rowspan=2>Illustration</th>
          </tr>
          <tr>
            <th>Horizontal</th>
            <th>Vertical</th>
        </thead>
        <tbody>
          <tr>
            <td scope="row">Japanese</td>
            <td>over</td>
            <td>over</td>
            <td rowspan="3">
                <img alt="Emphasis marks appear above each emphasized character in horizontal Japanese text."
                    title="Emphasis (shown in blue for clarity) applied above a fragment of Japanese text"
                    src="text-emphasis-ja.gif" height="28" width="225">
            </td>
            <td rowspan="4">
                <img alt="Emphasis marks appear on the right of each emphasized character in vertical Japanese text."
                    title="Emphasis applied on the right of a fragment of Japanese text"
                    src="text-emphasis-v.gif" height="89" width="34">
            </td>
          </tr>
          <tr>
            <td scope="row">Mongolian</td>
            <td>over<span class="issue">?</span></td>
            <td>over</td>
          </tr>
          <tr>
            <td scope="row">Chinese (Traditional)</td>
            <td>over</td>
            <td>over</td>
          </tr>
          <tr>
            <td scope="row">Chinese (Simplified)</td>
            <td>under</td>
            <td>over</td>
            <td>
              <img alt="Emphasis marks appear below each emphasized character in horizontal Simplified Chinese text."
                    title="Emphasis (shown in blue for clarity) applied below a fragment of Chinese text"
                    src="text-emphasis-zh.gif" height="28" width="133">
          </tr>
        </tbody>
      </table>
    </div>

  <h3 id="text-shadow">
    Text Shadows: the 'text-shadow' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-shadow</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | [<var>&lt;shadow&gt;</var>, ] * <var>&lt;shadow&gt;</var>
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>a color plus three absolute &lt;length&gt;s</td>
        </tr>
      </tbody>
    </table>

    <p>This property accepts a comma-separated list of shadow effects to
      be applied to the text of the element. <dfn>&lt;shadow&gt;</dfn>
      is the same as defined for the 'box-shadow' property except that
      the ''inset'' keyword is not allowed.

    <p class="issue">Should shadows be clipped to the glyph edges, like
      'box-shadow' is clipped to the box edges, or should it be painted
      completely underneath the text. (This makes a difference when the
      text is partially transparent.)</p>

    <p>The shadow is applied to all of the element's
      text as well as any text decoration applied to it. <!-- merge with above sentence once issue resolved -->
      <span class="issue">Would it be better to apply shadows together with
      text decoration: i.e. a descendant of an underlined element doesn't
      apply shadow to its underline, but the underlining element, if it has
      shadows, would apply it to the underline of all text it underlines.</span>
      When a <a href="#text-outline">text outline</a> is specified, the shadow
      shadows the outlined shape rather than the glyph shape.</p>

    <p>The shadow effects are applied front-to-back: the first shadow is on
      top. The shadows may thus overlay each other, but they never overlay
      the text itself. Shadow effects do not alter the size of a box, but
      may extend beyond its boundaries. The shadow must be painted immediately
      behind the element's text (in front of its background). UAs should avoid
      painting text shadows over text in adjacent elements belonging to the
      same stack level and stacking context.</p>

    <p class="note">The painting order of shadows defined here is the opposite
      of that defined in the 1998
      <a href="http://www.w3.org/TR/1998/REC-CSS2-19980512">CSS2 Recommendation</a>.</p>

    <p>The <code>text-shadow</code> property applies to both the
      <code>::first-line</code> and <code>::first-letter</code>
      pseudo-elements.</p>

  <h3 id="text-outline">
    Text Outlines: the 'text-outline' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-outline</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | 
            [
              <a href="http://www.w3.org/TR/css3-color/#color0"><span class="value-inst-color">&lt;color&gt;</span></a>
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>?
            |
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>?
              <a href="http://www.w3.org/TR/css3-color/#color0"><span class="value-inst-color">&lt;color&gt;</span></a>
            ]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>a color plus two absolute &lt;length&gt;s</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies a text outline where the first length represents
      the outline's thickness and the second represents an optional blur radius.
      The outline never overlays the text itself. Its shape is the same as that
      obtained by applying text shadows in every radial direction, i.e. all text
      shadows whose offsets satisfy the equation
      <code>x<sup>2</sup> + y<sup>2</sup> = thickness<sup>2</sup></code>. The
      blur radius is treated the same as for 'text-shadow'.</p>

    <p class="issue">The Timed-Text WG <a href="http://lists.w3.org/Archives/Public/public-tt/2004Aug/0008.html">had
     suggestions</a> for some keywords
     (text-outline: normal|heavy|light;) as well as a &lt;length&gt; thickness. Should
     these be added? How would they be defined? (Maybe use (thin|medium|thick)
     as in <a href="http://www.w3.org/TR/CSS21/box.html#border-width-properties">border-width</a>?)</p>

    <p>A color value must be specified before or after the length values of
      the outline effect. The color value will be used as the color of the
      outline.</p>

    <p>Implementations may ignore the blur radius when text outline is combined
      with a <a href="#text-shadow">text shadow</a>.</p>

<h2 id="ui">This section should move to CSS3 UI</h2>
  <h3 id="text-overflow"><a name="text-overflow-props"></a><a name="text-overflow-mode"></a><a name="text-overflow-ellipsis"></a><a name="ellipsis-def"></a>

    Overflow Ellipsis: the 'text-overflow' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-overflow</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>clip | ellipsis | <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-string"><span class="value-inst-string">&lt;string&gt;</span></a>
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>clip</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>no</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the behavior when text overflows containing element.
     Values have the following meanings:</p>

    <dl>
      <dt><dfn title="text-overflow:clip"><code>clip</code></dfn></dt>
        <dd>Clip text as appropriate. Glyphs may be only partially rendered.</dd>
      <dt><dfn title="text-overflow:ellipsis"><code>ellipsis</code></dfn></dt>
        <dd>Render an ellipsis (U+2026) to represent clipped text.</dd>
      <dt><dfn title="text-overflow:<string>"><code><var>&lt;string&gt;</var></code></dfn></dt>
        <dd>Render the given string to represent clipped text.</dd>
    </dl>

<h2  class="no-num" id="changes">Changes</h2>
  <h3 id="changes-2003">
  Changes from the <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/">May
  2003 CSS3 Text <abbr title="Candidate Recommendation">CR</abbr></a></h3>

  <p>Much of the text has been rewritten or severely revised, so all changes
    will not be listed here. Highlights include:</p>
  <ul>
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#line-break" class="property">'line-break'</a>
        and <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#word-break-cjk" class="property">'word-break-*'</a>
        properties have been reorganized and redesigned as
        <a href="#line-break" class="property">'line-break'</a> and
        <a href="#word-break" class="property">'word-break'</a> property.</li>
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#wrap-option" class="property">'wrap-option'</a>
        property has been replaced by the
        <a href="#text-wrap" class="property">'text-wrap'</a> and
        <a href="#word-break" class="property">'word-break'</a> property.</li>
    <li>Added 'auto' value to 'line-break', which allows the UA to vary
      breaking strictness based on the effective line length.
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#linefeed-treatment" class="property">'linefeed-treatment'</a>,
        <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#white-space-treatment" class="property">'white-space-treatment'</a>,
        and <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#all-space-treatment" class="property">'all-space-treatment'</a>
        properties have been replaced by the
        <a href="#white-space-collapsing" class="property">'white-space-collapsing'</a> property.</li>
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#min-font-size" class="property">'min-font-size'</a>
        and <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#max-font-size" class="property">'max-font-size'</a>
        properties have been delegated to the next revision of the
        <a href="http://www.w3.org/TR/css3-fonts/">CSS3 Fonts</a> module.
    <li>Change 'text-align' property's vertical text behavior for the 'left' and 'right'
        values to be relative to LTR text rather than relative to the beginning
        of the line stack.
    <li>Added 'match-parent' keyword to 'text-align' to address some bidi
      use cases such as aligning lists.
    <li>Allow keyword and &lt;string&gt; to be specified jointly for
      'text-align' to handle degenerate cases.
    <li>The 'size' value has been removed from the
        <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#text-align-last" class="property">'text-align-last'</a>
        property.
    <li>The 'newspaper' value for <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#text-justify" class="property">'text-justify'</a>
        has been dropped in favor of using minimum and maximum limits set on
        the <a href="#word-spacing" class="property">'word-spacing'</a> and
        <a href="#letter-spacing" class="property">'letter-spacing'</a>
        properties to guide justification.
    <li>Added ''trim'' keyword to 'text-justify' as a replacement to
      'text-justify-trim'.
    <li>Removed ''tibetan'' keyword to 'text-justify'.
    <li>The <a href="#word-spacing" class="property">'word-spacing'</a>
        and <a href="#letter-spacing" class="property">'letter-spacing'</a>
        now take percentage values.</li>
    <li>The new <a href="#text-wrap" class="property">'text-wrap'</a> property's
        'suppress' value allows authors to suppress text wrapping within an
        element with respect to its surrounding text <em>without forbidding
        correctly-restricted breaks when they are needed</em>.
    <li>The <a href="#line-break-transform">automatic line break conversions</a>
        specified in the <a href="#white-space-rules">white space processing
        rules</a> have been changed to <em>try</em> not to break existing East
        and Southeast Asian content. Explicit control of these rules through
        the <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#linefeed-treatment" class="property">'linefeed-treatment'</a>
        property has been removed because style sheets should not be expected
        to adapt to the source code formatting style.
    <li><a href="#text-justify">Text justification</a> has been much more
        explicitly specified with prioritized expansion opportunities.
    <li><a href="#text-justify">'text-justify-trim'</a> has been dropped
        in favor of the ''trim'' keyword for the 'text-justify' property.
    <li>Added ''end'' and ''allow-end'' value to 'punctuation-trim'.
    <li><a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#kerning-props">'kerning-mode: contextual'</a>
        has been replaced with <a href="#punctuation-trim">'punctuation-trim: adjacent'</a>.
        Any further controls for kerning will likely be delegated to the Fonts
        module.
    <li>Added ''punctuation'' keyword to 'text-autospace' property.
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#text-decoration-overview">text
        decoration properties</a> for controlling underline/overline/strike-through
        line decorations have been replaced by a <a href="#line-decoration">new
        set of properties</a> and the prose has been aligned with CSS2.1.
    <li>The <a href="#text-shadow">'text-shadow'</a> property now inherits,
        which makes more sense and is consistent with recent implementation.
        The default color is now UA-specified, which is more reasonable than
        defaulting to the current text color.
        The definition now also mentions that it applies to text decoration
        and makes a few minor clarifications.
    <li>The <a href="#text-outline">'text-outline'</a> property has been added
        in response to <a href="http://lists.w3.org/Archives/Member/w3c-css-wg/2004JulSep/0113.html">feedback</a>
        from the Timed-Text WG and Ada Chan. Its design derives from a
        <a href="http://lists.w3.org/Archives/Member/w3c-css-wg/2004JulSep/0130.html">discussion</a>
        of requirements within the CSS Working Group.
    <li>The <a href="#text-emphasis">'text-emphasis-*'</a> properties have been
        added to replace the
        <a href="http://www.w3.org/TR/2002/WD-css3-fonts-20020802/#font-emphasize-props">'font-emphasis'</a>
        property from the CSS3 Fonts module.
    <li>The definition for <a href="#text-indent">'text-indent'</a> has been
        replaced with the precise text
        <a href="http://lists.w3.org/Archives/Member/w3c-css-wg/2003JanMar/0323">sent
        in</a> by Ian Hickson and fantasai on 8 March 2003
        (<a href="http://lists.w3.org/Archives/Member/w3c-css-wg/2003JanMar/0364.html">minus</a>
        the 'text-align' dependence rules).
    <li>Added ''each-line'' keyword to 'text-indent'.
    <li>The <a href="#hanging-punctuation">'hanging-punctuation'</a> property
        has been redesigned with several combinable values instead of
        ''start'', ''end'', and ''both'' to eliminate the script and language
        dependencies.
    <li>The <a href="#text-overflow">'text-overflow'</a> properties have
        been compressed into one property and given a much more precise
        specified behavior.
    <li>Added ''fullwidth'' and ''large-kana'' to 'text-transform' property.
  </ul>

  <p><a name="Progression"></a>
     <a name="direction"></a>
     <a name="block-progression"></a>
     <a name="writing-mode"></a>
     <a name="GlyphOrientation"></a>
     <a name="glyph-orientation-vertical"></a>
     <a name="glyph-orientation-horizontal"></a>
     <a name="embedding"></a>
     <a name="unicode-bidi"></a>
     <a name="text-combine-prop"></a>
     <a name="text-combine"></a>
    Sections relating to bidirectional and vertical text layout
    will be moved to a separate Writing Modes module. These features may
    change greatly from the last revision, but they have not been dropped.
    The vertical text feature, for example, will likely be based on the
    methods described in <a href="http://www.unicode.org/notes/tn22/">Unicode
    Technical Note #22</a>.</p>

  <p><a name="text-script-prop"></a>
    The text-script property has been dropped, since it does not
    belong in the style layer.

  <p><a name="min-max-font-size-prop"></a>
     <a name="min-font-size"></a>
     <a name="max-font-size"></a>
     <a name="kerning-props"></a>
     <a name="kerning-mode"></a>
     <a name="kerning-pair-threshold"></a>
    Controls over kerning have been moved to the
    <a href="http://www.w3.org/TR/css3-fonts">CSS Fonts Module</a>.</p>

  <p><a name="document-grid"></a>
    <a name="grid-introduction"></a>
    <a name="line-grid-mode-prop"></a>
    <a name="line-grid-mode"></a>
    <a name="line-grid-progression-prop"></a>
    <a name="line-grid-progression"></a>
    <a name="line-grid-prop"></a>
    <a name="line-grid"></a>
    The line grid properties have been removed. There is currently no
    plan to add them back, although a document grid feature may be added
    to future CSS modules.</p>

  <h3 id="recent-changes">
  Changes from the <a href="http://www.w3.org/TR/2007/WD-css3-text-20070306/">March
  2007 CSS3 Text <abbr title="Working Draft">WD</abbr></a></h3>

  <p>Major changes include:</p>

  <ul>
    <li>White space collapsing rules have been sync'ed with updates to CSS2.1,
      and the introductory prose rewritten.
    <li>Resplit 'word-break' into 'line-break' and 'word-break' controls,
      affecting CJK and non-CJK scripts respectively. This is very close
      to IE's implementation (hence the somewhat confusing names), with
      the exception that ''keep-all'' functionality, which affects CJK
      scripts, was moved from 'word-break' to 'line-break'.
    <li>Added 'auto' value to 'line-break', which allows the UA to vary
      breaking strictness based on the effective line length.
    <li>Added 'match-parent' keyword to 'text-align' to address some bidi
      use cases such as aligning lists.
    <li>Allow keyword and &lt;string&gt; to be specified jointly for
      'text-align' to handle degenerate cases.
    <li>Added ''trim'' keyword to 'text-justify' as a replacement to
      'text-justify-trim'.
    <li>Removed ''tibetan'' keyword to 'text-justify'.
    <li>Revised 'text-justify' section.
    <li>Added ''allow-end'' value to 'punctuation-trim'.
    <li>Re-added 'text-autospace' property, and added new ''punctuation'' keyword.
    <li>Added ''each-line'' keyword to 'text-indent'.
    <li>Linked 'text-shadow' definition to 'box-shadow' definition.
    <li>Renamed values for 'hanging-punctuation' to be clearer; added
      ''allow-end''/''force-end'' distinction.
    <li>Wrote out 'text-decoration' section.
    <li>Expanded 'text-emphasis' controls.
    <li>Drafted syntax for 'text-overflow'.
    <li>Added back 'text-transform' with new values for ''fullwidth''
      and ''large-kana''.
  </ul>

<h2 class="no-num" id="acknowledgements">
  Acknowledgements</h2>

  <p>This specification would not have been possible without the help from:
    Ayman Aldahleh, Bert Bos, Tantek Çelik, Stephen Deach, Martin Dürst,
    Laurie Anna Edlund, Ben Errez, Yaniv Feinberg, Arye Gittelman, Ian
    Hickson, Martin Heijdra, Richard Ishida, Koji Ishii, Masayasu Ishikawa,
    Michael Jochimsen, Eric LeVine, Ambrose Li, Chris Lilley, Shinyu Murakami,
    Paul Nelson, Chris Pratley, Marcin Sawicki, Arnold Schrijver, Rahul Sonnad,
    Michel Suignard, Takao Suzuki, Frank Tang, Chris Thrasher, Etan Wexler,
    Chris Wilson, Masafumi Yabe and Steve Zilles.</p>

<h2 class="no-num">Appendix A: References</h2>

<h3 class="no-num" id="normative-ref">Normative references</h3>
<!--normative-->

<h3 class="no-num" id="informative-ref">Informative references</h3>
<!--informative-->

<h2 class="no-num"> Appendix B: Property index</h2>
<!-- properties -->

<h2 class="no-num" id="default-stylesheet">Appendix C: Default UA Stylesheet</h2>

    <p>This section is informative, and is to help UA developers to implement
      default stylesheet, but UA developers are free to ignore or change.</p>

    <div class="example">
      <pre><code class="css">
<!-- -->/* make list items align together */
<!-- -->li { text-align: match-parent; }
<!-- -->/* disable inheritance of text-emphasis marks to ruby text:
<!-- -->  emphasis marks should only apply to base text */
<!-- -->rt { text-emphasis: none; }
<!-- -->
<!-- -->:root:lang(zh-Hans) {
<!-- -->/* default emphasis mark position is 'under' for Chinese (Simplified) */
<!-- -->  text-emphasis-position: under;
<!-- -->}
<!-- -->
</code></pre>
    </div>
    <p class="issue">If you find any issues, recommendations to add, or corrections,
      please send the information to <a href="mailto:www-style@w3.org">www-style@w3.org</a>
      with <kbd>[css3-text]</kbd> in the subject line.</p>


</body>
</html>

<!DOCTYPE html><html lang=en><head>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>CSS Inline Layout Module Level 3</title>
  <link href=../default.css rel=stylesheet type=text/css>
  <link href=../csslogo.ico rel="shortcut icon" type=image/x-icon>
  <style>
  body {
    background: url("https://www.w3.org/StyleSheets/TR/logo-ED") top left no-repeat white;
    background-attachment: fixed;
    color: black;
    font-family: sans-serif;
    margin: 0 auto;
    max-width: 50em;
    padding: 2em 1em 2em 70px;
  }
  :link { color: #00C; background: transparent }
  :visited { color: #609; background: transparent }
  a[href]:active { color: #C00; background: transparent }
  a[href]:hover { background: #ffa }

  a[href] img { border-style: none }

  h1, h2, h3, h4, h5, h6 { text-align: left }
  h1, h2, h3 { color: #005A9C; }
  h1 { font: 170% sans-serif }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  h4 { font: bold 100% sans-serif }
  h5 { font: italic 100% sans-serif }
  h6 { font: small-caps 100% sans-serif }

  .hide { display: none }

  div.head { margin-bottom: 1em }
  div.head h1 { margin-top: 2em; clear: both }
  div.head table { margin-left: 2em; margin-top: 2em }

  p.copyright { font-size: small }
  p.copyright small { font-size: small }

  pre { margin-left: 2em }
  dt { font-weight: bold }

  ul.toc, ol.toc {
    list-style: none;
  }
  </style>
<style media=print type=text/css>
    img#edge { width: 80%; height: 70%;}
    dt.label { display: run-in; }
</style>


</head>
<body class=h-entry>
<div class=head>
  <p data-fill-with=logo><a class=logo href=http://www.w3.org/>
    <img alt=W3C height=48 src=https://www.w3.org/Icons/w3c_home width=72>
</a>
</p>
  <h1 class="p-name no-ref" id=title>CSS Inline Layout Module Level 3</h1>
  <h2 class="no-num no-toc no-ref heading settled" id=subtitle><span class=content>Editor’s Draft,
    <span class=dt-updated><span class=value-title title=20141029>29 October 2014</span></span></span></h2>
  <div data-fill-with=spec-metadata><dl><dt>This version:<dd><a class=u-url href=http://dev.w3.org/csswg/css-inline/>http://dev.w3.org/csswg/css-inline/</a><dt>Latest version:<dd><a href=http://www.w3.org/TR/css-inline/>http://www.w3.org/TR/css-inline/</a><dt>Previous Versions:<dd><a href=http://www.w3.org/TR/2002/WD-css3-linebox-20020515/ rel=previous>http://www.w3.org/TR/2002/WD-css3-linebox-20020515/</a><dt>Feedback:<dd><span><a href="mailto:www-style@w3.org?subject=[css-inline] feedback">www-style@w3.org</a> with subject line “<kbd>[css-inline] <var>… message topic …</var></kbd>” (<a href=http://lists.w3.org/Archives/Public/www-style/ rel=discussion>archives</a>)</span><dt>Editors:<dd><div class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:dauwhe@gmail.com>Dave Cramer</a> (<span class="p-org org">Hachette Livre</span>)</div><dd><div class="p-author h-card vcard"><a class="p-name fn u-url url" href=http://fantasai.inkedblade.net/contact>Elika J. Etemad</a> (<span class="p-org org">Invited Expert</span>)</div><dd><div class="p-author h-card vcard"><a class="p-name fn u-email email" href=mailto:szilles@adobe.com>Steve Zilles</a> (<span class="p-org org">Adobe</span>)</div><dt>Issues list:<dd><span><a href="https://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;product=CSS&amp;component=Linebox&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED">CSS3 Line Layout issues in Bugzilla</a></span></dl></div>
  <div data-fill-with=warning></div>
  <p class=copyright data-fill-with=copyright><a href=http://www.w3.org/Consortium/Legal/ipr-notice#Copyright>Copyright</a> © 2014 <a href=http://www.w3.org/><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href=http://www.csail.mit.edu/><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href=http://www.ercim.eu/><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href=http://www.keio.ac.jp/>Keio</a>, <a href=http://ev.buaa.edu.cn/>Beihang</a>), All Rights Reserved. W3C <a href=http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer>liability</a>, <a href=http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks>trademark</a> and <a href=http://www.w3.org/Consortium/Legal/copyright-documents>document use</a> rules apply.
</p>
  <hr title="Separator for header">
</div>

<h2 class="no-num no-toc no-ref heading settled" id=abstract><span class=content>Abstract</span></h2>
<div class=p-summary data-fill-with=abstract><p>The CSS formatting model provides for a flow of elements and text inside of a container to be wrapped into lines.  The formatting of elements and text within a line, its positioning in the inline progression direction, and the breaking of lines are described in <a data-biblio-type=informative data-link-type=biblio href=#biblio-css3text title=CSS3TEXT>[CSS3TEXT]</a>.  This module describes the positioning in the block progression direction both of elements and text within lines and of the lines themselves.  This positioning is often relative to a baseline.  It also describes special features for formatting of first lines and drop caps.  It extends on the model in <a data-biblio-type=informative data-link-type=biblio href=#biblio-css2 title=CSS2>[CSS2]</a>.</p>

<a href=http://www.w3.org/TR/CSS/>CSS</a> is a language for describing the rendering of structured documents 
(such as HTML and XML) 
on screen, on paper, in speech, etc.</div>

<h2 class="no-num no-toc no-ref heading settled" id=status><span class=content>Status of this document</span></h2>
<div data-fill-with=status><p>
	This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress.

<p>
	The (<a href=http://lists.w3.org/Archives/Public/www-style/>archived</a>) public mailing list
	<a href="mailto:www-style@w3.org?Subject=%5Bcss-inline%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>
	(see <a href=http://www.w3.org/Mail/Request>instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “css-inline” in the subject,
	preferably like this:
	“[css-inline] <em>…summary of comment…</em>”

<p>
	This document was produced by the <a href=http://www.w3.org/Style/CSS/members>CSS Working Group</a>
	(part of the <a href=http://www.w3.org/Style/>Style Activity</a>).

<p>
	This document was produced by a group operating under
	the <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/>5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href=http://www.w3.org/2004/01/pp-impl/32061/status rel=disclosure>public list of any patent disclosures</a>
	made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential>Essential Claim(s)</a>
	must disclose the information in accordance with <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure>section 6 of the W3C Patent Policy</a>.

<p>
	This document is governed by the <a href=http://www.w3.org/2014/Process-20140801/>1 August 2014 W3C Process Document</a>.
</div>
<div data-fill-with=at-risk></div>

<h2 class="no-num no-toc no-ref heading settled" id=contents><span class=content>Table of Contents</span></h2>
<div data-fill-with=table-of-contents><ul class=toc><li><a href=#LineBox><span class=secno>1</span> <span class=content>Line box, Line stacking and Content height</span></a><ul class=toc><li><a href=#InlineFormatting><span class=secno>1.1</span> <span class=content>Inline formatting context</span></a><li><a href=#LineBoxWrapping><span class=secno>1.2</span> <span class=content>Inline-progression: Line Box wrapping</span></a><li><a href=#inline1><span class=secno>1.3</span> <span class=content>Block-progression dimensions: the 
<span class=property data-link-type=propdesc title=text-height>text-height</span> property</span></a><li><a href=#LineBoxHeight><span class=secno>1.4</span> <span class=content>Block progression positioning and spacing</span></a><ul class=toc><li><a href=#InlineBoxHeight><span class=secno>1.4.1</span> <span class=content>Line height adjustment: the
<span class=property data-link-type=propdesc title=line-height>line-height</span> property</span></a><li><a href=#LineStacking><span class=secno>1.4.2</span> <span class=content>Line Stacking: the
 <span class=property data-link-type=propdesc title=line-box-contain>line-box-contain</span> property</span></a><ul class=toc><li><a href=#old-remove-this><span class=secno>1.4.2.1</span> <span class=content>Old, remove this:</span></a></ul></ul></ul><li><a href=#baseline-alignment><span class=secno>2</span> <span class=content>Baseline alignment</span></a><ul class=toc><li><a href=#FontBaseline><span class=secno>2.1</span> <span class=content>Baseline information
provided by fonts</span></a><li><a href=#AlignmentBaselineType><span class=secno>2.2</span> <span class=content>Baseline
identifiers</span></a><li><a href=#BaselineAlignmentOverview><span class=secno>2.3</span> <span class=content>Overview
of the baseline alignment process</span></a><li><a href=#dominant-baseline-prop><span class=secno>2.4</span> <span class=content>Dominant
baseline: the <span class=property data-link-type=propdesc title=dominant-baseline>dominant-baseline</span> property</span></a><li><a href=#alignment-baseline-prop><span class=secno>2.5</span> <span class=content>Aligning the
alignment point of an element: the
<span class=property data-link-type=propdesc title=alignment-baseline>alignment-baseline</span> property</span></a><li><a href=#alignment-adjust-prop><span class=secno>2.6</span> <span class=content>Setting the
alignment point: the <span class=property data-link-type=propdesc title=alignment-adjust>alignment-adjust</span> property</span></a><li><a href=#baseline-shift-prop><span class=secno>2.7</span> <span class=content>Repositioning
the dominant baseline: the <span class=property data-link-type=propdesc title=baseline-shift>baseline-shift</span> property</span></a><li><a href=#vertical-align-prop><span class=secno>2.8</span> <span class=content>Vertical
alignment: the <span class=property data-link-type=propdesc title=vertical-align>vertical-align</span> shorthand baseline
alignment property</span></a><li><a href=#inline-box-align-prop><span class=secno>2.9</span> <span class=content>Inline box
alignment: the <span class=property data-link-type=propdesc title=inline-box-align>inline-box-align</span> property</span></a></ul><li><a href=#Initial><span class=secno>3</span> <span class=content>Initial Lines and Initial Letters</span></a><ul class=toc><li><a href=#InitialLine><span class=secno>3.1</span> <span class=content>Initial Lines</span></a><li><a href=#DropInitial><span class=secno>3.2</span> <span class=content>An Introduction to Initial Letters</span></a><li><a href=#selecting-drop-initials><span class=secno>3.3</span> <span class=content>Selecting Initial Letters</span></a><li><a href=#sizing-drop-initials><span class=secno>3.4</span> <span class=content>Creating Initial Letters: the <span class=property data-link-type=propdesc title=initial-letter>initial-letter</span> property</span></a><li><a href=#aligning-initial-letter><span class=secno>3.5</span> <span class=content>Alignment of Initial Letters</span></a><ul class=toc><li><a href=#initial-letter-replaced><span class=secno>3.5.1</span> <span class=content>Applying <span class=property data-link-type=propdesc title=initial-letter>initial-letter</span> to replaced elements</span></a></ul><li><a href=#initial-letter-exclusions><span class=secno>3.6</span> <span class=content>Space Around Initial Letters</span></a><li><a href=#initial-letter-paragraphs><span class=secno>3.7</span> <span class=content>Interactions of initial letters with surrounding paragraphs</span></a><ul class=toc><li><a href=#raised-sunken-caps><span class=secno>3.7.1</span> <span class=content>Raised and sunken caps</span></a><li><a href=#short-para-initial-letter><span class=secno>3.7.2</span> <span class=content>Short paragraphs with initial letters</span></a></ul></ul><li><a href=#properties><span class=secno>4</span> <span class=content>Properties index</span></a><li><a href=#profiles><span class=secno>5</span> <span class=content>Profiles</span></a><li><a href=#BaselineUsage><span class=secno></span> <span class=content>Appendix A: Usage of baseline alignment
(informative)</span></a><li><a href=#ack><span class=secno></span> <span class=content>Acknowledgments</span></a><li><a href=#conformance><span class=secno></span> <span class=content>
Conformance</span></a><ul class=toc><li><a href=#conventions><span class=secno></span> <span class=content>
Document conventions</span></a><li><a href=#conformance-classes><span class=secno></span> <span class=content>
Conformance classes</span></a><li><a href=#partial><span class=secno></span> <span class=content>
Partial implementations</span></a><li><a href=#experimental><span class=secno></span> <span class=content>
Experimental implementations</span></a><li><a href=#testing><span class=secno></span> <span class=content>
Non-experimental implementations</span></a></ul><li><a href=#references><span class=secno></span> <span class=content>References</span></a><ul class=toc><li><a href=#normative><span class=secno></span> <span class=content>Normative References</span></a><li><a href=#informative><span class=secno></span> <span class=content>Informative References</span></a></ul><li><a href=#index><span class=secno></span> <span class=content>Index</span></a><li><a href=#property-index><span class=secno></span> <span class=content>Property Index</span></a><li><a href=#issues-index><span class=secno></span> <span class=content>Issues Index</span></a></ul></div>



<h2 class="heading settled" data-level=1 id=LineBox><span class=secno>1. </span><span class=content>Line box, Line stacking and Content height</span><a class=self-link href=#LineBox></a></h2>

<p>This section describes inline boxes formatting, how lines are stacked 
together and a mechanism to adjust the content height of inline elements. Two 
terms: inline-progression dimension and block-progression dimension are used 
frequently in the section and are defined as follows

<p>The <b>inline-progression 
dimension</b> is a length in the direction of the inline-progression of a box. 
For an horizontal layout flow it can be perceived as related to the the width of 
the box. However for a vertical layout flow it will be related to the height of 
the box. The term inline-progression dimension is the neutral way to express 
that dimension independently of the layout flow.

<p>The <b>block-progression dimension</b> is a length in the direction of the 
block-progression of a box. For an horizontal layout flow it can be perceived as 
related to the height of the box. However for a vertical layout flow it will be 
related to the width of the box. The term block-progression dimension is the 
neutral way to express that dimension independently of the layout flow.

<h3 class="heading settled" data-level=1.1 id=InlineFormatting><span class=secno>1.1. </span><span class=content>Inline formatting context</span><a class=self-link href=#InlineFormatting></a></h3>

<p>In an inline formatting context, boxes are laid out in the inline-progression 
direction, one after 
the other, following the block-progression within the containing block. Borders, 
padding and inline-progression margins are respected between these boxes. The boxes may be aligned 
within the inline-progression in different ways: their under-edges or 
over-edges may be aligned, or the 
baselines of text within them may be aligned. The rectangular area that contains 
the boxes that form a line is called a <dfn data-dfn-type=dfn data-noexport="" id=line-box>line box<a class=self-link href=#line-box></a></dfn>.
<p>The inline-progression dimension (<a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visudet.html#propdef-width title=width>width</a> in horizontal flow) of a line box is 
determined by its containing block. The block-progression dimension (<a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visudet.html#propdef-height title=height>height</a> in 
horizontal flow) of a line box is determined by the rules given 
in the section on line height calculations. A line box is generally tall (relative) enough for all of the boxes it 
contains. However, it may be taller than the tallest box it contains (if, for 
example, boxes are aligned so that baselines line up). The alignment of boxes 
within a line box is determined by the
<a href=#baseline-alignment>baseline alignment</a> properties.</p>
<p>In general, when several inline boxes cannot fit within a single line box, 
they are distributed among two or more block-progression stacked line boxes. The 
exact wrapping of inline boxes at the line ending edge is determined by several 
text related property categories such as line-breaking, word-breaking, text 
wrapping and white-space management. Thus, a 
paragraph is a stack of line boxes.</p>
<p>Line boxes are stacked together in the block-progression direction
without any separation.  The block-progression dimension of the line box
is determined by the contents of the line box (including the root inline
box) and the <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a> property.</p>
<p>A containing block defines a <b>root inline box</b> which wraps all the 
inline children of the block element, including the anonymous inline boxes. 
It inherits inheritable properties from the parent block 
box (like <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a>), while non-inherited
properties have their default values.  The root inline box establishes a
baseline for vertical alignment and may affect the height of the line
boxes.</p>
<p>Although margins, borders, and padding of non-replaced elements do not enter 
into inline box block-progression dimension calculation (and thus the line box 
calculation), they are still rendered around inline boxes. This means that if 
the block-progression dimension of a line box is shorter than the
<a href=http://www.w3.org/TR/REC-CSS2/box.html#outer-edge>outer edges</a> of
the boxes it contains, backgrounds and colors of padding and borders may "bleed" 
into adjacent line boxes. However, in this case, some user agents may use the 
line box to "clip" the border and padding areas (i.e., not render them). </p>

<h3 class="heading settled" data-level=1.2 id=LineBoxWrapping><span class=secno>1.2. </span><span class=content>Inline-progression: Line Box wrapping</span><a class=self-link href=#LineBoxWrapping></a></h3>

<p>In general, the start edge of a line box touches the start edge of its 
containing block and the end edge touches the end edge of its containing block. 
However, floating boxes may come between the containing block edge and the line 
box edge. Thus, although line boxes in the same inline formatting context 
generally have the same inline-progression dimension (that of the 
containing block), they may vary if available inline-progression space
is reduced due to 
floats. Line boxes in the same inline formatting context may vary in 
block-progression dimension.</p>
<p>When the total inline-progression dimension of the inline boxes on a line is less than the 
inline-progression dimension of 
the line box containing them, their inline-progression distribution within the line box 
is determined by the
<a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-text-3/#propdef-text-align title=text-align>text-align</a> property. If that
property has the value <span class=css>justify</span>, the user agent may stretch the inline boxes as 
well. </p>
<p>When line-breaking opportunities are available within inline boxes and are 
not pre-empted by the white-space properties, the inline boxes located at the 
ending edge of the line box may be split into several boxes and these boxes 
distributed across several line boxes. When an inline box is split, margins, borders, and padding have no visual 
effect where the split occurs (or at any split, when they are several). Formatting of margins, borders, and padding may 
not be fully defined if the split occurs within a bidirectional embedding. </p>
<p>Inline boxes may also be split into several boxes <em>within the same line 
box</em> due to <a href=#direction>bidirectional text processing</a>. </p>
<div class=html-example>
  Here is an example of inline box construction. The following paragraph 
  (created by the HTML block-level element P) contains anonymous text 
  interspersed with the elements EM and STRONG:
  <pre>&lt;P&gt;Several &lt;EM&gt;emphasized words&lt;/EM&gt; appear
&lt;STRONG&gt;in this&lt;/STRONG&gt; sentence, dear.&lt;/P&gt;
</pre>
  <p>The P element generates a block box that contains five inline boxes, three 
  of which are anonymous:</p>
  <ul>
    <li>Anonymous: "Several" </li>
    <li>EM: "emphasized words" </li>
    <li>Anonymous: "appear" </li>
    <li>STRONG: "in this" </li>
    <li>Anonymous: "sentence, dear." </li>
  </ul>
  <p>To format the paragraph, the user agent flows the five boxes into line 
  boxes. In this example, the box generated for the P element establishes the 
  containing block for the line boxes. If the containing block is sufficiently 
  wide (relative) , all the inline boxes will fit into a single line box: </p>
  <pre> Several <em>emphasized words</em> appear <strong>in this</strong> sentence, dear.
</pre>
  <p>If not, the inline boxes will be split up and distributed across several 
  line boxes. The previous paragraph might be split as follows: </p>
  <pre>Several <em>emphasized words</em> appear
<strong>in this</strong> sentence, dear.
</pre>
  <p>or like this: </p>
  <pre>Several <em>emphasized</em>  
<em>words</em> appear <strong>in this</strong> 
sentence, dear.
</pre>
</div>
<p>In the previous example, the EM box was split into two EM boxes (call them 
"split1" and "split2"). Margins, borders, padding, or text decorations have no 
visible effect after split1 or before split2. </p>
<div class=html-example>
  Consider the following example:
  <pre>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
    &lt;TITLE&gt;Example of inline flow on several lines&lt;/TITLE&gt;
    &lt;STYLE type="text/css"&gt;
      EM {
        padding: 2px; 
        margin: 1em;
        border-width: medium;
        border-style: dashed;
        line-height: 2.4em;
      }
    &lt;/STYLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;P&gt;Several &lt;EM&gt;emphasized words&lt;/EM&gt; appear here.&lt;/P&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;
</pre>
  <p>Depending on the width of the P, the boxes may be distributed as follows:</p>
  <div class=figure>
    <img alt="Image illustrating the effect of line breaking on the
display of margins, borders, and padding." height=99 src=inline-layout.gif width=260><span class=dlink>   <a href=http://www.w3.org/TR/REC-CSS2/images/longdesc/inline-layout-desc.html name=img-inline-layout title="Long description for illustration of margin/border
behavior on split inline box">[D]</a></span></div>
  <ul>
    <li>The margin is inserted before "emphasized" and after "words". </li>
    <li>The padding is inserted before, above, and below "emphasized" and after, 
    above, and below "words". A dashed border is rendered on three sides in each 
    case. </li>
  </ul>
</div>

<h3 class="heading settled" data-level=1.3 id=inline1><span class=secno>1.3. </span><span class=content>Block-progression dimensions: the 
<a class=property data-link-type=propdesc href=#propdef-text-height title=text-height>text-height</a> property</span><a class=self-link href=#inline1></a></h3>

<p>Each inline box has a block-progression dimension which is derived from the 
following parameters: the <a class=property data-link-type=propdesc href=#propdef-text-height title=text-height>text-height</a> and <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> properties for 
non-replaced elements, the height or the width for replaced elements (depending 
on the text flow being horizontal or vertical respectively) and the stacked 
block-progression dimension for inline-block elements (identical to what is done 
for block-level elements).</p>
<p>The block-progression dimension determines the position of the padding, 
border and margin for the element but does not necessarily determine the line 
stacking progression as this is also affected by the <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a>
property.</p>

<table class=propdef>
  <tbody>
	<tr>
	  <td><em>Name:</em></td>
	  <td><dfn class=css data-dfn-type=property data-export="" id=propdef-text-height>text-height<a class=self-link href=#propdef-text-height></a></dfn></td>
	</tr>
	<tr>
	  <td><em>Value:</em></td>
	  <td>auto | font-size | text-size | max-size | &lt;number&gt;</td>
	</tr>
	<tr>
	  <td><em>Initial:</em></td>
	  <td>auto</td>
	</tr>
	<tr>
	  <td><em>Applies to:</em></td>
	  <td>inline elements and parents of element with display:ruby-text</td>
	</tr>
	<tr>
	  <td><em>Inherited:</em></td>
	  <td>yes</td>
	</tr>
	<tr>
	  <td><em>Percentages:</em></td>
	  <td>N/A</td>
	</tr>
	<tr>
	  <td><em>Media:</em></td>
	  <td>visual</td>
	</tr>
	<tr>
	  <td><em>Computed value:</em></td>
	  <td>specified value (except for initial and inherit)</td>
	</tr>
  </tbody>
</table>

<p>The <a class=property data-link-type=propdesc href=#propdef-text-height title=text-height>text-height</a> property determine the block-progression dimension of the 
text content area of an inline box (non-replaced elements) . Possible values:</p>

<dl>
<dt><strong>auto</strong>

<dd>The block-progression dimension is based either on the em square determined 
by the computed element font-size property value or the cell-height (ascender + descender) 
related to the computed element font-size as chosen by the user agent.

<dt>font-size</dt>
<dd>The block-progression dimension is based on the em square as determined by 
the computed element font-size. </dd>
<dt>text-size</dt>
<dd>The block-progression dimension is based on the cell-height (ascender + 
descender) related to the computed element font-size.</dd>
<dt>max-size</dt>
<dd>The block-progression dimension is based on the maximum extents toward the 
over-edge and under-edge of the box obtained by considering all children 
elements located on the same line, ruby annotations (elements with 'display:ruby-text') 
and baseline shifted elements.</dd>
<dt>&lt;number&gt;</dt>
<dd>The block progression dimension is based on &lt;number&gt; times the em square as 
determined by the computed font-size.</dd>
</dl>

<p>When more than one font-size is used (this could happen when glyphs are found 
in different fonts), it is recommended that the largest font-size provides the em square and the cell-height.</p>

<p>Although the <a class=property data-link-type=propdesc href=#propdef-text-height title=text-height>text-height</a> property does not apply directly to block 
elements, it applies to their anonymous children inline boxes (if any).</p>

<p>For replaced elements, the block-progression dimension is determined by the 
outer edges (i.e. margin edge).</p>

<h3 class="heading settled" data-level=1.4 id=LineBoxHeight><span class=secno>1.4. </span><span class=content>Block progression positioning and spacing</span><a class=self-link href=#LineBoxHeight></a></h3>

<h4 class="heading settled" data-level=1.4.1 id=InlineBoxHeight><span class=secno>1.4.1. </span><span class=content>Line height adjustment: the
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property</span><a class=self-link href=#InlineBoxHeight></a></h4>

<p>The <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property controls the amount of leading space 
which is added over and under an inline box (including the root inline box)
to determine the extended block-progression dimension of the inline box.
The value of the <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a> property determines how the
block-progression dimension and the extended block-progression dimension
affect the height of the line box.
The sum of the possible leading space and the block-progression dimension is called the <dfn data-dfn-type=dfn data-noexport="" id=extended-block-progression-dimension>extended block-progression dimension<a class=self-link href=#extended-block-progression-dimension></a></dfn>.
That extended value is not used for border, margin and padding placement but is used for vertical alignment (relative) and line box block-progression dimension.
</p>

<p>The <span class=index-def title=leading><em>leading</em></span><span title=leading> 
for an inline non-replaced element 
is defined as the d</span>ifference between the block-progression dimension as 
determined by the <a class=property data-link-type=propdesc href=#propdef-text-height title=text-height>text-height</a> property and the computed value 
of
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a>. Half the leading is
called the <span class=index-def title=half-leading><em>
half-leading</em></span>, each half-leading is 
located over and under the element. 
The <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> value 
will specify the <em>exact</em> extended block-progression dimension of each box 
generated by the element.
(Depending on the value of <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a>, the extended block-progression dimension may be ignored.)
(For inline
<a href=http://www.w3.org/TR/REC-CSS2/conform.html#replaced-element>replaced</a>
elements, both the block-progression dimension and the extended 
block-progression dimension of the box are given by the
outer edges (i.e. margin edge).)
Anonymous inline boxes use the <a class=property data-link-type=propdesc href=#propdef-text-height title=text-height>text-height</a> and 
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property values specified for their parent.</p>
<p>Depending on the 
value of the <a class=property data-link-type=propdesc href=#propdef-line-stacking-strategy title=line-stacking-strategy>line-stacking-strategy</a>, the <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> value may provide a 
minimum or exact extended block-progression dimension for each generated inline box and 
the line boxes. How the leading space is distributed between the over-edge and 
the under-edge of inline elements within the line box depends on their 
vertical-align property value.
<span class=issue id=issue-9934f9eb><a class=self-link href=#issue-9934f9eb></a>[LDB: I don’t understand this paragraph.]</span>
</p>
<p>Empty inline elements generate empty inline boxes, but these boxes still have 
a line height, and thus may influence the line box block-progression dimension, 
as if the empty box contained an infinitely narrow letter.</p>
<p>A inline box which otherwise would influence the line box extended 
progression dimension may be removed from the computation by using a special 
value of the line-height property: <span class=css>none</span>.</p>

<table class=propdef id=name-62>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-line-height>line-height<a class=self-link href=#propdef-line-height></a></dfn><tr>
<td><em>Value:</em>

<td>normal |
        <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#number-value title="<number>">&lt;number&gt;</a> |
        <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a> |
        <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | none

<tr>
<td><em>Initial:</em>

<td>normal<tr>
<td><em>Applies to:</em>

<td>all elements<tr>
<td><em>Inherited:</em>

<td>yes

<tr>
<td><em>Percentages:</em>

<td>refer to the font size of the element itself <tr>
<td><em>Media:</em>

<td><a class=noxref href=/TR/REC-CSS2/media.html#visual-media-group>visual</a>

<tr>
<td><em>Computed value:</em>

<td>see prose</table>

<p>Values for this property have the following meanings:</p>
<dl>
  <dt><strong>normal</strong> </dt>
  <dd>Tells user agents to set the
  <a href=http://www.w3.org/TR/REC-CSS2/cascade.html#computed-value>computed
  value</a> to a "reasonable" value based on the font size of the element. The 
  value has the same meaning as <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#number-value title="<number>">&lt;number&gt;</a>. We recommend a 
  computed value for <span class=css>normal</span> between 1.0 to 1.2. The user agent may allow the 
  &lt;number&gt; to vary depending on the metrics of the font(s) being used.</dd>
  <dt><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>
  </dt>
  <dd>The box height is set to this length. Negative values are illegal. The 
  length is the computed value.</dd>
  <dt><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#number-value title="<number>">&lt;number&gt;</a>
  </dt>
  <dd>The <a href=http://www.w3.org/TR/REC-CSS2/cascade.html#computed-value>
  computed value</a> of the property is this number multiplied by the element’s 
  font size. Negative values are illegal. However, the number, not the
  <a href=http://www.w3.org/TR/REC-CSS2/cascade.html#computed-value>computed
  value</a>, is inherited. </dd>
  <dt><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a>
  </dt>
  <dd>The <a href=http://www.w3.org/TR/REC-CSS2/cascade.html#computed-value>
  computed value</a> of the property is this percentage multiplied by the 
  element’s computed font size. Negative values are illegal.</dd>
  <dt>none</dt>
  <dd>For inline-level elements, the element does not influence the <a data-link-type=dfn href=#extended-block-progression-dimension title="extended block-progression dimension">extended
  block-progression dimension</a> of the line. The computed value is the
  specified value (<span class=css>none</span>).  For block-level elements, equivalent to <span class=css>normal</span>
  (and the computed value is <span class=css>normal</span>).
  <span class=issue id=issue-5e1feaa0><a class=self-link href=#issue-5e1feaa0></a>This definition should be briefer, and should
  refer to the next section.</span></dd>
</dl>
<div class=example>
  <p style="DISPLAY: none">Example(s):</p>
  <p>The three rules in the example below have the same resultant line height:
  </p>
  <pre>DIV { line-height: 1.2; font-size: 10pt }     /* number */
DIV { line-height: 1.2em; font-size: 10pt }   /* length */
DIV { line-height: 120%; font-size: 10pt }    /* percentage */
</pre>
</div>
<p>When an element contains text that is rendered in more than one font, user 
agents should determine the
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> value according to
the largest font size (when appropriate). </p>
<p>Note that replaced elements have a
<a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> and a
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property, even if
they are not used directly to determine the extended block-progression dimension of the box: <span class=css>em</span> and <span class=css>ex</span> 
values are relative to values of <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> and percentage values for
<a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a> are relative
to values of the extended block-progression dimension.  <span class=issue id=issue-508c6175><a class=self-link href=#issue-508c6175></a>[LDB: The second part of this sentence is a significant change from CSS2, and also doesn’t mauke senes in the context of the sentence.]</span></p>

<p>When the
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> value is less than
the font size, the final inline box extended block-progression dimension will be less than the font size and 
the rendered glyphs will "bleed" outside the box. If such a box touches the edge 
of a line box, the rendered glyphs will also "bleed" into the adjacent line box.</p>

<h4 class="heading settled" data-level=1.4.2 id=LineStacking><span class=secno>1.4.2. </span><span class=content>Line Stacking: the
 <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a> property</span><a class=self-link href=#LineStacking></a></h4>


<table class=propdef id=name-30>
<tbody>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-line-box-contain>line-box-contain<a class=self-link href=#propdef-line-box-contain></a></dfn><tr>
<td><em>Value:</em>

<td>[ block || inline || font || glyphs || replaced || inline-box ] | none |
inherit | initial

<tr>
<td><em>Initial:</em>

<td>block inline replaced

<tr>
<td><em>Applies to:</em>

<td>block-level elements

<tr>
<td><em>Inherited:</em>

<td>yes

<tr>
<td><em>Percentages:</em>

<td>N/A

<tr>
<td><em>Media:</em>

<td>visual

<tr>
<td><em>Computed value:</em>

<td>specified value (except for <span class=css>inherit</span> and <span class=css>initial</span>)
</table>

<p>This property enumerates which aspects of the elements in a line box
contribute to the height height of that line box.

<dl>
<dt>block

<dd>The extended block progression dimension of the root inline box
must fit within the line box.

<dt>inline

<dd>The extended block progression dimension of all non-replaced
inline boxes whose <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> is not <span class=css>none</span> in the line box must fit within the line box.

<dt>font

<dd>The block progression dimension of all non-replaced inline boxes in
the line whose <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> is not <span class=css>none</span> that directly (i.e., within
the box but not within one of its descendants) contain non-removed text
must fit within the line box, where non-removed text is any characters
not removed based on the values of the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-text-3/#propdef-white-space title=white-space>white-space</a>.  <span class=issue id=issue-4b06b910><a class=self-link href=#issue-4b06b910></a>[LDB: This isn’t quite right.  What about zwnj,
etc.?</span>

<dt>glyphs

<dd>The block progression dimension of all the glyph bounding boxes of
glyphs  in the line box must fit within the line box.</dd>

<dt>replaced

<dd>The margin box of all <span title="replaced element">replaced elements</span> within the line
must fit within the line box.

<dt>inline-box

<dd>The margin-box of all non-replaced inline elements in the line whose
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> is not <span class=css>none</span> must fit within the line box.  <span class=issue id=issue-42900629><a class=self-link href=#issue-42900629></a>Should this split into inline-border and
inline-margin?</span>

</dl>

<p>If the property has no value for all elements within a line, then the line
box has 0 height, and the line within the anonymous inline established by the
block that coincides with the line block is the baseline of that anonymous
inline block (or should it be determined by the <a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a> property of
the block?). <span class=issue id=issue-25a5cd45><a class=self-link href=#issue-25a5cd45></a>[This is arbitrary. Does anyone have better
ideas?]</span>

<p class=note>Note that the CSS2 model is equivalent to 'block inline
replaced' but the backwards-compatible HTML model is similar to (but not
exactly) 'font replaced' [1].

<p class=issue id=issue-f68e4558><a class=self-link href=#issue-f68e4558></a>Concerns: * How does this work with the cascade? * What
about determining the visual size of inline boxes?

<p class=issue id=issue-588d4c54><a class=self-link href=#issue-588d4c54></a>[1] I believe the differences are restricted to the first
line of LI elements, the last line of LI, DD, and DT elements, and issues
concerning whitespace around images. [DB]

<p>The height of each line box is established as follows (we describe the
case for <em>horizontal flow</em>, but vertical
flow is analogous). First align all the boxes on the line relative to each
other according to the rules for <a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a>. The line box must satisfy all of
the following constraints:

<ol>
<li>For each box on the line that has <span class=css>font</span> in its
value of <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a>, the line box must be
high enough to contain the <span title="top of the text"><a href=#top-of>top and bottom of that box’s text</a></span>.

<li>For each box that has <span class=css>inline</span> in <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a>, the top of the line
box must be at least as high as the <span title="top of the text"><a href=#top-of>top of the box’s text</a></span> plus the box’s <em><a href=#half-leading>half-leading</a></em>. The bottom of the line box must
be at least as low as the bottom of the text plus the half-leading.

<li>For each box that has <span class=css>inline-box</span> in <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a>,
the top of the line box must be at least as high as the margin-top of this
box. The bottom of the line box must be at least as low as the margin-bottom.

<li>For each <em>replaced box</em> that has <span class=css>replaced</span> in its <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a>, the line box must
contain the margin-top and margin-bottom of this box. <span class=issue id=issue-90160bb9><a class=self-link href=#issue-90160bb9></a>[The value <span class=css>replaced</span> is not strictly needed. <span class=css>Inline-box</span> also
does the job, except that it is not automatically restricted to replaced
elements.]</span>

<li>For each box that has <span class=css>glyphs</span> in <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a>,
the top of the line box must be at least as high as the top of each glyph in
the box (excluding those in child elements). The bottom of the line box must
be at least as low as the bottom of each glyph in the box (excluding child
elements).

<li>If the enclosing block for this line has
<span class=css>block</span> in <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a>, then the top of the line box
must be at least as high as the text top plus the half-leading of an
<em>anonymous inline element</em> and the bottom of
the line box as low as the text bottom plus the half leading. This must hold
whether or not this line actually contains such an element.
</ol>

<p class=note>Thus <span class=css>block</span> can be used to set an overall minimum line
height (viz. the value of <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> of the element itself) for all lines
in an element, independent of the actual contents of each line. In
particular, setting <a class=property data-link-type=propdesc href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a> to just <span class=css>block</span> and no other values
will ensure that all lines are the same height, at the possible risk of some
tall inline elements overlapping with lines above or below.

<p>The <dfn data-dfn-type=dfn data-noexport="" id=half-leading>half-leading<a class=self-link href=#half-leading></a></dfn> of a box is defined as half
the computed value of <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> minus half the computed value of
<a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a>, i.e., (line-height - font-size)/2.

<p>The <dfn data-dfn-type=dfn data-noexport="" id=top-of>top of the text<a class=self-link href=#top-of></a></dfn> is the top of the em-box of a
box’s nominal font, whether or not there actually is any letter that tall.
Replaced elements, for example, have no text, but still have a nominal font
and are thus a text top. The rules above refer to the position of the text
top after the box has been aligned with <a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a>.




<h5 class="heading settled" data-level=1.4.2.1 id=old-remove-this><span class=secno>1.4.2.1. </span><span class=content>Old, remove this:</span><a class=self-link href=#old-remove-this></a></h5>

<p>Line stacking is the mechanism by which a line box is determined for each 
line in a block and then these lines are stacked in the block-progression 
direction resolving any spacing constraints between adjacent lines. The 
line-stacking strategy covers both the determination of the block-progression 
dimension (height in horizontal flow) of a line box and the rules for spacing 
line boxes.</p>
<p>All line stacking strategies make use of the properties: <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a>, 
<a class=property data-link-type=propdesc href=#propdef-text-height title=text-height>text-height</a> and <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a>.</p>
<p>The line stacking properties are made of the following properties:</p>
<ol>
  <li>The <a class=property data-link-type=propdesc href=#propdef-line-stacking-strategy title=line-stacking-strategy>line-stacking-strategy</a> property determines the overall stacking
  method,</li>
  <li>The <a class=property data-link-type=propdesc href=#propdef-line-stacking-ruby title=line-stacking-ruby>line-stacking-ruby</a> property determines how elements with
  'display=ruby' are stacked,</li>
  <li>The <a class=property data-link-type=propdesc href=#propdef-line-stacking-shift title=line-stacking-shift>line-stacking-shift</a> property determines how elements which are
  baseline-shifted are stacked,</li>
  <li>Finally the <a class=property data-link-type=propdesc href=#propdef-line-stacking title=line-stacking>line-stacking</a> property is a short-hand for the previous
  properties.</li>
</ol>
<table class=propdef id=name-162>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-line-stacking-strategy>line-stacking-strategy<a class=self-link href=#propdef-line-stacking-strategy></a></dfn><tr>
<td><em>Value:</em>

<td>inline-line-height | block-line-height | max-height | grid-height

<tr>
<td><em>Initial:</em>

<td>inline-line-height<tr>
<td><em>Applies to:</em>

<td>block-level elements

<tr>
<td><em>Inherited:</em>

<td>yes

<tr>
<td><em>Percentages:</em>

<td>N/A<tr>
<td><em>Media:</em>

<td><a class=noxref href=/TR/REC-CSS2/media.html#visual-media-group>visual</a>

<tr>
<td><em>Computed value:</em>

<td>specified value (except for initial and inherit)</table>

<p>This property determines the line stacking strategy for stacked line boxes 
within a containing block element. The term <dfn data-dfn-type=dfn data-noexport="" id=stack-height>stack-height<a class=self-link href=#stack-height></a></dfn> is used in the 
context of this property description to indicate the block-progression dimension 
for the line boxes. Possible values:
<dl>
<dt><strong>inline-line-height</strong>

<dd>The <a data-link-type=dfn href=#stack-height title=stack-height>stack-height</a> is the smallest value that contains the <a data-link-type=dfn href=#extended-block-progression-dimension title="extended block-progression dimension">extended
block-progression dimension</a> of all the inline elements on that line when those 
elements are properly aligned. Since the line spacing information is already 
included in the computation of the line box, these line boxes are simply stacked 
adjacent to one another in the formatted block to which they belong. The 
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property value is taken into account for both the inline elements 
and the block elements. For inline elements, it defines the extended 
block-progression dimension. For block elements, it defines the
<a data-link-type=dfn href=#minimum-extended-block-progression-dimension title="minimum extended block-progression dimension">minimum extended block-progression dimension</a>.
<dt>block-line-height</dt>
<dd>The <a data-link-type=dfn href=#stack-height title=stack-height>stack-height</a> is determined by the block element computed <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property 
value. The <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property value is ignored for inline elements. For 
alignment purpose, this case is similar to the
<a data-link-type=dfn href=#minimum-extended-block-progression-dimension title="minimum extended block-progression dimension">minimum extended block-progression dimension</a> case (strut model).
This is the only line-stacking strategy that may cause inline boxes within the line
to bleed over and under the line box because the line box is not constrained by its inline boxes.
If the block computed <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> is <span class=css>none</span>, the stack-height is determined as if 
'line-height: normal'.</dd>
<dt>max-height</dt>
<dd>The <a data-link-type=dfn href=#stack-height title=stack-height>stack-height</a> is the smallest value that contains the 
block-progression dimension of all the inline elements on that line when those 
elements are properly aligned. The <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property value is taken into 
account only for the block elements and it defines the
<dfn data-dfn-type=dfn data-noexport="" id=minimum-extended-block-progression-dimension>minimum extended block-progression dimension<a class=self-link href=#minimum-extended-block-progression-dimension></a></dfn>.</dd>
<dt>grid-height</dt>
<dd>The <a data-link-type=dfn href=#stack-height title=stack-height>stack-height</a> is the smallest multiple of the block element <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> 
computed value that can contain the block-progression of all the inline 
elements on that line when those elements are properly aligned. The 
<a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> property value is ignored for inline elements. If the block 
computed <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> is <span class=css>none</span>, the stack-height is determined as if 
'line-height: normal'.</dd>
</dl>

<p>When the line-stack strategy dictates that the inline element line-height be 
ignored, this means that for those elements only their block-progression 
dimensions are considered for the <a data-link-type=dfn href=#stack-height title=stack-height>stack-height</a>, not their extended 
block-progression dimensions.</p>

<p class=note><b>Note.</b> XSL has a similar property with the same name which 
use different but equivalent values: <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> instead of 
<span class=css>inline-line-height</span>, <span class=css>font-height</span> instead of <span class=css>block-line-height</span>. It also uses 
<span class=css>max-height</span>. The value <span class=css>grid-height</span> is new to the CSS3 property.<p> <table class=propdef id=name-60>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-line-stacking-ruby>line-stacking-ruby<a class=self-link href=#propdef-line-stacking-ruby></a></dfn><tr>
<td><em>Value:</em>

<td>exclude-ruby | include-ruby

<tr>
<td><em>Initial:</em>

<td>exclude-ruby<tr>
<td><em>Applies to:</em>

<td>block-level elements

<tr>
<td><em>Inherited:</em>

<td>yes

<tr>
<td><em>Percentages:</em>

<td>N/A<tr>
<td><em>Media:</em>

<td><a class=noxref href=/TR/REC-CSS2/media.html#visual-media-group>visual</a>

<tr>
<td><em>Computed value:</em>

<td>specified value (except for initial and inherit)</table>

<p>This property determines the line stacking method for block elements 
containing ruby annotation elements (element with 'display: ruby-text' or 
'display: ruby-text-container'). In all cases the ruby base elements (elements 
with 'display: ruby-base' or display: ruby-base-container') are considered for 
line stacking. Possible values:<dl>
<dt><strong>exclude-ruby</strong>

<dd>The ruby annotation elements are ignored for line stacking.<dt>include-ruby</dt>
<dd>The ruby annotation elements are considered for line stacking.</dd>
</dl>

<p>This property is ignored in two cases:<ol>
  <li>The element text-height property is set to <span class=css>max-size</span>.</li>
  <li>The line stacking strategy is set to <span class=css>block-line-height</span>.</li>
  </ol>
  <table class=propdef id=name-160>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-line-stacking-shift>line-stacking-shift<a class=self-link href=#propdef-line-stacking-shift></a></dfn><tr>
<td><em>Value:</em>

<td>consider-shifts | disregard-shifts<tr>
<td><em>Initial:</em>

<td>consider-shifts<tr>
<td><em>Applies to:</em>

<td>block-level elements

<tr>
<td><em>Inherited:</em>

<td>yes

<tr>
<td><em>Percentages:</em>

<td>N/A<tr>
<td><em>Media:</em>

<td><a class=noxref href=/TR/REC-CSS2/media.html#visual-media-group>visual</a>

<tr>
<td><em>Computed value:</em>

<td>specified value (except for initial and inherit)</table>

<p>This property determines the line stacking method for block elements 
containing elements with baseline-shift. Possible values:<dl>
<dt><strong>consider-shifts</strong>

<dd>In determining the <a data-link-type=dfn href=#stack-height title=stack-height>stack-height</a>, include the adjusted top-edge and 
bottom-edge of any characters that have a baseline-shift.

<dt>disregard-shifts</dt>
<dd>In determining the <a data-link-type=dfn href=#stack-height title=stack-height>stack-height</a>, include the unshifted top-edge and 
bottom-edge of any characters that have a baseline-shift. </dd>
</dl>

<p>This property is ignored in two cases:<ol>
    <li>The element text-height property is set to <span class=css>max-size</span>.</li>
    <li>The line stacking strategy is set to <span class=css>block-line-height</span>.</li>
    </ol>

<p class=note><b>Note.</b> XSL has a similar property with a different name: 
<a class=property data-link-type=propdesc title=line-height-shift-adjustment>line-height-shift-adjustment</a> which use the same values.<p>Finally, the line 
    stacking strategy can be used using the following shorthand:</p>
    <table class=propdef id=name-260>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-line-stacking>line-stacking<a class=self-link href=#propdef-line-stacking></a></dfn><tr>
<td><em>Value:</em>

<td>&lt;<a class=property data-link-type=propdesc href=#propdef-line-stacking-strategy title=line-stacking-strategy>line-stacking-strategy</a>&gt; || &lt;<a class=property data-link-type=propdesc href=#propdef-line-stacking-ruby title=line-stacking-ruby>line-stacking-ruby</a>&gt; || 
&lt;<a class=property data-link-type=propdesc href=#propdef-line-stacking-shift title=line-stacking-shift>line-stacking-shift</a>&gt;<tr>
<td><em>Initial:</em>

<td>see individual properties<tr>
<td><em>Applies to:</em>

<td>block-level elements

<tr>
<td><em>Inherited:</em>

<td>yes

<tr>
<td><em>Percentages:</em>

<td>N/A<tr>
<td><em>Media:</em>

<td><a class=noxref href=/TR/REC-CSS2/media.html#visual-media-group>visual</a>

<tr>
<td><em>Computed value:</em>

<td>see individual properties</table>


<h2 class="heading settled" data-level=2 id=baseline-alignment><span class=secno>2. </span><span class=content>Baseline alignment</span><a class=self-link href=#baseline-alignment></a></h2>

<p>Baseline alignment describes the alignment of textual content and based on
information contained in  font tables associated with font resources.
Additional descriptions for these font tables are provided in the <a href=http://www.w3.org/Style/Group/css3-src/css3-fonts/Overview.html>CSS3
Fonts module</a>.

<h3 class="heading settled" data-level=2.1 id=FontBaseline><span class=secno>2.1. </span><span class=content>Baseline information
provided by fonts</span><a class=self-link href=#FontBaseline></a></h3>

<p>The glyphs of a given script are positioned so that a particular point on
each glyph, the <dfn data-dfn-type=dfn data-noexport="" id=alignment-point>alignment-point<a class=self-link href=#alignment-point></a></dfn>, is aligned with the alignment-points of 
the other glyphs in that script. The glyphs of different scripts are typically 
aligned at different points on the glyph. For example, Western
glyphs are aligned on the bottoms of the capital letters, certain Indic
glyphs (including glyphs from the Devanagari, Gurmukhi and Bengali scripts)
are aligned at the top of a horizontal stroke near the top of the glyphs and
East Asian glyphs are aligned either at the bottom or center of the EM box of
the glyph. Within a script and within a line of text having a single
font-size, the sequence of alignment-points defines, in the
inline-progression-direction, a geometric line called a <dfn data-dfn-type=dfn data-noexport="" id=baseline>baseline<a class=self-link href=#baseline></a></dfn>.
Western and most other alphabetic and syllabic glyphs are aligned to an
"alphabetic" baseline, the above Indic glyphs are aligned to a "hanging"
baseline and the East Asian glyphs are aligned to an "ideographic" baseline.

<div class=figure>
<p><img alt="three alignment points" height=89 src=AlignmentPointsMixedScripts2.gif width=457>

<p>This figure shows the vertical position of the alignment-point for
alphabetic and many syllabic scripts, illustrated by a Roman "A"; for certain
Indic scripts, illustrated by a Gurmukhi syllable “ji”; and for ideographic
scripts, illustrated by the ideographic glyph meaning "country". The thin
black rectangle around the ideographic glyph illustrates the EM box for that
glyph and shows the typical positioning of the "black marks" of the glyph
within the EM box.
</div>

<p>A <dfn data-dfn-type=dfn data-noexport="" id=baseline-table>baseline-table<a class=self-link href=#baseline-table></a></dfn> specifies the position of one or more baselines in
the design space coordinate system. The function of the baseline table is to
facilitate the alignment of different scripts with respect to each other when
they are mixed on the same text line. Because the desired relative alignments
may depend on which script is dominant in a line (or block), there may be a
different baseline table for each script. In addition, different alignment
positions are needed for horizontal and vertical writing modes. Therefore,
the font may have a set of baseline tables: typically, one or more for
horizontal writing-modes and zero or more for vertical writing-modes.

<div class=figure>
<p><img alt="different baseline positions" height=473 src=Baselines-HorizAndVert-ApCountry.gif width=475>

<p>Examples of horizontal and vertical baseline positions. The thin lined box
in each example is the "EM box". For the Latin glyphs, only the EM box of the
first glyph is shown. Example 1 shows typical Latin text written
horizontally. This text is positioned relative to the alphabetic baseline,
shown in blue. Example 2 shows a typical ideographic glyph positioned on the
horizontal ideographic baseline. Note that the EM Box is positioned
differently for these two cases. Examples 3 and 4 show the same set of
baselines used in vertical writing. The Latin text, example 3, is shown with
a glyph-orientation of 90 degrees which is typical for proportionally space
Latin glyphs in vertical writing. Even though the ideographic glyph in
Example 4 is positioned on the vertical ideographic baseline, because it is
centered in the EM box, all glyphs with the same EM Box are centered,
vertically, with respect to one another.
</div>

<p>The font tables for a font include font characteristics for the individual
glyphs in the font. CSS assumes that the font tables include, for each glyph
in the font, one width value, one alignment-baseline and one alignment-point
for the horizontal writing-modes. If vertical writing-modes are supported,
then each glyph must have another width value, alignment-baseline and
alignment-point for the vertical writing-modes. (Even though it is specified
as a width, for vertical writing-modes the width is used in the vertical
direction.)

<p>The script to which a glyph belongs determines an alignment-baseline to
which the glyph is to be aligned. The position of this baseline in the design
space coordinate system determines the default block-progression direction
position of the alignment-point. The inline-progression direction position of
the alignment-point is on the start-edge of the glyph.

<div class=figure>
<p><img alt="alignment in em box" height=110 src=AlignmentPointsMixedScriptsOnBaselines.gif width=458>

<p>This figure shows glyphs from three different scripts, each with its EM
box and within the EM box, the baseline table applicable to that glyph. The
alignment-point of each glyph is shown by an "X" on the start edge of the EM
box and by making alignment-baseline blue. The baseline-table of the parent
element of the characters that mapped to these glyphs is shown as a set of
dashed lines.
</div>

<h3 class="heading settled" data-level=2.2 id=AlignmentBaselineType><span class=secno>2.2. </span><span class=content>Baseline
identifiers</span><a class=self-link href=#AlignmentBaselineType></a></h3>

<p>The baseline alignment properties control the alignment of child element
with respect to their parent. The positions of these baselines are
illustrated in the following figure:

<div class=figure>
<p><img alt="different baselines" height=102 src=Baselines-rev.gif width=587>

<p>This figure shows samples of Gurmukhi (a hanging Indic script), Latin and
ideographic scripts together with most of the baselines defined below. The
thin line around the ideographic glyphs symbolizes the EM box in which these
glyphs are centered. In this figure, the position of the "text-over-edge"
and "text-under-edge" baselines is computed assuming that the "alphabetic"
baseline is the dominant-baseline. The "central" baseline has been omitted
from the figure, but it lies halfway between the "text-over-edge" and
"text-under-edge" baselines, just about where the "math" baseline is shown.
</div>

<p>The baseline-identifiers below are used in this specification. Some of
these are determined by baseline-tables contained in a font as described in
the section describing the <a href=#FontBaseline>baseline information
provided by fonts</a>. Others are computed from other font characteristics as
described below. Whether determined by the font or computed, a derived
baseline-table is constructed with positions of each of the baselines below.

<dl>
<dt><dfn data-dfn-type=dfn data-noexport="" id=alphabetic>alphabetic<a class=self-link href=#alphabetic></a></dfn>

<dd>
<p>This identifies the baseline used by most alphabetic and syllabic scripts.
These include, but are not limited to, many Western, Southern Indic,
Southeast Asian (non-ideographic) scripts.

<dt><dfn data-dfn-type=dfn data-noexport="" id=ideographic>ideographic<a class=self-link href=#ideographic></a></dfn>

<dd>
<p>This identifies the baseline used by ideographic scripts. For historical
reasons, this baseline is at the bottom of the ideographic EM box and not in
the center of the ideographic EM box. See the "central" baseline. The
ideographic scripts include Chinese, Japanese, Korean, and Vietnamese Chu
Nom.

<dt><dfn data-dfn-type=dfn data-noexport="" id=hanging>hanging<a class=self-link href=#hanging></a></dfn>

<dd>
<p>This identifies the baseline used by certain Indic scripts. These scripts
include Devanagari, Gurmukhi and Bengali.

<dt><dfn data-dfn-type=dfn data-noexport="" id=mathematical>mathematical<a class=self-link href=#mathematical></a></dfn>

<dd>
<p>This identifies the baseline used by mathematical symbols.

<dt><dfn data-dfn-type=dfn data-noexport="" id=central>central<a class=self-link href=#central></a></dfn>

<dd>
<p>This identifies a computed baseline that is at the center of the EM box.
This baseline lies halfway between the text-over-edge and text-under-edge
baselines.

<p class=note>Note. For ideographic fonts, this baseline is often used to
align the glyphs; it is an alternative to the ideographic baseline.

<dt><dfn data-dfn-type=dfn data-noexport="" id=middle>middle<a class=self-link href=#middle></a></dfn>

<dd>
<p>This identifies a baseline that is offset from the alphabetic baseline in
the <dfn data-dfn-type=dfn data-noexport="" id=shift-direction>shift-direction<a class=self-link href=#shift-direction></a></dfn> by 1/2 the value of the x-height font
characteristic. The position of this baseline may be obtained from the font
data or, for fonts that have a font characteristic for "x-height", it may be
computed using 1/2 the "x-height". Lacking either of these pieces of
information, the position of this baseline may be approximated by the
"central" baseline.

<dt><dfn data-dfn-type=dfn data-noexport="" id=text-over-edge>text-over-edge<a class=self-link href=#text-over-edge></a></dfn>

<dd>
<p>This identifies the over-edge of the EM box. The position of this
baseline may be specified in the baseline-table or it may be calculated.

<p class=note>Note. The position of this baseline is normally around or at
the top of the ascenders, but it may not encompass all accents that can
appear above a glyph. For fonts with ascenders, the value of the "ascent"
font characteristic is used. For ideographic fonts, the position of this
baseline is normally 1 EM in the <a data-link-type=dfn href=#shift-direction title=shift-direction>shift-direction</a> from the
"ideographic" baseline. However, some ideographic fonts have a reduced width
in the inline-progression-direction to allow tighter setting. When such a
font, designed only for vertical writing-modes, is used in a horizontal
writing-mode, the "text-over-edge" baseline may be less than 1 EM from the
text-under-edge.

<dt><dfn data-dfn-type=dfn data-noexport="" id=text-under-edge>text-under-edge<a class=self-link href=#text-under-edge></a></dfn>

<dd>
<p>This identifies the under-edge of the EM box. The position of this
baseline may be specified in the baseline-table or it may be calculated.

<p class=note>Note. For fonts with descenders, the position of this
baseline is normally around or at the bottom of the descenders. For these
fonts the value of the "descent" font characteristic is used. For ideographic
fonts, the position of this baseline is normally at the "ideographic"
baseline.
</dl>

<p>There are, in addition, two computed baselines that are only defined for line 
boxes: <a data-link-type=dfn href=#over-edge title=over-edge>over-edge</a> and <a data-link-type=dfn href=#under-edge title=under-edge>under-edge</a>. For each line box, there is a 
dominant-baseline, a baseline-table and a baseline-table font-size which are 
those of the nearest block-level ancestor element and are applied to its root 
inline box. Depending on the <a class=property data-link-type=propdesc href=#propdef-line-stacking-strategy title=line-stacking-strategy>line-stacking-strategy</a> being used, the line 
stacking progression (also called stack-height) can be different from the line 
block-progression dimension. The <a data-link-type=dfn href=#over-edge title=over-edge>over-edge</a> and <a data-link-type=dfn href=#under-edge title=under-edge>under-edge</a> baselines are 
always based on the block-progression dimension and are in fact part of its 
determination.<p>For an inline element, the <dfn data-dfn-type=dfn data-noexport="" id=extended-inline-box>extended inline box<a class=self-link href=#extended-inline-box></a></dfn> includes 
the maximum extent of their static or relative positioned children located in 
the same line box and <em>may</em> include leading specified by their line-height 
value. Depending on the line-stacking-strategy value, the extended line box may 
have a different block-progression dimension. For replaced elements the margin 
extents are always added.<p>The following text explains the interaction between 
the line-stacking-strategy and the various baseline alignment parameters.<ul>
  <li>For 'line-stacking-strategy: inline-line-height', all <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> values 
  (set for both inline elements and ancestor block element)  participate on 
  the evaluation of the line block-progression dimension. The position of the 
  dominant-baseline on the start edge of the line box is determined after all 
  vertical (relative) alignments have been performed on the line. The extended 
  inline boxes of all inline elements include the leading introduced by their 
  line-height value.</li>
  <li>For 'line-stacking-strategy: block-line-height', the ancestor block 
  <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> value participates on the evaluation of the line 
  block-progression dimension. The inline element line-height values are ignored. The 
  position of the dominant-baseline on the start edge of the line box is 
  determined by using a virtual zero-width inline box with the block font and 
  line height properties located on the start edge of the line box. The extended 
  inline boxes of all inline elements do not include any extra leading.</li>
  <li>For 'line-stacking-strategy: max-height' and 'line-stacking-strategy: 
  grid-height', only the ancestor block <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> value participates on the 
  evaluation of the line block-progression dimension. The inline element 
  line-height values are ignored. The position of the dominant-baseline on the 
  start edge of the line box is determined after all vertical (relative) 
  alignments have been performed on the line. The extended inline boxes of all 
  inline elements do not include any extra leading.</li>
  </ul>

<p>The "over-edge" and "under-edge" baselines are 
defined as follows.

<dl>
<dt><dfn data-dfn-type=dfn data-noexport="" id=over-edge>over-edge<a class=self-link href=#over-edge></a></dfn>

<dd>
<p>The offset of the "over-edge" baseline of the line from the
dominant-baseline of the line is determined by ignoring all extended inline boxes
whose alignment-baseline is either "over-edge" or "under-edge". For the
"over-edge", extents are measured from the dominant-baseline in the
direction toward the top (relative) of the extended inline box. The "over-edge" baseline
offset is set to the maximum extent of the "over-edges" of the extended inline boxes of the remaining areas. If all the 
extended inline 
boxes in a line box are aligned either to the "over-edge" or to the "under-edge",
then use the offset of the "text-over-edge" baseline of the line as the
offset of the "over-edge" baseline of the line.

<dt><dfn data-dfn-type=dfn data-noexport="" id=under-edge>under-edge<a class=self-link href=#under-edge></a></dfn>

<dd>
<p>The offset of the "under-edge" baseline of the line from the
dominant-baseline of the line is determined by ignoring all extended inline boxes
whose alignment-baseline is <code>under-edge</code>. For the "under-edge",
extents are measured from the dominant-baseline in the direction toward the
bottom (relative) of the extended inline box. The "under-edge" baseline offset is
set to the negative of the maximum of (1) the maximum extent of the
"under-edges" of the remaining extended inline boxes and (2) the
maximum height of the extended inline boxes that are ignored
minus the offset of the "over-edge" baseline of the line.

<p class=note>Note. If all the extended inline boxes in a line box are aligned to
the "under-edge" then the specification for the "over-edge" will set the
"over-edge" baseline to coincide with the "text-under-baseline" of the
line. Then, case (2) above will determine an offset to the "bottom-edge"
baseline that will align the "over-edge" of the box with the greatest
height to its allocation-rectangle to "over-edge" baseline.

<p class=note>Note. The above specifications for "over-edge" and 
"under-edge" have the following three properties: (1) all extended inline boxes 
are below the "over-edge", (2) all extended inline boxes are above the "under-edge", and (3)
the distance between the "over-edge" and the "under-edge" cannot be
decreased without violating (1) or (2). The specified placement of the
"over-edge" and "under-edge" is not the only way that (1)-(3) can be
satisfied, but it is the only way they can be satisfied with the smallest
possible offset to the "over-edge".
</dl>

<p dir=ltr>For the purpose of over-edge and under-edge baseline
computation, inline boxes include the maximum extent of their static or
relative positioned children located in the same line box. Maximum alignment
extents are measured by including the half leading extent in the appropriate
direction for non replaced elements and by using the margin extents for
replaced elements.

<p dir=ltr>Examples showing "over-edge" and "under-edge" alignment:

<div class=figure>
<p><img alt="aligning text and images" id=edge src=ArrowsInText.gif>

<p>The rectangles with lines or arrows are images with an intrinsic size as
shown. The rectangles with no arrows represent images that receive the
default, dominant baseline, alignment. The alignment of the other rectangles
is at the furthest point from the arrow head (which is in the middle when
there are two arrowheads). Examples 1 and 2 show the "over-edge" alignment
is determined by the tallest non-"over-edge" aligned objects: in example 1
this is the default aligned, arrowhead free rectangular image and in example
2 this is the double headed arrow rectangle. Examples 3 and 4 show defaulting
to the "text-over-edge" when all the boxes have either "over-edge" or
"under-edge" alignment. In example 3, the images with "over-edge" alignment
has a taller member than do the "under-edge" aligned images. In example 4,
the tallest image is in the "under-edge" aligned set. Example 5 is a
repetition of example 2 with largest image being an "under-edge" aligned
image.
</div>

<p>There are also four baselines that are defined only for horizontal
writing-modes.

<dl>
<dt><dfn data-dfn-type=dfn data-noexport="" id=top>top<a class=self-link href=#top></a></dfn>

<dd>
<p>This baseline is the same as the "over-edge" baseline in a horizontal
writing-mode and is undefined in a vertical writing mode.

<dt><dfn data-dfn-type=dfn data-noexport="" id=text-top>text-top<a class=self-link href=#text-top></a></dfn>

<dd>
<p>This baseline is the same as the "text-over-edge" baseline in a
horizontal writing-mode and is undefined in a vertical writing mode.

<dt><dfn data-dfn-type=dfn data-noexport="" id=bottom>bottom<a class=self-link href=#bottom></a></dfn>

<dd>
<p>This baseline is the same as the "under-edge" baseline in a horizontal
writing-mode and is undefined in a vertical writing mode.

<dt><dfn data-dfn-type=dfn data-noexport="" id=text-bottom>text-bottom<a class=self-link href=#text-bottom></a></dfn>

<dd>
<p>This baseline is the same as the "text-under-edge" baseline in a
horizontal writing-mode and is undefined in a vertical writing mode.
</dl>

<h3 class="heading settled" data-level=2.3 id=BaselineAlignmentOverview><span class=secno>2.3. </span><span class=content>Overview
of the baseline alignment process</span><a class=self-link href=#BaselineAlignmentOverview></a></h3>

<p>The alignment of an element with respect to its parent is determined by
three things: the scaled-baseline-table of the parent and the
alignment-baseline and alignment-point of the element being aligned. Prior to
alignment, the scaled-baseline-table of the parent may be shifted. The
property specifications below provide the information necessary to align the
parent and child elements.

<p>There are four properties that control alignment of elements to the above
set of baselines: <a class=property data-link-type=propdesc href=#propdef-dominant-baseline title=dominant-baseline>dominant-baseline</a>, <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a>, <a class=property data-link-type=propdesc href=#propdef-baseline-shift title=baseline-shift>baseline-shift</a> and
<a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a>. These properties are
all independent and are designed so that typically only the specification of
one of the properties is needed to achieve a particular alignment goal.

<p>The primary baseline alignment property is the <a class=property data-link-type=propdesc href=#propdef-dominant-baseline title=dominant-baseline>dominant-baseline</a> property. This
property sets the <a data-link-type=dfn href=#scaled-baseline-table title=scaled-baseline-table>scaled-baseline-table</a> as a compound value with the
three following components:

<ol>
<li>The dominant-baseline-identifier component is the default <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> to be used when
aligning two inline areas.

<li>The baseline-table component specifies the positions of the baselines in
the font design space coordinates. The baseline-table acts something like a
musical staff; it defines particular points along the
<b>block-progression-direction</b> to which glyphs and inline elements can be
aligned.

<li>The baseline-table <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a>
component is used to scale the
positions of the baselines in that baseline table. In a
scaled-baseline-table, the positions of the baselines can be adjusted by
multiplying the design-space coordinate values by the baseline-table
font-size.
</ol>

<p>Because the value of the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-family title=font-family>font-family</a> property is a list of fonts, to
insure a consistent choice of baseline-table we define the <em>nominal
font</em> in a font list as the first font in the list for which a glyph data
is available. This is the first that could contain a glyph for each character
encountered. (For this definition, glyph data is assumed to be present if a
font substitution is made or if the font is synthesized.) This definition
insures a content independent determination of the font and baseline table
that is to be used.

<p>For convenience, the specification will sometimes refer to the baseline
identified by the dominant-baseline-identifier component of the
"dominant-baseline" property as the "dominant baseline" (in an abuse of
terminology).

<p>The model also assumes that each glyph has an <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> value which
specifies the baseline with which the glyph is to be aligned. (The
<a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> is called the "Baseline Tag" in the OpenType
baseline-table description.) The initial value of the <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a>
property uses the baseline identifier associated with the given glyph.
Alternate values for <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> can be useful for glyphs such as a
"*" which are ambiguous with respect to script membership.

<p>The model assumes that the font from which the glyph is drawn also has a
baseline table, the <span class=SVG-Term>font baseline-table</span>. This
baseline table has offsets in units-per-em from the (0,0) point to each of
the baselines the font knows about. In particular, it has the offset from the
glyph’s (0,0) point to the baseline identified by the <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a>.

<p>The offset values in the baseline-table are in "design units" which means
fractional units of the EM. CSS calls these <a href=/TR/REC-CSS2/fonts.html#descdef-units-per-em>"units-per-em"</a>. Thus,
the current <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> is used to determine the actual
offset from the dominant baseline to the alternate baselines.

<p>The glyph is aligned so that its baseline identified by its
<a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> is aligned with the baseline with the same name from the
dominant baseline-table.

<p>The offset from the dominant baseline of the parent to the baseline
identified by the <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> is computed using the dominant
baseline-table and dominant baseline-table font-size. The font baseline-table
and font-size applicable to the glyph are used to compute the offset from the
identified baseline to the (0,0) point of the glyph. This second offset is
subtracted from the first offset to get the position of the (0,0) point in
the shift direction. Both offsets are computed by multiplying the baseline
value from the baseline-table times the appropriate font-size value.

<p>If the <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> identifies the dominant baseline, then the
first offset is zero and the glyph is aligned with the dominant baseline;
otherwise, the glyph is aligned with the chosen alternate baseline.

<p>The third baseline alignment property is the <a class=property data-link-type=propdesc href=#propdef-baseline-shift title=baseline-shift>baseline-shift</a> property. Like the
properties other than the "dominant-baseline" property, this property does
not change the baseline-table or the baseline-table font-size. It does shift
the whole baseline table of the parent element so that when an inner inline
element is aligned to one of the parents baselines, the position of the inner
inline element is shifted.

<p>The fourth alignment property is the <a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a> property. This
property is primarily used for replaced elements. The "alignment-adjust"
property allows the author to assign where, on the start-edge of the object,
the alignment point for that element lies.

<p>For alignment purposes, the margins are added to the replaced elements
dimensions.

<p>In addition to the following definition of these properties, an
informative <a href=#BaselineUsage>appendix: B</a> provides usage examples
of these properties.

<h3 class="heading settled" data-level=2.4 id=dominant-baseline-prop><span class=secno>2.4. </span><span class=content>Dominant
baseline: the <a class=property data-link-type=propdesc href=#propdef-dominant-baseline title=dominant-baseline>dominant-baseline</a> property</span><a class=self-link href=#dominant-baseline-prop></a></h3>

<table class=propdef id=name-12>
<tbody>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-dominant-baseline>dominant-baseline<a class=self-link href=#propdef-dominant-baseline></a></dfn><tr>
<td><em>Value:</em>

<td>auto | use-script | no-change | reset-size | alphabetic | hanging |
ideographic |<br>
mathematical | central | middle | text-under-edge | text-over-edge

<tr>
<td><em>Initial:</em>

<td>auto

<tr>
<td><em>Applies to:</em>

<td>inline-level and inline-block elements (but see prose)

<tr>
<td><em>Inherited:</em>

<td>no

<tr>
<td><em>Percentages:</em>

<td>N/A

<tr>
<td><em>Media:</em>

<td>visual

<tr>
<td><em>Computed value:</em>

<td>specified value (except for initial and inherit)
</table>

<p>The <a class=property data-link-type=propdesc href=#propdef-dominant-baseline title=dominant-baseline>dominant-baseline</a> property is used to
determine or re-determine a scaled-baseline-table. A <dfn data-dfn-type=dfn data-noexport="" id=scaled-baseline-table>scaled-baseline-table<a class=self-link href=#scaled-baseline-table></a></dfn> is
a compound value with three components:

<ul>
<li>a baseline-identifier for the dominant baseline; it can be qualified as
the “dominant baseline-identifier” (or “dominant baseline” in short); the
baseline-identifier is basically an <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> value.

<li>a derived baseline-table which contains definition for additional
baseline-identifiers related to various scripts,

<li>and a baseline-table font-size.
</ul>

<p class=note><b>Note:</b> Although the <a class=property data-link-type=propdesc href=#propdef-dominant-baseline title=dominant-baseline>dominant-baseline</a> property only 
applies to inline-level and inline-block element, setting it on the block 
ancestor of an inline element will influence the behavior of that inline 
element.

<p>Some values of the property re-determine all three values; other only
reestablish the baseline-table font-size. Values for the property have the
following meaning:

<dl>
<dt><span class=attr-value>auto</span>

<dd>If this property occurs on a block or inline-block element, then the user
agent behavior depends on the value of the <a class=property data-link-type=propdesc title=text-script>text-script</a> property. If the value of the
<a class=property data-link-type=propdesc title=text-script>text-script</a>
property is <span class=css>auto</span>, the <span class=css>auto</span> value is equivalent to <span class=css>alphabetic</span> for
horizontal <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-writing-modes-3/#propdef-writing-mode title=writing-mode>writing-mode</a> values and <span class=css>central</span> for
vertical <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-writing-modes-3/#propdef-writing-mode title=writing-mode>writing-mode</a> values. If the value of the
<a class=property data-link-type=propdesc title=text-script>text-script</a> property is other than <span class=css>auto</span>, the <span class=css>auto</span> value is equivalent to
<span class=css>use-script</span>.<dd> Otherwise, if this property occurs on an inline-level element, then the
baseline-identifier and the baseline-table components remain the same as
those of the parent element. The baseline-table font-size also remains the
same as the parent’s one, unless the computed <a class=property data-link-type=propdesc href=#propdef-baseline-shift title=baseline-shift>baseline-shift</a> value actually
shifts the baseline; then the baseline-table font-size is set to the value of
the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element. If there is no parent element, the
dominant-baseline components are set as for the block elements.

<dt><span class=attr-value>use-script</span>

<dd>The dominant baseline-identifier is set using the computed value of the
<a class=property data-link-type=propdesc title=text-script>text-script</a> property. If the <a class=property data-link-type=propdesc title=text-script>text-script</a> is
set to <span class=css>auto</span>, the dominant script established by that property is used (see the 
description of
<a class=property data-link-type=propdesc title=text-script>text-script</a> in the CSS3 text module for more details).  The
<a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-writing-modes-3/#propdef-writing-mode title=writing-mode>writing-mode</a>
value, whether horizontal or vertical is used to select the baseline-table
that correspond to that baseline-identifier. The baseline-table font-size
component is set to the value of the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element.

<dt><span class=attr-value>no-change</span>

<dd>The dominant baseline-identifier, the baseline-table and the
baseline-table font-size remain the same as that of the parent.

<dt><span class=attr-value>reset-size</span>

<dd>The dominant baseline-identifier and the baseline table remain the same,
but the baseline-table font-size is changed to the value of the <a href=/TR/REC-CSS2/fonts.html#font-size-props><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a></a> property on this element. This
re-scales the baseline table for the current <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a>.

<dt><span class=attr-value>alphabetic</span>

<dd>The dominant baseline-identifier is set to the <span class=css>alphabetic</span> baseline, the
derived baseline-table is constructed using the <span class=css>alphabetic</span> baseline-table
in the nominal font, and the baseline-table font-size is changed to the value
of the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element. (The <span class=css>alphabetic</span> baseline is
the standard baseline for Roman scripts.)

<dt><span class=attr-value>hanging</span>

<dd>The dominant baseline-identifier is set to the <span class=css>hanging</span> baseline, the
derived baseline- table is constructed using the <span class=css>hanging</span> baseline-table in
the nominal font, and the baseline-table font-size is changed to the value of
the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element.

<dt><span class=attr-value>ideographic</span>

<dd>The dominant baseline-identifier is set to the <span class=css>ideographic</span> baseline,
the derived baseline- table is constructed using the <span class=css>ideographic</span>
baseline-table in the nominal font, and the baseline-table font-size is
changed to the value of the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element.

<dt><span class=attr-value>mathematical</span>

<dd>The dominant baseline-identifier is set to the <span class=css>mathematical</span> baseline,
the derived baseline- table is constructed using the <span class=css>mathematical</span>
baseline-table in the nominal font, and the baseline-table font-size is
changed to the value of the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element.

<dt>central

<dd>The dominant baseline-identifier is set to be <span class=css>central</span>. The derived
baseline-table is constructed from the defined baselines in a baseline-table
in the nominal font. That font baseline-table is chosen using the following
priority order of baseline-table names: <span class=css>ideographic</span>, <span class=css>alphabetic</span>,
<span class=css>hanging</span> and <span class=css>mathematical</span>. The baseline-table is changed to the value of
the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element.

<dt>middle

<dd>The dominant baseline-identifier is set to be <span class=css>middle</span>. The derived
baseline-table is constructed from the defined baselines in a baseline-table
in the nominal font. That font baseline-table is chosen using the following
priority order of baseline-table names: <span class=css>alphabetic</span>, <span class=css>ideographic</span>,
<span class=css>hanging</span> and <span class=css>mathematical</span>. The baseline-table is changed to the value of
the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element.

<dt>text-under-edge

<dd>The dominant baseline-identifier is set to be <span class=css>text-under-edge</span>. The
derived baseline-table is constructed from the defined baselines in a
baseline-table in the nominal font. That font baseline-table is chosen using
the following priority order of baseline-table names: <span class=css>alphabetic</span>,
<span class=css>ideographic</span>, <span class=css>hanging</span> and <span class=css>mathematical</span>. The baseline-table is changed to
the value of the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element.

<dt>text-over-edge

<dd>The dominant baseline-identifier is set to be <span class=css>text-over-edge</span>. The
derived baseline-table is constructed from the defined baselines in a
baseline-table in the nominal font. That font baseline-table is chosen using
the following priority order of baseline-table names: <span class=css>alphabetic</span>,
<span class=css>ideographic</span>, <span class=css>hanging</span> and <span class=css>mathematical</span>. The baseline-table is changed to
the value of the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-fonts-3/#propdef-font-size title=font-size>font-size</a> property on this element.
</dl>

<p class=note><b>Note:</b> Computed baselines do not (necessarily) choose a
defining baseline table from the nominal font. The expected baseline-tables
that a font would have are those that correspond to the defined baselines.
The catch is that the positions of the defined baselines -- the <span class=css>hanging</span>,
<span class=css>alphabetic</span>, <span class=css>mathematical</span> and <span class=css>ideographic</span> baselines -- can be specified
differently for different choices of which of these baselines is dominant.
That is, the absolute value of the offset of an alphabetic baseline from the
ideographic baseline in ideographic text may be different from the offset of
the ideographic baseline from the alphabetic baseline in alphabetic text.
Therefore, it matters which baseline-table from the nominal font is used for
the defined baselines.

<p>If there is no baseline-table in the nominal font or if the baseline-table
lacks an entry for the desired baseline, then the user agent may use
heuristics to determine the position of the desired baseline.

<h3 class="heading settled" data-level=2.5 id=alignment-baseline-prop><span class=secno>2.5. </span><span class=content>Aligning the
alignment point of an element: the
<a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> property</span><a class=self-link href=#alignment-baseline-prop></a></h3>

<table class=propdef id=name-13>
<tbody>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-alignment-baseline>alignment-baseline<a class=self-link href=#propdef-alignment-baseline></a></dfn><tr>
<td><em>Value:</em>

<td>baseline | use-script | over-edge | text-over-edge | under-edge |
text-under-edge |<br>
central | middle | ideographic | alphabetic | hanging | mathematical

<tr>
<td><em>Initial:</em>

<td>baseline<tr>
<td><em>Applies to:</em>

<td>inline-level elements

<tr>
<td><em>Inherited:</em>

<td>no

<tr>
<td><em>Percentages:</em>

<td>N/A

<tr>
<td><em>Media:</em>

<td>visual

<tr>
<td><em>Computed value:</em>

<td>specified value (except for initial and inherit)
</table>

<p>This property specifies how an inline-level element is aligned with
respect to its parent. That is, to which of the parent’s baselines the
alignment point of this element is aligned. Unlike the <a class=property data-link-type=propdesc href=#propdef-dominant-baseline title=dominant-baseline>dominant-baseline</a>
property the <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> property has no effect on its children
dominant-baselines.

<p class=note>Note: The <a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a>
property specifies how
the alignment point is determined and defaults to the baseline with the same
name as the computed value of the alignment-baseline property.

<p>Except for <span class=css>use-script</span>, all baseline values refer to the respective
baseline-identifier components of the dominant-baseline of the parent, and
glyphs within the element are aligned similarly to the element itself. The
description for <span class=css>use-script</span> covers these points specifically. The property
values have the following meanings:

<dl>
<dt><strong>baseline</strong>

<dd>The alignment-point of the element being aligned is aligned with the
dominant baseline of the parent.

<dt><strong>use-script</strong>

<dd>If the element <a class=property data-link-type=propdesc title=text-script>text-script</a> property value is <span class=css>auto</span>, the alignment
point of each glyph is aligned with the parent baseline-identifier of the script to
which the glyph belongs. If the element <a class=property data-link-type=propdesc title=text-script>text-script</a> property value is other than <span class=css>auto</span>, the
alignment point of each glyph is aligned with the parent baseline-identifier of 
the script specified by the <a class=property data-link-type=propdesc title=text-script>text-script</a>
property. The parent baseline-identifier position is determined by using the 
baseline information appropriate to the determined script within the parent 
dominant-baseline set.<dt><strong>over-edge</strong>

<dd>The alignment point of the box is aligned with the <a data-link-type=dfn href=#over-edge title=over-edge>over-edge</a> baseline
of the line box.

<dt><strong>text-over-edge</strong>

<dd>The alignment-point of the element being aligned is aligned with the
<span class=css>text-over-edge</span> baseline of the parent.

<dt><strong>under-edge</strong>

<dd>The alignment point of the box is aligned with the <a data-link-type=dfn href=#under-edge title=under-edge>under-edge</a> baseline
of the line box.

<dt><strong>text-under-edge</strong>

<dd>The alignment-point of the element being aligned is aligned with the
<span class=css>text-under-edge</span> baseline of the parent.

<dt><strong>central</strong>

<dd>The alignment point of the box is aligned with the <span class=css>central</span> baseline of
the parent.

<dt><strong>middle</strong>

<dd>The alignment point of the box is aligned with the <span class=css>middle</span> baseline of
the parent.

<dt><strong>ideographic</strong>

<dd>The alignment-point of the element being aligned is aligned with the
<span class=css>ideographic</span> baseline of the parent.

<dt><strong>alphabetic</strong>

<dd>The alignment-point of the element being aligned is aligned with the
alphabetic baseline of the parent.

<dt><strong>hanging</strong>

<dd>The alignment-point of the element being aligned is aligned with the
hanging baseline of the parent.

<dt><strong>mathematical</strong>

<dd>The alignment-point of the element being aligned is aligned with the
mathematical baseline of the parent.
</dl>

<p>The values: over-edge, text-over-edge, under-edge and text-under-edge
all work relatively to the writing-mode property values. For example
<a data-link-type=dfn href=#over-edge title=over-edge>over-edge</a> means <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-position-3/#top title=top>top</a> in an horizontal writing mode and <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-position-3/#right title=right>right</a> in a
vertical writing mode.

<p class=note><b>Note.</b> The reason why <span class=css>baseline</span> is the initial value
instead of <span class=css>use-script</span> (called <span class=css>auto</span> in the similar XSL property) has to do
with the fact that most fonts today are designed with an alignment point
located at the <span class=css>alphabetic</span> level, even for glyphs belonging to non Latin
scripts. User agents have to deal with that constraint, and therefore they
use the <span class=css>baseline</span> value as initial.

<h3 class="heading settled" data-level=2.6 id=alignment-adjust-prop><span class=secno>2.6. </span><span class=content>Setting the
alignment point: the <a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a> property</span><a class=self-link href=#alignment-adjust-prop></a></h3>

<table class=propdef id=name-14>
<tbody>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-alignment-adjust>alignment-adjust<a class=self-link href=#propdef-alignment-adjust></a></dfn><tr>
<td><em>Value:</em>

<td>auto | baseline | over-edge | text-over-edge | middle | central |
under-edge | text-under-edge | ideographic | alphabetic | hanging |
mathematical | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>

<tr>
<td><em>Initial:</em>

<td>auto

<tr>
<td><em>Applies to:</em>

<td>inline-level elements

<tr>
<td><em>Inherited:</em>

<td>no

<tr>
<td><em>Percentages:</em>

<td>refers to the <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> of the element

<tr>
<td><em>Media:</em>

<td>visual

<tr>
<td><em>Computed value:</em>

<td>see text
</table>

<p>The <a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a> property allows more
precise alignment of elements, such as graphics, that do not have a
baseline-table or lack the desired baseline in their baseline-table. With the
<a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a> property, the position
of the baseline identified by the <a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> can be explicitly
determined. It also determines precisely the alignment point for each glyph
within a textual element. The user agent should use heuristics to determine
the position of a non existing baseline for a given element.

<p>Values for the property have the following meaning:

<dl>
<dt><strong>auto</strong>

<dd>For each glyph corresponding to textual information within the element,
the alignment-point is the intersection of the start-edge of the glyph box
and the block-progression-direction position of the alignment point from the
font. Padding, border or margin do not affect that alignment point. The
alignment point of the inline-level element itself is at the intersection of
the start-edge of the first inline box and the baseline identified by the
<a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> property if this
baseline exists in the baseline-table for the element dominant-baseline. If
that specific baseline does not exist, the user agent may use heuristics to
determine where that missing baseline would be. For other inline box content
like images, the user agent will use heuristics to determine the position of
the alignment point. For example when the resulting baseline is <span class=css>alphabetic</span>
or <span class=css>ideographic</span>, it is expected that the alignment point will be at the
intersection of the start-edge and the under-edge of the inline box,
including its respective margin. If the resulting baseline is <span class=css>hanging</span>, the
intersection of the start-edge and the over-edge of the inline box,
including its respective margin should be used instead.<dd>When the 
<a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a> property is set to either <a data-link-type=dfn href=#under-edge title=under-edge>under-edge</a> or <a data-link-type=dfn href=#over-edge title=over-edge>over-edge</a>, 
the 'alignment-adjust: auto' value is equivalent to <a data-link-type=dfn href=#under-edge title=under-edge>under-edge</a> or 
<a data-link-type=dfn href=#over-edge title=over-edge>over-edge</a> respectively.<dt><strong>baseline</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the dominant-baseline of the element.

<dt><strong>over-edge</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the over-edge of the extended inline box of the element. This may 
include or not the line-height of the element, depending on the 
line-stacking-strategy.<dt><strong>text-over-edge</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the <span class=css>text-over-edge</span> baseline of the
element.

<dt><strong>central</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the <span class=css>central</span> baseline of the element.

<dt><strong>middle</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the <span class=css>middle</span> baseline of the element.

<dt><strong>under-edge</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the under-edge of the extended inline box of the element. This may 
include or not the line-height of the element, depending on the 
line-stacking-strategy.<dt><strong>text-under-edge</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the <span class=css>text-under-edge</span> baseline of the
element.

<dt><strong>ideographic</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the <span class=css>ideographic</span> baseline of the element.

<dt><strong>alphabetic</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the <span class=css>alphabetic</span> baseline of the element.

<dt><strong>hanging</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the <span class=css>hanging</span> baseline of the element.

<dt><strong>mathematical</strong>

<dd>The alignment point is at the intersection of the start-edge of the
element and the <span class=css>mathematical</span> baseline of the element.

<dt><strong>&lt;percentage&gt;</strong>

<dd>The computed value of the property is this percentage multiplied by the
computed <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> of the element. The alignment point is on the
start-edge of the inline box. Its position along the start-edge relative to
the intersection of the dominant-baseline and the start-edge is offset by the
computed value. The offset is opposite to the shift-direction (positive
value) or in the shift-direction (negative value). A value of <span class=css>0%</span> makes the
dominant-baseline the alignment point.

<dt><strong>&lt;length&gt;</strong>

<dd>The alignment-point is on the start-edge of the inline box. Its position
along the start-edge relative to the intersection of the dominant-baseline
and the start-edge is offset by the &lt;length&gt; value. The offset is
opposite to the shift-direction (positive value) or in the shift-direction
(negative value). A value of <span class=css>0cm</span> makes the dominant-baseline the alignment
point.
</dl>

<h3 class="heading settled" data-level=2.7 id=baseline-shift-prop><span class=secno>2.7. </span><span class=content>Repositioning
the dominant baseline: the <a class=property data-link-type=propdesc href=#propdef-baseline-shift title=baseline-shift>baseline-shift</a> property</span><a class=self-link href=#baseline-shift-prop></a></h3>

<table class=propdef id=name-15>
<tbody>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-baseline-shift>baseline-shift<a class=self-link href=#propdef-baseline-shift></a></dfn><tr>
<td><em>Value:</em>

<td>baseline | sub | super | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>

<tr>
<td><em>Initial:</em>

<td>baseline

<tr>
<td><em>Applies to:</em>

<td>inline-level elements

<tr>
<td><em>Inherited:</em>

<td>no

<tr>
<td><em>Percentages:</em>

<td>refers to the <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> of the parent element

<tr>
<td><em>Media:</em>

<td>visual

<tr>
<td><em>Computed value:</em>

<td>see text
</table>

<p>The <a class=property data-link-type=propdesc href=#propdef-baseline-shift title=baseline-shift>baseline-shift</a> property allows
repositioning of the dominant-baseline relative to the dominant-baseline. The
shifted object might be a sub- or superscript. Within the shifted element,
the whole baseline table is offset; not just a single baseline. For sub- and
superscript, the amount of offset is determined from the nominal font of the
parent.

<p>Values for the property have the following meaning:

<dl>
<dt><strong>baseline</strong>

<dd>There is no baseline shift; the dominant baseline remains in its original
position.

<dt><strong>sub</strong>

<dd>The dominant baseline is shifted to the default position for subscripts.
The offset for this position is determined by the font data for the parent
nominal font as adjusted by the dominant baseline-table font-size of the
parent element. If there is no applicable font data the User Agent may use
heuristics to determine the offset.

<dt><strong>super</strong>

<dd>The dominant baseline is shifted to the default position for
superscripts. The offset for this position is determined by the font data for
the parent nominal font as adjusted by the dominant baseline-table font-size
of the parent element. If there is no applicable font data the User Agent may
use heuristics to determine the offset.

<dt><strong>&lt;percentage&gt;</strong>

<dd>The computed value of the property is this percentage multiplied by the
computed <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> of the parent element. The dominant-baseline is
shifted in the shift-direction (positive value) or opposite to the
shift-direction (negative value) of the parent area by the computed value. A
value of <span class=css>0%</span> is equivalent to <span class=css>baseline</span>.

<dt><strong>&lt;length&gt;</strong>

<dd>The dominant-baseline is shifted in the shift-direction (positive value)
or opposite to the shift-direction (negative value) of the parent area by the
&lt;length&gt; value. A value of <span class=css>0cm</span> is equivalent to <span class=css>baseline</span>.
</dl>

<p class=note><b>Note.</b> Although it may seem that <a class=property data-link-type=propdesc href=#propdef-baseline-shift title=baseline-shift>baseline-shift</a> and
<a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a> properties are doing
the same thing, there are important differences. For <a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a>
the percentage values refer to the <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> of the element being
aligned. For 'baseline-shift the percentage values refer to the <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a>
of the parent element. Similarly, it is the <span class=css>sub</span> and <span class=css>super</span> offsets of the
parent that are used to align the shifted baseline rather than the <span class=css>sub</span> and
<span class=css>super</span> offsets of the element being positioned. To ensure a consistent sub-
or superscript position, it makes more sense to use the parent as the
reference rather than the subscript element which may have a changed
"line-height" due to "font-size" changes in the sub- or superscript
element.<br>
Using the "alignment-adjust" property is more suitable for positioning
elements, such as graphics, that have no internal textual structure. Using
the "baseline-shift" property is intended for sub- and superscripts where the
positioned element may itself be textual. The baseline-shift provides a way
to define a specific baseline offset other than the named offsets that are
defined relative to the dominant-baseline. In addition, having
"baseline-shift" makes it easier for a tool to generate the relevant
properties; many formatting programs already have a notion of baseline shift.

<h3 class="heading settled" data-level=2.8 id=vertical-align-prop><span class=secno>2.8. </span><span class=content>Vertical
alignment: the <a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a> shorthand baseline
alignment property</span><a class=self-link href=#vertical-align-prop></a></h3>

<table class=propdef id=name-16>
<tbody>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-vertical-align>vertical-align<a class=self-link href=#propdef-vertical-align></a></dfn><tr>
<td><em>Value:</em>

<td>auto | baseline | sub | super | top | text-top | central |
middle | bottom | text-bottom | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>

<tr>
<td><em>Initial:</em>

<td>not defined for shorthand properties

<tr>
<td><em>Applies to:</em>

<td>inline-level and table-cell elements

<tr>
<td><em>Inherited:</em>

<td>no

<tr>
<td><em>Percentages:</em>

<td>refers to the <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> of the element itself

<tr>
<td><em>Media:</em>

<td>visual

<tr>
<td><em>Computed value:</em>

<td>see individual properties</table>

<p>This property affects the vertical positioning of the inline boxes generated 
by an inline-level element inside a line box. The following values only have
meaning with respect to a parent inline-level element, or to a parent
block-level element, if that element generates <a href=/TR/REC-CSS2/visuren.html#anonymous>anonymous inline boxes</a>; they
have no effect if no such parent exists.

<div class=note>
<p><em><strong>Note.</strong> Values of this property have slightly different
meanings in the context of tables. Please consult the section on <a href=/TR/REC-CSS2/tables.html#height-layout>table height algorithms</a> for
details.</em>
</div>

<dl>
<dt><strong>auto</strong>

<dd>Align the dominant baseline of the parent box with the equivalent, or
heuristically reconstructed, baseline of the element inline box. If the element doesn’t have
a baseline, align the bottom of the inline box, including its margin with the
parent’s dominant baseline. If there is no parent or if there is a change of
flow orientation between this element and its parent, the dominant baseline
is set to <span class=css>alphabetic</span> for horizontal flow and <span class=css>central</span> for vertical flow.

<dt><strong>baseline</strong>

<dd>Align the <span class=css>alphabetic</span> baseline of the element with the <span class=css>alphabetic</span> baseline
of the parent element. If the inline element doesn’t have an <span class=css>alphabetic</span> baseline, align
the bottom of the box, including its margin for replaced elements, with the
parent’s <span class=css>alphabetic</span> baseline. The dominant baseline is set to <span class=css>alphabetic</span>
if there is no parent or if there is a flow orientation change between this
element and its parent, otherwise it is set to <span class=css>no-change</span>.

<dt><strong>central</strong>

<dd>Align the <span class=css>central</span> baseline of the inline element with the central baseline 
of the parent.

<dt><strong>middle</strong>

<dd>Align the <span class=css>middle</span> baseline of the inline element with the middle baseline of the parent.

<dt><strong>sub</strong>

<dd>Lower the baseline of the box to the proper position for subscripts of
the parent’s box. (This value has no effect on the font size of the element’s
text.)

<dt><strong>super</strong>

<dd>Raise the baseline of the box to the proper position for superscripts of
the parent’s box. (This value has no effect on the font size of the element’s
text.)

<dt><strong>text-top</strong>

<dd>Align the top of the box with the over-edge of the parent element’s
font.

<dt><strong>text-bottom</strong>

<dd>Align the bottom of the box with the under-edge of the parent element’s
font.

<dt><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a>

<dd>Raise (positive value) or lower (negative value) the box by this distance
(a percentage of the computed <a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> of the element). The
value <span class=css>0%</span> means the same as <span class=css>baseline</span>.

<dt><a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>

<dd>Raise (positive value) or lower (negative value) the box by this
distance. The value <span class=css>0cm</span> means the same as <span class=css>baseline</span>.
</dl>

<p>The remaining values refer to the line box in which the generated box
appears:

<dl>
<dt><strong>top</strong>

<dd>Align the over edge of the extended inline box with the over-edge of the line box.

<dt><strong>bottom</strong>

<dd>Align the under edge of the extended inline box with the under-edge of the line box.
</dl>

<p>The <a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a> property values affect the baseline alignment
properties for which it is a shorthand in the following manner:

<table border=1 cellpadding=0 cellspacing=0 style=border-collapse width=100%>
<tbody>
<tr>
<th>vertical-align value

<th>alignment-baseline

<th>alignment-adjust

<th>baseline-shift

<th>dominant-baseline

<tr>
<th>auto

<td>baseline<td>auto

<td>baseline

<td>auto

<tr>
<th>baseline

<td>alphabetic

<td>auto

<td>baseline

<td>auto<tr>
<th>sub

<td>baseline

<td>auto

<td>sub

<td>auto

<tr>
<th>super

<td>baseline

<td>auto

<td>super

<td>auto

<tr>
<th>top

<td>over-edge

<td>auto

<td>baseline

<td>auto

<tr>
<th>text-top

<td>text-over-edge

<td>auto

<td>baseline

<td>auto

<tr>
<th>central<td>central<td>auto<td>baseline<td>auto<tr>
<th>middle

<td>middle

<td>auto

<td>baseline

<td>auto

<tr>
<th>bottom

<td>under-edge

<td>auto

<td>baseline

<td>auto

<tr>
<th>text-bottom

<td>text-under-edge

<td>auto

<td>baseline

<td>auto

<tr>
<th>&lt;percentage&gt;

<td>baseline

<td>&lt;percentage&gt;

<td>baseline

<td>auto

<tr>
<th>&lt;length&gt;

<td>baseline

<td>&lt;length&gt;

<td>baseline

<td>auto
</table>

<h3 class="heading settled" data-level=2.9 id=inline-box-align-prop><span class=secno>2.9. </span><span class=content>Inline box
alignment: the <a class=property data-link-type=propdesc href=#propdef-inline-box-align title=inline-box-align>inline-box-align</a> property</span><a class=self-link href=#inline-box-align-prop></a></h3>

<table class=propdef id=name-17>
<tbody>
<tr>
<td><em>Name:</em>

<td><dfn class=css data-dfn-type=property data-export="" id=propdef-inline-box-align>inline-box-align<a class=self-link href=#propdef-inline-box-align></a></dfn><tr>
<td><em>Value:</em>

<td>initial | last | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-syntax-3/#typedef-integer title="<integer>">&lt;integer&gt;</a>

<tr>
<td><em>Initial:</em>

<td>last

<tr>
<td><em>Applies to:</em>

<td>inline-block-level elements

<tr>
<td><em>Inherited:</em>

<td>no

<tr>
<td><em>Percentages:</em>

<td>N/A

<tr>
<td><em>Media:</em>

<td>visual

<tr>
<td><em>Computed value:</em>

<td>specified value (except for initial and inherit)
</table>

<p>The <a class=property data-link-type=propdesc href=#propdef-inline-box-align title=inline-box-align>inline-box-align</a> property determines
which line of a multi-line inline block aligns with the previous and next
inline elements within a line. The alignment strategy for the inline block
itself (i.e. the definition of it alignment point and which parent baseline
should be used for the alignment) is determined by the inline block element
baseline alignment properties applicable to the line being used for the
alignment. This property has no effect for single line inline block. Possible
values:

<dl>
<dt>initial

<dd>Use the initial line of the inline block element for alignment purpose.

<dt>last

<dd>Use the last line of the inline block element for alignment purpose.

<dt>&lt;integer&gt;

<dd>Use nth line (as determined by the integer value) of the inline block
element for alignment purpose.
</dl>


<h2 class="heading settled" data-level=3 id=Initial><span class=secno>3. </span><span class=content>Initial Lines and Initial Letters</span><a class=self-link href=#Initial></a></h2>

<h3 class="heading settled" data-level=3.1 id=InitialLine><span class=secno>3.1. </span><span class=content>Initial Lines</span><a class=self-link href=#InitialLine></a></h3>

<p>Initial lines of block elements such as paragraphs are often displayed differently than subsequent lines. Initial line may be set in small caps, all caps, or even different fonts. The <code>::first-line</code> pseudo-element allows authors to control the presentation of these initial lines. However, only the following properties can be applied to the <code>::first-line</code> pseudo-element:</p>



<ul>
  <li>font properties</li>
  <li>color properties</li>
  <li>background properties</li>
  <li>text decoration properties</li>
  <li>baseline alignment properties</li>
  <li><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-text-3/#propdef-word-spacing title=word-spacing>word-spacing</a></li>
  <li><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-text-3/#propdef-letter-spacing title=letter-spacing>letter-spacing</a></li>
  <li><a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> (may be ignored depending on the block line-stacking strategy)</li>
  <li><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-text-decor-3/#propdef-text-shadow title=text-shadow>text-shadow</a></li>
  <li><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visuren.html#propdef-clear title=clear>clear</a></li>
  </ul>


<p>Note that the <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-text-3/#propdef-text-indent title=text-indent>text-indent</a> property typically only affects the initial line of a block element, unless its value is set to <span class=css>hanging</span>.</p>




 <h3 class="heading settled" data-level=3.2 id=DropInitial><span class=secno>3.2. </span><span class=content>An Introduction to Initial Letters</span><a class=self-link href=#DropInitial></a></h3>

<p>Large, decorative letters have been used to start new sections of text since before the invention of printing. In fact, their use predates lowercase letters entirely.</p>

<p>A <dfn data-dfn-type=dfn data-noexport="" id=drop-initial>drop initial<a class=self-link href=#drop-initial></a></dfn> is a larger-than-usual letter at the start of a paragraph, with a baseline at least one line lower than the first baseline of the paragraph. The size of the drop initial is usually indicated by how many lines it occuppies. Two- and three-line drop initial are very common.</p>




<figure>
<img alt="3-line drop cap with E Acute" src=Dropcap-E-acute-3line.png width=480>

<p class=caption>Three-line drop initial with E acute. Since the cap-height of the drop initial aligns with the cap-height of the main text, the accent extends above the paragraph.</p>

</figure>






<p>Drop initials are all about alignment. Reference points on the drop cap must align precisely with reference points in the text. In Western scripts, the top reference points are the cap height of the initial letter and of the first line of text. The bottom reference points are the baseline of the initial letter and the baseline of the Nth line of text. <a href=#f2>Figure 2</a> shows a simple two-line drop cap, with the relevant reference lines marked.</p>



<figure id=f2>
<img alt="drop cap showing alignment" src=Dropcap-lines.png width=600>

<p class=caption>Two-line drop cap showing baselines (green lines), cap-height (red line), and ascender (cyan line).</p>

</figure>



<div class=note>
<p>The size of a drop initial is determined by the need to satisfy the required alignment. For an N-line drop initial in a Western script, the cap-height of the letter needs to be (N – 1) times the line-height, plus the cap-height of the surrounding text. Note this height is <b>not</b> the font size of the drop initial.</p>


<p>Actually calculating this font size is tricky. For an N-line drop initial, we find the drop initial font size to be:</p>


<figure>
<img alt="Equation to calcuate drop initial font size" src=InitialCapEquation.png width=604>
</figure>

<p></p>

<p></p>


<p>A three-line drop initial in Adobe Minion Pro would have a font size of 61.2pt, given 12pt text, 16pt line-height and a cap-height of 651/1000 (from the font’s OS/2 table).</p>
</div>


<p>The alignment constraints depend on the script used. In Japanese vertical writing mode, it appears that the initial letter extends from the start edge of the first line to the end edge of the Nth line.</p>

<p class=issue id=issue-91340f65><a class=self-link href=#issue-91340f65></a>Input from Japanese typographers would be very helpful.</p>

<figure>
<img alt="Japanese Vertical Initial" src=Initial-2line-JapaneseVertical六.png width=480>
<p class=caption>Two-line drop initial in vertical writing mode</p>
</figure>
<p class=issue id=issue-ddff256b><a class=self-link href=#issue-ddff256b></a>This figure is probably incorrect.</p>



<p class=issue id=issue-f229a1d3><a class=self-link href=#issue-f229a1d3></a>Add content describing constraint that the block container have a baseline grid (or fixed line-height?).</p>


<h3 class="heading settled" data-level=3.3 id=selecting-drop-initials><span class=secno>3.3. </span><span class=content>Selecting Initial Letters</span><a class=self-link href=#selecting-drop-initials></a></h3>

<p>Initial letters are typically a single letter, which can be selected by the <code>::first-letter</code> pseudo-element, as defined in <a data-biblio-type=informative data-link-type=biblio href=#biblio-select title=SELECT>[SELECT]</a>. Authors who need more control over which characters are included in an initial letter can also apply the <a class=property data-link-type=propdesc href=#propdef-initial-letter title=initial-letter>initial-letter</a> property to the first inline child of a block container.</p>




<p>Only the following properties can be applied to the <code>::first-letter</code> pseudo-elements:</p>

<ul>
  <li>font properties</li>
  <li>color properties</li>
  <li>background properties</li>
  <li>text decoration properties</li>
  <li>baseline alignment properties (only if <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visuren.html#propdef-float title=float>float</a> is <span class=css>none</span>)</li>
  <li><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-text-3/#propdef-text-transform title=text-transform>text-transform</a></li>
  <li><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-text-3/#propdef-letter-spacing title=letter-spacing>letter-spacing</a></li>
  <li><a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a> (may be ignored depending on the block line-stacking strategy)</li>
  <li>margin properties</li>
  <li>padding properties</li>
  <li>border properties</li>
  <li><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visuren.html#propdef-float title=float>float</a></li>
  <li>text-shadow</li>
  <li><a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css2/visuren.html#propdef-clear title=clear>clear</a></li>
  <li><a class=property data-link-type=propdesc href=#propdef-initial-letter title=initial-letter>initial-letter</a></li>
  <li><a class=property data-link-type=propdesc href=#propdef-initial-letter-align title=initial-letter-align>initial-letter-align</a></li>
  </ul>




<h3 class="heading settled" data-level=3.4 id=sizing-drop-initials><span class=secno>3.4. </span><span class=content>Creating Initial Letters: the <a class=property data-link-type=propdesc href=#propdef-initial-letter title=initial-letter>initial-letter</a> property</span><a class=self-link href=#sizing-drop-initials></a></h3>

<p>This property takes two arguments. The first argument defines the size of the initial letter, in terms of how many lines it occupies. The optional second argument argument defines the number of lines the initial letter should sink. An N-line initial letter sinks to the Nth text baseline. If not specified, it duplicates the first argument.</p>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css data-dfn-type=property data-export="" id=propdef-initial-letter>initial-letter<a class=self-link href=#propdef-initial-letter></a></dfn><tr><th>Value:<td class=prod>normal <a data-link-for="" data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> [<a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-syntax-3/#typedef-integer title="<integer>">&lt;integer&gt;</a> <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-syntax-3/#typedef-integer title="<integer>">&lt;integer&gt;</a><a data-link-for="" data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#mult-opt title=?>?</a>]<tr><th>Initial:<td>normal<tr><th>Applies to:<td><code>::first-letter</code> pseudo elements and inline level first child of a block container<tr><th>Inherited:<td>no<tr><th>Percentages:<td>N/A<tr><th>Media:<td>visual<tr><th>Computed value:<td>as described<tr><th>Animatable:<td>no</table>


<div class=example>

<figure>
<img alt="3-line drop cap with C" src=Dropcap-C-3line.png width=480>

<p class=caption>Three-line drop initial.</p>

</figure>
<pre>p::first-letter {
  initial-letter: 3;
}
</pre>
</div>






<p>Some styles of drop initials do not align with the first line of text. For example, “sunken caps” both sink below the first baseline, and extend above the first line of text. In these cases, the size of the initial cap needs to be defined. The optional second argument of <a class=property data-link-type=propdesc href=#propdef-initial-letter title=initial-letter>initial-letter</a> specifies the size of an initial letter, as if it were an n-line drop cap.</p>








<div class=example>

<figure>
<img alt="sunken drop initial" src=SunkenCapA.png width=480>
<p class=caption>Sunken cap. The letter drops two lines, but is the size of a three-line initial letter.</p>
</figure>
<pre>
p::first-letter {
  initial-letter: 3 2;
}

</pre>

</div>


<p>If the second argument is <span class=css>1</span>, that creates a pure raised initial letter (often called “raised cap” or “stick-up cap.”</p>


<div class=example>

<figure>
<img alt="raised cap" src=RaisedCap.png width=480>
<p class=caption>Raised cap. The initial letter is the size of a 3-line initial, but does not drop.</p>
</figure>
<pre>
p::first-letter {
  initial-letter: 3 1;
}

</pre>

</div>





<h3 class="heading settled" data-level=3.5 id=aligning-initial-letter><span class=secno>3.5. </span><span class=content>Alignment of Initial Letters</span><a class=self-link href=#aligning-initial-letter></a></h3>

<p>As mentioned earlier, the alignment of initial letters depends on the script used. The <a class=property data-link-type=propdesc href=#propdef-initial-letter-align title=initial-letter-align>initial-letter-align</a> property can be used to specify the proper alignment.</p>

<table class="definition propdef"><tr><th>Name:<td><dfn class=css data-dfn-type=property data-export="" id=propdef-initial-letter-align>initial-letter-align<a class=self-link href=#propdef-initial-letter-align></a></dfn><tr><th>Value:<td class=prod>[ auto <a data-link-for="" data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> alphabetic <a data-link-for="" data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> hanging <a data-link-for="" data-link-type=grammar href=http://dev.w3.org/csswg/css-values-3/#comb-one title=|>|</a> ideographic ]<tr><th>Initial:<td>auto<tr><th>Applies to:<td><code>::first-letter</code> pseudo elements and inline level first child of a block container<tr><th>Inherited:<td>no<tr><th>Percentages:<td>N/A<tr><th>Media:<td>visual<tr><th>Computed value:<td>???<tr><th>Animatable:<td>no</table>


<dl data-dfn-for=initial-letter-align data-dfn-type=value> 
<dt>auto</dt>
<dd>The user agent selects the value which corresponds to the language of the text. Western languages would default to <span class=css>alphabetic</span>, CJK languages to <span class=css>ideographic</span>, and some Indic languages to <span class=css>hanging</span>. </dd>
<dt>alphabetic</dt>
<dd>As described above, the cap height of the initial letter aligns with the cap height of the first line of text. The baseline of the initial letter aligns with the baseline of the Nth text baseline.</dd>

<dt>hanging</dt>
<dd>The hanging baseline of the initial letter aligns with the hanging baseline of the first line of text.  </dd>

<dt>ideographic</dt>
<dd>The initial letter is centered in the N-line area. </dd>
</dl>

<p class=issue id=issue-209367a3><a class=self-link href=#issue-209367a3></a>Input from those knowledgeable about non-Western  typographic traditions would be very helpful in describing the appropriate alignments. More values may be required for this property.</p>

<div class=example>
The vertical writing mode example from <a href=#f2>Figure 2</a> could be coded as:

<pre>span.initial {
  initial-letter: 2;
  initial-letter-alignment: ideographic;
}
</pre>


</div>


<h4 class="heading settled" data-level=3.5.1 id=initial-letter-replaced><span class=secno>3.5.1. </span><span class=content>Applying <a class=property data-link-type=propdesc href=#propdef-initial-letter title=initial-letter>initial-letter</a> to replaced elements</span><a class=self-link href=#initial-letter-replaced></a></h4>

<p><a class=property data-link-type=propdesc href=#propdef-initial-letter title=initial-letter>initial-letter</a> may be applied to an image or other replaced element, if it is the first child of the block container. In this case, the alignment points for the image would be the content edges.</p>


<h3 class="heading settled" data-level=3.6 id=initial-letter-exclusions><span class=secno>3.6. </span><span class=content>Space Around Initial Letters</span><a class=self-link href=#initial-letter-exclusions></a></h3>

<p>If an initial letter has a descender, it could crash into the (n+1)th line of text. This is not desirable.</p>

<figure>
<img alt="3-line drop cap with J, with descender crashing into fourth line of text" src=Dropcap-J-3line-crash.png width=480>
<p class=caption>Incorrect: three-line initial letter with descender</p>
</figure>

<p>Text should be excluded around the glyph bounding boxes of the initial letters:</p>



<figure>
<img alt="3-line drop cap with J, but four-line exclusion" src=Dropcap-J-3line-exclude.png width=480>
<p class=caption>Correct: text excluded around glyph bounding box</p>
</figure>


<h3 class="heading settled" data-level=3.7 id=initial-letter-paragraphs><span class=secno>3.7. </span><span class=content>Interactions of initial letters with surrounding paragraphs</span><a class=self-link href=#initial-letter-paragraphs></a></h3>

<h4 class="heading settled" data-level=3.7.1 id=raised-sunken-caps><span class=secno>3.7.1. </span><span class=content>Raised and sunken caps</span><a class=self-link href=#raised-sunken-caps></a></h4>

<p>An initial letter does not affect the position of its containing element. For “raised caps” or “sunken caps,” the effect is created as if the text around the initial letter was pushed down, rather than the letter extending up into previous elements.</p>


<figure>
<img alt="raised cap para after normal para" src=initial-letter-drop-para-compare.png width=600>
<p class=caption>Raised cap (<code>initial-letter: 3 1</code>) on right; note that the position of the “C” is the same in both cases, but on the right all text is moved down relative to the initial letter.</p>
</figure>


<h4 class="heading settled" data-level=3.7.2 id=short-para-initial-letter><span class=secno>3.7.2. </span><span class=content>Short paragraphs with initial letters</span><a class=self-link href=#short-para-initial-letter></a></h4>

<p>A paragraph with an initial letter may have fewer lines of text than the initial letter occupies. The initial letter acts as if it is a float, and the subsequent para must wrap around it.</p>

<figure>
<img alt="short para with initial letter" src=initial-letter-short-para.png width=600>
<p class=caption>The red text is a short paragraph with an initial letter. Note the subsequent paragraph wraps around the initial letter just as text in the paragraph with the initial letter does.</p>
</figure>

<p>If the subsequent paragraph starts with an initial letter, then it must clear the previous paragraph’s initial letter.</p>

<figure>
<img alt="short para with initial letter followed by para with initial" src=initial-letter-short-para-initial.png width=600>
<p class=caption>The red text is a short paragraph with an initial letter. The subsequent paragraph clears because it also has an initial letter.</p>
</figure>





<p class=issue id=issue-79d884e2><a class=self-link href=#issue-79d884e2></a>Define appropriate behavior for non-western scripts. The editors would appreciate any examples of drop initials in such scripts.</p>


<h2 class="heading settled" data-level=4 id=properties><span class=secno>4. </span><span class=content>Properties index</span><a class=self-link href=#properties></a></h2>

<p>In addition to the specified values, all properties take the
initial and inherit values.</p>


<p>The following properties are mentioned in this module, but are defined
elsewhere:</p>
<ul>
  <li><dfn data-dfn-type=dfn data-noexport="" id=script>text-script<a class=self-link href=#script></a></dfn>,
      <dfn data-dfn-type=dfn data-noexport="" id=direction>direction<a class=self-link href=#direction></a></dfn>,
      <dfn data-dfn-type=dfn data-noexport="" id=text-align>text-align<a class=self-link href=#text-align></a></dfn>,
      <dfn data-dfn-type=dfn data-noexport="" id=writing-mode>writing-mode<a class=self-link href=#writing-mode></a></dfn>,
      see the Text module.
  <li><dfn data-dfn-type=dfn data-noexport="" id=font-size>font-size<a class=self-link href=#font-size></a></dfn>,
      see the Fonts module.
</ul>

<h2 class="heading settled" data-level=5 id=profiles><span class=secno>5. </span><span class=content>Profiles</span><a class=self-link href=#profiles></a></h2>

<p>There are 3 modules defined by this chapter:

<p>CSS1 line model:

<p>CSS2 line model:

<p>CSS3 line model:

<p>The CSS1 line module is made of the following properties/values:

<table class=proptable>
<tbody>
<tr>
<th>Name

<th>Values

<th>Initial

<th>Applies to

<th>Inherited

<th>Percentages

<th>Media groups

<tr>
<td><a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a>

<td>normal | &lt;number&gt; | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>| <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a>

<td>normal

<td> all elements

<td>yes

<td> relative to the font-size of the element itself<td>N/A

<tr>
<td><a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a>

<td>baseline | sub | super | top | text-top | middle | bottom | text-bottom |
<a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a>

<td>baseline

<td>inline-level elements

<td>no

<td> N/A

<td>N/A

</table>

<p>The following table describes the CSS2 text module. Because all properties 
have added the <span class=css>inherit</span> value and have a media type, all CSS1 properties have 
been specified below as well. In
addition, the <a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a> has a new value:

<p>&lt;length&gt;. Properties that applies to all
elements also applies to generated content. Finally, <a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a> also
applies to table-cell elements.</p>

<table class=proptable>
<tbody>
<tr>
<th>.Name

<th>Values

<th>Initial

<th>Applies to

<th>Inherited

<th>Percentages

<th>Media groups

<tr>
<td><a class=property data-link-type=propdesc href=#propdef-line-height title=line-height>line-height</a>

<td>normal | &lt;number&gt; | <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#length-value title="<length>">&lt;length&gt;</a>| <a class="production css" data-link-type=type href=http://dev.w3.org/csswg/css-values-3/#percentage-value title="<percentage>">&lt;percentage&gt;</a> <td>normal

<td> all elements and generated content<td>yes

<td> relative to the font-size of the element itself<td>N/A

</tr>

<tr>
<td><a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a>

<td>baseline | sub | super | top | text-top | central | middle | bottom |
text-bottom | &lt;percentage&gt; | &lt;length&gt; | inherit

<td>baseline

<td>inline-level and table-cell elements

<td>no

<td> N/A

<td><a class=noxref href=/TR/REC-CSS2/media.html#visual-media-group>visual</a>

</table>

<p>The CSS3 module adds the following properties:

<ul>

<li>Line stacking and content height:
<a class=property data-link-type=propdesc href=#propdef-line-stacking-strategy title=line-stacking-strategy>line-stacking-strategy</a>,
<a class=property data-link-type=propdesc href=#propdef-line-stacking-ruby title=line-stacking-ruby>line-stacking-ruby</a>,
<a class=property data-link-type=propdesc href=#propdef-line-stacking-shift title=line-stacking-shift>line-stacking-shift</a>,
<a class=property data-link-type=propdesc href=#propdef-line-stacking title=line-stacking>line-stacking</a>,
<a class=property data-link-type=propdesc href=#propdef-text-height title=text-height>text-height</a></li>

<li>Baseline alignment:
<a class=property data-link-type=propdesc href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a>,
<a class=property data-link-type=propdesc href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a>,
<a class=property data-link-type=propdesc href=#propdef-baseline-shift title=baseline-shift>baseline-shift</a>,
<a class=property data-link-type=propdesc href=#propdef-dominant-baseline title=dominant-baseline>dominant-baseline</a>,
<a class=property data-link-type=propdesc href=#propdef-inline-box-align title=inline-box-align>inline-box-align</a></li>

<li>Drop initial letter:
<a class=property data-link-type=propdesc href=#propdef-initial-letter title=initial-letter>initial-letter</a>, <a class=property data-link-type=propdesc href=#propdef-initial-letter-align title=initial-letter-align>initial-letter-align</a></li>
</ul>

<p>It also modifies the following properties as described:

<ul>
<li><a class=property data-link-type=propdesc href=#propdef-vertical-align title=vertical-align>vertical-align</a> has one new value: <span class=css>auto</span>, and has its
initial value changed to <span class=css>auto</span>.

<li>all properties take the value <span class=css>initial</span>.
</ul>


<h2 class="no-num heading settled" id=BaselineUsage><span class=content>Appendix A: Usage of baseline alignment
(informative)</span><a class=self-link href=#BaselineUsage></a></h2>

<p>The following appendix shows some examples of baseline alignment,
exercising the related properties .

<p>A simple example of alignment is shown in the following figure. The figure
shows the presentation of two inline elements, one inside the other. These
inline elements make up the content of a line in a block where the
writing-mode is "lr-tb" and the font is "Helvetica". The structure of the
example is as follows:

<pre>&lt;p&gt;&lt;span class="outer"&gt;Apex &lt;span class="inner"&gt;Top&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

<p>with the style being defined as:

<pre>p { writing-mode: lr-tb; font: Helvetica; }
span { alignment-baseline: use-script; }</pre>

<p>The other baseline alignment initial values apply. Since a horizontal
writing-mode is in use, the dominant-baseline-identifier is set to
"alphabetic" and the baseline-table is taken from the nominal-font for the
block in which the line appears, which, in this case, is Helvetica.

<p>In the figure, the positions of the baselines relative to the current font
size are shown as red (staff) lines. These lines are labeled with
abbreviations of the names of the baselines (e.g., TBE for
"text-over-edge"). The baseline identified by the
dominant-baseline-identifier (A) is shown in blue. There is a break in the
staff lines to separately show the inner inline element. This is not
necessary for this example, but this distinction will become important in
subsequent examples.

<p>The "alignment-baseline" property is the primary control on the
positioning of an inner element with respect to its parent. The initial value
of the "alignment-baseline" property is "baseline". This aligns the
dominant-baseline of the inner inline element with the dominant baseline of
the outer inline element. This is shown by the short blue line that connects
the two separated staffs (A) in the figure.

<p>The glyphs that are in the content of the two elements are aligned based
on the script to which the glyph belongs. Since this example only has Latin
glyphs, they are aligned to the "alphabetic" baseline.

<div class=figure>
<p><img alt="alphabetic baseline" height=98 src=AlignIntro-1.gif width=385>

<p>An inner inline element containing Latin characters aligned to an outer
inline element also containing Latin characters.
</div>

<p>In the next figure, the content of the inner inline element is in
Gurmukhi, the script of the Punjabi language. The Gurmukhi syllables are read
as “guru”. Rather than use Unicode values for these characters, they are
symbolized by placing the Latin transliteration in italic type. The structure
of the example becomes (assuming the same style):

<pre>&lt;p&gt;&lt;span class="outer"&gt;Apex &lt;span class="inner"&gt;<i data-link-type=dfn title=guru>guru</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

<p>The only change from the previous example is that the glyphs of the
Gurmukhi script are aligned to the "hanging" baseline of the inner inline
element. The alignment of that element itself, with respect to the outer
inline element, is unchanged. The "hanging" baseline position is computed
from the font-table part of the dominant-baseline set of the parent element
(in this case the outer inline element which is getting itself the set from
its parent, the block element).

<div class=figure>
<p><img alt="alphabetic alignment" height=98 src=AlignIntro-2.gif width=387>

<p>An inner inline element containing Gurmukhi characters aligned to an outer
inline element containing Latin characters.
</div>

<p>In the next figure, fragments of the text of the previous examples make up
the content of the outer inline element. The inner inline element has a
change of font-size, however. The structure is:

<pre>&lt;p&gt;&lt;span class="outer"&gt;Ap<i data-link-type=dfn title=guru>guru</i> &lt;span class="inner"&gt;Ex<i data-link-type=dfn title=ji>ji</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

<p>with the following style:

<pre>p { writing-mode: lr-tb; font: Helvetica; }
span { alignment-baseline: use-script; }
span.inner { font-size: .75em; }</pre>

<p>In this example, the alignment of the inner inline element itself does not
change, nor does the alignment of the smaller glyphs inside the inner
element. The Latin glyphs are still aligned to the "alphabetic" baseline and
the Gurmukhi glyphs, which are pronounced "ji" are aligned to the "hanging"
baseline. Note also that just changing the "font-size" property did not
change the baseline-table in effect in the inner inline element.

<div class=figure>
<p><img alt="baselines and font size" height=98 src=AlignIntroB-2FS.gif width=391>

<p>The inner inline element has a reduced font-size.
</div>

<p>The next figure is equivalent to the previous example with the Gurmukhi
character replaced by ideographic characters. These are aligned to the
"ideographic" baseline.

<div class=figure>
<p><img alt="baselines and font size" height=98 src=AlignIntroB-4FS.gif width=391>

<p>The previous figure redone with ideographic glyphs instead of Gurmukhi
glyphs. The EM boxes are shown for the ideograms to clarify the alignment of
these glyphs.
</div>

<p>To change the scaling of the lines of the baseline table, it is necessary
to use the "dominant-baseline" property on the inner inline element. The
value of "reset-size" causes the baseline-table font-size to be reset from
the font-size of the element on which the "dominant-baseline" property
appears. The next figure shows the effect of this, using the structure:

<pre>&lt;p&gt;&lt;span class="outer"&gt;Ap<i data-link-type=dfn title=guru>guru</i> &lt;span class="inner"&gt;Ex<i data-link-type=dfn title=ji>ji</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

<p>with the following style:

<pre>p { writing-mode: lr-tb; font: Helvetica; }
span { alignment-baseline: use-script; }
span.inner { font-size: .75em; dominant-baseline: reset-size; }</pre>

<p>The alignment of the inner inline element, with respect to the outer
inline element, is still determined by aligning the dominant baselines
(alphabetic). But, the baseline-table of the inner inline element has been
rescaled to the font-size of the inner inline element. Hence the smaller
glyphs align with each other.

<div class=figure>
<p><img alt="baseline tables" height=98 src=AlignIntroB-3RS.gif width=351>

<p>The baseline-table of the inner inline element has been resized to match
the font-size of the inner inline element.
</div>

<p>But, what if it is more important that the small Gurmukhi glyphs align
with the large Gurmukhi glyphs than having the Latin glyphs align. There are
at least two ways to achieve this. The structure:

<pre>&lt;p&gt;&lt;span class="outer"&gt;Ap<i data-link-type=dfn title=guru>guru</i> &lt;span class="inner"&gt;Ex<i data-link-type=dfn title=ji>ji</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

<p>with the following style:

<pre>p { writing-mode: lr-tb; font: Helvetica; }
span { alignment-baseline: use-script; }
span.outer {dominant-baseline: hanging }
span.inner { font-size: .75em; dominant-baseline: reset-size; }</pre>

<p>is illustrated in the next figure. The "hanging" baseline becomes the
dominant baseline and the initial value of the "alignment-baseline" property
causes the (newly) dominant "hanging" baselines to be aligned as is shown by
the connection of the blue baselines.

<div class=figure>
<p><img alt="dominant baseline" height=98 src=AlignIntroB-3DH.gif width=351>

<p>Changing the dominant baseline to the "hanging" baseline causes the inner
inline element to be aligned on its parent’s "hanging" baseline.
</div>

<p>It is also possible to achieve the effect of the above figure without
changing the dominant baseline. Instead it is sufficient to explicitly
specify that the inner inline element is aligned on its "hanging" baseline.
This is done by:

<pre>&lt;p&gt;&lt;span class="outer"&gt;Ap<i data-link-type=dfn title=guru>guru</i> &lt;span class="inner"&gt;Ex<i data-link-type=dfn title=ji>ji</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

<p>with the following style:

<pre>p { writing-mode: lr-tb; font: Helvetica; }
span { alignment-baseline: use-script; }
span.inner { font-size: .75em; dominant-baseline: reset-size; alignment-baseline: hanging; }</pre>

<p>The only change this approach would make in the above figure is to color
the "hanging" baseline red and keep the "alphabetic" baseline as the (blue)
dominant baseline. This baseline in the inner inline element would not (as it
does not in the above figure) align with the "alphabetic" baseline in the
outer inline element.

<p>Another baseline alignment property is the "baseline-shift" property. Like
the properties other than the "dominant-baseline" property, this property
does not change the baseline-table or the baseline-table font-size. It does
shift the whole baseline table of the parent element so that when an inner
inline element is aligned to one of the parents baselines, the position of
the inner inline element is shifted. This is illustrated in the next figure.
The structure which creates this figure is:

<pre>&lt;p&gt;&lt;span class="outer"&gt;Apex &lt;span class="inner"&gt;1<i data-link-type=dfn title=ji>ji</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

<p>with the following style:

<pre>p { writing-mode: lr-tb; font: Helvetica; }
span { alignment-baseline: use-script; }
span.inner { baseline-shift: super; }</pre>

<p>Because the whole set of baseline-table staff lines are shifted to the
position of the superscript baseline: it does not matter to which baseline
the glyphs in the superscript are aligned. The European number "1" is aligned
to the "alphabetic" baseline and the Gurmukhi syllable "ji" is aligned to the
"hanging" baseline.

<div class=figure>
<p><img alt="baseline shift" height=120 src=AlignIntroB-5.gif width=385>

<p>Using a "baseline-shift" for a superscript (or a subscript).
</div>

<p>It is more common for the font-size of the superscript text to be smaller
than the font-size of the text to which it is appended. Consider:

<pre>&lt;p&gt;&lt;span class="outer"&gt;Apex &lt;span class="inner"&gt;1<i data-link-type=dfn title=ji>ji</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

<p>with the following style:

<pre>p { writing-mode: lr-tb; font: Helvetica; }
span { alignment-baseline: use-script; }
span.inner { baseline-shift: super; font-size: .75em; }</pre>

<p>Because changing the font-size on a superscript (or subscript) is common,
this is the one case where changing the font-size does cause the
baseline-table font-size to be reset when the "dominant-baseline" property
has its initial value. After the rescaling, the default alignment to the
dominant baseline positions the inline element for the superscript to the
dominant baseline position in the shifted baseline-table of the parent
element.

<div class=figure>
<p><img alt="baseline shift" height=114 src=AlignIntroB-5FS.gif width=372>

<p>Reducing the font-size of the superscript automatically resets the
baseline-table size so that mixed languages in the superscript stay mutually
aligned.
</div>


<h2 class="no-num heading settled" id=ack><span class=content>Acknowledgments</span><a class=self-link href=#ack></a></h2>

<p>Special thanks goes to the initial authors,
Eric A. Meyer and Michel Suignard.

<p>In additions to the authors, this specification would not have been possible without the help from:

<p>David Baron, John Daggett, Stephen Deach, Sujal Parikh, Grzegorz Zygmunt, Chris Wilson, David M Brown.

<h2 class="no-ref no-num heading settled" id=conformance><span class=content>
Conformance</span><a class=self-link href=#conformance></a></h2>

<h3 class="no-ref heading settled" id=conventions><span class=content>
Document conventions</span><a class=self-link href=#conventions></a></h3>

    <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification.

    <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-biblio-type=normative data-link-type=biblio href=#biblio-rfc2119 title=RFC2119>[RFC2119]</a></p>

    <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this:

    <div class=example>
        <p>This is an example of an informative example.</p>
    </div>

    <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

    <p class=note>Note, this is an informative note.</p>

    <p>Advisements are normative sections styled to evoke special attention and are
    set apart from other normative text with <code>&lt;strong class="advisement"&gt;</code>, like
    this:

    <strong class=advisement>
        UAs MUST provide an accessible alternative.
    </strong>

<h3 class="no-ref heading settled" id=conformance-classes><span class=content>
Conformance classes</span><a class=self-link href=#conformance-classes></a></h3>

    <p>Conformance to this specification
    is defined for three conformance classes:
    <dl>
        <dt>style sheet
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#style-sheet>CSS
            style sheet</a>.
        <dt>renderer
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that interprets the semantics of a style sheet and renders
            documents that use them.
        <dt>authoring tool
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that writes a style sheet.
    </dl>

    <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module.

    <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.)

    <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module.

<h3 class="no-ref heading settled" id=partial><span class=content>
Partial implementations</span><a class=self-link href=#partial></a></h3>

    <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong>
    treat as invalid (and <a href=http://www.w3.org/TR/CSS21/conform.html#ignore>ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>

<h3 class="no-ref heading settled" id=experimental><span class=content>
Experimental implementations</span><a class=self-link href=#experimental></a></h3>

    <p>To avoid clashes with future CSS features, the CSS2.1 specification
    reserves a <a href=http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords>prefixed
    syntax</a> for proprietary and experimental extensions to CSS.

    <p>Prior to a specification reaching the Candidate Recommendation stage
    in the W3C process, all implementations of a CSS feature are considered
    experimental. The CSS Working Group recommends that implementations
    use a vendor-prefixed syntax for such features, including those in
    W3C Working Drafts. This avoids incompatibilities with future changes
    in the draft.
    </p>

<h3 class="no-ref heading settled" id=testing><span class=content>
Non-experimental implementations</span><a class=self-link href=#testing></a></h3>

    <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec.

    <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group.

    <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at
    <a href=http://www.w3.org/Style/CSS/Test/>http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the
    <a href=http://lists.w3.org/Archives/Public/public-css-testsuite>public-css-testsuite@w3.org</a>
    mailing list.



<h2 class="no-num heading settled" id=references><span class=content>References</span><a class=self-link href=#references></a></h2><h3 class="no-num heading settled" id=normative><span class=content>Normative References</span><a class=self-link href=#normative></a></h3><dl><dt id=biblio-rfc2119 title=rfc2119><a class=self-link href=#biblio-rfc2119></a>[rfc2119]<dd>S. Bradner. <a href=http://www.ietf.org/rfc/rfc2119.txt>Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href=http://www.ietf.org/rfc/rfc2119.txt>http://www.ietf.org/rfc/rfc2119.txt</a></dl><h3 class="no-num heading settled" id=informative><span class=content>Informative References</span><a class=self-link href=#informative></a></h3><dl><dt id=biblio-css2 title=CSS2><a class=self-link href=#biblio-css2></a>[CSS2]<dd>Bert Bos; et al. <a href=http://www.w3.org/TR/CSS2>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. REC. URL: <a href=http://www.w3.org/TR/CSS2>http://www.w3.org/TR/CSS2</a><dt id=biblio-css3text title=CSS3TEXT><a class=self-link href=#biblio-css3text></a>[CSS3TEXT]<dd>Elika J. Etemad; Koji Ishii. <a href=http://www.w3.org/TR/2012/WD-css3-text-20121113/>CSS Text Module Level 3</a>. 13 November 2012. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/WD-css3-text-20121113/>http://www.w3.org/TR/2012/WD-css3-text-20121113/</a><dt id=biblio-select title=SELECT><a class=self-link href=#biblio-select></a>[SELECT]<dd>Tantek Çelik; et al. <a href=http://www.w3.org/TR/2011/REC-css3-selectors-20110929/>Selectors Level 3</a>. 29 September 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-css3-selectors-20110929/>http://www.w3.org/TR/2011/REC-css3-selectors-20110929/</a></dl><h2 class="no-num heading settled" id=index><span class=content>Index</span><a class=self-link href=#index></a></h2><ul class=indexlist><li>alignment-adjust, <a href=#propdef-alignment-adjust title="section 2.6">2.6</a><li>alignment-baseline, <a href=#propdef-alignment-baseline title="section 2.5">2.5</a><li>alignment-point, <a href=#alignment-point title="section 2.1">2.1</a><li>alphabetic, <a href=#alphabetic title="section 2.2">2.2</a><li>baseline, <a href=#baseline title="section 2.1">2.1</a><li>baseline-shift, <a href=#propdef-baseline-shift title="section 2.7">2.7</a><li>baseline-table, <a href=#baseline-table title="section 2.1">2.1</a><li>bottom, <a href=#bottom title="section 2.2">2.2</a><li>central, <a href=#central title="section 2.2">2.2</a><li>direction, <a href=#direction title="section 4">4</a><li>dominant-baseline, <a href=#propdef-dominant-baseline title="section 2.4">2.4</a><li>drop initial, <a href=#drop-initial title="section 3.2">3.2</a><li>extended block-progression dimension, <a href=#extended-block-progression-dimension title="section 1.4.1">1.4.1</a><li>extended inline box, <a href=#extended-inline-box title="section 2.2">2.2</a><li>font-size, <a href=#font-size title="section 4">4</a><li>half-leading, <a href=#half-leading title="section 1.4.2">1.4.2</a><li>hanging, <a href=#hanging title="section 2.2">2.2</a><li>ideographic, <a href=#ideographic title="section 2.2">2.2</a><li>initial-letter, <a href=#propdef-initial-letter title="section 3.4">3.4</a><li>initial-letter-align, <a href=#propdef-initial-letter-align title="section 3.5">3.5</a><li>inline-box-align, <a href=#propdef-inline-box-align title="section 2.9">2.9</a><li>line box, <a href=#line-box title="section 1.1">1.1</a><li>line-box-contain, <a href=#propdef-line-box-contain title="section 1.4.2">1.4.2</a><li>line-height, <a href=#propdef-line-height title="section 1.4.1">1.4.1</a><li>line-stacking, <a href=#propdef-line-stacking title="section 1.4.2.1">1.4.2.1</a><li>line-stacking-ruby, <a href=#propdef-line-stacking-ruby title="section 1.4.2.1">1.4.2.1</a><li>line-stacking-shift, <a href=#propdef-line-stacking-shift title="section 1.4.2.1">1.4.2.1</a><li>line-stacking-strategy, <a href=#propdef-line-stacking-strategy title="section 1.4.2.1">1.4.2.1</a><li>mathematical, <a href=#mathematical title="section 2.2">2.2</a><li>middle, <a href=#middle title="section 2.2">2.2</a><li>minimum extended block-progression dimension, <a href=#minimum-extended-block-progression-dimension title="section 1.4.2.1">1.4.2.1</a><li>over-edge, <a href=#over-edge title="section 2.2">2.2</a><li>scaled-baseline-table, <a href=#scaled-baseline-table title="section 2.4">2.4</a><li>shift-direction, <a href=#shift-direction title="section 2.2">2.2</a><li>stack-height, <a href=#stack-height title="section 1.4.2.1">1.4.2.1</a><li>text-align, <a href=#text-align title="section 4">4</a><li>text-bottom, <a href=#text-bottom title="section 2.2">2.2</a><li>text-height, <a href=#propdef-text-height title="section 1.3">1.3</a><li>text-over-edge, <a href=#text-over-edge title="section 2.2">2.2</a><li>text-script, <a href=#script title="section 4">4</a><li>text-top, <a href=#text-top title="section 2.2">2.2</a><li>text-under-edge, <a href=#text-under-edge title="section 2.2">2.2</a><li>top, <a href=#top title="section 2.2">2.2</a><li>top of the text, <a href=#top-of title="section 1.4.2">1.4.2</a><li>under-edge, <a href=#under-edge title="section 2.2">2.2</a><li>vertical-align, <a href=#propdef-vertical-align title="section 2.8">2.8</a><li>writing-mode, <a href=#writing-mode title="section 4">4</a></ul><h2 class="no-num heading settled" id=property-index><span class=content>Property Index</span><a class=self-link href=#property-index></a></h2><table class="proptable data"><thead><tr><th scope=col>Name<th scope=col>Value<th scope=col>Initial<th scope=col>Applies to<th scope=col>Inh.<th scope=col>%ages<th scope=col>Media<th scope=col>Animatable<th scope=col>Computed value<tbody><tr><th scope=row><a class=css data-link-type=property href=#propdef-text-height title=text-height>text-height</a><td>auto | font-size | text-size | max-size | &lt;number&gt;<td>auto<td>inline elements and parents of element with display:ruby-text<td>yes<td>N/A<td>visual<td><td>specified value (except for initial and inherit)<tr><th scope=row><a class=css data-link-type=property href=#propdef-line-height title=line-height>line-height</a><td>normal |
        &lt;number&gt; |
        &lt;length&gt; |
        &lt;percentage&gt; | none<td>normal<td>all elements<td>yes<td>refer to the font size of the element itself<td>visual<td><td>see prose<tr><th scope=row><a class=css data-link-type=property href=#propdef-line-box-contain title=line-box-contain>line-box-contain</a><td>[ block || inline || font || glyphs || replaced || inline-box ] | none |
inherit | initial<td>block inline replaced<td>block-level elements<td>yes<td>N/A<td>visual<td><td>specified value (except for inherit and initial)<tr><th scope=row><a class=css data-link-type=property href=#propdef-line-stacking-strategy title=line-stacking-strategy>line-stacking-strategy</a><td>inline-line-height | block-line-height | max-height | grid-height<td>inline-line-height<td>block-level elements<td>yes<td>N/A<td>visual<td><td>specified value (except for initial and inherit)<tr><th scope=row><a class=css data-link-type=property href=#propdef-line-stacking-ruby title=line-stacking-ruby>line-stacking-ruby</a><td>exclude-ruby | include-ruby<td>exclude-ruby<td>block-level elements<td>yes<td>N/A<td>visual<td><td>specified value (except for initial and inherit)<tr><th scope=row><a class=css data-link-type=property href=#propdef-line-stacking-shift title=line-stacking-shift>line-stacking-shift</a><td>consider-shifts | disregard-shifts<td>consider-shifts<td>block-level elements<td>yes<td>N/A<td>visual<td><td>specified value (except for initial and inherit)<tr><th scope=row><a class=css data-link-type=property href=#propdef-line-stacking title=line-stacking>line-stacking</a><td>&lt;line-stacking-strategy&gt; || &lt;line-stacking-ruby&gt; || 
&lt;line-stacking-shift&gt;<td>see individual properties<td>block-level elements<td>yes<td>N/A<td>visual<td><td>see individual properties<tr><th scope=row><a class=css data-link-type=property href=#propdef-dominant-baseline title=dominant-baseline>dominant-baseline</a><td>auto | use-script | no-change | reset-size | alphabetic | hanging |
ideographic |
mathematical | central | middle | text-under-edge | text-over-edge<td>auto<td>inline-level and inline-block elements (but see prose)<td>no<td>N/A<td>visual<td><td>specified value (except for initial and inherit)<tr><th scope=row><a class=css data-link-type=property href=#propdef-alignment-baseline title=alignment-baseline>alignment-baseline</a><td>baseline | use-script | over-edge | text-over-edge | under-edge |
text-under-edge |
central | middle | ideographic | alphabetic | hanging | mathematical<td>baseline<td>inline-level elements<td>no<td>N/A<td>visual<td><td>specified value (except for initial and inherit)<tr><th scope=row><a class=css data-link-type=property href=#propdef-alignment-adjust title=alignment-adjust>alignment-adjust</a><td>auto | baseline | over-edge | text-over-edge | middle | central |
under-edge | text-under-edge | ideographic | alphabetic | hanging |
mathematical | &lt;percentage&gt; | &lt;length&gt;<td>auto<td>inline-level elements<td>no<td>refers to the line-height of the element<td>visual<td><td>see text<tr><th scope=row><a class=css data-link-type=property href=#propdef-baseline-shift title=baseline-shift>baseline-shift</a><td>baseline | sub | super | &lt;percentage&gt; | &lt;length&gt;<td>baseline<td>inline-level elements<td>no<td>refers to the line-height of the parent element<td>visual<td><td>see text<tr><th scope=row><a class=css data-link-type=property href=#propdef-vertical-align title=vertical-align>vertical-align</a><td>auto | baseline | sub | super | top | text-top | central |
middle | bottom | text-bottom | &lt;percentage&gt; | &lt;length&gt;<td>not defined for shorthand properties<td>inline-level and table-cell elements<td>no<td>refers to the line-height of the element itself<td>visual<td><td>see individual properties<tr><th scope=row><a class=css data-link-type=property href=#propdef-inline-box-align title=inline-box-align>inline-box-align</a><td>initial | last | &lt;integer&gt;<td>last<td>inline-block-level elements<td>no<td>N/A<td>visual<td><td>specified value (except for initial and inherit)<tr><th scope=row><a class=css data-link-type=property href=#propdef-initial-letter title=initial-letter>initial-letter</a><td>normal | [&lt;integer&gt; &lt;integer&gt;?]<td>normal<td>::first-letter pseudo elements and inline level first child of a block container<td>no<td>N/A<td>visual<td>no<td>as described<tr><th scope=row><a class=css data-link-type=property href=#propdef-initial-letter-align title=initial-letter-align>initial-letter-align</a><td>[ auto | alphabetic | hanging | ideographic ]<td>auto<td>::first-letter pseudo elements and inline level first child of a block container<td>no<td>N/A<td>visual<td>no<td>???</table><h2 class="no-num heading settled" id=issues-index><span class=content>Issues Index</span><a class=self-link href=#issues-index></a></h2><div style=counter-reset:issue><div class=issue>[LDB: I don’t understand this paragraph.]<a href=#issue-9934f9eb> ↵ </a></div><div class=issue>This definition should be briefer, and should
  refer to the next section.<a href=#issue-5e1feaa0> ↵ </a></div><div class=issue>[LDB: The second part of this sentence is a significant change from CSS2, and also doesn’t mauke senes in the context of the sentence.]<a href=#issue-508c6175> ↵ </a></div><div class=issue>[LDB: This isn’t quite right.  What about zwnj,
etc.?<a href=#issue-4b06b910> ↵ </a></div><div class=issue>Should this split into inline-border and
inline-margin?<a href=#issue-42900629> ↵ </a></div><div class=issue>[This is arbitrary. Does anyone have better
ideas?]<a href=#issue-25a5cd45> ↵ </a></div><div class=issue>Concerns: * How does this work with the cascade? * What
about determining the visual size of inline boxes?

<a href=#issue-f68e4558> ↵ </a></div><div class=issue>[1] I believe the differences are restricted to the first
line of LI elements, the last line of LI, DD, and DT elements, and issues
concerning whitespace around images. [DB]

<a href=#issue-588d4c54> ↵ </a></div><div class=issue>[The value <span class=css>replaced</span> is not strictly needed. <span class=css>Inline-box</span> also
does the job, except that it is not automatically restricted to replaced
elements.]<a href=#issue-90160bb9> ↵ </a></div><div class=issue>Input from Japanese typographers would be very helpful.<a href=#issue-91340f65> ↵ </a></div><div class=issue>This figure is probably incorrect.<a href=#issue-ddff256b> ↵ </a></div><div class=issue>Add content describing constraint that the block container have a baseline grid (or fixed line-height?).<a href=#issue-f229a1d3> ↵ </a></div><div class=issue>Input from those knowledgeable about non-Western  typographic traditions would be very helpful in describing the appropriate alignments. More values may be required for this property.<a href=#issue-209367a3> ↵ </a></div><div class=issue>Define appropriate behavior for non-western scripts. The editors would appreciate any examples of drop initials in such scripts.<a href=#issue-79d884e2> ↵ </a></div></div>